
343,Zilin Zhang,kylinchang@fb.com,"""Bump version 16.0.1

Summary: $title

Reviewed By: wx0165927473

Differential Revision: D44315543

fbshipit-source-id: 6ca6e4f7be87d2af3664eae4b729c2e729bf3938""",0.2,None,changed

344,Saranya Vidyananthan,saranyavidy@fb.com,"""Update Default Status for Feature

Summary: internal Fix string change, and update default status

Reviewed By: prafullkumargupta

Differential Revision: D44264544

fbshipit-source-id: b323b2a044f100aa2df1d421aff636f5cc370033""",0.7,None,changed

345,Saranya Vidyananthan,saranyavidy@fb.com,"""Update Feature Manager

Reviewed By: prafullkumargupta, OmarB97

Differential Revision: D44263590

fbshipit-source-id: 4c702dcfb72f4a928c892b800ce5266f66988c5c""",0.7,None,changed

346,Zilin Zhang,kylinchang@fb.com,"""Fix referrer bug

Summary:
Fix issue https://github.com/facebook/facebook-android-sdk/issues/1039 , we'll need to end the connection to avoid leaks and performance problems.

https://developer.android.com/google/play/installreferrer/library#closing-connection

Reviewed By: wx0165927473

Differential Revision: D44238528

fbshipit-source-id: 868b108305c2aa964c91c2456309e45fd06e0070""",0.7,None,fixed

347,Zilin Zhang,kylinchang@fb.com,"""Add Google API Check

Summary:
In order to fix the issue https://github.com/facebook/facebook-android-sdk/issues/789 ,
There exists chances that the GoogleAdServiceConneciton keeps waiting for unexisting GoogleAdServer and thus leads to ANR issue. We'll need to add the Google API check to avoid such scenario.

Reviewed By: wx0165927473

Differential Revision: D44232501

fbshipit-source-id: 5e709e5a50ea73a5e4ec46975e9c031139f4d3fb""",0.7,None,added

348,Caroline Li,carolineli@fb.com,"""Bump version to 16.0

Summary: as title

Reviewed By: mingcaozhang

Differential Revision: D43169515

fbshipit-source-id: f7c1a4ad514828c8927b31d0c73e9859f51cbffc""",0.2,None,changed

349,Sachin Tyagi,tyagisachin@fb.com,"""Supporting meta.com also for crash report part 2

Summary: I previous screen, I missed the lint error.

Reviewed By: OmarB97

Differential Revision: D41810759

fbshipit-source-id: 2209fa443e28421f65ad94d897de869a3ceedca5""",0.7,None,changed

350,Ming Zhang,mingcaozhang@fb.com,"""Bump version 15.2.0

Summary: $title

Reviewed By: samodom

Differential Revision: D41968322

fbshipit-source-id: 67508895dfa33197418ad38ea9135c68f46503a8""",0.2,None,changed

351,Ming Zhang,mingcaozhang@fb.com,"""Revert ""Bump minSdkVersion to 21""

Summary: This reverts commit b0200a21

Reviewed By: joesus

Differential Revision: D41882076

fbshipit-source-id: 00fd1293badc182f0b050a62948c425b2978932e""",0.2,None,changed

352,Sachin Tyagi,tyagisachin@fb.com,"""Supporting meta.com also for crash report

Summary: Supporting meta.com as it is supporting only com.facebook right now

Reviewed By: OmarB97, KylinChang

Differential Revision: D41800310

fbshipit-source-id: f699082ee9c27c64e4511007f03406d763317507""",0.7,None,changed

353,Jawwad Ahmad,jawwad@fb.com,"""Convert MessengerUtils and MessengerUtilsTest to Kotlin

Summary: Converting classes `MessengerUtils` and `MessengerUtilsTest` in scope of the effort of migrating the codebase to Kotlin.

Reviewed By: mingcaozhang

Differential Revision: D41135506

fbshipit-source-id: 9e60bd268540fa833456b64c3e775bab60de24d8""",0.7,None,changed

354,Joe Susnick,joesusnick@fb.com,"""Fix device dialog layout

Summary: The fragment had the device layout hardcoded to 600dp which probably makes some kind of sense if you assume itâ€™s running on a tv or tablet (although even then it may be way too small depending on the screen size). Better to just have it match the bounds of the parent view with a few dps of padding.

Reviewed By: jawwad

Differential Revision: D41270275

fbshipit-source-id: c88133c1ff02e56a9294a1f81b304b789b6b538f""",0.7,None,fixed

355,Saranya Vidyananthan,saranyavidy@fb.com,"""Add Features to Feature Manager

Reviewed By: OmarB97

Differential Revision: D41136067

fbshipit-source-id: 2737e2d71c91d2f0d2099b6aaacbe275f9803974""",0.7,None,added

356,Mercy Bickell,mercycat@fb.com,"""Convert Messenger.java to Kotlin

Summary: Convert `Messenger.java` to Kotlin as part of the efforts to convert the Facebook Android SDK to Kotlin

Reviewed By: jawwad

Differential Revision: D41146727

fbshipit-source-id: 38bc8d64254b34229c84a4e61a9ac70bd013be43""",0.7,None,changed

357,Alex Chychkan,chychkan@fb.com,"""Convert MockitoConfiguration.java to Kotlin

Summary: Converting class MockitoConfiguration in scope of the effort of migrating the codebase to Kotlin.

Reviewed By: jawwad

Differential Revision: D41130027

fbshipit-source-id: aa30c8bc18566f44661e02a9bafde9895ed54169""",0.7,None,changed

358,Mercy Bickell,mercycat@fb.com,"""Convert ShareToMessengerParams.java to Kotlin

Summary:
Convert file to Kotlin as part of ongoing Facebook Android SDK Kotlin conversion efforts.
- Note that as in D40957237 (https://github.com/facebook/facebook-android-sdk/commit/72e7c478e96f2e57a2ff5dab34949c29b0f91c9d), some instance variables now have to be accessed with getters. Updated the changelog accordingly.

Reviewed By: jawwad

Differential Revision: D41136500

fbshipit-source-id: a00d09888d4ffae6653db4e8d9568dcfe51ebc87""",0.7,None,changed

359,Alex Chychkan,chychkan@fb.com,"""Convert DeviceLoginManager.java to Kotlin

Summary:
Converting `DeviceLoginManager` class in scope the effort of migrating the codebase from Java to Kotlin.

The `DeviceLoginManager` is the last Java file in the `facebook-login` module, so this DIFF concludes the migration for the module.

Reviewed By: bnalls33

Differential Revision: D41102653

fbshipit-source-id: b5bcbec3a55a7400ca8f90c7ec47237d15a7f67f""",0.7,None,changed

360,Alex Chychkan,chychkan@fb.com,"""Fix formatting in ProfilePictureView, ToolTipPopup and MessengerThreadParams

Summary: In D40993406 (https://github.com/facebook/facebook-android-sdk/commit/79b6f95018e7e2dfeab1a11bf05589e7d4027e66), D40967446 (https://github.com/facebook/facebook-android-sdk/commit/f80c1b76dcc7c184469266c1e84de748b01391c0) and D40957237 (https://github.com/facebook/facebook-android-sdk/commit/72e7c478e96f2e57a2ff5dab34949c29b0f91c9d) I converted these classes from Java to Kotlin, but I didn't realize that formatting settings in my IDE were different from the rest of the codebase. As a result all the indentations in these files are messed up. Fixing them here after installing `ktfmt` plugin and re-formatting the files.

Reviewed By: jawwad

Differential Revision: D41087858

fbshipit-source-id: 510f1ba319663a29f2b982ba8accf051ad639703""",0.7,None,fixed

361,Alex Chychkan,chychkan@fb.com,"""Convert LoginButton.java and DeviceLoginButton.java to Kotlin

Summary:
Converting the files in scope of the effort migrating the codebase from Java to Kotlin.
Converting both files in the same commit as `DeviceLoginButton` extends `LoginButton` and is a small and simple class.

Also, I realized that my IDE was configured to use 4 spaces indentation and all existing files use 2 spaces, so I'm also re-formatting the files that I changed in my recent commits.

Reviewed By: mingcaozhang

Differential Revision: D41032469

fbshipit-source-id: f7e4fa85497559933b36c6b1bce03b9429a15dad""",0.7,None,changed

362,Alex Chychkan,chychkan@fb.com,"""Convert ProfilePictureView.java to Kotlin

Summary: Converting the file in scope of the effort of migrating the codebase from Java to Kotlin.

Reviewed By: jawwad

Differential Revision: D40993406

fbshipit-source-id: 57a2a42292e2f74682b95f835885f1561c7edfa5""",0.7,None,changed

363,Alex Chychkan,chychkan@fb.com,"""Convert ToolTipPopup.java to Kotlin

Summary: Converting the file `ToolTipPopup.java` to Kotlin in scope of the effort to migrate the codebase from Java to Kotlin.

Reviewed By: mingcaozhang

Differential Revision: D40967446

fbshipit-source-id: 6cfa43c7c1d500d925198f06eb659e2c2c4bba39""",0.7,None,changed

364,Jawwad Ahmad,jawwad@fb.com,"""Remove the deprecated WEB_VIEW_ONLY login behavior since it no longer works

Summary:
The `WEB_VIEW_ONLY` setting does not work and according to this article stopped working sometime last year
https://developers.facebook.com/blog/post/2021/06/28/deprecating-support-fb-login-authentication-android-embedded-browsers/

Reviewed By: joesus

Differential Revision: D40963098

fbshipit-source-id: cf1ba3ec8465dcfeb722a2209a57991fb80711d4""",0.7,None,changed

365,Jawwad Ahmad,jawwad@fb.com,"""Disable test causing frequent failures on GitHub Actions

Summary:
On GitHub this test fails more often than it passes. Checked 3 previous failures and all had the same failure.

```
com.facebook.internal.ImageDownloaderTest > test remove before and after test adding request FAILED
    java.lang.AssertionError: expected:<1> but was:<0>
        at org.junit.Assert.fail(Assert.java:89)
        at org.junit.Assert.failNotEquals(Assert.java:835)
        at org.junit.Assert.assertEquals(Assert.java:120)
        at org.junit.Assert.assertEquals(Assert.java:146)
        at com.facebook.internal.ImageDownloaderTest.test remove before and after test adding request(ImageDownloaderTest.kt:76)
```

Reviewed By: joesus

Differential Revision: D40966876

fbshipit-source-id: c57eda4c4740dd62b342981807837e9898bba1aa""",0.7,None,changed

366,Alex Chychkan,chychkan@fb.com,"""Convert MessengerThreadParams.java to Kotlin

Summary: Converting the file `MessengerThreadParams.java` to Kotlin in scope of the effort to migrate the codebase from Java to Kotlin.

Reviewed By: jawwad

Differential Revision: D40957237

fbshipit-source-id: 70c376e1fb04aa380287ce85ab1486b671eb4a94""",0.7,None,changed

367,Ming Zhang,mingcaozhang@fb.com,"""Bump minSdkVersion to 21

Summary: Raises the minimum API level to 21

Reviewed By: samodom

Differential Revision: D40643988

fbshipit-source-id: b0200a210ff9687747ddb2367b99f1348b0448fa""",0.2,None,changed

368,Ming Zhang,mingcaozhang@fb.com,"""Bump version to 15.1.0

Summary: $title

Reviewed By: samodom

Differential Revision: D40643885

fbshipit-source-id: 33d5b66cc82a7210329585eedcf2b168243a1e0b""",0.2,None,changed

369,Ming Zhang,mingcaozhang@fb.com,"""Revert ""Bump minSdkVersion to 21""

Summary: This reverts commit 0f133eaebac06959b1efb4a861415f5812af387a.

Reviewed By: samodom

Differential Revision: D40643887

fbshipit-source-id: 348fa99ca10360df4f301431bf6542ecd37ed7d0""",0.2,None,changed

370,Jared Warren,jarwarren@fb.com,"""Bump minSdkVersion to 21

Summary: Raises the minimum API level to 21

Reviewed By: mingcaozhang

Differential Revision: D40319534

fbshipit-source-id: 0f133eaebac06959b1efb4a861415f5812af387a""",0.2,None,changed

371,Ming Zhang,mingcaozhang@fb.com,"""Migrate GamingMediaUploader to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40118962

fbshipit-source-id: 15bea7d905a84f2fe4c6809d267d7c0eabf161ec""",0.7,None,changed

372,Parth Menon,parthmenon@fb.com,"""Convert HelloFacebookBroadcastReceiver.java to Kotlin

Differential Revision: D40548641

fbshipit-source-id: 82dadb6bfeff4aa4f03acbb7f9913be30a2a5325""",0.7,None,changed

373,Saranya Vidyananthan,saranyavidy@fb.com,"""Updating Feature Manager

Reviewed By: OmarB97

Differential Revision: D40529326

fbshipit-source-id: 8f83da9fbc70b0383a52b7fef5b994ff6b73d5db""",0.7,None,added

374,Saranya Vidyananthan,saranyavidy@fb.com,"""Adding Meta IAP and Meta Payments Features

Reviewed By: OmarB97

Differential Revision: D40512271

fbshipit-source-id: 03d8b5dc1a7c470aa2da770e0dbf40a9e8a8ca8d""",0.7,None,changed

375,Ming Zhang,mingcaozhang@fb.com,"""Bump version to 15.0.2

Summary: $title

Reviewed By: samodom

Differential Revision: D40492222

fbshipit-source-id: 8465c068a3f5a2ade446de5147a41a8db681c66d""",0.2,None,changed

376,Ming Zhang,mingcaozhang@fb.com,"""Hotfix test dependencies being marked as implementation

Summary: Somehow this unintended change slipped through. Explains why some 3P devs are reporting that their APK size has increased by a lot.

Reviewed By: samodom

Differential Revision: D40491409

fbshipit-source-id: c9d24fcf55dabb16f1ce2fd5156fd7e086a2473c""",0.2,None,changed

377,Jawwad Ahmad,jawwad@fb.com,"""Convert a few smaller/placeholder files to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40125158

fbshipit-source-id: 58e7d605b63f24d0e8c35abb046d0ebae2edf9ae""",0.7,None,changed

378,Jawwad Ahmad,jawwad@fb.com,"""Update README to remove the word open-source from the first sentence. Fixes #1116.

Reviewed By: mingcaozhang

Differential Revision: D40251329

fbshipit-source-id: 61f44a9fcf0b362577f0e4f36902043c149168ac""",0.7,None,changed

379,Jawwad Ahmad,jawwad@fb.com,"""Convert PublishPostCallback.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40124792

fbshipit-source-id: af53348fdd3ffd210d235fb71ff00e77c1a6a104""",0.7,None,changed

380,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextSwitchDialog to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40113396

fbshipit-source-id: 7dcacca3c121a2d311e6390fc0358d8bd07f25ab""",0.7,None,changed

381,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextCreateDialog to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40110650

fbshipit-source-id: 6642d5bff3f755c4de3e4de32c43095cdcc6951b""",0.7,None,changed

382,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextChooseDialog to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40080980

fbshipit-source-id: dd1cf5758bbd6c644e2846410cef9dac2fcbf8c0""",0.7,None,changed

383,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextSwitchContent to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40075224

fbshipit-source-id: a235e978049878b32c2c761d204cf642395a00d9""",0.7,None,changed

384,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextCreateContent to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40032248

fbshipit-source-id: 33dfa68445758b40e4d0653103abe8b0f53f1759""",0.7,None,changed

385,Ming Zhang,mingcaozhang@fb.com,"""Migrate ContextChooseContent to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D40029959

fbshipit-source-id: 48cc06387797e3b1ad46b2680a27ccd045c5326f""",0.7,None,changed

386,Jawwad Ahmad,jawwad@fb.com,"""Remove unused class AppInviteDialogFeature.java

Summary: Didn't find this used anywhere and its also in internal so its not public API

Reviewed By: panavenue

Differential Revision: D40125728

fbshipit-source-id: b843c4a167f8c2647512501d2d5811823d2e40cd""",0.7,None,removed

387,Jared Warren,jarwarren@fb.com,"""Prevent attempting to parse a null string

Summary: Passing a null string to` DateFormatter.format(isoDate:)` would cause an exception. DateFormatter now requires that the string not be null.

Reviewed By: joesus

Differential Revision: D39639775

fbshipit-source-id: 628ab7773ac75f9e71016309cfd8899e54b2bc13""",0.7,None,changed

388,Jared Warren,jarwarren@fb.com,"""Add TournamentJoinDialog

Summary: Add the TournamentJoinDialog

Reviewed By: joesus

Differential Revision: D39639776

fbshipit-source-id: 1d9d467f4436482a81491b835826209942082e24""",0.7,None,added

389,Jawwad Ahmad,jawwad@fb.com,"""Convert JsonUtil.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40110620

fbshipit-source-id: 55e893402a549765784473b6e582c8055a2aec95""",0.7,None,changed

390,Jawwad Ahmad,jawwad@fb.com,"""Convert JsonUtilTest.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40110619

fbshipit-source-id: 5c4ac49654e4b921ab71ca3976c306ba33073e25""",0.7,None,changed

391,Jawwad Ahmad,jawwad@fb.com,"""Convert PowerMockIntegrationTest.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40076865

fbshipit-source-id: ed0c361dc1feae1bbf6002775fdd898139b74a0d""",0.7,None,changed

392,Jawwad Ahmad,jawwad@fb.com,"""Convert TestUtils.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40076515

fbshipit-source-id: 1fcaa4c94134e289b5822913cd91130802f46a61""",0.7,None,changed

393,Jawwad Ahmad,jawwad@fb.com,"""Remove unused methods from TestUtils.java

Reviewed By: mingcaozhang

Differential Revision: D40076516

fbshipit-source-id: 7a96b95f341842019e273057f7db681153e0ea95""",0.7,None,removed

394,Jawwad Ahmad,jawwad@fb.com,"""Convert ErrorClassificationTest.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40076270

fbshipit-source-id: 74ee2c4a631e8299fdb9c5960a921dafa55d62c9""",0.7,None,changed

395,Jawwad Ahmad,jawwad@fb.com,"""Convert PermissionsActivity.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40075368

fbshipit-source-id: fa0b552005bb1cb741f051ac4759b78c5c711789""",0.7,None,changed

396,Jawwad Ahmad,jawwad@fb.com,"""Convert All.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D40077953

fbshipit-source-id: ef5126e22ba9ba52140fbdd20b3d9d2f84452661""",0.7,None,changed

397,Jawwad Ahmad,jawwad@fb.com,"""Convert MainActivity.java to Kotlin

Summary: Ran the app. MainActivity showed up correctly and clicked on buttons to ensure that they continued to work

Reviewed By: joesus

Differential Revision: D40073456

fbshipit-source-id: c287ed2f104bd13517114fd9a2d2b365d46aceec""",0.7,None,changed

398,Jawwad Ahmad,jawwad@fb.com,"""Convert PostsRequest.java to Kotlin

Reviewed By: joesus

Differential Revision: D40073148

fbshipit-source-id: 882ee73bc20c3c3a3b6edc4c50a7739783519c9b""",0.7,None,changed

399,Jawwad Ahmad,jawwad@fb.com,"""Convert ExampleInstrumentedTest.java to Kotlin

Summary: Copied over the ExampleInstrumentedTest.kt from a new kotlin project

Reviewed By: joesus

Differential Revision: D40076048

fbshipit-source-id: f39e834c140ab52ca3aff8ae5d46a37915a6b29a""",0.7,None,added

400,Jawwad Ahmad,jawwad@fb.com,"""Convert ExampleUnitTest.java to Kotlin

Reviewed By: joesus

Differential Revision: D40075626

fbshipit-source-id: 6fa00839f17104632cea78a2039b6891562be630""",0.7,None,changed

401,Ming Zhang,mingcaozhang@fb.com,"""Fix hb4a release build for Android 12

Summary:
Broke the hb4a release build in D39939663 (https://github.com/facebook/facebook-android-sdk/commit/b391f0f3312386a416b425e6102ba2d038da21e9) when updating leakcanary (replaced the no-op dep by the regular one).

No-op is not required anymore according to https://square.github.io/leakcanary/upgrading-to-leakcanary-2.0/

Reviewed By: jawwad

Differential Revision: D40062737

fbshipit-source-id: a2593a449a68a1787aeb5b129f0bea0943a72ac1""",0.7,None,fixed

402,Jawwad Ahmad,jawwad@fb.com,"""Convert Util.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39973977

fbshipit-source-id: 917a690fb51aa6c24d2668f36f9236b3b7987c6c""",0.7,None,changed

403,Jawwad Ahmad,jawwad@fb.com,"""Convert FacebookLoginActivity.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39973826

fbshipit-source-id: dc1243be78259d9f6b321be9f04a45d264e0d5cf""",0.7,None,changed

404,Jawwad Ahmad,jawwad@fb.com,"""Convert PostAdapter.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39942804

fbshipit-source-id: 47139fe589c2da5702c920a58b3c1afb7005d149""",0.7,None,changed

405,Jawwad Ahmad,jawwad@fb.com,"""Convert Post.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39942805

fbshipit-source-id: b752f1b7707783c759293b99372690fa0ffeb13a""",0.7,None,changed

406,Ming Zhang,mingcaozhang@fb.com,"""Add KotlinSampleApp to settings.gradle

Summary: KotlinSampleApp should be used to test that the SDK will still work with external apps, so we want to make sure we can test against it before a release.

Reviewed By: jawwad

Differential Revision: D39937647

fbshipit-source-id: 34fb663f5c0fba18dae2a04dfbe58b2fef6fd791""",0.7,None,added

407,Ming Zhang,mingcaozhang@fb.com,"""Set target SDK to 31

Summary:
Updating the target SDK to Android 12 as per Google Play's requirements.

https://support.google.com/googleplay/android-developer/answer/11926878

Android 12 requires any component declaring an intent-filter to explicitly declare the `android:exported` attribute, so we have to update `AndroidManifest.xml` for some test/sample apps, and upgrade leakcanary to `2.9.1` which includes a similar fix.

Reviewed By: jawwad

Differential Revision: D39939663

fbshipit-source-id: e2ccd38b1d8cf01a22ccb90986c041e189d7a215""",0.7,None,changed

408,Ming Zhang,mingcaozhang@fb.com,"""Bump version to 15.0.1

Summary: Bump version for hotfix fixing android 12 compatibility.

Reviewed By: jawwad

Differential Revision: D39933234

fbshipit-source-id: 026595928083f015c4d11ba7594004414a4b61ef""",0.2,None,changed

409,Ming Zhang,mingcaozhang@fb.com,"""Hotfix for Android 12 support

Summary:
Bug reported on github https://github.com/facebook/facebook-android-sdk/issues/1114.

This is a common issue with the Android 12 rollout, notably `androidx.test:core` defines test activities with intent-filters without specifying an explicit `android:exported` value. Version `1.4.0` fixes this issue.

Reviewed By: jawwad

Differential Revision: D39930204

fbshipit-source-id: 9edb88541f6f924b0edc8cf334ee9cebb62545be""",0.7,None,fixed

410,Jawwad Ahmad,jawwad@fb.com,"""Convert GetPostsCallback.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39850337

fbshipit-source-id: ceda00b53290c61bcafb0998601cc9aa585b868c""",0.7,None,changed

411,Jawwad Ahmad,jawwad@fb.com,"""Convert PostFeedActivity.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39850316

fbshipit-source-id: c0f2d4789626058bc0df6e745be0ca176f99d9f7""",0.7,None,changed

412,Jawwad Ahmad,jawwad@fb.com,"""Convert PermissionCallback.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39825962

fbshipit-source-id: 5384c2d662f12c1690c408f953394b57d631488d""",0.7,None,changed

413,Jawwad Ahmad,jawwad@fb.com,"""Convert PermissionRequest.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39825866

fbshipit-source-id: 2e52cdaa0872a74a96a891b1cc191a6d86f4147d""",0.7,None,changed

414,Jawwad Ahmad,jawwad@fb.com,"""Convert UserRequest.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39774106

fbshipit-source-id: 0917e8d9fdcf1848990455fcf752fde88a7f8c87""",0.7,None,changed

415,Jawwad Ahmad,jawwad@fb.com,"""One time formatting of all kotlin files in the repository using ktfmt

Summary: Ran ktfmt with ktfmt-0.40-jar-with-dependencies.jar by following the directions on https://facebookincubator.github.io/ktfmt/ (under the ""Command line"" tab)

Reviewed By: mingcaozhang

Differential Revision: D39827182

fbshipit-source-id: 94daa52854aee2311f675bdef2481ff259beb4a3""",0.2,None,changed

416,Ming Zhang,mingcaozhang@fb.com,"""Convert HackbookLoginManager to Kotlin

Summary: $title

Reviewed By: joesus

Differential Revision: D39745055

fbshipit-source-id: e317ee861fbc108475a23dfccdc68b0a1ef8e06a""",0.7,None,changed

417,Ming Zhang,mingcaozhang@fb.com,"""Convert HackbookLoginClient to Kotlin

Summary: $title

Reviewed By: jawwad

Differential Revision: D39742260

fbshipit-source-id: 54f43bdfd9b06a03f8361a8c80e5d69b3b1464d6""",0.7,None,changed

418,Jawwad Ahmad,jawwad@fb.com,"""Convert GetUserCallback.java to Kotlin

Summary: Also refactored the StringBuilder code a bit in jsonToUser and inspected the permissions variable to ensure that it was the same before and after the change

Reviewed By: mingcaozhang

Differential Revision: D39773817

fbshipit-source-id: 9832e796514499b7b4498d31bd1ed6f94f6537aa""",0.7,None,changed

419,Jawwad Ahmad,jawwad@fb.com,"""Convert User.java to Kotlin

Summary: Made the email nullable since there is a check in ProfileActivity.kt that shows that the email may be null if the email permission is not grated.

Reviewed By: mingcaozhang

Differential Revision: D39772811

fbshipit-source-id: 7df22f29ff1df797699759445ef113f83f455743""",0.7,None,changed

420,Jawwad Ahmad,jawwad@fb.com,"""Convert FBLoginSampleApp.java to Kotlin

Reviewed By: defHLT

Differential Revision: D39771982

fbshipit-source-id: 8eae5a6622c3af2c9b3c15478116a6fee0ae20ed""",0.7,None,changed

421,Jawwad Ahmad,jawwad@fb.com,"""Convert ProfileActivity.java to Kotlin

Reviewed By: mingcaozhang

Differential Revision: D39771286

fbshipit-source-id: 8b34cc4d550a7b9adc315a1446d22a2207bae7cc""",0.7,None,changed

422,Jawwad Ahmad,jawwad@fb.com,"""Update all open source copyright headers to the correct format

Summary:
- Updated to the new shorter open source headers that reference Meta instead of Facebook
- Made most fixes with a series of shell commands that I added to a new scripts/fix_copyright_headers.sh script
- Checked that no older headers remained with `ack -l 'Copyright.*Facebook'`

Reviewed By: mingcaozhang

Differential Revision: D39750626

fbshipit-source-id: 797ce9b0310b07f809fcb9cdd15d900a23f7cc69""",0.7,None,changed

423,Ming Zhang,mingcaozhang@fb.com,"""Fix failing badge on README

Summary: Badge on README showed failing because the github workflow name changed, so the previous badge was no longer valid.

Reviewed By: joesus

Differential Revision: D39627917

fbshipit-source-id: 2d632c89f18cbca7a448cbafcd70cd91c5f32a2d""",0.7,None,fixed

424,Ming Zhang,mingcaozhang@fb.com,"""Bump version to 15.0.0

Summary: $title

Reviewed By: joesus

Differential Revision: D39625406

fbshipit-source-id: 5501a7605749084296da612dc766f26ddba3ba4d""",0.2,None,changed

425,Ming Zhang,mingcaozhang@fb.com,"""Update mockito-kotlin version

Summary: D38673457 (https://github.com/facebook/facebook-android-sdk/commit/66df49edeff1bd78115ac0bda5161a06efe7cd0e) updated the mockito-kotlin version being used frrom 2.2.0 to 2.2.11 and includes a package rename. We cherry-picked some commits that were reverted for the git migration which refactored the way we manage dependencies so the change was missed.

Reviewed By: joesus

Differential Revision: D39284217

fbshipit-source-id: cf9095e6ded73230c257211fca9e7f0c4d67ea15""",0.2,None,changed

426,Ming Zhang,mingcaozhang@fb.com,"""Disable testCoverage in release build type

Summary:
`testCoverageEnabled = true` was in the release build type, which causes jacoco to init when running the release apk. We previously put `output=none` in `jacoco-agent.properties` under `src/debug/resources` which corresponds to the debug build.

See for more details: https://github.com/jacoco/jacoco/issues/968#issuecomment-672996619

Reviewed By: joesus

Differential Revision: D39027728

fbshipit-source-id: 66d9543e48435d1efe36a97b7a01675aea0a5470""",0.7,None,changed

427,Ming Zhang,mingcaozhang@fb.com,"""Add jacoco-agent.properties to facebook-gamingservices

Summary:
Hackbook apk failing on launch because of missing jacoco.exec. Jacoco is pulled in by gaming-services, so we can apply the below fix in that module.

See: https://github.com/jacoco/jacoco/issues/968

Reviewed By: joesus

Differential Revision: D38993822

fbshipit-source-id: 2fb7e7d3a08bd1088ad4a5fe6454bff5beb7d813""",0.7,None,added

428,Ming Zhang,mingcaozhang@fb.com,"""Add jacoco.exec to gitignore

Summary: Running `./gradlew build` on modules that use jacoco also generates a `jacoco.exec` file that we don't want to check in to git.

Reviewed By: joesus

Differential Revision: D38979512

fbshipit-source-id: 1e5f85ba73961234aba45696771c1520e2cfc56e""",0.7,None,added

429,Ming Zhang,mingcaozhang@fb.com,"""Fix test sourceSets in gradle files

Summary: Mistakenly removed some sourceSets in the previous diffs in the stack. which makes it so that Android Studio no longer marks the `src/test/kotlin` files are test source files. Re-add the sources to have IDE support.

Reviewed By: joesus

Differential Revision: D38909312

fbshipit-source-id: bac4ac60519b9f25efceadc0aa4db98e770bac24""",0.7,None,fixed

430,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-testutil: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38873369

fbshipit-source-id: 16197b086120b9aeec410974f803d89a45a73a05""",0.7,None,changed

431,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-share: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38873150

fbshipit-source-id: f2155d9fd715332677e1f4e0c4c459a2b24dfb7e""",0.7,None,changed

432,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-messenger: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38872932

fbshipit-source-id: 3cf8c4c6ff4179989197cae3c630aa37b9d1c150""",0.7,None,changed

433,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-login: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38867979

fbshipit-source-id: 6c28f13105b1aede6cff9634adc6515f1d180695""",0.7,None,changed

434,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-gamingservices: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38867270

fbshipit-source-id: 426fc3e0c93781e7d8415259863244564173ea7e""",0.7,None,changed

435,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-core: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38866230

fbshipit-source-id: a60a3dfbce2d05f1200ef8540984f11edac9dadb""",0.7,None,changed

436,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-common: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38844222

fbshipit-source-id: 62f5f96c5f09b2c2debe9c6462d365cd4e3883e8""",0.7,None,changed

437,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-bolts build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38836338

fbshipit-source-id: 96624c828f5377ad5f934bca0fceda040eda3637""",0.7,None,changed

438,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook-applinks build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38836337

fbshipit-source-id: 84a854e0369d7f42caa88e9024a45887cfa93d24""",0.7,None,changed

439,Ming Zhang,mingcaozhang@fb.com,"""Migrate :facebook: build.gradle to kotlin

Summary: Migrate gradle scripts to kotlin for IDE support.

Reviewed By: linmx0130

Differential Revision: D38831204

fbshipit-source-id: 3e743e4b94b462f5308141f55b8baf705d9a17e9""",0.7,None,changed

440,Ming Zhang,mingcaozhang@fb.com,"""Migrate root-level gradle files to Kotlin

Summary: Move `jacoco.gradle` and `settings.gradle` to kotlin, and removes constants.gradle as we use `buildSrc` for constants now.

Reviewed By: linmx0130

Differential Revision: D38796609

fbshipit-source-id: 7e992588d27359dd0d78ebb6aaff87623970b770""",0.7,None,changed

441,Ming Zhang,mingcaozhang@fb.com,"""Use buildSrc for dependencies

Summary:
Using `constants.gradle` is an older way of managing dependencies. The recommendation is now to use the kotlin-dsl plugin which allows an reserved `buildSrc` module which is accessible to all other modules. This enables IDE support which is a huge QoL improvement when dealing with dependencies as we no longer have to rely on full text search only.

See:
https://docs.gradle.org/current/userguide/organizing_gradle_projects.html
https://proandroiddev.com/better-dependencies-management-using-buildsrc-kotlin-dsl-eda31cdb81bf
https://github.com/antoniolg/Bandhook-Kotlin

Reviewed By: linmx0130

Differential Revision: D38715544

fbshipit-source-id: a700cf59ce10c1ff863a88b060b886c1b19e61fa""",0.2,None,changed

442,Ming Zhang,mingcaozhang@fb.com,"""Remove buck files and references except for scripts

Summary: Remove buck files and string references to buck. Does not remove buck usage in scripts, that will be done in a separate diff (either by removing the scripts altogether or adapting them to use gradle).

Reviewed By: joesus

Differential Revision: D38547845

fbshipit-source-id: 0e71fa0810fd8b99c7533a54a11a2009cdcf4a8e""",0.7,None,changed

443,Joe Susnick,joesusnick@fb.com,"""Add keystore files to gitignore

Summary: $title

Reviewed By: mingcaozhang

Differential Revision: D38400212

fbshipit-source-id: c25219455467a43702152ae68f47dd7d127c1a0a""",0.7,None,added

444,Joe Susnick,joesusnick@fb.com,"""Adding unit tests

Summary: Adds ci job for unit tests

Reviewed By: mingcaozhang

Differential Revision: D38209845

fbshipit-source-id: 657ee495d73e8beeee91421c3e0cf669c4b1c6d6""",0.7,None,changed

445,Joe Susnick,joesusnick@fb.com,"""fbshipit-source-id: 0ab4a5ceeaa0ba9613b60d757a0ed7985de4f0eb""",0.7,None,changed

446,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907514300346
Sandcastle Job Instance ID: 36028797782392272
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D39233396

fbshipit-source-id: 24949508d8de50d48ee1f046282ce0b000eaa127""",0.7,None,changed

447,Ming Zhang,mingcaozhang@fb.com,"""Bump version to 14.1.1

Summary: Bump version for patch

Reviewed By: joesus

Differential Revision: D39112460

fbshipit-source-id: 22fbbba4c776fa4122845a31daa64fc0b1e86adc""",0.2,None,changed

448,Aaron Chau,aaronchau@fb.com,"""Upgrade NativeAppLoginMethodHandler to launch intents with ActivityLauncher

Summary:
When upgrading to AndroidX Activity/Fragment 1.5.1, if FB4A is not installed then the backup CCT flow will break.

The following video is HB4A using Android Acitivty/Fragment 1.5.1 and reproducing the CCT problem. Note that nothing can be clicked on after the login flow is complete. Then clicking the back button says no permissions were granted.
https://pxl.cl/2bHRd

The root cause of the issue is that there were internal changes for the 1.5.1 update and using startActivityForResult does not trigger onActivityResult correctly. This seems to only happen when you try to start an activity when it doesn't exist.

In NativeAppLoginMethodHandler, we can't tell if FB4A is installed so we just attempt to start the activity and catch the ActivityNotFoundException if it does not start. If the native flow cannot be attempted, then we fallback to CCT flow. For some reason, after failing to start the FB4A intent, the LoginFragment does not correctly trigger the onActivityResult function when the backup CCT flow completes. The error also seems to occur if you click cancel on the CCT flow.

This diff updates the LoginFragment to have a new ActivityLauncher member and updates NativeAppLoginMethodHandler to use the launcher to launch the FB4A intent. We also now query for the intent instead of try/catch the start attempt. It seems this is the primary issue.

In 1.4.0 and below, if an activity cannot be started, it will still trigger the on result flow.
In 1.5.0 and above, if an activity cannot be started, it will not trigger the on result flow.

Reviewed By: ct2mak

Differential Revision: D38929817

fbshipit-source-id: b985157050e1b9c68627c97055cd93d83f3c3752""",0.7,None,changed

449,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907497044814
Sandcastle Job Instance ID: 18014399266449106
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38925205

fbshipit-source-id: 8ce4f917d45ff2601bb90242c3559aa7d8f039d3""",0.7,None,changed

450,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907495827757
Sandcastle Job Instance ID: 22517998890475643
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38896187

fbshipit-source-id: 4b206140ee91bf8a2fe2db828b07c1cd58276df8""",0.7,None,changed

451,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907495566549
Sandcastle Job Instance ID: 18014399265676057
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38894542

fbshipit-source-id: ab01d48053ec2cbc25356a222f6e76260f30d65c""",0.7,None,changed

452,Joshua Selbo,jselbo@fb.com,"""Update mockito-kotlin and rename imports

Reviewed By: strulovich

Differential Revision: D38673457

fbshipit-source-id: 481d1aac359a2bdc12954a49bcb850c77506d7fd""",0.7,None,changed

453,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907488811060
Sandcastle Job Instance ID: 13510799633812091
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38806227

fbshipit-source-id: 2b6b10bd29d65bc0a4ba04850c68af784a039600""",0.7,None,changed

454,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907469715369
Sandcastle Job Instance ID: 36028797765461330
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38599776

fbshipit-source-id: ae43a8dcc244aeb5eb8e2350dadec20a8afd7b04""",0.7,None,changed

455,Joe Susnick,joesusnick@fb.com,"""Back out ""Deleting HelloFacebookSample""

Summary: title

Differential Revision: D38577392

fbshipit-source-id: c4872bc1427577fbacd0a91be932501e8586517f""",0.7,None,changed

456,Alan Wilms,alanwilms@fb.com,"""Add subscriptions API

Reviewed By: wwyi

Differential Revision: D38183298

fbshipit-source-id: 104714ed132dca69c6dba0e1ccceb8fc7d9a02cf""",0.7,None,added

457,Joe Susnick,joesusnick@fb.com,"""Delete ShareIt

Summary: Deleting unmaintained test app

Differential Revision: D38470979

fbshipit-source-id: 084b643e758960d5bab18ed14b7f0907d2e9814e""",0.7,None,removed

458,Joe Susnick,joesusnick@fb.com,"""Delete RPS Sample

Summary: Deleting unmaintained sample app

Differential Revision: D38470869

fbshipit-source-id: 24a2628bd55f6ac06a79cfc34b57fcc2f06554f4""",0.7,None,removed

459,Joe Susnick,joesusnick@fb.com,"""Delete MessengerSendSample

Summary: Deleting unmaintained sample app

Differential Revision: D38470727

fbshipit-source-id: fd0e3ee5ee5d8cbc135e1650e08a1bec732fc4c1""",0.7,None,removed

460,Joe Susnick,joesusnick@fb.com,"""Deleting HelloFacebookSample

Summary: Deleting unmaintained test app.

Differential Revision: D38470658

fbshipit-source-id: 09812a890fae803960b83612aa9e5cea716c1661""",0.7,None,changed

461,Joe Susnick,joesusnick@fb.com,"""Delete SwitchUserSample

Summary: Deletes unmaintained test app

Differential Revision: D38462921

fbshipit-source-id: d6f035c3328874b48c79f961665673871baf2811""",0.7,None,removed

462,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907450137523
Sandcastle Job Instance ID: 4503600368525240
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38404989

fbshipit-source-id: 413641e548560f05750f04c2032f1ab39042471e""",0.7,None,changed

463,Callie He,callieh@fb.com,"""Set the correct url to open the off-platform context choose dialog

Summary: It redirects to https://www.facebook.com/gaming/dialog/context_choose?app_id=448188556264551&payload=[[]]&deeplink=CONTEXT_CHOOSE&redirect_uri=fbconnect%3A%2F%2Fcct.com.facebook.hackbook.internal.current

Reviewed By: Alaeldin513

Differential Revision: D38229065

fbshipit-source-id: 973b3d37fb78b17d632ad5007b74d958ec5d5bb2""",0.7,None,changed

464,David Torosyan,dtoro@fb.com,"""Add missing @param

Summary:
Fixing up some incorrectly used tags in preparation of potentially importing `kdoc-formatter`.

See T127340549 for details.

NOTE: Continuation of the stack in D38170101

Reviewed By: joesus, hick209

Differential Revision: D38367591

fbshipit-source-id: e5f8782ec66aeb7ae2469ed0c2e2273a9e5c7ea2""",0.7,None,added

465,Carmi Grushko,carmi@fb.com,"""Update ktfmt component on FBS:master

Reviewed By: strulovich

Differential Revision: D38301968

fbshipit-source-id: 24e2658a83de67ce98cfcf876fd0fd4271827c65""",0.7,None,changed

466,Victor Chua,victorchua@fb.com,"""Fix Android CAPI exception handling

Summary:
Fix for uncaught error in data.first, when provided with an empty collection

Previous code under https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/first.html
would throw uncaught NoSuchElementException exception

Updated to https://kotlinlang.org/api/latest/jvm/stdlib/kotlin.collections/first-or-null.html that in the case of exception, we catch JSONException or nullpointerexception thrown by JSONObject https://developer.android.com/reference/kotlin/org/json/JSONObject

Reviewed By: wx0165927473

Differential Revision: D37676811

fbshipit-source-id: a39512a37497fa930702f78ef60aa478aa8382bc""",0.7,None,fixed

467,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907421704440
Sandcastle Job Instance ID: 4503600361800436
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38145335

fbshipit-source-id: 98e57562f67c778c5a39d602cee0edea1b381077""",0.7,None,changed

468,Intl Scheduler,,"""remove unused generated localized files on master

Summary:
Chronos Job Instance ID: 1125907409444138
Sandcastle Job Instance ID: 9007199982879299
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D38078457

fbshipit-source-id: 7303595697e6fc6043f02535bd06500a75159538""",0.7,None,removed

469,Callie He,callieh@fb.com,"""Add ChromeCustomTabHandler to Context Choose Dialog

Summary: Add another handler so when facebook app handler is unavailable we go to this chrome handler.

Reviewed By: Alaeldin513

Differential Revision: D37803005

fbshipit-source-id: c4ce65b4baaf3bc462a9705a2f12decde90e3cae""",0.7,None,added

470,Joe Susnick,joesusnick@fb.com,"""More gradle file cleanup

Summary:
* Removing ignored build-tools option
* Using experimental ignorelist over deprecated blacklist

Reviewed By: josueBrizuelaXD

Differential Revision: D37924423

fbshipit-source-id: d2d35ae7b3dea63480da91497fd2e419577806d6""",0.7,None,changed

471,Joe Susnick,joesusnick@fb.com,"""Fix Test App Gradle Debug Builds

Summary:
Adding code coverage to debug flavors of the android sdk caused a crash. This fixes most of them.

Applying solution from https://github.com/jacoco/jacoco/issues/968

Reviewed By: josueBrizuelaXD

Differential Revision: D37890510

fbshipit-source-id: f5ffaaa25d0323ad26605cf6fc48acedecd63d9a""",0.7,None,fixed

472,Joe Susnick,joesusnick@fb.com,"""Adding jacoco coverage to additional targets

Summary: Adds coverage for facebook-bolts, facebook-common, facebook-gamingservices libraries.

Reviewed By: linmx0130

Differential Revision: D37859879

fbshipit-source-id: 3f6c388fd04c7feaac142090882883bf96c948d7""",0.7,None,changed

473,Joe Susnick,joesusnick@fb.com,"""Adding Jacoco for facebook-core

Summary:
* Bumps asm-tree and asm-util to v 9.4
* Adds some documentation to help nOObs like me
* Adds jacoco to facebook-core unit test target

Follow-ups:
* Add coverage to other kits' build.gradle files

Reviewed By: linmx0130

Differential Revision: D37855688

fbshipit-source-id: a1c4e7c8fc5078275ee0a2f1899e002993477855""",0.2,None,added

474,Ming Zhang,mingcaozhang@fb.com,"""Backfill tests in [fbandroid/first-party/java/androidsdk/facebook-core/src/test/kotlin/com/facebook/appevents/AppEventQueueTest.kt]

Summary:
Backfill tests for these methods:

Public method fun flush(reason: FlushReason) : Void of class com.facebook.appevents.AppEventQueue seems not called in its unit test.
Public method fun getKeySet() : Set<AccessTokenAppIdPair> of class com.facebook.appevents.AppEventQueue seems not called in its unit test.
Public method fun sendEventsToServer(reason: FlushReasonappEventCollection: AppEventCollection) : FlushStatistics? of class com.facebook.appevents.AppEventQueue seems not called in its unit test.
Public method fun buildRequestForSession(accessTokenAppId: AccessTokenAppIdPairappEvents: SessionEventsStatelimitEventUsage: BooleanflushState: FlushStatistics) : GraphRequest? of class com.facebook.appevents.AppEventQueue seems not called in its unit test.

Reviewed By: joesus

Differential Revision: D37862211

fbshipit-source-id: 93e51032c31feda9615d3ea2f5a98fde83f11396""",0.7,None,changed

475,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 7/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37787216

fbshipit-source-id: c6bab76f1104ea94e2a7f09c1cc742ac8b59bcbe""",0.7,None,changed

476,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 6/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37787104

fbshipit-source-id: 458d56c519cdf8036545a6b86275fd252cce73f0""",0.7,None,changed

477,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 5/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37787000

fbshipit-source-id: d73a85f2e5edfb5a464f9dcc828d6519f13a0d17""",0.7,None,changed

478,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 4/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37786883

fbshipit-source-id: b31eb05f3b505d6385cd42166486994d013fc439""",0.7,None,changed

479,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 3/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: josueBrizuelaXD

Differential Revision: D37786739

fbshipit-source-id: 928b80354b40072aedc8c42a540c6843c149e9c3""",0.7,None,changed

480,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 2/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37786664

fbshipit-source-id: 87b9b1c80143589153e003a65e2d5b0178834dea""",0.7,None,changed

481,Joe Susnick,joesusnick@fb.com,"""Stop skipping Android Unit Test cases 1/n

Summary:
We were skipping test cases on the mistaken assumption that the tests were flaky.

This adds them back so that they can run as part of gradle tests at diff time.

Reviewed By: shuxinzhang

Differential Revision: D37786495

fbshipit-source-id: 5908800f92508b09a83d62dc6ac5c1a7cc54fdfd""",0.7,None,changed

482,Dan Jarvis,danjarvis@fb.com,"""Backfill unit tests for ModelManager

Summary:
Add more unit tests covering enable(), fetchModels(), getRuleFile(), and testing the expected input model JSON format and the translations applied to it.

I have tried to minimize change to ModelManager itself, only changing the visibility of certain fields to improve testability.

ModelManager would benefit from some significant refactoring to make business logic more individually testable, e.g. by moving model caching logic  into its own class or methods.

Some of the conventions for these unit tests were copied from other test files, e.g. LoginManagerTest.

Reviewed By: joesus

Differential Revision: D37623811

fbshipit-source-id: b10edb0db253fa59e8a5d8dc03658c2f23514d39""",0.7,None,added

483,Joe Susnick,joesusnick@fb.com,"""Bump version 14.1.0

Summary: $title

Reviewed By: samodom

Differential Revision: D37498720

fbshipit-source-id: 975bd8dc5d8a6523c410af17d59536e51b454a98""",0.2,None,changed

484,Austin Riopelle,riopelle@fb.com,"""Fix back button behavior for QR code on Catalina

Summary:
Modifies the code in AlohaDeviceAuthDialog.java related to animating the QR code when it is clicked on on Catalina to animate it and make it larger. There is an issue where if users hit the back button while the QR code is expanded, instead of returning to the regular split QR view the flow will navigate to the previous screen instead.

(note the user can also dismiss the QR view by clicking the center dpad button again.)

This fix also involved a slight change to DeviceAuthDialog.kt to allow for suppressing the regular back button functionality.

Differential Revision: D37332607

fbshipit-source-id: 846e767e0c53fd775d53daaa209e5fa0b6a2738f""",0.7,None,fixed

485,Jared Warren,jarwarren@fb.com,"""Update CONTRIBUTING.md

Summary: Update CONTRIBUTING.md

Reviewed By: samodom

Differential Revision: D37313894

fbshipit-source-id: 94c583e1ceef28315376c27997ff6dda94207cbb""",0.7,None,changed

486,Carmi Grushko,carmi@fb.com,"""Update ktfmt component on FBS:master

Differential Revision: D36926167

fbshipit-source-id: e5c262e269b3ccb2afe04b45398ec66fc5c48df2""",0.7,None,changed

487,Jared Warren,jarwarren@fb.com,"""Expose Tournament fields to Java

Summary: Exposes Tournament fields to java and adds a method for updating tournaments with just an ID.

Reviewed By: Alaeldin513

Differential Revision: D36936005

fbshipit-source-id: 01150b9208c6af37a423bbf244f0cabba7607ae6""",0.7,None,changed

488,Joe Susnick,joesusnick@fb.com,"""Bump GraphAPI and SDK versions to v14

Summary: Bumping GraphAPI and SDK versions to be 14.0.0

Reviewed By: samodom

Differential Revision: D36901285

fbshipit-source-id: f0b4fabe236efcc2d7260c899d144899a1521301""",0.2,None,changed

489,Jared Warren,jarwarren@fb.com,"""Override TournamentSortOrder string value

Summary: Updates the Android implementation of TournamentSortOrder to bring it inline with its iOS and web counterparts.

Reviewed By: samodom

Differential Revision: D36847526

fbshipit-source-id: b2f389a3c5603a36aef91b71a3757838f53eae6d""",0.7,None,changed

490,Roman Shakhmanaev,shakhmanaev@fb.com,"""adding ability to override default app level access token

Summary: This diff exposes interface to others to override app id on behalf of which FB DBL is executed. the way how we do it we define `open` method `getApplicationAccessToken` and later in the stack we will overrride id when it is needed on app's needs.

Differential Revision: D36620804

fbshipit-source-id: d02c0f79ecdbc0ae9d47d2ea9edc999906004adb""",0.7,None,changed

491,Roman Shakhmanaev,shakhmanaev@fb.com,"""lets pass app access token as explicit param in DBL polling endpoint

Summary: later in the the stack we will try to override ""application access token"" for reauth flow on Portal, so making this explicit change to pass proper application access token (existing one) in the same way as we do for DBL code requesting

Differential Revision: D36620085

fbshipit-source-id: 905b6da79daadfff721d46faeb38cdd0d75d337c""",0.7,None,changed

492,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

Summary:
Chronos Job Instance ID: 1125907277474290
Sandcastle Job Instance ID: 36028797696051350
allow-large-files
ignore-conflict-markers
opt-out-review

Differential Revision: D36642699

fbshipit-source-id: 560550b50caddb9ced5badfa847cf6debb90f963""",0.7,None,changed

493,Jan Zahornadsky,janz@fb.com,"""Remove BadDependencyInjection suppressions

Summary: `BadDependencyInjection` detection has been removed and as such it's no longer necessary to suppress it.

Differential Revision: D36200135

fbshipit-source-id: 6061fd5443ccdc1fe493947df3cd041a6df3a2a2""",0.2,None,removed

494,Roman Shakhmanaev,shakhmanaev@fb.com,"""adding events for spinner shown/hidden

Summary: adding more events to track when spinner gets shown and dismissed during DBL code generation flow

Differential Revision: D36420836

fbshipit-source-id: f7936a5c103939463d2b2bf64ba4dd874596e75c""",0.7,None,changed

495,Sam Odom,samodom@fb.com,"""Update iOS and Android READMEs to include survey link

Reviewed By: joesus

Differential Revision: D36388200

fbshipit-source-id: 1a171205754087c1c40b9e9088c9e59aa28efdc4""",0.7,None,changed

496,Sam Odom,samodom@fb.com,"""Skip more flaky tests

Summary:
Skips running flaky tests until it can be fixed:
* testEqual
* testAsMapKey
* testSerializable

Reviewed By: josueBrizuelaXD

Differential Revision: D36292486

fbshipit-source-id: 40cb02b584f11738a717c83f11857ee50f7ea692""",0.7,None,fixed

497,CodemodService FBSourceKtfmtLinterBot,,"""Daily `arc lint --take KTFMT`

Reviewed By: zsol

Differential Revision: D36274332

fbshipit-source-id: 4030ec48d5b7661cb9a9dc08159c744ee97f4693""",0.2,None,changed

498,Zachary Martin,zacharycmartin@fb.com,"""Remove unnecessary PrepareForTest annotation classes

Summary: When a test for a class prepares the class to be tested, testing coverage computation is broken. This change fixes this for some classes - in which we were unnecessarily preparing the class for testing.

Reviewed By: linmx0130

Differential Revision: D36217726

fbshipit-source-id: 730e43df183a77710d2f9270fcb2b6b78a6ce6f0""",0.7,None,fixed

499,CodemodService FBSourceKtfmtLinterBot,,"""Daily `arc lint --take KTFMT`

Reviewed By: zsol

Differential Revision: D36240267

fbshipit-source-id: 2b2d2e23ee6616f156853a645b323f2891ef5a0d""",0.2,None,changed

500,Carmi Grushko,carmi@fb.com,"""Update ktfmt component on FBS:master

Reviewed By: strulovich

Differential Revision: D36123426

fbshipit-source-id: 32cb667623564a38def123d20b88179bffe20cdb""",0.7,None,changed

501,Intl Scheduler,,"""translation auto-update for i18n/mapillary-android.config.json on master

fbshipit-source-id: b83178008418c547e6c7265e3c6aaa2c376bdd5c""",0.7,None,changed

502,Sam Odom,samodom@fb.com,"""Omit flaky tests (2/2)

Summary:
Skips running flaky tests until it can be fixed:
* testLogProductItemWithGtinMpnBrand
* parse invalid json
* parse valid json
* test setting and getting the current AuthenticationToken to or from cache
* parse invalid value types
* test when codeless is disabled no listener is registered with sensor manager
* test activity will be destroyed from matcher when it is destroyed
* test start iap logging when billing lib 2+ is available and feature is on
* test activity will be removed from matcher when it pauses
* test start iap logging when billing lib 2+ is available but feature is off
* test with two sample signatures
* test when codeless events enabled a shake will trigger checking codeless session
* testGetSkuDetailsParams
* test start iap logging when billing lib 2+ is not available
* test load saves token when upgrading from legacy token
* test load returns false if no cached token and empty legacy token
* test load valid cached token
* test clear cache clears legacy cache
* test load clears legacy cache when upgrading from legacy token
* test remove before and after test adding request
* test close does all clean work
* testSendCustomEvents_RemoteServiceNotAvailable
* test send error log
* test error report files
* testLoadCurrentProfileEmptyCache

Reviewed By: josueBrizuelaXD

Differential Revision: D36148884

fbshipit-source-id: 8f02358414e1eb387d7417f40b286c7cae09f795""",0.7,None,fixed

503,Sam Odom,samodom@fb.com,"""Omit flaky tests (1/2)

Summary:
Skips running flaky tests until it can be fixed:
* testOneOfOnInvalidNull
* test handler enable
* test parceling with empty optional fields
* test getting invalid bundle value as date to get null
* test constructor with required encoded claims
* test empty nonce throws
* test roundtrip JSONObject
* test missing nonce throws
* testHasAppID
* test exception to string
* test vectorize with smaller maxLen
* testCanSetCurrentAuthenticationToken
* testChangingAuthenticationTokenSendsBroadcast
* testDefaultsToNoCurrentAuthenticationToken
* testLoadDoesNotSave
* testLoadReturnsTrueIfCachedToken
* testLoadSetsCurrentTokenIfCached
* testSaveWritesToCacheIfToken
* testSetEmptyTokenClearsCache
* test parseModelWeights
* test parse illegal model weights
* test vectorize with larger maxLen
* testLoadReturnsFalseIfNoCachedToken
* test normalizeString
* test vectorize with non-ascii characters
* test execute async calls GraphRequest
* populate request implicit event only
* multiple adds

Reviewed By: josueBrizuelaXD

Differential Revision: D36145791

fbshipit-source-id: cd927572b2e7ef6be34ad077dae8f0734d49eb2c""",0.7,None,fixed

504,Joe Susnick,joesusnick@fb.com,"""Omitting flaky tests 5/n

Summary: $title

Reviewed By: samodom

Differential Revision: D36147865

fbshipit-source-id: fe45fc52a4fd634f9a82cbc77221f4c939e1ee82""",0.7,None,changed

505,Joe Susnick,joesusnick@fb.com,"""Omitting flaky tests 4/n

Summary: $title

Reviewed By: josueBrizuelaXD

Differential Revision: D36147164

fbshipit-source-id: 69c44bd64808c82d56d9bc3c10fb52e3d6586f1b""",0.7,None,changed

506,Joe Susnick,joesusnick@fb.com,"""Omitting flaky tests 3/n

Summary: $title

Reviewed By: samodom

Differential Revision: D36144763

fbshipit-source-id: f85270a7cdf1a4b45e2a914984f9ed80cddd330f""",0.7,None,changed

507,Joe Susnick,joesusnick@fb.com,"""Omitting flaky tests 2/n

Summary: $title

Reviewed By: samodom

Differential Revision: D36144764

fbshipit-source-id: b7803e8c2c046a7cdcb71fd8325054d9c2a24363""",0.7,None,changed

508,Joe Susnick,joesusnick@fb.com,"""Omitting flaky tests 1/n

Summary: $title

Reviewed By: josueBrizuelaXD

Differential Revision: D36132523

fbshipit-source-id: 0b03bce9a59ac50f9f8ee2da168903cae652d7df""",0.7,None,changed

509,Joe Susnick,joesusnick@fb.com,"""Omit flaky test

Summary: Skips running flaky test until it can be fixed.

Reviewed By: samodom

Differential Revision: D36131619

fbshipit-source-id: 0805a4dfb68df12abb50a37af561a68b28fdade6""",0.7,None,fixed

510,Vlad Fridman,vlad@fb.com,"""Avoid using PrepareForTest for AppEventStore in AppEventStoreTest

Summary:
PrepareForTest should not be used to mock the class that is being tested.
Extracted static methods that are not being tested into a separate class AppEventDiskStore.
The AppEventStoreTest now does not mock AppEventStore but mocks the new class AppEventDiskStore

Reviewed By: mgoovaer

Differential Revision: D35972481

fbshipit-source-id: 1e0a4e0baac0bdf4ab5f2c85445adb1354216314""",0.7,None,added

511,Christian Pomales,cpomales@fb.com,"""Expose country code information from android daemon

Summary: Adds support for fetching country ISO from android SDK and adds a button to the CG SDK Channel Test App to test this functionality. The daemon returns ""ZZ"" to indicate no country information is present. If country information is passed in from www on startup then the daemon caches it.

Differential Revision: D35692252

fbshipit-source-id: 93235ed3797b9e2b0144b3631b29323ef77d96d7""",0.7,None,changed

512,Sam Odom,samodom@fb.com,"""Back out ""Remove unnecessary @PrepareForTest class in PlatformServiceClientTest""

Summary:
Backing this out since it seems to be causing some test failures with GitHub Actions

Original commit changeset: 54dea95d3bdd

Original Phabricator Diff: D35967525 (https://github.com/facebook/facebook-android-sdk/commit/438cb59e4a424856bdf134aa5f95bf50cbde1259)

Reviewed By: joesus

Differential Revision: D36071544

fbshipit-source-id: 5697f74b3e56cebf5dea6ed7d29e5f1665b80886""",0.7,None,changed

513,Gannon Lawlor,gannonlawlor@fb.com,"""Remove unnecessary @PrepareForTest class in PlatformServiceClientTest

Summary: We were creating a Messenger inside of the onServiceConnected which required us to mock the creation of Messenger. This change moves the creation of Messenger to a function that we can mock inside of the test. This allows us to remove PlatformServiceClient from PrepareForTest

Reviewed By: joesus

Differential Revision: D35967525

fbshipit-source-id: 54dea95d3bdd6e5ec72d3a522b43042d2a91bf6a""",0.7,None,changed

514,Victor Chua,victorchua@fb.com,"""Added the behaviour of the Cloudbridge to be the same for android and IOS

Summary: Removed the cloudbridge code parsing the URL

Differential Revision: D35771729

fbshipit-source-id: fbcc711ddea3aa5d3213d51d786e037f5834769c""",0.7,None,added

515,Jawwad Ahmad,jawwad@fb.com,"""Delete unused ShareModelTestUtility.java

Summary: Looks like this became unused once deprecated open graph code was removed in D35814568 (https://github.com/facebook/facebook-android-sdk/commit/d57c9c8f7bf4747ca1b398fd8a8941d3bac33b73)

Reviewed By: samodom

Differential Revision: D35883415

fbshipit-source-id: f50dfbcbfe8fbebc28c7ed97cb573a32e6435b7f""",0.7,None,removed

516,Carmi Grushko,carmi@fb.com,"""@allow-large-files [MSDK] Update ktfmt component on FBS:master

Reviewed By: strulovich

Differential Revision: D35774317

fbshipit-source-id: ce59de8c38e385827a9ee62473b57a1791f18d27""",0.7,None,changed

517,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated OpenGraph story sharing classes

Summary:
These were deprecated in D34622768 (https://github.com/facebook/facebook-android-sdk/commit/303566d82a4c52fa0384a281f02a308d084c52fb)

Now that we've cut the branch for 13.2.0 and won't have another scheduled release until 14.0.0 these can be deleted. (In case we have a minor 13.2.1 release it would be cut from the 13.2.0 release branch anyway which won't include these changes).

Reviewed By: linmx0130

Differential Revision: D35814568

fbshipit-source-id: 5bcf885d65353e3e8f568e3ee009cb2c78938595""",0.7,None,changed

518,Jawwad Ahmad,jawwad@fb.com,"""Convert LoginClientTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35136482

fbshipit-source-id: 0497d5de7df8e72af6b2b5309aed38fd817e8f95""",0.7,None,changed

519,Mengxiao Lin,mxlin@fb.com,"""Migrate common kit TestUtils to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D35731841

fbshipit-source-id: 9311d10860efa806a2743d70ed5c53a14e97b23e""",0.7,None,changed

520,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareOpenGraphUtilityTest to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D35731338

fbshipit-source-id: 6e5deb43774c88ed50d762f5eeb8a0c21d31d205""",0.7,None,changed

521,Mengxiao Lin,mxlin@fb.com,"""Make attrs in FacebookButtonBase nullable

Reviewed By: shuxinzhang

Differential Revision: D35798295

fbshipit-source-id: a12a76dbbfe79a0cd5e5b9437704da8d80416b7c""",0.7,None,changed

522,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for newCustomAudienceThirdPartyIdRequest

Summary: As title. Also fix the tracking id parameter if only Android ADID is available.

Reviewed By: shuxinzhang

Differential Revision: D35619018

fbshipit-source-id: 9c9cad399d9b92e39c53a96732d9ee98a4587543""",0.7,None,fixed

523,Mengxiao Lin,mxlin@fb.com,"""Version bump for v13.2.0

Summary: As title.

Reviewed By: shuxinzhang, samodom

Differential Revision: D35750079

fbshipit-source-id: d27319109014aeb03c41ae80c728156153f5500e""",0.2,None,changed

524,Victor Chua,victorchua@fb.com,"""Add GK for cloudbridge SDK

Summary: Added the Cloudbridge GK to be accessed from the featuremanager

Reviewed By: KylinChang

Differential Revision: D35700176

fbshipit-source-id: 726b9cc48d954b8d3f7ba14aad9efdb4f98ba44b""",0.7,None,added

525,Victor Chua,victorchua@fb.com,"""Add the ability for cloudbridge to override the cloudbridge settings behaviour

Summary: Added the functionality in coffeshop cloudbridge to override the cloudbridge server settings.

Reviewed By: KylinChang

Differential Revision: D35284061

fbshipit-source-id: 71a254b69061a0e696c8e76c16b32a93049be5ea""",0.7,None,added

526,Victor Chua,victorchua@fb.com,"""Added a caching behaviour for saving Cloudbridge settings

Summary: Cloudbridge settings when retrieved from the app_id/cloudbridge_settings endpoint will save the configuration to App level shared preferences. note that whether the cloudbridge is enabled or not is not saved

Reviewed By: KylinChang

Differential Revision: D35492719

fbshipit-source-id: 8dfe895d649631013dbf5b7ca5957a8aa3a91086""",0.7,None,added

527,Victor Chua,victorchua@fb.com,"""Migrate CB logging out of beta into production

Summary:
+ Moved the appevents from beta into production.
+ Fixed the code to correctly access the app_id/cloudbridge_settings endpoint to retrieve the cloudbridge settings
+ Cloudbridge events only fire if the capimanager is enabled, enable it by visiting coffeeshop
+ Cleaned up the Beta testing and build code in Gradle and Buck
+ Added Placeholdertest.kt to fix build errors without having tests in the beta folder

Reviewed By: KylinChang

Differential Revision: D35173340

fbshipit-source-id: 64ab2cf66828b2e859377fb7e593e80b6f5f0860""",0.7,None,fixed

528,Mengxiao Lin,mxlin@fb.com,"""Move MockitoConfiguration to test util kit

Summary: `MockitoConfiguration` is necessary for all kits to correctly make mocks. Based on this fact, it should be put in test util kit.

Reviewed By: samodom

Differential Revision: D35654114

fbshipit-source-id: 775f1283aa6206f2dcab94bb18ee2961a5a4d3db""",0.7,None,changed

529,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a1b4b299f5a511f45619ce6d408f40d355964b2d""",0.7,None,changed

530,Mengxiao Lin,mxlin@fb.com,"""Expose method to create activity result contract for share dialogs

Reviewed By: shuxinzhang

Differential Revision: D35127037

fbshipit-source-id: 9da9efe52cd142a60c9ff3c077d34206ef13fae3""",0.7,None,changed

531,Mengxiao Lin,mxlin@fb.com,"""Expose the method to create Login Activity Result Contract

Summary:
Rather than a fix, it create a new way to do Login in Android: developers now can create a ""log in contract"" to perform login with AndroidX activity/fragments. The return contract is an instance of AndroidX Activity Result contract so it can be easily used with any AndroidX apis.

Basically we can use the new API by
```
val launcher = registerForActivityResult(
  loginManager.createLogInActivityResultContract(callbackManager)) {...}

launcher.launch(permissions)
```
Or in Java
```
ActivityResultLauncher<Collection<String>> launcher =
 registerForActivityResult(
    loginManager.createLogInActivityResultContract(callbackManager),
    new ActivityResultCallback<CallbackManager.ActivityResultParameters>() {
        Override
        public void onActivityResult(CallbackManager.ActivityResultParameters params){}
    });

launcher.launch(permissions)
```

which is suggested in https://developer.android.com/training/basics/intents/result.

Reviewed By: samodom

Differential Revision: D34937212

fbshipit-source-id: 41fc1b2f22b6f3ee838e5891405c7487500e13c4""",0.7,None,fixed

532,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9b16bd11b0d768b709945662dd6056cbc7588228""",0.7,None,changed

533,Johnny Correa,johnnycorrea@fb.com,"""T112386713 | removing ViewIndexer from list of prepared classes to avoid issue with miscalculating code coverage

Reviewed By: linmx0130

Differential Revision: D35549424

fbshipit-source-id: e4e939733360a548e9c3891e47061e9afd168c02""",0.7,None,changed

534,Shuby Mao,lelimao@fb.com,"""Refactored InAppPurchaseEventManager to remove prepare class for InAppPurchaseEventManagerTest.

Summary: included suggestions.

Reviewed By: linmx0130

Differential Revision: D35588151

fbshipit-source-id: c2f0bfc8c2afdc95ad94df312804df15e3ff0dea""",0.7,None,changed

535,Intl Scheduler,,"""translation auto-update for i18n/oculus-mirage.config.json on master

fbshipit-source-id: b371d6be85c5e38b7311bda0eb17a81c612243c3""",0.7,None,changed

536,Mengxiao Lin,mxlin@fb.com,"""Migrate DeviceRequestsHelper to Kotlin

Summary: As title.

Differential Revision: D35471325

fbshipit-source-id: 9ba6b2fea5ff758ef629c294632fc27eade5187a""",0.7,None,changed

537,Mengxiao Lin,mxlin@fb.com,"""Add test for DeviceRequestsHelper

Summary: As title.

Differential Revision: D35448879

fbshipit-source-id: d6b13c75b5fc54760f37d96609ec6f733543db86""",0.7,None,added

538,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 76de82e3c4e94e9e348e377bb3429374dc81eb28""",0.7,None,changed

539,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 4903ef095c9d72160068b8883b0a20d5850b6377""",0.7,None,changed

540,Intl Scheduler,,"""translation auto-update for i18n/oculus-mirage.config.json on master

fbshipit-source-id: e0a8e6449eea7a00ccc3a531422f52af126e5bdb""",0.7,None,changed

541,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9524adfbc5936f4981953af41edfe58b089a4131""",0.7,None,changed

542,String Manager Edit Bot,,"""Update XML Strings in fbandroid/first-party/java/androidsdk/facebook-common/src/main/res/values/strings.xml

Differential Revision: D35460210

fbshipit-source-id: 061b3a4df92e9934e6cbcabe1a4bc53da34ddb30""",0.2,None,changed

543,String Manager Edit Bot,,"""Update XML Strings in fbandroid/first-party/java/androidsdk/facebook-login/src/main/res/values/strings.xml

Differential Revision: D35460211

fbshipit-source-id: 2bbab7e79312efa83128fe536b8faf795798f171""",0.2,None,changed

544,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 3b4cb6a838824f419902f67af636da426060f816""",0.7,None,changed

545,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for FetchedAppSettings

Summary: As title. Backfilled the unit test for `getDialogFeatureConfig` and the code to parse string protocol version.

Differential Revision: D35149227

fbshipit-source-id: ff252d3253d1ba8678522999bc8b9689cf099ccb""",0.7,None,changed

546,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookButtonBase to Kotlin

Summary: As title.

Differential Revision: D35195272

fbshipit-source-id: df798eaec9b1a8f45bab86c95c5e77f409a2a222""",0.7,None,changed

547,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for FacebookButtonBase

Summary: As title.

Differential Revision: D35193984

fbshipit-source-id: 640774f3c59c5f17a47fed7809c58129ecb2b686""",0.7,None,changed

548,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareCameraEffectContent.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/ShareCameraEffectContent.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35136364

fbshipit-source-id: 8fbf0af8ebcc10506a0872a99cf90dde6e843dba""",0.7,None,changed

549,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for ShareCameraEffectContent.java

Summary: Also fixed issue where reading from existing content wasn't implemented correctly since it wasn't reading properties from existing content, i.e. it was using `setEffectId(effectId)` instead of `setEffectId(model.effectId)`

Reviewed By: linmx0130

Differential Revision: D35136296

fbshipit-source-id: be8b459b206d77c580b574946ad7ccff1a08141d""",0.7,None,fixed

550,Jawwad Ahmad,jawwad@fb.com,"""Remove a few redundant casts when calling parcel.readParcelable

Reviewed By: linmx0130

Differential Revision: D35116927

fbshipit-source-id: 4f9e86bf106bad8cc2165fb5190a72eca49b97c4""",0.7,None,changed

551,Jawwad Ahmad,jawwad@fb.com,"""Remove reliance on custom assertion methods in TestUtils and remove unused methods from it

Summary:
In Kotlin we don't need to use the custom TestUtils methods like assertSamePermissions. We can just use assertThat().isEqualTo() directly

i.e. we don't need this:
```
TestUtils.assertSamePermissions(PERMISSIONS, token.permissions)
```

And can just use this:
```
assertThat(PERMISSIONS).isEqualTo(token.permissions)
```

Reviewed By: linmx0130

Differential Revision: D35105770

fbshipit-source-id: 0fbbd201bad58d15626a897987864d14d9c1f15e""",0.7,None,removed

552,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareContentValidationTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35105615

fbshipit-source-id: d476fee36c8bc2ace6e2f6c03c84c325a4b5debb""",0.7,None,changed

553,Jawwad Ahmad,jawwad@fb.com,"""Convert GameRequestContent.java to Kotlin

Summary: Converted facebook-common/src/main/java/com/facebook/share/model/GameRequestContent.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35105338

fbshipit-source-id: 0cdbd0a65f107b598e81ab91923f320a67888d6c""",0.7,None,changed

554,Jawwad Ahmad,jawwad@fb.com,"""Backfill test for GameRequestContent.java

Summary: Also fixed an issue with parcelization in GameRequestContent.java found by adding the test

Reviewed By: linmx0130

Differential Revision: D35105250

fbshipit-source-id: e27c32d332c1ea2f1dfcab8f4ab31eca3472cd59""",0.7,None,fixed

555,Mengxiao Lin,mxlin@fb.com,"""Refactor RemoteServiceWrapperTest to avoid runtime bytecode modification

Summary: As title. By mocking `Context.bindService()`, we can run the test against the original `RemoteServiceWrapper` and `RemoteServiceWrapper.RemoteServiceConnection`. Also make `RemoteServiceConnection` private since it's only used inside `RemoteServiceWrapper`.

Reviewed By: jawwad

Differential Revision: D35083803

fbshipit-source-id: 6285d5adb3f71257e8841467c5b56a692888f70b""",0.7,None,changed

556,Jawwad Ahmad,jawwad@fb.com,"""Update instances of `org.junit.Assert.assertFalse` to use `org.assertj.core.api.Assertions.assertThat` instead

Summary: This is similar to D35067397 (https://github.com/facebook/facebook-android-sdk/commit/112350d6d7733cf379cbcff1497b2cfc5d2d32fb) but for assertFalse instead of assertTrue.

Reviewed By: linmx0130

Differential Revision: D35082262

fbshipit-source-id: 41c248abca374ca46686e8ebf45fc848c486009f""",0.7,None,changed

557,Jawwad Ahmad,jawwad@fb.com,"""Convert KatanaProxyLoginMethodHandlerTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35070681

fbshipit-source-id: cd8d26279f6fc42afa957400817e43e9a83d57c8""",0.7,None,changed

558,Jawwad Ahmad,jawwad@fb.com,"""Convert GetTokenLoginMethodHandlerTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D35070256

fbshipit-source-id: 5c33e431b63014bc1d1960ffb73fcc5be34994d0""",0.7,None,changed

559,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for LoginManager.retrieveLoginStatus

Summary: As title. Create the factory method for `LoginStatusClient` so that the unit tests can inject a mock client to verify the handling of login status results.

Differential Revision: D34876027

fbshipit-source-id: 1a831476fb35978248c46ce1f21be75f5f2c9b65""",0.7,None,changed

560,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginManagerTest to Kotlin

Summary: As title. Refactor the test to use assertThat and mockito-kotlin. More unit tests will be added in the next diff.

Differential Revision: D34839161

fbshipit-source-id: 6cedf8e46335764f35035ec7827f268eabff4a54""",0.7,None,changed

561,Jawwad Ahmad,jawwad@fb.com,"""Update instances of `org.junit.Assert.assertTrue` to use `org.assertj.core.api.Assertions.assertThat` instead

Summary:
- The assertThat versions of methods offer better readability.
- This makes things more consistent

Ran the following to make the initial update
```
find . -name '*.kt' | xargs ack -l assertTrue | xargs perl -pi -e 's/(?:Assert\.)?assertTrue\((.+)\)/assertThat\(\1\).isTrue/g'
```

Then ran the following to see which files I needed to add the new import to
```
hg st | cut -d "" "" -f 2 | xargs ack -L 'org.assertj.core.api.Assertions.assertThat'
```

Reviewed By: linmx0130

Differential Revision: D35067397

fbshipit-source-id: 59e01a31b13f3e2b1022817df1388f753edccdb2""",0.7,None,changed

562,Jawwad Ahmad,jawwad@fb.com,"""Remove the dates next to the versions in CHANGELOG.md since they are not accurate

Summary:
The version headings in the changelog contain a date, but this is actually the date that the version was bumped, not the date it was released so this is misleading

For example, for 13.1.0 it shows 2022-03-14 but this was actually released on 2022-03-21

```
## [13.1.0] - 2022-03-14
```

The dates could be updated to reflect the accurate release dates but it would still be difficult to maintain the correct release date going forward. We generally know what the release date will be (i.e. 7 days in advance) but it may sometimes differ.

Also if someone is interested in looking at actual release dates they can easily see it from the releases page: https://github.com/facebook/facebook-android-sdk/releases

Reviewed By: linmx0130

Differential Revision: D35068377

fbshipit-source-id: 732780f71531969133478e8006873e98cb58bfa0""",0.2,None,changed

563,Mengxiao Lin,mxlin@fb.com,"""Backfill tests for NativeProtocol in parsing bridge error results

Summary:
As title. Backfilling the unit tests for `isErrorResult()`, `getExceptionFromErrorData()` and `getErrorDataFromResultIntent()`.

Also I add missing old platform versions to the known version list.

Reviewed By: jawwad

Differential Revision: D35055546

fbshipit-source-id: e85cd8f93cdf9f9e0bdabf20463fde9638c61a5c""",0.7,None,added

564,Mengxiao Lin,mxlin@fb.com,"""Remove some redundant PrepareForTest annotations

Summary: As title. All the removed `PrepareForTest` annotations won't affect the tests so we can remove them to avoid nonnecessary runtime bytecode modification and make test coverage data more accurate.

Reviewed By: jawwad

Differential Revision: D35060875

fbshipit-source-id: 0386b028d7fdc69f4a2e1651125752466bc84e39""",0.7,None,removed

565,Mengxiao Lin,mxlin@fb.com,"""Make client token mandatory for SDK initialization

Summary: As title. It's reasonable to have a check on the client token during the initialization. And similar to App ID, if no client token is available, we just abort the initialization and crash the app so that the developer will notice it.

Reviewed By: jvlyn

Differential Revision: D35027497

fbshipit-source-id: be227e1860902b1298ee884e214593509e6f7428""",0.7,None,changed

566,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for CodelessMatcher

Summary: As title. To cover `add`, `remove` and `destroy` methods.

Reviewed By: jawwad

Differential Revision: D34796488

fbshipit-source-id: b6c5d03e6bbe4a2005fc0b2e225876e088673369""",0.7,None,added

567,Mengxiao Lin,mxlin@fb.com,"""Single constructor implementation for LoginButton

Summary: The four constructors of LoginButton call the super constructors independently, which makes it hard to add new stuffs to the constructors. Refactor it to use the single one with all paramters.

Reviewed By: jawwad

Differential Revision: D34965310

fbshipit-source-id: bfb253cbc48934cf676112061464db18c6117592""",0.7,None,added

568,Mengxiao Lin,mxlin@fb.com,"""Version bump for v13.1.0

Summary: As title.

Reviewed By: samodom

Differential Revision: D34869456

fbshipit-source-id: a33208436eb1c451f398ffcce30ab48c671bc01f""",0.2,None,changed

569,Mengxiao Lin,mxlin@fb.com,"""Move LoginResultTest.kt to kotlin test directory

Summary: As title. Kotlin tests can only be discovered in kotlin directory.

Reviewed By: roim

Differential Revision: D34836580

fbshipit-source-id: bdbe93d236cf8a6c53e7ab3bda6e141d3cefe5f4""",0.7,None,changed

570,Jawwad Ahmad,jawwad@fb.com,"""Convert AccessTokenTrackerTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34794313

fbshipit-source-id: 4c97d0de983cebd1f41d61dcb801eace562b2b19""",0.7,None,changed

571,Jawwad Ahmad,jawwad@fb.com,"""Update the regex that checks for single expression functions to allow dots

Summary: The return type has been updated to check for things like ""return INSTANCE.immediate"" whereas before it was just ""return \w+"". (It is now ""return [\w\.]+"")

Reviewed By: linmx0130

Differential Revision: D34794772

fbshipit-source-id: fd390eb1bb448fcc3355b3aa8621e274d61a1df6""",0.7,None,changed

572,Jawwad Ahmad,jawwad@fb.com,"""Delete the individual <ModelName>BuilderTest.java files since they are covered by the <ModelName>Test files.

Summary: For example ShareVideoBuilderTest.java isn't needed since the code in it is tested in ShareVideoTest.kt

Reviewed By: linmx0130

Differential Revision: D34776119

fbshipit-source-id: ce74df6d792fe46875a0639e328ee8493f6939eb""",0.7,None,removed

573,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareMessengerActionButton.java to Kotlin

Summary:
Convert facebook-common/src/main/java/com/facebook/share/model/ShareMessengerActionButton.java to Kotlin

Renamed 2 parameters in ShareMessengerURLActionButton.kt due to warnings in Android Studio. Here is one of them:
```
The corresponding parameter in the supertype 'ShareMessengerActionButton' is named 'dest'. This may cause problems when calling this function with named arguments.
```

Reviewed By: linmx0130

Differential Revision: D34775977

fbshipit-source-id: b419b80be169c4e2bd19f0e501bd504de6bcec12""",0.7,None,changed

574,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for ShareMessengerActionButton.java

Reviewed By: linmx0130

Differential Revision: D34775786

fbshipit-source-id: 40086820071ccd10acb0c54d4a6a06de3e27a729""",0.7,None,changed

575,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareStoryContent to Kotlin

Summary: As title. Also backfilled its unit tests.

Reviewed By: jawwad

Differential Revision: D34767298

fbshipit-source-id: 4793754ed89ab778713155b75115a7788e350964""",0.7,None,changed

576,Jawwad Ahmad,jawwad@fb.com,"""Convert LoginResultTest.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34654466

fbshipit-source-id: 0fa9a014e020ae4ff64fc99b656e7d901d0a2557""",0.7,None,changed

577,Mengxiao Lin,mxlin@fb.com,"""Backfill missing tests for AccessTokenManager

Summary:
As title. Added tests for
* immutable flags on pending intent creation
* response handling of token refresh requests

Reviewed By: jawwad

Differential Revision: D34760264

fbshipit-source-id: a22fbebe223fc796dc425f5b2eec78076f36ad15""",0.7,None,added

578,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareDialog to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34694936

fbshipit-source-id: ea4ad527d2e8217239030e221316dd75250b8691""",0.7,None,changed

579,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for ShareDialog

Summary: As title.

Differential Revision: D34665146

fbshipit-source-id: 5567bf29ab139d2149a1bdd4e282850f1e973a8f""",0.7,None,changed

580,Mengxiao Lin,mxlin@fb.com,"""Refactor CodelessManagerTest to avoid PrepareForTest on CodelessManager

Summary: By refactoring the test to avoid nonnecessary runtime byte modification on `CodelessManager`. Also make `checkCodelessSession()` and `isDebugOnEmulator()` private since they're only used in that class.

Reviewed By: jawwad

Differential Revision: D34728053

fbshipit-source-id: 907b4729cc2ab135a0bef60391751e23fc6b9967""",0.7,None,changed

581,Mengxiao Lin,mxlin@fb.com,"""Address URI security vulnerability in ImageResponseCache

Summary:
Following URLs will be treated as CDN URL:
* `fbcdn*.akamaihd.net`
* `fbcdn.net`
* `*.fbcdn.net`

The fake ones like `fakefbcdn.net` will not be allowed.

Reviewed By: jvlyn

Differential Revision: D34732453

fbshipit-source-id: 679b0cf1c52adab562de3075de14cd06690c9675""",0.7,None,security

582,Jawwad Ahmad,jawwad@fb.com,"""Update tests to use checkNotNull in a few places

Reviewed By: linmx0130

Differential Revision: D34657165

fbshipit-source-id: 2616d2c63a4c6aea492a95fbd17370ebaff778d6""",0.7,None,changed

583,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareMessengerURLActionButton.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/ShareMessengerURLActionButton.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34634446

fbshipit-source-id: 26570613183ba4744bad3258be9041b1672c9418""",0.7,None,changed

584,Jawwad Ahmad,jawwad@fb.com,"""Convert CameraEffectArguments.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/CameraEffectArguments.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34623342

fbshipit-source-id: cb6e0ae5cca353066d4ee085e98ec370adf6deb2""",0.7,None,changed

585,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for ShareMessengerURLActionButton.java

Summary: Also fixed parcelization not working due to writeToParcel not being implemented. (It was implemented in it's abstract superclass of ShareMessengerActionButton)

Reviewed By: linmx0130

Differential Revision: D34634421

fbshipit-source-id: 0e26ec5d89f166e9907d1dd6a8714fe1a214586b""",0.7,None,fixed

586,Jawwad Ahmad,jawwad@fb.com,"""Run cleanup_code_formatting.sh for periodic code formatting cleanup

Summary: Converts functions that return a single expression to single-expression functions and adds a blank line above the package statement.

Reviewed By: linmx0130

Differential Revision: D34642013

fbshipit-source-id: 730ffe1d4b01cd5b7406dd803a17890ecadcdfc1""",0.7,None,changed

587,Mike Hardy,github@mikehardy.net,"""Allow AppEventsLogger.setUserID to receive null to clear (#1048)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

allows API to function same as facebook-ios-sdk where sending null
to clearUserID clears it

Fixes https://github.com/facebook/facebook-android-sdk/issues/1047

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1048

Test Plan: code that calls setUserID(null) should compile and work

Reviewed By: jvlyn

Differential Revision: D34646953

Pulled By: linmx0130

fbshipit-source-id: 59be4e4ca350fc0b5a6923f540afe66482ae1155""",0.7,None,added

588,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareMedia to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34593014

fbshipit-source-id: f4ee30127aeeafc9881ce43f4893e593cc50091b""",0.7,None,changed

589,Mengxiao Lin,mxlin@fb.com,"""Deprecate OpenGraph story sharing classes

Summary: OpenGraph stories are rendered as plain feeds from May 2019. They should be replaced by Link/Photo/Video sharing. All OpenGraph actions won't be reflected. So it's time to deprecate them.

Reviewed By: jawwad

Differential Revision: D34622768

fbshipit-source-id: b5b6d2977f9fcc7cd165971372d92122ec978731""",0.7,None,changed

590,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginHandlerTestCase to Kotlin

Summary: As title. Also switch from `before` to use `setup` from `FacebookPowerMockTestCase` to make sure that all setups defined in the super test case types are executed before the setups in the subclass.

Reviewed By: jawwad

Differential Revision: D34619370

fbshipit-source-id: 010b1519da2094f7ba982a5e5a9d51e4144f1c9d""",0.7,None,changed

591,Mengxiao Lin,mxlin@fb.com,"""Move handlePermissionResponse to DeviceAuthDialog

Summary: `Utility.handlePermissionResponse` is only used in handling device auth responses so we can move it to device auth dialog.

Differential Revision: D34535721

fbshipit-source-id: 893f73a8f42fe536a00994bc928c17f27e374f8c""",0.7,None,changed

592,Mengxiao Lin,mxlin@fb.com,"""Migrate DeviceAuthDialog to Kotlin

Summary: As title.

Differential Revision: D34534189

fbshipit-source-id: 777288a5b67c1b0d3e178fa12fe00504f7325f59""",0.7,None,changed

593,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for NativeAppCallAttachmentStore

Summary: As title. Added the test for handling file attachment, `cleanupAttachmentsForCall` and `openAttachment`. Also to create new call id for each test run and switch to use assertj.

Differential Revision: D34586843

fbshipit-source-id: 9e6198fbf95791dc88ff0a60d9100e4b944af67b""",0.7,None,added

594,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for DeviceAuthDialog

Summary:
As title.
In order to make mocking easier, I added a new factory method to GraphRequest to create post request with a bundle parameter.

Reviewed By: jawwad

Differential Revision: D34532187

fbshipit-source-id: c250e9b6837c1e9a2f08f926f6c7762df7c8f868""",0.7,None,added

595,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for ImageResponseCache

Summary: As title. Backfill the tests for creating cache and clearing cache. Also avoid the nonnecessary bytecode modification.

Reviewed By: jawwad

Differential Revision: D34561498

fbshipit-source-id: 0f5532738d28cc7bad41a7143fe6b3bbd6951c84""",0.7,None,changed

596,Omer Strulovich,ostrulovich@fb.com,"""Update ktfmt component on FBS:master

Reviewed By: zertosh

Differential Revision: D34477653

fbshipit-source-id: c57fb5d980e8d2678402e9b35a0cc600f59a4cae""",0.7,None,changed

597,Mengxiao Lin,mxlin@fb.com,"""Avoid crash if webview is not available

Summary:
When Chromium WebView package does not exist (a really rare case, but it may happen on some non-GMS devices), `CookieSyncManager` will throw an exception. Catch this exception to avoid the crash.

Fixes: https://github.com/facebook/facebook-android-sdk/issues/1045

Reviewed By: jawwad

Differential Revision: D34483492

fbshipit-source-id: 85ae65b3d07a990446474d34b2832e2fc6f1159f""",0.7,None,changed

598,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for CameraEffectArguments.java

Reviewed By: linmx0130

Differential Revision: D34479344

fbshipit-source-id: 1341557770c63e263c8bbec500c6e49b06697417""",0.7,None,changed

599,Jawwad Ahmad,jawwad@fb.com,"""Convert CameraEffectTextures.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/CameraEffectTextures.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34411321

fbshipit-source-id: f3c05f95e3f1f756fe5f1406d053aba2e030585a""",0.7,None,changed

600,Mengxiao Lin,mxlin@fb.com,"""Moves bolts classes to the independent package

Summary: As title. It will allow us to decouple these bolts utilities from other parts of the SDKs given that ads/login/sharing features don't need bolts support.

Reviewed By: jawwad

Differential Revision: D34404277

fbshipit-source-id: b784374b7452337a43695445fd164dc027dc96c6""",0.7,None,changed

601,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: f244ba94988aa67c2700cbb84c49353192677322""",0.7,None,changed

602,Jawwad Ahmad,jawwad@fb.com,"""Update to using B for Builder and M for Model (instead of P and E)

Summary: In some places P is used to represent the Model and E for the Builder, in others M and B are used. This makes it consistent so that M and B are used.

Reviewed By: linmx0130

Differential Revision: D34440959

fbshipit-source-id: 054315caf361fc524f7f4c45a31b9481b6e1c7df""",0.7,None,changed

603,Mengxiao Lin,mxlin@fb.com,"""Migrate SharePhoto to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34454850

fbshipit-source-id: 73eb005b262ad28bc83fc79f3c9762d60b82c4c6""",0.7,None,changed

604,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for SharePhoto

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34454338

fbshipit-source-id: 6e63cddf6d4f6e930b9b26dab042a1110b4c53e2""",0.7,None,changed

605,Jawwad Ahmad,jawwad@fb.com,"""Proactively rename variables that represent a Parcel from ""in"" to ""parcel""

Summary: When converting to Kotlin, the ""in"" variable is converted to one that is surrounded with backticks, i.e. ""Parcel in"" -> ""`in`: Parcel"" and so we usually rename this variable to ""parcel"" to avoid having to use backticks. This diff renames all ""in"" variables to ""parcel"" proactively so that we don't have to remember to do this manually.

Reviewed By: linmx0130

Differential Revision: D34440719

fbshipit-source-id: 6b7418f677fbb114c96bb7baf4ced9dfed06603b""",0.7,None,changed

606,Jawwad Ahmad,jawwad@fb.com,"""Rename `in` to parcel and remove a few other redundant backticks

Reviewed By: linmx0130

Differential Revision: D34440644

fbshipit-source-id: 5059c36b195c94681eaee69efd034a1549d217cf""",0.7,None,changed

607,Facebook Community Bot,facebook-github-bot@users.noreply.github.com,"""Ship Kotlin sample app

Co-authored-by: Facebook Community Bot <6422482+facebook-github-bot@users.noreply.github.com>
Co-authored-by: Mengxiao Lin <mxlin@fb.com>""",0.2,None,changed

608,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for CameraEffectTextures.java

Reviewed By: linmx0130

Differential Revision: D34411203

fbshipit-source-id: be96306a3cf60f8a41843288923cf6b168ed4f43""",0.7,None,changed

609,Mengxiao Lin,mxlin@fb.com,"""Migrate LegacyNativeDialogParameters to Kotlin

Summary: As title. Also backfilled the unit tests.

Reviewed By: jawwad

Differential Revision: D34397152

fbshipit-source-id: 0fffc2956013e2099839dfcaca41e81ba78becde""",0.7,None,changed

610,Mengxiao Lin,mxlin@fb.com,"""Avoid redundent byte modification in AccessTokenCacheTest

Summary: As title. Also backfilled the unit test for `AccessTokenCache.SharedPreferencesTokenCachingStrategyFactory`.

Reviewed By: jawwad

Differential Revision: D34399770

fbshipit-source-id: 3881fbd0c00d8faa3bec55dba26ab0872befd9ba""",0.7,None,changed

611,Jawwad Ahmad,jawwad@fb.com,"""Convert AppGroupCreationContent.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/AppGroupCreationContent.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34383410

fbshipit-source-id: 171ac350ffc54fc975507e9ff04bcc5404d279cc""",0.7,None,changed

612,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for AppGroupCreationContent.java

Reviewed By: linmx0130

Differential Revision: D34383157

fbshipit-source-id: 77e3c6368b2a3b0d165f04e435ebfb76c8d5e7fd""",0.7,None,changed

613,Mengxiao Lin,mxlin@fb.com,"""Backfill test for graph object serialization and fix the bug in serializing boolean

Summary: As title. Also fixed the bug that boolean value cannot be correctly recognized for graph object property.

Reviewed By: jawwad

Differential Revision: D34355654

fbshipit-source-id: ab35ffa4fc9b6828479ea22cbd20803632e32b38""",0.7,None,fixed

614,Mengxiao Lin,mxlin@fb.com,"""Migrate NativeDialogParameters to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34279176

fbshipit-source-id: c45019d5d404ad6ee363f36ab2910d933bec937e""",0.7,None,changed

615,Mengxiao Lin,mxlin@fb.com,"""Backfill unit tests for Validate

Summary: As title, backfill unit tests for `hasClientToken()` and `hasCustomTabRedirectActivity()`.

Reviewed By: jawwad

Differential Revision: D34322922

fbshipit-source-id: 79faddd25776adccde26ab23a2f731a6825e57e8""",0.7,None,changed

616,Mengxiao Lin,mxlin@fb.com,"""Backfill and refactor unit test for SessionLogger to avoid byte modification

Summary: As title. Fully refactor the SessionLogger to avoid `whenNew` and `verifyNew`.

Reviewed By: jawwad

Differential Revision: D34290618

fbshipit-source-id: 49e3e40f67964e6e1572a3794c0943b3f330451a""",0.7,None,changed

617,Jawwad Ahmad,jawwad@fb.com,"""Convert ResultProcessor.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/internal/ResultProcessor.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32800474

fbshipit-source-id: 2f5f216d299104d6c1b05269766fae75d23bd569""",0.7,None,changed

618,Jawwad Ahmad,jawwad@fb.com,"""Backfill test for ResultProcessor.java

Reviewed By: linmx0130

Differential Revision: D34264170

fbshipit-source-id: d516dcd2ea4fb15119eea7a0b732cebcad5160ed""",0.7,None,changed

619,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareMediaContent to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34252099

fbshipit-source-id: cd6b061c39f51d159c0092ffd5781ceb9668e61c""",0.7,None,changed

620,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit test ShareMediaContent and bug fix

Summary: As title. Also fixed the bug for parcel code: `Object[]` cannot be casted as `T[]` even all of its elements are `T[]`.

Reviewed By: jawwad

Differential Revision: D34251675

fbshipit-source-id: 23828e2a6e3fadc29f5e3c7ebd78489f6bacbb90""",0.7,None,fixed

621,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareModelBuilder.java to Kotlin

Summary: [ansdk][kt-migration] Convert facebook-common/src/main/java/com/facebook/share/model/ShareModelBuilder.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34256045

fbshipit-source-id: 6284bbdc8c0d2776286d4e7ca1b8ba52961ce01e""",0.7,None,changed

622,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareBuilder.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/ShareBuilder.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34216942

fbshipit-source-id: e373e6b01e2697d777d18cdaa2a8c4d4ced9dff4""",0.7,None,changed

623,Jawwad Ahmad,jawwad@fb.com,"""Move class ShareVideo.java to Kotlin

Summary: [ansdk][kt-migration] Move class facebook-common/src/main/java/com/facebook/share/model/ShareVideo.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34229035

fbshipit-source-id: da6bf09d7e17efd35fc00c03d78bcb80e31375ef""",0.7,None,changed

624,Jawwad Ahmad,jawwad@fb.com,"""Backfill tests for java/com/facebook/share/model/ShareVideo.java

Summary: Backfill tests for java/com/facebook/share/model/ShareVideo.java

Reviewed By: linmx0130

Differential Revision: D34228828

fbshipit-source-id: de08ecc7e796db5f047af6ba57ff2e03f59729ff""",0.7,None,changed

625,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated IAP and IAA API parameters

Summary: These were deprecated in D30281096 (https://github.com/facebook/facebook-android-sdk/commit/5f8ad2d415c02553a26186f1969f9bc81d0334e9) (Aug 12, 2021) and the deprecations would have landed in the 11.3 release.

Differential Revision: D34227363

fbshipit-source-id: 1438320389f639cca04255ac029ded69a761b809""",0.7,None,changed

626,Jawwad Ahmad,jawwad@fb.com,"""Removed deprecated facebook-places code

Summary:
Places Kit was deprecated on 2020-02-14 (See CHANGELOG.md in D19909517 (https://github.com/facebook/facebook-android-sdk/commit/bcc69998649a8b6887c5a22ed1f9147c6e404d30))

Deprecation warnings were added to files in D19898963 (https://github.com/facebook/facebook-android-sdk/commit/3390f0032bb296bbc0a1bd58b54701b1c248de9a) (Feb 13, 2020)

Looks like places was deprecated in Graph API v8.0
https://developers.facebook.com/docs/graph-api/changelog/version8.0/

There was only one dependency that was removed with D34222073.

Reviewed By: linmx0130

Differential Revision: D34199129

fbshipit-source-id: 117e57fce5544fc0149fa7bbd52cdbff98d68a26""",0.2,None,removed

627,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginClient to Kotlin

Summary: As title. Many null pointer problems in the extremely cases are solved.

Reviewed By: jawwad

Differential Revision: D34217608

fbshipit-source-id: 4be4f6bd933aa04b58f27c08841eec5d106b47c0""",0.7,None,changed

628,Mengxiao Lin,mxlin@fb.com,"""Bump version v13.0

Summary: As title. Update CHANGELOG.

Reviewed By: jawwad

Differential Revision: D34222450

fbshipit-source-id: c4b49d6b17c5e25e7535a1a1d9612e56402883a4""",0.2,None,changed

629,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for ProfileManager

Summary: As title. Improve line test coverage of ProfileManager to 100%.

Reviewed By: jawwad

Differential Revision: D34221710

fbshipit-source-id: 9b247d99b9b1a0aa8d7558f0b0174035517fc100""",0.7,None,fixed

630,Jawwad Ahmad,jawwad@fb.com,"""Convert class ShareHashtag.java to Kotlin

Summary: Convert class facebook-common/src/main/java/com/facebook/share/model/ShareHashtag.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32890405

fbshipit-source-id: 8670ebb7a7eb5d0f4722a800436ba401640e1f7c""",0.7,None,changed

631,Jawwad Ahmad,jawwad@fb.com,"""Backfilled unit tests for ShareHashtag

Reviewed By: linmx0130

Differential Revision: D34198387

fbshipit-source-id: ff545571fa3872f62b184e17f981555d0496697a""",0.7,None,changed

632,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated messenger sharing related classes

Summary:
These were originally deprecated in D19396777 (https://github.com/facebook/facebook-android-sdk/commit/ab4f0c8867f40acf204d208af884836c38b935fb) (Jan 14, 2020)

Note: Some classes that were originally deprecated were undeprecated in D20185787 (https://github.com/facebook/facebook-android-sdk/commit/44d67bf19e45b1ff348a2bb598c8ab7fc15b50cb)

- MessengerShareContentUtility was removed completely because all of its private methods ended up being unused.
- Removed unused private methods from ShareContentUtil.java
- Also removed unused public methods from ShareContentUtil.java since its a hackbook internal class

Reviewed By: linmx0130

Differential Revision: D34198895

fbshipit-source-id: 938d982a948769f30ab6fb44fd01fb621b97da3b""",0.7,None,removed

633,Jawwad Ahmad,jawwad@fb.com,"""Convert AccessTokenTracker.java to Kotlin

Summary: Converted facebook-common/src/main/java/com/facebook/AccessTokenTracker.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34198535

fbshipit-source-id: d49ec960a52b5163d0c816ad835d88c825f53261""",0.7,None,changed

634,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated device sharing related classes

Summary: These were deprecated in D22805013 (https://github.com/facebook/facebook-android-sdk/commit/a94bc71d72110270697946ad9048a9ee465ade23) (Jul 28, 2020)

Reviewed By: linmx0130

Differential Revision: D34198656

fbshipit-source-id: 07814da00a92252b76acbcce97a43766cb2a0733""",0.7,None,changed

635,Jawwad Ahmad,jawwad@fb.com,"""Move class Common.java to Kotlin

Summary: Move class facebook-common/src/main/java/com/facebook/common/Common.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D34215081

fbshipit-source-id: e7e17a1ca3f73d31a73cc6adc86b0bd503747364""",0.7,None,changed

636,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated AppInvite classes

Summary: These were originally deprecated in D6117691 (Oct 20, 2017)

Reviewed By: linmx0130

Differential Revision: D34199029

fbshipit-source-id: e7e633cee576367c216ca1615f270e1603723641""",0.7,None,changed

637,Jawwad Ahmad,jawwad@fb.com,"""Complete removal of of deprecated LikeView related code

Reviewed By: linmx0130

Differential Revision: D34198220

fbshipit-source-id: cc7b7afe8ce86e0696e694befd56753dde8e250b""",0.7,None,changed

638,Jawwad Ahmad,jawwad@fb.com,"""Remove @Deprecated from classes that were un-deprecated

Summary: These were undeprecated in D20185787 (https://github.com/facebook/facebook-android-sdk/commit/44d67bf19e45b1ff348a2bb598c8ab7fc15b50cb). The ""deprecated"" was removed from the documentation but the Deprecated annotation was not removed from the class itself.

Reviewed By: roim

Differential Revision: D34198831

fbshipit-source-id: 57c975231cba53ed157bfaabddf0dcd819f939a7""",0.7,None,removed

639,Jawwad Ahmad,jawwad@fb.com,"""Convert Sharer.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/Sharer.java to Kotlin

Reviewed By: roim

Differential Revision: D34198457

fbshipit-source-id: 298559b0664b8b6317a8fa81c42eabe07041aa97""",0.7,None,changed

640,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated deleteDirectory method from Utility.kt

Reviewed By: roim

Differential Revision: D34198805

fbshipit-source-id: 4815da2ebe7b7b7e3adaaa7cd9efa82a8dafed11""",0.7,None,changed

641,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareModel.java to Kotlin

Summary: Converted facebook-common/src/main/java/com/facebook/share/model/ShareModel.java to Kotlin

Reviewed By: roim

Differential Revision: D34198444

fbshipit-source-id: a0126e8d6ef8c8c7b0f27a136d6b1e10f83aad39""",0.7,None,changed

642,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated JoinAppGroupDialog and CreateAppGroupDialog

Summary: These were originally deprecated in D3688643 (Aug 8, 2016)

Reviewed By: roim

Differential Revision: D34199146

fbshipit-source-id: 10db548acdaf7fc2fc6ace9a81ebed217ecf6580""",0.7,None,changed

643,Jawwad Ahmad,jawwad@fb.com,"""Remove deprecated ShareGraphRequest

Summary: Was originally deprecated in D31701648 (https://github.com/facebook/facebook-android-sdk/commit/3f11bf65ea1db1ff42f12c6ef07fb50bd06f8fe5) (Oct 15, 2021) and the commit mentions that this will be removed in v13

Reviewed By: roim

Differential Revision: D34199130

fbshipit-source-id: 55ab94c2d76b8e9f773f2083ae3624fbe5e349a3""",0.7,None,removed

644,Mengxiao Lin,mxlin@fb.com,"""Migrate DeviceAuthMethodHandler to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34060754

fbshipit-source-id: 849ce46ef062dde2a541c91cb15f0b13d3691863""",0.7,None,changed

645,Mengxiao Lin,mxlin@fb.com,"""Migrate CustomTabLoginMethodHandler to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D33797594

fbshipit-source-id: edf370129edf12c1f0e41ab63ec8d99b9c53d143""",0.7,None,changed

646,Mengxiao Lin,mxlin@fb.com,"""Add test for NativeDialogParameters

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34184537

fbshipit-source-id: 7c6699b4a5fe2556add200712b4768abe3980730""",0.7,None,added

647,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for DeviceAuthMethodHandler

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34060027

fbshipit-source-id: 055ee43779610a3c27ce1da6f6febba1c3a28f7c""",0.7,None,changed

648,Xin Wu,xinwu330@fb.com,"""add AD_ID permission to manifest

Summary:
Following Android latest update: Apps with target API level set to 31 (Android 12) or later must declare the normal permission com.google.android.gms.AD_ID as below in the AndroidManifest.xml in order to use this API.

We decide to give permission default from FBSDK, developers can declare `<tools:node=""remove""/>` to remove the permission

Reviewed By: dreamolight

Differential Revision: D32027488

fbshipit-source-id: 8252d4d089df1f6b92e8e8913ee9cee5fc335be5""",0.7,None,added

649,Mengxiao Lin,mxlin@fb.com,"""Refactor FacebookSdkTest to avoid redundent byte modification

Summary: As title. Also backfilled the unit tests on `getApplicationSignature`.

Reviewed By: jawwad

Differential Revision: D34152521

fbshipit-source-id: bd04e0185d2c99d46b272fa8d29ce8b877aa3208""",0.7,None,changed

650,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginManager to Kotlin

Summary:
As title. This change will have small impacts on public API:
1. nullability are confirmed
2. have to make all default setters of the fields private and only expose the setters that return login manager instance to minimize API change.

Reviewed By: jawwad

Differential Revision: D34123191

fbshipit-source-id: a8e59b72a6b57aee61d8b2ae089ab85acda40635""",0.7,None,changed

651,Mengxiao Lin,mxlin@fb.com,"""Migrate NativeAppLoginMethodHandler to Kotlin

Summary: As title. Also backfilled one more unit test.

Reviewed By: jawwad

Differential Revision: D33990209

fbshipit-source-id: bb6e27dd93c61dacc44771be0b83060985cf8b0d""",0.7,None,changed

652,Mengxiao Lin,mxlin@fb.com,"""Fix sharing result handling if post Id is not returned

Summary: It's possible that the sharing succeed but postId is null because the permission is not authorized for obtaining the post ID.

Reviewed By: jawwad

Differential Revision: D34100238

fbshipit-source-id: f902abe1d3e7fc276d5f81f7f385bccfcb6bab9b""",0.7,None,fixed

653,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareLinkContent to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34057025

fbshipit-source-id: 14375423549f43c8778056b1885d7afcb62290b8""",0.7,None,changed

654,Mengxiao Lin,mxlin@fb.com,"""Remove deprecated fields in ShareLinkContent and backfill its test

Summary: `contentDescription`, `contentTitle` and `imageUrl` of `ShareLinkContent` are deprecated from Graph API in v2.9 and the builder won't set it for many years. Now we can remove them from the codebase. Also back filled the unit test for existing fields.

Reviewed By: jawwad

Differential Revision: D34056845

fbshipit-source-id: 124e2b277ee8b199121d49ed2f004d0421f9f474""",0.7,None,changed

655,Mengxiao Lin,mxlin@fb.com,"""Backfill tests for bundle utility methods

Summary: Backfilled unit tests for `putJSONValueInBundle` and `getBundleLongAsDate`. Also simplify `isNullOrEmpty` and `putCommaSeparatedStringList`.

Reviewed By: jawwad

Differential Revision: D34053089

fbshipit-source-id: dbbd402f142f833dd34921b549335d929491ba52""",0.7,None,changed

656,Mengxiao Lin,mxlin@fb.com,"""Upgrade Android Gradle Plugin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D34053770

fbshipit-source-id: 9420c78ed3d752628b0620b70fa047bb5bee9ff5""",0.7,None,changed

657,Mengxiao Lin,mxlin@fb.com,"""Delete com.facebook.referrals from common kit

Summary: Remove all referrals code given that they're deprecated.

Reviewed By: jawwad, ppansy

Differential Revision: D34054159

fbshipit-source-id: 1690e89aa1e90d982d20aa0bd0693de7ef744a84""",0.7,None,removed

658,Mengxiao Lin,mxlin@fb.com,"""Deprecate StartActivityDelegate for referrals

Reviewed By: jawwad

Differential Revision: D34054167

fbshipit-source-id: 6a46d20be7863ec19a7984ca14b83b47760d6c25""",0.7,None,changed

659,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests on PKCE in NativeAppLoginMethodHandler

Summary: Test the code exchange result handling.

Reviewed By: jawwad

Differential Revision: D33988927

fbshipit-source-id: 2ec4e384c02fdc36a07400831b782cd466ba0548""",0.7,None,changed

660,Mengxiao Lin,mxlin@fb.com,"""Fix minor bugs in NativeAppLoginMethodHandler and backfill some tests

Summary:
Backfilled unit tests on receiving cancel result in NativeAppLoginMethodHandler.

Also fixed a potential NPE and the duplicated connection failure handling.

Reviewed By: jawwad

Differential Revision: D33985789

fbshipit-source-id: 2394fac871ed71b4730efafbdc1dd9f96116a414""",0.7,None,fixed

661,Mengxiao Lin,mxlin@fb.com,"""Backfill unit test for NativeProtocol with platform acitvity intent creation

Summary: Backfilling unit tests for `NativeProtocol.createPlatformActivityIntent()` and `NativeProtocol.createProtocolResultIntent()`.

Reviewed By: jawwad

Differential Revision: D34019895

fbshipit-source-id: 67d905b8b970b7fed09f6709df3037e3507111c1""",0.7,None,changed

662,Jin Hou,jinhou@fb.com,"""Force cct and app-switch to TOKEN flow

Summary:
Because PKCE has been delayed to next release. This diff will stop the PKCE feature by forcing implicit flow with TOKEN response type.

NOTE: when we are ready to turn on PKCE, just revert this diff.

Reviewed By: linmx0130

Differential Revision: D34019708

fbshipit-source-id: e4ad272314001d32fcda319b9f2054a6b334c3d4""",0.7,None,added

663,Mengxiao Lin,mxlin@fb.com,"""Avoid byte modification on AppEventQueue in its test

Summary: By using `appEventCollection.addPersistedEvents` as a proxy to verify whether the events are flush to avoid static mock of AppEventQueue to make unit tests robust and accurate.

Reviewed By: jawwad

Differential Revision: D34014106

fbshipit-source-id: 681f4d247da98b0403e330de6150854007debd13""",0.7,None,changed

664,Mengxiao Lin,mxlin@fb.com,"""Remove NativeProtocol.createTokenRefreshIntent

Summary: This method was used to create the service token for refreshing access token. Now the token refreshing is done by a graph API request so we don't need it.

Reviewed By: ppansy

Differential Revision: D33959841

fbshipit-source-id: 61aaaace96e2a691b6de62b0d3e60a52d7c234c8""",0.7,None,changed

665,Mengxiao Lin,mxlin@fb.com,"""Backfilled some unit tests for native protocol

Summary: As title. The backfilled unit tests are about native/service intent creation.

Reviewed By: jawwad

Differential Revision: D33958844

fbshipit-source-id: 1d284e6048f50a3258e3dda403e8fc0a756c61be""",0.7,None,changed

666,Jin Hou,jinhou@fb.com,"""Fix reauth NullPointException crash

Summary: ^

Reviewed By: linmx0130

Differential Revision: D33965931

fbshipit-source-id: ff0cef14ec2d7138ddc6879a7bf9adb8c008e08e""",0.7,None,fixed

667,Mengxiao Lin,mxlin@fb.com,"""Fixed custom tab login failed due to invalid redirect uri

Summary: As title. `validRedirectURI` may be initialized to empty string if the login handler is destroyed. We need to set it when the handler is reloaded from parcel.

Reviewed By: panavenue

Differential Revision: D33949036

fbshipit-source-id: add672dc20419875df572b9119acf10a36d77860""",0.7,None,fixed

668,Mengxiao Lin,mxlin@fb.com,"""Migrate WebLoginMethodHandler to Kotlin

Summary: As title. Some members become public for allowing testing and overriding.

Reviewed By: xiaohaiguicc

Differential Revision: D33796322

fbshipit-source-id: 90fc7817b378ed1503cb2624be18e93cb8c06e2e""",0.7,None,changed

669,Ashton Ondra,ashtono@fb.com,"""Update Assert to assertThat for AuthenticationTokenClaimsTest

Summary: Refactored code so that I could completely remove Assert in favor of `assertThat`

Reviewed By: panavenue

Differential Revision: D33945622

fbshipit-source-id: 224d873e017e622f0831665d71c498cf72fe0369""",0.7,None,changed

670,Jin Hou,jinhou@fb.com,"""Fix network IO on main thread

Summary:
As title. By executing `processCodeExchange` on side threads to avoid network IO on main thread exception without introducing timeout/lock or any other waiting on the main thread.

If the `processCodeExchange` cannot return in a short time, the app will keep waiting as if the login procedure is not complete and the spinner in LoginFragment will also keep rotating.

Reviewed By: alsun2001

Differential Revision: D33851822

fbshipit-source-id: 23c176545377ed29a0213a739920f8de84addc80""",0.7,None,fixed

671,Jin Hou,jinhou@fb.com,"""Fix code verifier and clean code response

Summary:
Fix the following two problems:
1. If there is an exception, it should default back to PLAIN method, with original `code verifier` as the code challenge
2. Remove redundant `response_type` setting

Reviewed By: ppansy

Differential Revision: D33784682

fbshipit-source-id: b13e727fc571d4e56fd0dccb68780da89d7d3b90""",0.7,None,fixed

672,Jin Hou,jinhou@fb.com,"""Back out ""Back out ""[PKCE][ANSDK] Update response type to code on app-switch""""

Summary:
This is revert of the back out

Original commit changeset: 8d26e984bdb1

Original Phabricator Diff: D33556637 (https://github.com/facebook/facebook-android-sdk/commit/e91f0903e72de857b73d6ee02ae3a47687fd633f)

Reviewed By: ppansy

Differential Revision: D33828209

fbshipit-source-id: 898e4152b490367235468846606f96e181aa2845""",0.7,None,changed

673,Jin Hou,jinhou@fb.com,"""Back out ""Back out ""[PKCE][ANSDK] update CCT handler to adapt code exchange""""

Summary:
This is revert of the back out

Original commit changeset: fd620c9e9efb

Original Phabricator Diff: D33556636 (https://github.com/facebook/facebook-android-sdk/commit/e4b2903944ba466b1667e84efbd4251cda485795)

Reviewed By: ppansy

Differential Revision: D33828208

fbshipit-source-id: fb9e8d74d3146fdd9b9c045cab28da5bc9a48c60""",0.7,None,changed

674,Jin Hou,jinhou@fb.com,"""Back out ""Back out ""[PKCE][ANSDK] Add Code Exchange method""""

Summary:
This is revert of the back out

Original commit changeset: f214f9aa0edf

Original Phabricator Diff: D33556634 (https://github.com/facebook/facebook-android-sdk/commit/15bf9c565889fed194342cdc2a83598a060d3347)

Reviewed By: ppansy

Differential Revision: D33828210

fbshipit-source-id: 3d8b876b6e3848b2d7d9c1d9013895ec84a38900""",0.7,None,added

675,Jin Hou,jinhou@fb.com,"""Back out ""Back out ""[PKCE][ANSDK] Add codeverifier and codechallange to request""""

Summary:
This is the revert of the backout

Original commit changeset: 72490f7ec038

Original Phabricator Diff: D33556635 (https://github.com/facebook/facebook-android-sdk/commit/ef23201711ee4c3750be121b3781cff2b73a5b60)

Reviewed By: ppansy

Differential Revision: D33839640

fbshipit-source-id: df16e263681c44f8ae25f6bb66ef2cf0f0a6425a""",0.7,None,added

676,Mengxiao Lin,mxlin@fb.com,"""Refactor to avoid redundant ?.let in corekit

Summary: In Kotlin, `nullableValue?.let {...}` allow the developer to obtain a nonnull reference, but it comes with a small cost of bytecode size. And in many cases, it can be replaced with simpler and more readable ways.

Reviewed By: jawwad

Differential Revision: D33757091

fbshipit-source-id: 66cc3deba45f4afbcaef1ef084a630a7e0cf9c61""",0.7,None,changed

677,Mengxiao Lin,mxlin@fb.com,"""Migrate CustomTabLoginMethodHandlerTest to Kotlin

Summary: As title. Also backfilled the unit tests for onActivityResult

Reviewed By: xiaohaiguicc

Differential Revision: D33754965

fbshipit-source-id: fb06ff28d717f18815315c1b4aca9bd4aa6eeada""",0.7,None,changed

678,Mengxiao Lin,mxlin@fb.com,"""Clean up deprecated utility methods

Summary: As title. Multiple deprecated utility methods on collections are removed.

Reviewed By: jawwad

Differential Revision: D33747335

fbshipit-source-id: 933de199e1e50f822e90c0d3d15c92559714e392""",0.7,None,removed

679,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for GraphRequest.newUploadPhotoRequest

Summary: As title.

Reviewed By: KylinChang

Differential Revision: D33690811

fbshipit-source-id: d2294b22c289fdbfe6eba3b9c35a03435ab774f5""",0.7,None,changed

680,Mengxiao Lin,mxlin@fb.com,"""Remove PerformanceGuardian

Summary: This class is not used by any other classes.

Reviewed By: jawwad

Differential Revision: D33750132

fbshipit-source-id: d93d6634a4711c9c4d7c1ee9d4d106613c15145f""",0.7,None,changed

681,Mengxiao Lin,mxlin@fb.com,"""Deprecate Utility.deleteDirectory

Summary: As title. This method can be replaced by `deleteRecursively()` from the Kotlin standard library.

Reviewed By: jawwad

Differential Revision: D33747645

fbshipit-source-id: be69ba552822fb6b5740903419b0dca452b4ff5e""",0.7,None,changed

682,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginFragment to Kotlin

Summary:
As title. Address some potential NPE.
Also remove a non-necessary let call in FacebookActivity.

Reviewed By: panavenue

Differential Revision: D33714374

fbshipit-source-id: 9c3c563ff6fa7e608a11ae2a51dc86dc3f36cf27""",0.7,None,changed

683,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit test for LoginFragment

Summary: As title. A test activity is created to host the fragment for performing tests with Robolectric.

Reviewed By: KylinChang

Differential Revision: D33699047

fbshipit-source-id: af18ec14720a7a9585a92588792c2392a5420f29""",0.7,None,changed

684,CiCi Cai,cicicai@fb.com,"""migrate WebViewLoginMethodHandler to kotlin

Summary: as title

Reviewed By: linmx0130

Differential Revision: D33271848

fbshipit-source-id: 11c668c7cc3d5356ee0220fcb07bbbd58977c756""",0.7,None,changed

685,Mengxiao Lin,mxlin@fb.com,"""Remove FBLite app info from NativeProtocol

Summary: FBLite login is removed since it was deprecated. Now its app info is useless so it can also be removed.

Reviewed By: jawwad

Differential Revision: D33692499

fbshipit-source-id: 591f24c3c5f2199fa0c6c177837eddf28579c740""",0.7,None,removed

686,Mengxiao Lin,mxlin@fb.com,"""Remove support for skipping the client token

Summary: From v13.0, client token is required. Now it will be an error if the client token is missing. All code to support skipping the client token is removed in this diff.

Reviewed By: joesus

Differential Revision: D33645917

fbshipit-source-id: 53b9d623e301d331677a1f4d89f613aac2ffbbaa""",0.7,None,removed

687,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareInternalUtility to Kotlin

Summary:
As title. Some changes compared to the original code:
1. Add nullable annotations on ResultProcessor
2. Avoid creating lists in `getBackgroundAssetMediaInfo` and `getStickerUrl`
3. Remove `AutoHandleExceptions` so that the explicitly declared exceptions can be thrown out.

Reviewed By: joesus

Differential Revision: D33586658

fbshipit-source-id: 4027269c52cf1d03c16ad2cfdd57f4af87830d27""",0.7,None,added

688,Mengxiao Lin,mxlin@fb.com,"""Update FBLoginSample to use the client token

Summary:
From v13.0, the client token will be required for performing all Graph API calls, including login calls.
Update the login sample to reflect this change.

Reviewed By: jawwad

Differential Revision: D33644742

fbshipit-source-id: 0de29978da754a43af6f1e10738b80a400dfedcf""",0.7,None,changed

689,Mengxiao Lin,mxlin@fb.com,"""Allow to run specfic gradle action on sandcastle

Reviewed By: joesus

Differential Revision: D33570011

fbshipit-source-id: 8fac249aace4f4ad15f917f4d667f29647f5dbba""",0.7,None,changed

690,CiCi Cai,cicicai@fb.com,"""clean fblite login

Summary: The fblite login is dead and can be cleaned. https://fb.workplace.com/groups/1014560598555499/permalink/2324831444195068

Reviewed By: linmx0130

Differential Revision: D32816531

fbshipit-source-id: 18941cd87ca74735b86fe36b64b9fb19167743c4""",0.7,None,changed

691,CiCi Cai,cicicai@fb.com,"""add deprecate annotation to val 'CREATOR'

Summary:
As title
When I want to clean the deprecated `FacebookLiteLoginMethodHandler`, there is an error that i need to deprecate the static val first.

Reviewed By: linmx0130

Differential Revision: D33644697

fbshipit-source-id: 961abb60d24615563f3fcf6a7f1e5483084af4f0""",0.7,None,added

692,Mengxiao Lin,mxlin@fb.com,"""Remove some duplicated notNull checks

Summary: `notNull` is used to do null check in Java, but in most cases Kotlin grammar provides the null check. Remove this redundant checks.

Reviewed By: KylinChang

Differential Revision: D33589156

fbshipit-source-id: 68f6fb469c0a80774a24c18d5482a832f63e3599""",0.7,None,changed

693,Mengxiao Lin,mxlin@fb.com,"""Remove Utility.arrayList method

Summary: As title. This method should be replaced by `arrayListOf` in Kotlin.

Reviewed By: KylinChang

Differential Revision: D33551578

fbshipit-source-id: c580348dd4bed87b73a98d9f31738ff47a2dd3ce""",0.7,None,changed

694,Mengxiao Lin,mxlin@fb.com,"""Compile to Java 8 bytecode

Summary:
Finally, we will compile to Java 8 bytecode in v13.0.0. It will allow us to use new Kotlin compiler backend, reach better performance with functional Java/Kotlin APIs and reduce bytecode size with new `invoke-custom` instruction provided by JVM8+.

All apps that use Facebook Android SDKs should set compile options to support Java 8.

Reviewed By: joesus

Differential Revision: D33517261

fbshipit-source-id: fa6a6cc7a6d65cf768473c1e6810a81bfe4a7fa7""",0.7,None,added

695,Mengxiao Lin,mxlin@fb.com,"""Remove jcenter dependency

Summary:
JFrog is deprecating JCenter.
According to https://blog.gradle.org/jcenter-shutdown, jcenter will stop service on 02/01/2022 so we have to remove the dependency on this repo.

Reviewed By: gwheet

Differential Revision: D33552814

fbshipit-source-id: 3f9006c0e50ba8c659b75849ea7b11569a40cec6""",0.2,None,changed

696,Jin Hou,jinhou@fb.com,"""Back out ""Add codeverifier and codechallange to request""

Summary:
Original commit changeset: f415338c62f7

Original Phabricator Diff: D32331169 (https://github.com/facebook/facebook-android-sdk/commit/77fc00be0eace74f195646a32040a7bdeda135db)

Reviewed By: alsun2001, linmx0130

Differential Revision: D33556635

fbshipit-source-id: 72490f7ec0382f0ccfcce9002e5ba72dfe081d8f""",0.7,None,added

697,Jin Hou,jinhou@fb.com,"""Back out ""Add Code Exchange method""

Summary:
Original commit changeset: dbd9b64a72de

Original Phabricator Diff: D32576172 (https://github.com/facebook/facebook-android-sdk/commit/a368fb8ae199fb2a5eaeab2c05880d537a118e43)

Reviewed By: alsun2001

Differential Revision: D33556634

fbshipit-source-id: f214f9aa0edfbb023e5dca2b69a13fab65ae8099""",0.7,None,added

698,Jin Hou,jinhou@fb.com,"""Back out ""update CCT handler to adapt code exchange""

Summary:
Original commit changeset: 46f294b61c78

Original Phabricator Diff: D32889881 (https://github.com/facebook/facebook-android-sdk/commit/1780052ec332b58732c99e4fb5fd450dee99ec31)

Reviewed By: alsun2001

Differential Revision: D33556636

fbshipit-source-id: fd620c9e9efb4bbb3e7b038e990b1dfcd396ca46""",0.7,None,changed

699,Jin Hou,jinhou@fb.com,"""Back out ""Update response type to code on app-switch""

Summary:
Original commit changeset: 8a9f706081cb

Original Phabricator Diff: D33023140 (https://github.com/facebook/facebook-android-sdk/commit/d076dddb2a470c04b46b0b73f48c91efca58fe03)

reverting this to bandage the issue happens to Aria for now.

Reviewed By: alsun2001

Differential Revision: D33556637

fbshipit-source-id: 8d26e984bdb13107db79c6c41ce948c1b96d0eb4""",0.7,None,changed

700,Jin Hou,jinhou@fb.com,"""Update response type to code on app-switch

Reviewed By: ppansy

Differential Revision: D33023140

fbshipit-source-id: 8a9f706081cbdbf3df0f7b11f646ff97840dc6f9""",0.7,None,changed

701,Jin Hou,jinhou@fb.com,"""update CCT handler to adapt code exchange

Reviewed By: ppansy

Differential Revision: D32889881

fbshipit-source-id: 46f294b61c78f1f458a79a60488057937f875b53""",0.7,None,changed

702,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginLogger to Kotlin

Summary:
As title.
Changes other than migration:
1. Avoid NPE during jsonifying the extra information.
2. Make `newAuthorizationLoggingBundle` private since it's not called from other classes.

Reviewed By: joesus

Differential Revision: D33437667

fbshipit-source-id: 21d74f37e433c87010dd39e5d87afb8e105cf0a6""",0.7,None,changed

703,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for LoginLogger

Summary: As title.

Reviewed By: joesus

Differential Revision: D33435582

fbshipit-source-id: 872bf9f700939e45f7cfb5e13690b010f8e8a3cf""",0.7,None,changed

704,Mengxiao Lin,mxlin@fb.com,"""Migrate StartActivityDelegate to Kotlin

Summary: As title.

Reviewed By: joesus

Differential Revision: D33482439

fbshipit-source-id: afdcecb9e089be9edc6d9f2b6cc4d8a00a3315cc""",0.7,None,changed

705,Mengxiao Lin,mxlin@fb.com,"""Refactor FetchedAppGateKeepersManagerTest to avoid byte modification on FetchedAppGateKeepersManager

Summary: As title. Also removed the redundant `PrepareForTest` on `CallbackManagerImplTest`.

Reviewed By: joesus

Differential Revision: D33461682

fbshipit-source-id: 8993e7a477c45d0d03e44872b2c213ef861f27cc""",0.7,None,changed

706,Mengxiao Lin,mxlin@fb.com,"""Refactor AttributionIdentifiersTest to avoid byte modification on AttributionIdentifiers

Summary: As title. Also add the test for the flow of obtaining attribution id from katana provider.

Reviewed By: joesus

Differential Revision: D33416811

fbshipit-source-id: d1d78d613cc9fa56300f8806b1b5f8bddf79b690""",0.7,None,changed

707,Jin Hou,jinhou@fb.com,"""Add Code Exchange method

Reviewed By: ppansy

Differential Revision: D32576172

fbshipit-source-id: dbd9b64a72debe5060779fd9e768da14a9312506""",0.7,None,added

708,Jin Hou,jinhou@fb.com,"""Add codeverifier and codechallange to request

Reviewed By: ppansy

Differential Revision: D32331169

fbshipit-source-id: f415338c62f7e504c59ffe7c8bc7f6a3fe9903d9""",0.7,None,added

709,Jin Hou,jinhou@fb.com,"""Add Code Challenge

Reviewed By: linmx0130

Differential Revision: D32337674

fbshipit-source-id: 7f732a7aa319ae3147d4d943d8f95948a07234ed""",0.7,None,added

710,Mengxiao Lin,mxlin@fb.com,"""Move dumpsys out of Corekit

Reviewed By: jvlyn

Differential Revision: D33353068

fbshipit-source-id: 4d9e9ac5c168c1481c94123beffb7810e61623b0""",0.7,None,changed

711,Mengxiao Lin,mxlin@fb.com,"""Android SDK v12.3.0 release

Reviewed By: samodom

Differential Revision: D33413146

fbshipit-source-id: 8f67790b04e6baa9029771adc2d5d5b6a38a1a49""",0.7,None,changed

712,Mengxiao Lin,mxlin@fb.com,"""Set classloader before loading login result

Summary:
Bug reported by [issue #1032](https://github.com/facebook/facebook-android-sdk/issues/1032). It's highly likely that after the activity is restored, the class loader for loading the intent cannot recognize `LoginClient.Result`.

According to https://developer.android.com/reference/android/os/Bundle#getParcelable(java.lang.String), we need to call `setClassLoader` before call `getParccelable`. `setExtrasClassLoader` and `getParcelableExtra` are the methods on `Intent` to simplify operations on extras bundle.

Reviewed By: panavenue

Differential Revision: D33372657

fbshipit-source-id: 42d14467b4af38e2df5d4797054a8649e53f69f2""",0.7,None,fixed

713,Mengxiao Lin,mxlin@fb.com,"""Validate.notNullOrEmpty returns nonnull value

Summary:
We use `notNullOrEmpty` to validate the values from parcel in dealing with access tokens. However, the original `notNullOrEmpty` cannot hint the Kotlin compiler that the value will be nonnull after the validation, so we have to add `checkNotNull` to make the Kotlin compiler happy. This call will add a redundant null check.

By allowing `notNullOrEmpty` to return the nonnull value, we can remove `checkNotNull` following the `notNullOrEmpty`.

Reviewed By: jvlyn

Differential Revision: D33341826

fbshipit-source-id: 4b155f0de426bbdaddc4482f705fa9fd1964dc7d""",0.7,None,added

714,Mengxiao Lin,mxlin@fb.com,"""Add fields params for access token GET requests

Reviewed By: xiaohaiguicc

Differential Revision: D33370444

fbshipit-source-id: cd60b9b423c0d01fe11686174728ff71cf7393f3""",0.7,None,added

715,Mengxiao Lin,mxlin@fb.com,"""Remove GraphRequest.shouldWarnOnMissingFieldsParam since it's always true

Summary:
`GraphRequest.shouldWarnOnMissingFieldsParam()` will return true if the request is for Graph API v2.4+. The minimal graph API version now is v5.0 so it will always return true. No need to keep this function.

Also changed the constants of ""fields"" to use the only ground truth value from `GraphRequest`.

Reviewed By: xiaohaiguicc

Differential Revision: D33370445

fbshipit-source-id: b71872ef5dbc2d39b3e9c3973c4c9d0f7a693a8c""",0.7,None,changed

716,Mengxiao Lin,mxlin@fb.com,"""Backfill unit test for ShareInternalUtility and convert tests to Kotlin

Summary: As title. Also add the code to issue an error if post id is not received after sharing to avoid crash and allow the developers to handle it as other errors.

Reviewed By: joesus

Differential Revision: D33288280

fbshipit-source-id: c8b04e0db5c53778ff31b2d98315fcd37f074e80""",0.7,None,added

717,CiCi Cai,cicicai@fb.com,"""migrate WebViewLoginMethodHandlerTest to kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D33271850

fbshipit-source-id: b9cbffd46a3a8a3e3575714f47157721f6b915b8""",0.7,None,changed

718,Mengxiao Lin,mxlin@fb.com,"""Deprecate Mapper/Deprecate types

Summary: Since these two types are only for `Utility.map`/`Utility.filter`, they should be deprecated and replaced by the closures from Kotlin or Java 8 stream APIs. We will remove it in future major releases.

Reviewed By: xiaohaiguicc

Differential Revision: D33340433

fbshipit-source-id: 8dcc4e80bb71c6a54831069fca4849f8e04b70f7""",0.7,None,changed

719,Mengxiao Lin,mxlin@fb.com,"""Backfill test for WebLoginMethodHandler

Summary: As title. Prepare for migration.

Reviewed By: CFFChi

Differential Revision: D33194036

fbshipit-source-id: e623c5d02351f9ce29158495e43ac5160fd309a5""",0.7,None,changed

720,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for GraphRequest.serializeToUrlConnection

Summary:
As title. This diff tests `serializeToUrlConnection` with
1. 2 requests in a batch
2. One post request with serialization of attachment

During the migration of `GraphRequest`, the problem in this function causes a failure for some gaming services features. It's extremely important but hard to test. These unit tests will add a safeguard on this important function.

Reviewed By: xiaohaiguicc

Differential Revision: D33121265

fbshipit-source-id: 13b6ed525076cb8bdc513407fc0d1c5a37667a19""",0.7,None,added

721,CiCi Cai,cicicai@fb.com,"""Migrate InstagramAppLoginMethodHandler to kotlin

Summary: as title

Reviewed By: linmx0130

Differential Revision: D33245105

fbshipit-source-id: b4065138b10f0f1dd8773c9ea212b75250c192b4""",0.7,None,changed

722,Mengxiao Lin,mxlin@fb.com,"""Remove Kotlin usage of internal collection utility methods

Summary: Replacing these utility methods with the ones from Kotlin standard library.

Reviewed By: xiaohaiguicc

Differential Revision: D33282205

fbshipit-source-id: bd12aa4f976cdc4959b25ac9f719810cda439d47""",0.7,None,changed

723,CiCi Cai,cicicai@fb.com,"""Add unit test for InstagramAppLoginMethodHandler.java

Summary: As title

Reviewed By: linmx0130

Differential Revision: D33244664

fbshipit-source-id: 57b36c4346d94b21c7da2e95552940b06889bb50""",0.7,None,added

724,Mengxiao Lin,mxlin@fb.com,"""Deprecate utility methods that are not used or replaceable by kotlin stdlib

Summary: As title, some utility functions are not used and some can be replaced by functions provided by Kotlin standard libraries. In the future versions we can remove them.

Reviewed By: jamestouri

Differential Revision: D33245136

fbshipit-source-id: 639900b749c295b0ead74449784f41253cda45a2""",0.7,None,changed

725,Omer Strulovich,ostrulovich@fb.com,"""Replace Kotlin import aliases for when with mockito-kotlin2 whenever

Summary: We consistently use mockito-kotlin2, so let's remove these cases.

Reviewed By: ermattt

Differential Revision: D33267274

fbshipit-source-id: db3c65db34b63cc0bdd8f16bd3b3a04ca85a9f0e""",0.7,None,changed

726,Jawwad Ahmad,jawwad@fb.com,"""Convert GetTokenLoginMethodHandler.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D33052488

fbshipit-source-id: b8021f89bcfe117b85ca69d59b21d5d96e1eb341""",0.7,None,changed

727,Mengxiao Lin,mxlin@fb.com,"""Extract construction of InternalAppEventsLogger

Summary:
TL;DR: in order to get accurate test coverage data, we need to avoid `PowerMockito.whenNew` to mock the construction of an object. This diff replaced the constructions of InternalAppEventsLogger with new factory methods.

PowerMockito is **not compatible** with Jacoco, the tool for obtaining test coverage.

The root cause is that PowerMockito will do bytecode level operations to replace the class to be mocked. Generally it's fine because we don't treat the replaced code as part of the ""covered code"". The problem is how PowerMockito implement `whenNew`. It will manipulate the classes who create the objects, rather than the classes whose objects are created.

For example, we have a class A. It creates an object of class B with B's constructors. We wish to mock the class B. What we need to declare in `PrepareForTest(...)` is A rather than B. The class A will be modified during the runtime.

`InternalAppEventsLogger` is the common class B in our codebase. A lot of classes create a logger instance to implicitly send the log to AppEvents. In order to test the logging behaviors, we have to mock `InternalAppEventsLogger`, which in fact modifies the classes being tested in the runtime. This procedure blocks Jacoco to get correct test coverage data.

By adding a factory function, we can simply mock the companion object of `InternalAppEventsLogger` and return a mock logger during the tests.

Another approach is to do real dependency injection like what we do for iOS: adding a `InternalAppEventsLoggerProvider` to do all these stuffs. It's something we may need to do if we move AppEvents out of the core kit. Since code coverage will be an important metric for our team in the next half, I would like to fix it with an easy approach and do BE stuffs during the lightweight SDKs project is executed.

One reason I hesitate to do real dependency injection in Android SDK is because unlike iOS where we can control whether to include a method (declaration) in the binary with C macros, any setters will be kept in the binary code. There's no any forms of conditional compilation in the whole Java/JVM/Android ecosystems... The result is that we will have a huge bunch of setters merely for testing remaining in the generated bytecode. The tradeoff between testability and binary size is hard.

Reviewed By: jawwad

Differential Revision: D32749218

fbshipit-source-id: 80f3958f17ace9ad018d8a51a12e283e102a8e39""",0.2,None,added

728,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareOpenGraphObject.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/model/ShareOpenGraphObject.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32926578

fbshipit-source-id: 2a24e6c11a93b9723a72a74776f416b9a5ab4c6c""",0.7,None,changed

729,Jin Hou,jinhou@fb.com,"""Fix Reauth flow

Reviewed By: jvlyn

Differential Revision: D33113797

fbshipit-source-id: dab5d4454e1f17da3374a5ee19ea411248de5968""",0.7,None,fixed

730,Jawwad Ahmad,jawwad@fb.com,"""Add command to cleanup_code_formatting.sh to ensure a blank line above the package statement

Reviewed By: joesus

Differential Revision: D33103094

fbshipit-source-id: 6ed89d62b05fb7ebd0bf4a4accb4de2e25c69edc""",0.7,None,added

731,Jawwad Ahmad,jawwad@fb.com,"""Convert WebDialogParameters.java to Kotlin

Summary: After the conversion, removed a few null checks that weren't needed since the putNonEmptyString method can handle null types

Reviewed By: linmx0130

Differential Revision: D33052258

fbshipit-source-id: 6c767a9ef5a3cda003dde0442fd97a92a08c9ca3""",0.7,None,removed

732,Jawwad Ahmad,jawwad@fb.com,"""Add WebDialogParametersTest to backfill tests for WebDialogParameters

Reviewed By: linmx0130

Differential Revision: D33052197

fbshipit-source-id: 8aeb064d8fe4209564dfebdc5eb07cac35e53464""",0.7,None,added

733,Mengxiao Lin,mxlin@fb.com,"""Migrate CustomTabMainActivity to Kotlin

Summary: As title.

Reviewed By: jawwad, jvlyn

Differential Revision: D33063755

fbshipit-source-id: badccbe66b3dba4db148b61633fe7de9a5e966d7""",0.7,None,changed

734,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareFeedContent to Kotlin

Summary: As title.

Reviewed By: jawwad

Differential Revision: D33024989

fbshipit-source-id: eb647510f7731f2177d86621e0f9bb59cefe0012""",0.7,None,changed

735,Mengxiao Lin,mxlin@fb.com,"""Remove construction dependency of GraphRequest in Utility

Summary: As title. Remove the construction dependency to avoid PowerMockito modification on Utility class when testing.

Reviewed By: jvlyn

Differential Revision: D33034444

fbshipit-source-id: 9fdf42cbc9d8bd5ab164f40ebf69d67dafc828e5""",0.2,None,changed

736,Mengxiao Lin,mxlin@fb.com,"""Backfill test for ShareFeedContent

Summary: As title.

Reviewed By: jawwad

Differential Revision: D33023837

fbshipit-source-id: cc3a102ce33c78be2536257977e377292d9ab123""",0.7,None,changed

737,Mengxiao Lin,mxlin@fb.com,"""Migrate SharePhotoContent to Kotlin and backfill its tests

Summary: As title. The field `photos` is changed to nonnull because it's impossible to be null.

Reviewed By: jawwad

Differential Revision: D33075579

fbshipit-source-id: 19c2a76e84326292395dc9db920ad183a9289464""",0.7,None,changed

738,Mengxiao Lin,mxlin@fb.com,"""Refactor ViewObserverTest to avoid non-necessary mock

Summary: As title. By doing so the unit test of `ViewObserver` can avoid bytecode modification on the class to be tested.

Reviewed By: jawwad

Differential Revision: D33051481

fbshipit-source-id: 6fac8c733f3cd8e80123f8bfc97dc75143b3839f""",0.7,None,changed

739,Jawwad Ahmad,jawwad@fb.com,"""Convert functions that return a single expression to single-expression functions

Summary:
Ran the following command to perform the cleanup:
```
find . -name '*.kt' -print0 | xargs -0 perl -0777 -pi -e 's/(fun.*) {\n\s*return (\w+)\n\s*}/\1 = \2/g'
```

Also added the command to a scripts/cleanup_code_formatting.sh file that contains the command that I used so that we can occasionally run it to clean up formatting that ktfmt doesn't take care of.

It will run on the files in the directly where it is run from, however if it is run from scripts, it will ""cd .."" first to run from the base directory.

```
scripts/cleanup_code_formatting.sh // will run on complete repo since its run from root
cd scripts; cleanup_code_formatting.sh // will also run on complete repo since it's run from scripts
cd facebook-common; ../scripts/cleanup_code_formatting.sh // will only run on files in facebook-common
```

Reviewed By: linmx0130

Differential Revision: D33051847

fbshipit-source-id: fdcb5e65a222ad3e8096abbb3a5ae5fdde48a5a7""",0.7,None,added

740,Jawwad Ahmad,jawwad@fb.com,"""Replace wildcard imports with explicit imports in a few kotlin files

Summary:
Found a few files that had wildcard imports with the help of a kotlin linter named ktlint
https://github.com/pinterest/ktlint

After `brew install ktlint` ran the following command to exclude the ads dir and to also disable all other violations other than the no-wildcard-imports rule

ktlint '**/*.kt' '!ads/**' --disabled_rules=import-ordering,indent,string-template,no-unused-imports,parameter-list-wrapping,comment-spacing

Then manually corrected the wildcard imports in these files

Reviewed By: linmx0130

Differential Revision: D33051370

fbshipit-source-id: 8effcb6ab087212da05bb5c9bbd1af2f04712e67""",0.7,None,removed

741,Jawwad Ahmad,jawwad@fb.com,"""Convert KatanaProxyLoginMethodHandler.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/login/KatanaProxyLoginMethodHandler.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32928504

fbshipit-source-id: 36b10497649116a83dc3d523c9b6dc8f7ca4834f""",0.7,None,changed

742,Mengxiao Lin,mxlin@fb.com,"""Migrate ShareVideoContent to Kotlin

Summary: As title. Also update the super class to allow null for `readFrom` on the builder.

Reviewed By: jawwad

Differential Revision: D32942060

fbshipit-source-id: b290469e45159855dd7d131aa61cbf4ba318061a""",0.7,None,changed

743,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for ShareVideoContentTest

Summary: As title.

Reviewed By: jawwad

Differential Revision: D32932795

fbshipit-source-id: 4686a45f541af3266908144391428569a2be5c5d""",0.7,None,changed

744,Jawwad Ahmad,jawwad@fb.com,"""Convert GetTokenClient.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/login/GetTokenClient.java to Kotlin

Reviewed By: joesus

Differential Revision: D32922881

fbshipit-source-id: 88e828572f9461b8e9af77ffc2b8f9da877e69b1""",0.7,None,changed

745,Jawwad Ahmad,jawwad@fb.com,"""Convert LoginStatusClient.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/login/LoginStatusClient.java to Kotlin

Reviewed By: joesus

Differential Revision: D32923978

fbshipit-source-id: 2e2da2f8ceace95af6795f651faef312a607c5d1""",0.7,None,changed

746,Mengxiao Lin,mxlin@fb.com,"""Refactor AccessTokenManager to remove construction dependency on GraphRequest

Summary: As title. This diff refactors to avoid calling the constructors of `GraphRequest` directly. By using the existing `newGraphPathRequest`, we can create the exactly same requests without adding a new factory method.  Then it allows unit test coverage data to be computed correctly and the unit tests are easier to maintain.

Reviewed By: panavenue

Differential Revision: D32925457

fbshipit-source-id: 88731d2a8040ef9626b33b7c0cebd8ffef6be943""",0.2,None,changed

747,Jawwad Ahmad,jawwad@fb.com,"""Convert FacebookAuthorizationException.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/FacebookAuthorizationException.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32920262

fbshipit-source-id: c7b3f22bf15d925abd58867f0c55858d7e3964f9""",0.7,None,changed

748,CiCi Cai,cicicai@fb.com,"""add deprecate annotation to fblite login

Summary:
The fblite login is dead and can be cleaned. https://fb.workplace.com/groups/1014560598555499/permalink/2324831444195068

This diff is to add deprecated annotation. Code will be cleaned after 60 days.

Reviewed By: linmx0130

Differential Revision: D32890307

fbshipit-source-id: 2250a092358087d4396815f6e6e3b280442f86ac""",0.7,None,added

749,Jawwad Ahmad,jawwad@fb.com,"""Convert LikeStatusClient.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/internal/LikeStatusClient.java to Kotlin

Reviewed By: joesus

Differential Revision: D32874763

fbshipit-source-id: bd6537c52db12cd418af3ecb62e0516ef4a75f94""",0.7,None,changed

750,Mengxiao Lin,mxlin@fb.com,"""Call application requests through app node with client token

Summary: Preparing for v13.0 tokenless requests deprecation. This diff removes all SDK internal calls to skip client token.

Reviewed By: jawwad

Differential Revision: D32874931

fbshipit-source-id: d4f5af1ba221f0fb1b4a666fd42bf8f7d03555ce""",0.7,None,changed

751,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareDialogFeature.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/internal/ShareDialogFeature.java to Kotlin

Reviewed By: joesus

Differential Revision: D32874896

fbshipit-source-id: a5d51d28b215bcf874b7512ea8c5171950095773""",0.7,None,changed

752,Mengxiao Lin,mxlin@fb.com,"""Migrate CustomTabPrefetchHelper to Kotlin

Summary: As title. With kotlin, potential NPEs on concurrent execution on this class is eliminated.

Reviewed By: jawwad

Differential Revision: D32803450

fbshipit-source-id: 0cbbce57ee217eae7090d0195e81b75a219081ac""",0.7,None,changed

753,CiCi Cai,cicicai@fb.com,"""Migrate FacebookLiteLoginMethodHandlerTest to Kotlin

Summary: as title

Reviewed By: panavenue

Differential Revision: D32744726

fbshipit-source-id: a9060a341c2a768a3e804a01af85f17e51afd0ca""",0.7,None,changed

754,CiCi Cai,cicicai@fb.com,"""Migrate FacebookLiteLoginMethodHandler to Kotlin

Summary: As title ^

Reviewed By: linmx0130

Differential Revision: D32710941

fbshipit-source-id: 937bad885cad1f1ccc1175fca7b1cb18eac3e188""",0.7,None,changed

755,Jawwad Ahmad,jawwad@fb.com,"""Convert LikeDialogFeature.java to Kotlin

Summary: Convert facebook-common/src/main/java/com/facebook/share/internal/LikeDialogFeature.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32780082

fbshipit-source-id: ebd57295005d8976b3147e37f801bb0b88adb214""",0.7,None,changed

756,Mengxiao Lin,mxlin@fb.com,"""Add test for CustomTabPrefetchHelper

Summary: As title. Also backfilled the comments and added lock to protect any accesses to the stored session to avoid NPE caused by race conditions.

Reviewed By: panavenue

Differential Revision: D32706126

fbshipit-source-id: e7f60567fcd391ac8905b6669281c15ea980f740""",0.7,None,added

757,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareStoryFeature.java to Kotlin

Summary: Converted facebook-common/src/main/java/com/facebook/share/internal/ShareStoryFeature.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32769574

fbshipit-source-id: 74c26c9db19436d31c1873fa8e658818280f61eb""",0.7,None,changed

758,Jawwad Ahmad,jawwad@fb.com,"""Convert OpenGraphActionDialogFeature.java to Kotlin

Summary: Converted class facebook-common/src/main/java/com/facebook/share/internal/OpenGraphActionDialogFeature.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32770810

fbshipit-source-id: f702e9bc016786b91fc679f8a284badcda0f53ef""",0.7,None,changed

759,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareConstants.java to Kotlin

Summary: Convert class facebook-common/src/main/java/com/facebook/share/internal/ShareConstants.java to Kotlin

Reviewed By: linmx0130

Differential Revision: D32771486

fbshipit-source-id: e788d9ab2b9e594f35a37ed4e25193fe896afe58""",0.7,None,changed

760,Jawwad Ahmad,jawwad@fb.com,"""Convert ShareContentValidation.java to Kotlin

Summary: Simple conversion, no logic changes

Reviewed By: linmx0130

Differential Revision: D32736910

fbshipit-source-id: 33b0b4b276e209d22a178c44b5574f32009b7820""",0.7,None,changed

761,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for GraphRequestBatchTest

Summary: As title. Backfilled the unit tests for `clear`, `removeCallback`, `add` and the copy constructor. Also changed to use `assertThat`.

Reviewed By: xiaohaiguicc

Differential Revision: D32701582

fbshipit-source-id: f6d7da78e14b490c676899b1415334f3ab9f2394""",0.7,None,added

762,Mengxiao Lin,mxlin@fb.com,"""Fix gradle test for core

Summary: As title.

Reviewed By: wx0165927473, KylinChang

Differential Revision: D32730106

fbshipit-source-id: 39bb7ff5685e57f87979b15908393c694e1e3e21""",0.7,None,fixed

763,Mengxiao Lin,mxlin@fb.com,"""Add test for CustomTabMainActivity

Summary: As title.

Reviewed By: panavenue

Differential Revision: D32653131

fbshipit-source-id: f52458b3cdaee8feab16753d836652437b3ec98a""",0.7,None,added

764,Mengxiao Lin,mxlin@fb.com,"""Android SDK v12.2 release

Summary: As title.

Reviewed By: samodom

Differential Revision: D32700943

fbshipit-source-id: 0ff3dcb771852feebc2c7997cabb3110c9a4da62""",0.7,None,changed

765,Jin Hou,jinhou@fb.com,"""Fix redirect_uri format

Reviewed By: xiaohaiguicc

Differential Revision: D32701259

fbshipit-source-id: d7a9823f480658d94d8e42821b33524d7080698d""",0.7,None,fixed

766,Xin Wu,xinwu330@fb.com,"""add unit tests

Summary: Added unit tests for new added logic in D31840000 (https://github.com/facebook/facebook-android-sdk/commit/264e426a0cbd453d597f05a02f9714b15b659d06), D32014628 (https://github.com/facebook/facebook-android-sdk/commit/585137bbaeecafe0bc7e212b16355df9f2dd25e7) and D32570680 (https://github.com/facebook/facebook-android-sdk/commit/2efbc267c131b37f3eed102b05adced1a350852d).

Reviewed By: linmx0130

Differential Revision: D32601062

fbshipit-source-id: a1a62e50e437c6408a7b3b28851a9d4aeda694e6""",0.7,None,added

767,Al Tirba,altirba@fb.com,"""Add Tournaments to Payload

Summary: This adds the logic to parse a in-app intent and set the gaming payload if we get a tournament_id.

Reviewed By: joeymrios

Differential Revision: D32605200

fbshipit-source-id: 80d84b97cbb0329f10f6eb9c90d7d61f1968d186""",0.7,None,added

768,Xin Wu,xinwu330@fb.com,"""add isGMS check for latest Google play store service update

Summary: If the app is not using GMS, it doesn't need to comply with google play store service update

Reviewed By: linmx0130

Differential Revision: D32570680

fbshipit-source-id: f39893bc102269daaf1aa56c9c4b1927436e9434""",0.7,None,added

769,Xin Wu,xinwu330@fb.com,"""update sending anon_id under new play store policy

Summary:
See detail in D31840000 (https://github.com/facebook/facebook-android-sdk/commit/264e426a0cbd453d597f05a02f9714b15b659d06)

In this diff, we are doing the same for anon_id

Reviewed By: linmx0130

Differential Revision: D32014628

fbshipit-source-id: 01106b9a26f4bdddb8fb27f25731580f7c4c73b3""",0.7,None,changed

770,Mengxiao Lin,mxlin@fb.com,"""Migrate LoginMethodHandler to Kotlin

Summary: Migrate LoginMethodHandler into Kotlin. Also address some nullability problems.

Reviewed By: xiaohaiguicc

Differential Revision: D32470786

fbshipit-source-id: 767beb8acb0e5961ad74f596cc165dd8bc041eea""",0.7,None,changed

771,Zilin Zhang,kylinchang@fb.com,"""Add DPO to crash/error report

Summary: We previously didn't add DPO to crash/error reports and we need to fix that

Reviewed By: robhuang

Differential Revision: D32457659

fbshipit-source-id: 8ff3bc6e9d007fb24cd36763371edd3296dd9b8b""",0.7,None,added

772,Mengxiao Lin,mxlin@fb.com,"""Backfilled test for LoginMethodHandler

Summary: As title.

Reviewed By: panavenue

Differential Revision: D32443287

fbshipit-source-id: 0ce04b14391c6f1bf8112c444df283c55d253012""",0.7,None,changed

773,Jin Hou,jinhou@fb.com,"""Add code verifier to login config

Reviewed By: ppansy

Differential Revision: D32263033

fbshipit-source-id: b90e4a2824c3e20af6b7bbf4ca63276a9227308d""",0.7,None,added

774,Mengxiao Lin,mxlin@fb.com,"""Migrate PlatformServiceClient to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32331582

fbshipit-source-id: 517fd390f57f3da1e5d0f710c0ed73929a9d6bd1""",0.7,None,changed

775,Mengxiao Lin,mxlin@fb.com,"""Add test for PlatformServiceClientTest

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32299429

fbshipit-source-id: 3a6f0159d1069ba395160e22677fcc4e0f0f4d04""",0.7,None,added

776,Jin Hou,jinhou@fb.com,"""Add PKCEUtil class and Unit test

Reviewed By: linmx0130

Differential Revision: D32188599

fbshipit-source-id: 5b40837f118d90a7a456dcfe7a97d05220286388""",0.7,None,added

777,Jing Ping,jingping@fb.com,"""Migrate ShareContent to Kotlin

Reviewed By: linmx0130

Differential Revision: D32143178

fbshipit-source-id: b1dde16f7fd9444463e36780144f0323e274d3cc""",0.7,None,changed

778,Mengxiao Lin,mxlin@fb.com,"""Migrate CameraEffectJSONUtility to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32110430

fbshipit-source-id: 7c05a85db996a241c70210634cb74f5ba90b2451""",0.7,None,changed

779,Mengxiao Lin,mxlin@fb.com,"""Migrate CustomTabActivity to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32146950

fbshipit-source-id: cfa18838b4c3ba6d0da0c2b9cf34f504e9f57704""",0.7,None,changed

780,Mengxiao Lin,mxlin@fb.com,"""Backfilled tests for CustomTabActivityTest

Summary: As title. The unit test is built against robolectric. Also fix a potential NPE.

Reviewed By: jingping2015

Differential Revision: D32146382

fbshipit-source-id: a9aa46a2b02c909358c65828ce32d90d0648b891""",0.7,None,fixed

781,Jing Ping,jingping@fb.com,"""Fix the NPE in FacebookDialogBase

Reviewed By: linmx0130

Differential Revision: D32149952

fbshipit-source-id: 8279ede90cae442bab4e0e2e391fad3392023668""",0.7,None,fixed

782,Jing Ping,jingping@fb.com,"""Backfill test for ShareContent

Reviewed By: linmx0130

Differential Revision: D32141727

fbshipit-source-id: 1fab5334139f8e4d6499be03918561abf28b1eac""",0.7,None,changed

783,Pansy Pan,pansy0419@fb.com,"""Fix NullPointerException in WebDialog

Reviewed By: linmx0130

Differential Revision: D32147362

fbshipit-source-id: 0335a884d68a4d6b3d6eff98de86c9382e305040""",0.7,None,fixed

784,Mengxiao Lin,mxlin@fb.com,"""Backfilled tests for CameraEffectJSONUtility

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32109956

fbshipit-source-id: e01a36d2cbd53eff958124000b2380101e298f70""",0.7,None,changed

785,Mengxiao Lin,mxlin@fb.com,"""Backfill test for MetadataMatcher.matchValue

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32107014

fbshipit-source-id: 49997b3fe60a1d7cfaff6de2dea6ca943588f5ca""",0.7,None,changed

786,Aleksei Sazonov,sazonovale@fb.com,"""replace Assert with assertThat

Summary:
replacing less readable
`Assert.assertEquals(actual, expected)` with more readable `assertThat(what).isEqualTo(something)`

Reviewed By: panavenue, linmx0130

Differential Revision: D32108888

fbshipit-source-id: 1b5a1c62b0c4d28ed1139704115af8f20185900d""",0.7,None,changed

787,Mengxiao Lin,mxlin@fb.com,"""Migrate CameraEffectFeature to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32075010

fbshipit-source-id: 25cdab7d585d0751027f4a2a7ba77f3dfb08898a""",0.7,None,changed

788,Jing Ping,jingping@fb.com,"""Migrate FacebookWebFallbackDialog to Kotlin

Reviewed By: linmx0130

Differential Revision: D32041985

fbshipit-source-id: c8955cd38b09863419a1a6e4619ab469502cbc58""",0.7,None,changed

789,Jing Ping,jingping@fb.com,"""backfill test for FacebookWebFallbackDialog

Reviewed By: linmx0130

Differential Revision: D32038358

fbshipit-source-id: d4d523354422a010a87e71b66c48cb27310983f6""",0.7,None,changed

790,Mengxiao Lin,mxlin@fb.com,"""Backfilled tests for UserSettingManager

Summary: As title. Backfilled tests for UserSettingManager and mock FacebookSdk in the test to avoid potential problems.

Reviewed By: jingping2015

Differential Revision: D32069616

fbshipit-source-id: c1dfb0324e9569b25601f1307b39d6a6a6b1ef1d""",0.7,None,changed

791,Jin Hou,jinhou@fb.com,"""Move LoginBehavior to Kotlin

Summary: Move LoginBehavior to Kotlin, also add unit test to safeguard it

Reviewed By: jingping2015

Differential Revision: D32067605

fbshipit-source-id: 7f70de1b8e9c5cfac7292a507dd9d39e7908ee60""",0.7,None,added

792,Mengxiao Lin,mxlin@fb.com,"""Migrate OpenGraphJSONUtility to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D32028469

fbshipit-source-id: 85a16b9dfb076915dab9da71e0566c9d70fc58a3""",0.7,None,changed

793,Jing Ping,jingping@fb.com,"""Migrate FacebookDialogFragment

Reviewed By: linmx0130

Differential Revision: D31986785

fbshipit-source-id: 73c91bc6f759048b60b08b4580422e06e24f3656""",0.7,None,changed

794,Mengxiao Lin,mxlin@fb.com,"""Backfilled tests and add nullable annotations to OpenGraphJSONUtility

Summary:
As title.
Also remove `AutoHandleExceptions` and return null explicitly when errors occurred. Since it's an ""internal"", it's fine to do so. During the migration, other classes that use its return value will have to add null check to avoid NPE.

Reviewed By: jingping2015

Differential Revision: D32002147

fbshipit-source-id: 6a077b460f729d87781a00f26afc4fce98ef84cf""",0.7,None,added

795,Jing Ping,jingping@fb.com,"""Backfill FacebookDialogFragment Test

Reviewed By: linmx0130

Differential Revision: D31986164

fbshipit-source-id: a2efa33cf0d19b79c1575f7e2962b60445761b42""",0.7,None,changed

796,Al Tirba,altirba@fb.com,"""Adds tournaments to the changelog

Summary:
$title

Created from CodeHub with https://fburl.com/edit-in-codehub

Reviewed By: jingping2015

Differential Revision: D31996311

fbshipit-source-id: 6f51180c5c8aa4241003c9ec63f777c7bc9f2871""",0.7,None,changed

797,Mengxiao Lin,mxlin@fb.com,"""Clear mock objects after tests to avoid memory leaks

Reviewed By: jingping2015

Differential Revision: D31940882

fbshipit-source-id: f2dcab4109b9a1a47678d2dbb2cdb87e1d9d7b04""",0.7,None,changed

798,Jing Ping,jingping@fb.com,"""Migrate WebDialog to Koltin

Summary:
Facebook :
As title

Reviewed By: linmx0130

Differential Revision: D31869618

fbshipit-source-id: 5f842f6039145e98d778a03fe93559f4da441ace""",0.7,None,changed

799,Xin Wu,xinwu330@fb.com,"""update SDK to be compliant with new play store policy

Summary:
With Google Play services update about Advertising ID coming in late this year, we are going to ONLY use nly use AAID as device identifier for ad.

In this diff:
Stop sending `attribution_id` when Android 12+ and LAT is ON.

Reviewed By: linmx0130

Differential Revision: D31840000

fbshipit-source-id: b54ad6a88fbcbeee68775e1475078bceab726c67""",0.7,None,changed

800,Jing Ping,jingping@fb.com,"""avoid NullPointerException in KatanaProxyLoginMethodHandler

Reviewed By: linmx0130

Differential Revision: D31933953

fbshipit-source-id: 210d904a716b21d2106f409b3cf17266e1a34c44""",0.7,None,changed

801,Xabi Losada,xabi@fb.com,"""Replace 'needs-feedback' label

Summary: Replace 'needs-feedback' with 'waiting-for-response' label.

Reviewed By: jingping2015

Differential Revision: D31926784

fbshipit-source-id: db3759e4902c1a195672a600c5535f8abdc0b28b""",0.7,None,changed

802,Xabi Losada,xabi@fb.com,"""Enable triage labels in Github templates

Summary: Added label 'needs-triage' to Github templates. Also

Reviewed By: linmx0130

Differential Revision: D31926668

fbshipit-source-id: 5fafc3e7a5a4b1e33a80b06dec8ddc0b08ccbe01""",0.7,None,added

803,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 72ce5b02078ab0a2617b02712980ae423655e0be""",0.7,None,changed

804,Mengxiao Lin,mxlin@fb.com,"""Fixed crashes on Nexus 6P when login

Reviewed By: jingping2015

Differential Revision: D31929465

fbshipit-source-id: 88f29610d6bf620b887db31af743c9f36fa673da""",0.7,None,fixed

805,Jing Ping,jingping@fb.com,"""Set jvmTarget to 1.6 for Kotlin in gameservice

Reviewed By: linmx0130

Differential Revision: D31914946

fbshipit-source-id: 7a28bf7955a5f90897268ceed2abc8e52d9af3a0""",0.7,None,changed

806,Al Tirba,altirba@fb.com,"""Add Post Tournament Score Social API

Summary: This diff adds the post tournament score api to android sdk. This api allows for developers to post a score to a tournament. If the score given is better than the previous score the user had in the leaderboard we will update their score.

Reviewed By: ainsleyh

Differential Revision: D31746958

fbshipit-source-id: 32a013e24e11dfc0ecfdfbc76af63b996fbab284""",0.7,None,added

807,Ainsley Herndon,ainsleyh@fb.com,"""Retrieve tournament id from dialog

Summary: Parse and return the tournament id result from the share dialog result.

Differential Revision: D31805971

fbshipit-source-id: 808ce35e6d188fa1e27ed27cfe59dc6e982a64d9""",0.7,None,changed

808,Jing Ping,jingping@fb.com,"""bump android sdk version

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31890521

fbshipit-source-id: 13990aa9adc8a88b347d7aade6e6f9524b14c025""",0.2,None,changed

809,Xabi Losada,xabi@fb.com,"""Main (#1021)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Enable 'needs-attention' github action. This action uses the labels 'needs-triage' and 'needs-feedback' to indicate the state of the issue. 'needs-feedback' is used when more information is required to start the resolution. 'needs-triage' indicates that a repo administrator has to triage the issue. This pull request also prevents stale action to close issues tagged with 'needs-triage' and 'acknowledged' labels.

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1021

Reviewed By: linmx0130

Differential Revision: D31897884

Pulled By: xilosada

fbshipit-source-id: 356b59b6f8727a9632117566f8a513b07321dae3""",0.7,None,added

810,Mengxiao Lin,mxlin@fb.com,"""Fix gaming services gradle build

Reviewed By: jingping2015

Differential Revision: D31901517

fbshipit-source-id: 6a67e9558945e59e521f37d92804b154b934aa4e""",0.7,None,fixed

811,Al Tirba,altirba@fb.com,"""Adds ShareDialog Update Tournament API Overlay

Summary: This adds the social api update an existing tournament and share using the share dialog. The API will open the share dialog using android overlay if the fb4a app is installed. Once the user hits share we will use the tournament ID from the provided tournament to look up said tournament and update the users score. After updating the score we will share it to the user's timeline.

Reviewed By: ainsleyh

Differential Revision: D31741128

fbshipit-source-id: 00959019329dd1b149aa74944e0200642b572d93""",0.7,None,changed

812,Al Tirba,altirba@fb.com,"""Add AppSwitch/m-site handling for ShareDialog Update Tournament

Summary: This adds functionality to update a tournament using the share dialog. Developers pass in a tournament and a score. We will app-switch if the fb4a is installed but overlay is not working. We will show msite if fb4a is not installed. Once the dialog is shown and the user hits share we will update their score in the tournament and share the tournament on their newsfeed.

Differential Revision: D31664882

fbshipit-source-id: f5c8f792f51fddd71195e4b982c2d6e827209dfc""",0.7,None,added

813,Al Tirba,altirba@fb.com,"""App Switch/m-site Handling for ShareDialog Create Tournament

Summary:
This adds the functionality to app-switch to the facebook instead of showing the share dialog overlay. If the facebook app is not installed this also allows for the m-site version of ShareDialog.

Todo:
Return Tournament_id to the user ainsley
Returning to game when cancelling from server side ainsleyh
Add Unit tests

Reviewed By: ainsleyh

Differential Revision: D31664881

fbshipit-source-id: efee841243b43f9b53178e0260c067702e267aab""",0.7,None,added

814,Al Tirba,altirba@fb.com,"""Adds ShareDialog Create Tournament API Overlay

Summary:
This adds the social api create tournament using the sharedialog. The API will open the share dialog using android overlay if the fb4a app is installed. Once the user hits share we will use the config data the developer provided to create the tournament and share it on the user's newsfeed.

TODO:
Returning the tournament_id of the created Tournament ainsleyh
Unit tests

Reviewed By: ainsleyh

Differential Revision: D31664884

fbshipit-source-id: 08ad7b11a261d7be9a08c7b889b9af5d1571b49c""",0.7,None,changed

815,Al Tirba,altirba@fb.com,"""Add Get Tournaments Social API

Summary:
This diff adds the get tournaments API to android sdk. This social api allows for developers to get all the tournaments that the logged in user is participating in.

Todo:
Add unit tests

Differential Revision: D31575192

fbshipit-source-id: 573350550e2a1196074ed0346f3da09f90f99424""",0.7,None,added

816,Al Tirba,altirba@fb.com,"""Create Base Model Objects

Summary:
Just what the title says. This creates the base model objects that will be used in the tournaments social APIs.
TournamentSortOrder
TournamentScoreType
Tournament

Reviewed By: ainsleyh

Differential Revision: D31658624

fbshipit-source-id: 52d592788c81c46cdb4a738ef779f7874f7f2ff5""",0.7,None,changed

817,Jing Ping,jingping@fb.com,"""Backfill WebDialog Test

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31848954

fbshipit-source-id: 05d296971b395ee2e0e69ab9413419371fc8af36""",0.7,None,changed

818,Mengxiao Lin,mxlin@fb.com,"""Fix NPE on BillingClientStateListenerWrapper

Summary: As title. It's possible for InvocationHandler to receive a null as the third parameter.

Reviewed By: jingping2015

Differential Revision: D31842869

fbshipit-source-id: 5317a3dfc790f14cb54468798823b0a744ae530f""",0.7,None,fixed

819,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for Profile.fetchProfileForCurrentAccessToken

Summary: As title. Also updated the tests to avoid using `org.junit.Assert` and `org.mockito.Matchers`.

Reviewed By: jingping2015

Differential Revision: D31840112

fbshipit-source-id: 3e1550dc3a82ef28cf450c4b8b1fe7d446c9e743""",0.7,None,changed

820,Mengxiao Lin,mxlin@fb.com,"""Update the CHANGELOG for login bug fix

Summary: As title. Prepare for v12.1 release to include this bug fix.

Reviewed By: jvlyn

Differential Revision: D31835008

fbshipit-source-id: 506a4b5224a8a5bb20a7ba9b1c473ffdc4f40205""",0.7,None,changed

821,Julie Yuan,julieyuan@fb.com,"""Fix double intent launching when doing openid + Get Token

Differential Revision: D31803760

fbshipit-source-id: c7ba68b9d1234894df78b70d13f5fdde865c34ad""",0.7,None,fixed

822,Julie Yuan,julieyuan@fb.com,"""Make 'loginConfig' and 'loggerID' request constructor variants play nicely together

Differential Revision: D31804952

fbshipit-source-id: c035d95bb4c1095de5ddb95919e1e62fb609ae33""",0.7,None,changed

823,Jing Ping,jingping@fb.com,"""Migrate FacebookActivity to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31747326

fbshipit-source-id: ab9ee29ffe06cb866395a6ceaa2b546f26fa57ab""",0.7,None,changed

824,Mengxiao Lin,mxlin@fb.com,"""Migrate DialogPresenter to Kotlin

Summary: As title. By migration, multiple potential NPE are fixed. Also use the function to declare `NativeProtocol.getLatestKnownVersion` to avoid confuses in Kotlin compiling.

Reviewed By: jingping2015

Differential Revision: D31735200

fbshipit-source-id: 520fe4930766c9ec7b0c1ee3d43ff23c1222665a""",0.7,None,fixed

825,Jing Ping,jingping@fb.com,"""Backfill test for FacebookActivity

Reviewed By: linmx0130

Differential Revision: D31740542

fbshipit-source-id: c5d69cd433a1fb7eb5eec8a2f34c7189090ebfbc""",0.7,None,changed

826,Julie Yuan,julieyuan@fb.com,"""Merge LoginButton back into main branch

Reviewed By: jingping2015

Differential Revision: D31672748

fbshipit-source-id: 8c0a877a9fef97a35da15da94a3423211ed5ace9""",0.2,None,changed

827,Jing Ping,jingping@fb.com,"""Migrate FacebookDialogException to Kotlin

Summary: As title

Reviewed By: jvlyn

Differential Revision: D31699659

fbshipit-source-id: 1987f663462db36ae4fcfd29e4998b734b5fb9da""",0.7,None,changed

828,Julie Yuan,julieyuan@fb.com,"""Merge ProfilePictureView back into main branch

Differential Revision: D31665633

fbshipit-source-id: 857ea2c35090bd27748f6b6f6a92959abbe27422""",0.2,None,changed

829,Julie Yuan,julieyuan@fb.com,"""Merge FacebookButtonBase back into main branch

Reviewed By: linmx0130

Differential Revision: D31665593

fbshipit-source-id: 776c3f5dfd2f342fbe96696ceb3636a34b234eda""",0.2,None,changed

830,Mengxiao Lin,mxlin@fb.com,"""Add tests for DialogPresenter

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D31699126

fbshipit-source-id: 280586b92de0643ecc0cb45d59744fceeaf4a2b1""",0.7,None,added

831,Dukjin Kang,djkang@fb.com,"""DebugPrint SDK on Daemon and TestApp

Summary: SDK support on daemon.

Differential Revision: D31699093

fbshipit-source-id: b1105fa1b9a415e01c1040cb8205169a1cc11eb1""",0.7,None,changed

832,Jing Ping,jingping@fb.com,"""Convert LoginStatusCallback and WebDialog to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31692877

fbshipit-source-id: 3fbacbec1c145279c3a7473939fb34d6061aa7ca""",0.7,None,changed

833,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 3442c9c282f790ecbdb4bbd84c741483ec5c0e80""",0.7,None,changed

834,Jing Ping,jingping@fb.com,"""Deprecated ShareGraphRequest

Reviewed By: linmx0130

Differential Revision: D31701648

fbshipit-source-id: 547a00ef91c994f89239c182cb9c1293e1702c8d""",0.7,None,changed

835,Mengxiao Lin,mxlin@fb.com,"""Migrate FragmentWrapper to Kotlin

Summary: As title. Also add more description in the document comments.

Reviewed By: jingping2015

Differential Revision: D31665763

fbshipit-source-id: c0acf0fb945662a10372cdcc46fc2a476b81b1fa""",0.7,None,added

836,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for FragmentWrapper

Summary: As title. Prepare for migration.

Reviewed By: jingping2015

Differential Revision: D31665021

fbshipit-source-id: 5e96ea2f60179797156c325bff33c1cab3c4305b""",0.7,None,changed

837,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 44bd259307d103b7b4a6d26d1eadf509f4d30586""",0.7,None,changed

838,Jing Ping,jingping@fb.com,"""Change the when statement on android sdk to unblock kotlin 1.6

Reviewed By: linmx0130

Differential Revision: D31669006

fbshipit-source-id: 0459c0fd1927dbc27a7e39d2a2bf78eb65e758e2""",0.7,None,changed

839,Jin Hou,jinhou@fb.com,"""Easy - Add Deprecated Annotation to Referral classes

Differential Revision: D31657515

fbshipit-source-id: e26b55886ba814ba56c1afb64bb99e33c8badfc9""",0.7,None,added

840,Jing Ping,jingping@fb.com,"""Migrate InstagramCustomTab to Kotlin and backfill test

Summary: As title

Reviewed By: jvlyn

Differential Revision: D31631822

fbshipit-source-id: f2d73680b0efb365bedf8d6773d9cb4830ed507b""",0.7,None,changed

841,Jing Ping,jingping@fb.com,"""Migrate CustomTab to Kotlin and backfill test

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31628886

fbshipit-source-id: f7a32d5ba36ecd5121be984864132c41b9672025""",0.7,None,changed

842,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests on AccessTokenManager

Summary: As title, added tests for `currentAccessTokenChanged()` and `extendAccessTokenIfNeeded()`

Reviewed By: jingping2015

Differential Revision: D31616590

fbshipit-source-id: 9307b7b0e389656c6cccc1decd678be566ec7358""",0.7,None,added

843,Intl Scheduler,,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: d158466145b31efd484c08a5705812b476bb2c7e""",0.7,None,changed

844,Jing Ping,jingping@fb.com,"""Migrate AppCall to Kotlin and backfill test

Reviewed By: linmx0130

Differential Revision: D31618516

fbshipit-source-id: f94383c4e8f6adf2323dd6aa5aa0e6b37a24cd2e""",0.7,None,changed

845,Intl Scheduler,,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 6c20c221d97fe84dc955ae3107ce710e5914a579""",0.7,None,changed

846,Jing Ping,jingping@fb.com,"""Migrate CustomTabUtils and DialogFeature to Kotlin

Reviewed By: linmx0130

Differential Revision: D31585321

fbshipit-source-id: 34bcab0669c3f47f92f8e48c96ee3de34edcb526""",0.7,None,changed

847,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 2dd4d8d51b2144b5c585b5e246785a362792910c""",0.7,None,changed

848,Jin Hou,jinhou@fb.com,"""Fix the optional nonce issue for Ushba

Differential Revision: D31591380

fbshipit-source-id: f4ad1ae6d9c6fc03a8bf1021dc7a744db038eceb""",0.7,None,fixed

849,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 2277047917b6ac29679cc972a88360ebde2735c6""",0.7,None,changed

850,Intl Scheduler,,"""translation auto-update for i18n/oculus-mirage.config.json on master

fbshipit-source-id: a80ce5e14fa9161d4caf5cc6c78dac0c7ea74a9f""",0.7,None,changed

851,Intl Scheduler,,"""translation auto-update for i18n/portal_login.config.json on master

fbshipit-source-id: 385e35b44cb263a9a5cef468d1488f17c1e121f7""",0.7,None,changed

852,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 3b9674e805b7688250de6e7883e5a05cf754d4a6""",0.7,None,changed

853,Jing Ping,jingping@fb.com,"""Version bump to 12.0.1

Summary: As title

Reviewed By: panavenue

Differential Revision: D31546845

fbshipit-source-id: 23855a4a01aa9294810214a526d4ccefee87e2b8""",0.2,None,changed

854,Jing Ping,jingping@fb.com,"""Create stale.yml (#1011)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Describe what you accomplished in this pull request (for example, what happens before the change, and after the change)

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1011

Reviewed By: linmx0130

Differential Revision: D31516072

Pulled By: jingping2015

fbshipit-source-id: 4af73bee4b5b2909fd9e2cd72da047ecb8b0d945""",0.7,None,added

855,Jin Hou,jinhou@fb.com,"""Update AuthenticationTokenCache to utilize JSON string instead of Raw token

Reviewed By: jingping2015

Differential Revision: D31491148

fbshipit-source-id: 84e2e3b363c00c0ea34cd171f39ca3ccf38a4ca6""",0.7,None,changed

856,Jin Hou,jinhou@fb.com,"""Add ability to create to/from JSON for AuthenticationToken

Reviewed By: jingping2015

Differential Revision: D31461250

fbshipit-source-id: e12f92908986924f682ff1fd5f19688e04a02469""",0.7,None,added

857,Jin Hou,jinhou@fb.com,"""Add new AuthenticationTokenHeader constructor to create from json

Reviewed By: jingping2015

Differential Revision: D31461173

fbshipit-source-id: 9de829dc339f435c1bd843f285d0ba1f661ee9db""",0.7,None,added

858,David Torres,detorres@fb.com,"""Pass access token with context dialogs

Reviewed By: iquintero

Differential Revision: D31483621

fbshipit-source-id: 7cbb6b7fa02192963995cdf9612256f586866855""",0.7,None,changed

859,Mengxiao Lin,mxlin@fb.com,"""Update readme to use latest.release for gradle SDK version

Summary: as title

Reviewed By: jawwad

Differential Revision: D31476372

fbshipit-source-id: fbd87b1648597ce70cbf020bd03094e6d09397a6""",0.7,None,changed

860,David Torres,detorres@fb.com,"""Add Web Handlers For Create and Switch Dialogs

Reviewed By: Alaeldin513

Differential Revision: D31431632

fbshipit-source-id: 095904433aa15bea8120af021cf0f9044aa58c12""",0.7,None,added

861,Jing Ping,jingping@fb.com,"""Make testutil pure Kotlin (#1009)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1009

Reviewed By: linmx0130

Differential Revision: D31416899

fbshipit-source-id: 58b584b35a2181d76d41b082f14c80205bdb1d43""",0.7,None,changed

862,Jing Ping,jingping@fb.com,"""Disable OnDeviceProcessingManagerTest run in github (#1008)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1008

Reviewed By: jawwad

Differential Revision: D31460108

fbshipit-source-id: d9e9d9b8b744376494f5b5dad39345a0bd411b13""",0.7,None,changed

863,Jing Ping,jingping@fb.com,"""fix github action (#1007)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/1007

Reviewed By: linmx0130

Differential Revision: D31443876

fbshipit-source-id: ffbf11a4ac8ceb86a0ff2a2f0d499f28fcf8593d""",0.7,None,fixed

864,Mengxiao Lin,mxlin@fb.com,"""Fix the bug on initializing the dialog with SDK request code

Summary: When the dialog is initializing, it should accept the request codes that are reserved as the original implementation. By adding a backing field to bypass the check. Also added new test cases for the bug.

Reviewed By: jingping2015

Differential Revision: D31449043

fbshipit-source-id: 3ffb8c07cdb94aae02b8a9ed1eea442a51b03912""",0.7,None,fixed

865,Jin Hou,jinhou@fb.com,"""Make sure AuthenticationToken is null after logout

Reviewed By: jingping2015

Differential Revision: D31445581

fbshipit-source-id: 287a8c19b15a0b390319feb84d89e4d20cf44aff""",0.7,None,changed

866,Jing Ping,jingping@fb.com,"""Make core-kit pure Kotlin

Summary:
Since our core SDK already pure Kotlin, make sense to set this flag be True
check related post here https://fb.workplace.com/groups/androidfyi/permalink/5794010843980816/

After this, I think we can remove `JavaOnlyKotlinValidationRule` https://fburl.com/code/3dutdi8x since this flag should enforce only Kotlin file be added in core module.

Reviewed By: linmx0130

Differential Revision: D31414317

fbshipit-source-id: fedc1c74b50e7aa4ffd2763f03632633b31eb0e6""",0.7,None,added

867,Jin Hou,jinhou@fb.com,"""fix broadcast when AuthenticationToken updates

Reviewed By: ppansy

Differential Revision: D31327834

fbshipit-source-id: 98c519c19910d138693459d8384bbbb8f1545ac1""",0.7,None,fixed

868,Intl Scheduler,,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 5708cd2d83a7ef804a255b775cf0737ad651f32f""",0.7,None,changed

869,Intl Scheduler,,"""translation auto-update for i18n/portal_login.config.json on master

fbshipit-source-id: 1fb85ea355e31aee5733011a246992b9aa4d0377""",0.7,None,changed

870,Intl Scheduler,,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 4dbb54d18acaf96f67b56d8f89b09f28df4d01d3""",0.7,None,changed

871,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 73260cfe288bfcac5b2115eb8e186a706bc2782a""",0.7,None,changed

872,Xabi Losada,xabi@fb.com,"""Deprecating Facebook Login support on Android WebViews

Summary: Beginning October 5, 2021, Facebook Login will no longer support using Android embedded browsers (WebViews) for logging in users. To avoid a disrupted user experience, please use follow the steps described in https://developers.facebook.com/docs/facebook-login/android/deprecating-webviews

Reviewed By: jingping2015

Differential Revision: D31399975

fbshipit-source-id: 44474e139e285006a92456b72dd8600fb7f0c878""",0.7,None,changed

873,Jin Hou,jinhou@fb.com,"""Update current AuthenticationToken from cache when login finish

Reviewed By: ppansy

Differential Revision: D31327733

fbshipit-source-id: de870506a3f0b068cb33eb416bfc3afdd37f538e""",0.7,None,changed

874,Jin Hou,jinhou@fb.com,"""Add AuthenticationTokenTracker

Differential Revision: D31258746

fbshipit-source-id: f1303b32899570b6029fdcb698211b8c6cb6fd9b""",0.7,None,added

875,Junjin Pu,junjinp@fb.com,"""Send game load complete request to worker

Summary: Add callback for gameLoadComplete function

Reviewed By: demosdemon

Differential Revision: D31276318

fbshipit-source-id: befe00c08cf690945617a2ad1dafae0a726b8be9""",0.7,None,added

876,Jing Ping,jingping@fb.com,"""Migrate FacebookDialog to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31257238

fbshipit-source-id: 6440e356cb639ab874b6b0cf0757d326edfa44f8""",0.7,None,changed

877,Jin Hou,jinhou@fb.com,"""Add more unit test for AuthenticationTokenManager

Reviewed By: ppansy

Differential Revision: D31254423

fbshipit-source-id: 91c5f8c2c4c3a01bd3157edccd31c0e88bd5caca""",0.7,None,added

878,Mengxiao Lin,mxlin@fb.com,"""Android SDK v12.0 version bump

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D31211068

fbshipit-source-id: bd94bbe48fdefbc4945a13738f0ae7edeb7ae259""",0.2,None,changed

879,Jing Ping,jingping@fb.com,"""enable login kit able to add Kotlin code

Summary: As title

Reviewed By: linmx0130

Differential Revision: D31246867

fbshipit-source-id: 92cab86006e369e09a3c0d42766cb24dbd3e6734""",0.7,None,added

880,David Torres,detorres@fb.com,"""Update 'canShow' function for context dialogs

Reviewed By: iquintero, joeymrios

Differential Revision: D31244930

fbshipit-source-id: ee3f6300e995a7864fe3b2789b5544b73a06335f""",0.7,None,changed

881,David Torres,detorres@fb.com,"""Store GamingContext on response from context APIs

Reviewed By: iquintero

Differential Revision: D31115978

fbshipit-source-id: 39feef8353e950b0397254e6269ea11251804c34""",0.7,None,changed

882,David Torres,detorres@fb.com,"""Add Native path to ContextSwitchDialog

Reviewed By: iquintero

Differential Revision: D30996523

fbshipit-source-id: ca6e9e2c6e227a6394dda82e14eef579e3872d6f""",0.7,None,added

883,David Torres,detorres@fb.com,"""Add Native path to ContextCreateDialog

Reviewed By: iquintero

Differential Revision: D30953115

fbshipit-source-id: 99afad62894943c90123b65fb01d386e1498f5ef""",0.7,None,added

884,David Torres,detorres@fb.com,"""Clean up ContextCreateDialog code

Reviewed By: iquintero

Differential Revision: D30906161

fbshipit-source-id: 91160c16de355f732c827928181aa239747a9fe0""",0.7,None,changed

885,David Torres,detorres@fb.com,"""Add Native path to ContextChooseDialog

Reviewed By: linmx0130

Differential Revision: D30797539

fbshipit-source-id: e6e31d450d5d87c2ed8ac9a74654beb8b6f9575d""",0.7,None,added

886,Jin Hou,jinhou@fb.com,"""Update timeout and return style

Reviewed By: linmx0130

Differential Revision: D31193033

fbshipit-source-id: f6146661836ad3ca96d9b81b053ed1ac96736ae2""",0.7,None,changed

887,Mengxiao Lin,mxlin@fb.com,"""Set timeout OidcSecurityUtil.getRawKeyFromEndPoint

Summary: As title. To avoid network in main thread exception.

Reviewed By: panavenue

Differential Revision: D31189603

fbshipit-source-id: 21c9042da0c789d354e6e713b0b5d6469d0c397f""",0.7,None,changed

888,Cecily Jiang,jiangyx@fb.com,"""Add annotation for wrapper inner classes

Reviewed By: KylinChang

Differential Revision: D31130871

fbshipit-source-id: 221a40a988e03f2aa70494a7103d85b0865100e0""",0.7,None,added

889,Mengxiao Lin,mxlin@fb.com,"""Fix verifybuild.yml for Github Actions

Summary: Actions failed due to a syntax error caused by whitespace in yml. For example https://github.com/facebook/facebook-android-sdk/actions/runs/1266918481/workflow

Reviewed By: jingping2015

Differential Revision: D31148949

fbshipit-source-id: bc230029ec1a59895ab24ac0262f5c95b6168536""",0.7,None,fixed

890,Jin Hou,jinhou@fb.com,"""Create AuthenticationTokenManager and Receiver

Reviewed By: linmx0130

Differential Revision: D31125343

fbshipit-source-id: 10dfb8f1e1bb088ea812a403577c5c136581a659""",0.7,None,changed

891,Mengxiao Lin,mxlin@fb.com,"""Use apply instead of commit on SharedPreferences in UserSettingsManager

Summary: As title. `apply` will update SharedPreferences in the background to avoid blocking UI thread.

Reviewed By: jingping2015

Differential Revision: D31131380

fbshipit-source-id: e6169f800d9820913b888a06bd5e77e1786a66ad""",0.7,None,changed

892,Mengxiao Lin,mxlin@fb.com,"""Backfilled test for RequestProgress.reportProgress

Summary: As title. Add a new test case to fully cover RequestProgress

Reviewed By: jingping2015

Differential Revision: D31096409

fbshipit-source-id: 7bf56e985ead49f77e9208cf7e6d45ac5158bce0""",0.7,None,added

893,Mengxiao Lin,mxlin@fb.com,"""Upgrade CHANGELOG for Activity Result APIs

Summary: Update changelog to reflect the changes for supporting activity result APIs in both login and share.

Reviewed By: jingping2015

Differential Revision: D31093236

fbshipit-source-id: 3224539b1b90191f341d07061a344665e7e4df46""",0.7,None,changed

894,Mengxiao Lin,mxlin@fb.com,"""Backfilled test for FacebookDialogBase

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D31091758

fbshipit-source-id: 9e16cedfacd35c49172be5244cbc68539e83b24a""",0.7,None,changed

895,Mengxiao Lin,mxlin@fb.com,"""Androidx activity result APIs for sharing

Summary: As title. The implementation follows the same approach as we do for Login: the share buttons and share dialogs will memorize the callback manager to handle the activity result callbacks. Only when the activity context supports androidx activity result APIs, the API will be used.

Reviewed By: jingping2015

Differential Revision: D31062738

fbshipit-source-id: 99fc051fbe86e6e73b32b20f3818e4408810e108""",0.7,None,changed

896,Intl Scheduler,,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: bf91a0a0ed1b362764150d29e9655e660cd3d8f2""",0.7,None,changed

897,Jin Hou,jinhou@fb.com,"""Bubble up and throw Facebook Exception when AuthenticationToken fail

Reviewed By: ppansy

Differential Revision: D31089443

fbshipit-source-id: 9a434ce4df8f32bd7cfc4593d4732acf241df8db""",0.7,None,changed

898,Xabi Losada,xabi@fb.com,"""Remove support library from FBLoginSample

Summary: Replaces Android Support Library with `com.google.android.material` in FBLoginSample app.

Reviewed By: linmx0130

Differential Revision: D31027861

fbshipit-source-id: d8bd1cf321141fdebd5a029bc190d90a72885b65""",0.7,None,changed

899,Mengxiao Lin,mxlin@fb.com,"""Support AndroidX activity result APIs on Login

Summary:
As title. The principle idea is to automatically use androidx activity result APIs if they're available and call facebook CalbackManager when the result is returned.

Now `LoginButton` will check its context to find whether the context support AndroidX activity result APIs (by `ActivityResultRegistryOwner`). Then it will launch the intent through AndroidX activity result APIs and forward the result to `CallbackManager` inside our SDK. Apps that uses AndroidX activity >=v1.2 or fragment >=v1.3 no longer need to override `onActivityResult` to handle the callback.

Changes:
1. New methods are added to `LoginManager` to support androidx activity result APIs and avoid overriding `onActivityResult()` method.
2. LoginButton will memorize the `CallbackManager`, which will be used to handle activity result.

Reviewed By: jingping2015

Differential Revision: D30974753

fbshipit-source-id: a7337317c06ee72522d5f5a051fe291b2a51342f""",0.7,None,added

900,Jin Hou,jinhou@fb.com,"""OIDC GetToken fallback to next Handler

Differential Revision: D31042802

fbshipit-source-id: 7f87b68e7abad7ebf634ee4b45dea403dfc7127e""",0.7,None,changed

901,Jin Hou,jinhou@fb.com,"""Fix issue where id_token not returning when re-authentication

Summary:
^

Looks like I forgot to update the method to create `compositeToken` instead of regular result token

Differential Revision: D31044671

fbshipit-source-id: c60ec3a9cfd5aaa5f8a03172f3b769948b309df0""",0.7,None,fixed

902,Jing Ping,jingping@fb.com,"""Migirate FacebookCallback to Kotlin

Reviewed By: linmx0130

Differential Revision: D30948346

fbshipit-source-id: 0b3546b803f74e766099ad9f93decb60c309b0ce""",0.7,None,changed

903,Yonghong Shi,yongshi@fb.com,"""fix tournament join API

Summary: Fix tournament join API to call correct internal message

Differential Revision: D31025037

fbshipit-source-id: 51618f00a411bee64cb136c57b35b83acc307725""",0.7,None,fixed

904,Jin Hou,jinhou@fb.com,"""Fix claims key mismatch

Reviewed By: ppansy

Differential Revision: D30978805

fbshipit-source-id: ad7b9fe8b55cdf1de95351bd09ac5efcf578b5a8""",0.7,None,fixed

905,Jing Ping,jingping@fb.com,"""Fix some place after branch change from master to main

Reviewed By: linmx0130

Differential Revision: D30880102

fbshipit-source-id: 418b72a32da207d6ba1c01b7ef23dfda440ea9c4""",0.7,None,fixed

906,Yonghong Shi,yongshi@fb.com,"""add two new apis to cloud SDK

Summary: Add getTournaments and joinTournament API to cloud SDK.

Reviewed By: joeymrios

Differential Revision: D30967990

fbshipit-source-id: e5877cd55a3b2004d891d91b5c5197522765a6f7""",0.7,None,added

907,Jin Hou,jinhou@fb.com,"""Add jvmfield to creator

Reviewed By: jingping2015

Differential Revision: D30963441

fbshipit-source-id: 5889df84b32a1dc23299510907ce51afcf3c2b8f""",0.7,None,added

908,Jin Hou,jinhou@fb.com,"""Revert the url_safe decode for header

Reviewed By: khp

Differential Revision: D30954645

fbshipit-source-id: 1c6f8e5dbe96f6490655b49b12d52bff1baf7c48""",0.7,None,changed

909,Jin Hou,jinhou@fb.com,"""Update Base64 decode method from default to url_safe for Claims

Reviewed By: ppansy

Differential Revision: D30952113

fbshipit-source-id: fb0e152110435e9aa19051e221ecab03b94e66bf""",0.7,None,changed

910,Mengxiao Lin,mxlin@fb.com,"""Backfilled test for MetadataViewObserver.onGlobalFocusChanged

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30912614

fbshipit-source-id: ea41990b51a3ea53155f756df4cae51436e43f0a""",0.7,None,changed

911,Jing Ping,jingping@fb.com,"""Remove deprecated function for v12 release

Reviewed By: linmx0130

Differential Revision: D30879230

fbshipit-source-id: 08282401c8162beea22caed123860be63833e001""",0.7,None,changed

912,Jin Hou,jinhou@fb.com,"""Update oidc public key endpoint to relies on FacebookSdk domain

Reviewed By: jingping2015, ppansy

Differential Revision: D30893765

fbshipit-source-id: 4ebc996599ec2deb0e6f50f2ed91680eafe8db3d""",0.7,None,changed

913,Jin Hou,jinhou@fb.com,"""Fix parceling and create from/to json

Summary:
## Facebook:

This diff fixes the following problems around parceling and create from/to json

**Problem:**
There could be times when developers don't receive anything for `user_friend`, and/or other fields (If they didn't request them). We need to make sure we keep it as `null` instead of empty field or empty list. As these two can have different meanings

null - means the permission didn't requested
empty - means the permission did requested, but the actual field is empty. (e.g null `user_friend` list vs empty `user_friend` list

Also added unit test to safe-guard this scenario

Reviewed By: jingping2015

Differential Revision: D30862714

fbshipit-source-id: aec353e1defb958f7dc443167471bd6366252b16""",0.7,None,fixed

914,Jin Hou,jinhou@fb.com,"""Fix Utility method convertJSONObjectToHashMap

Reviewed By: linmx0130, xiaohaiguicc

Differential Revision: D30862604

fbshipit-source-id: a9aa8c3b46705b1ee078a91c3500dc6b1b9fca61""",0.7,None,fixed

915,Jin Hou,jinhou@fb.com,"""Update AuthenticationToken Parceling

Reviewed By: ppansy

Differential Revision: D30849399

fbshipit-source-id: 4e5db287647bc71061af460817a3c4e6d8000ae0""",0.7,None,changed

916,Jin Hou,jinhou@fb.com,"""Add parceling test to AuthenticationTokenClaims

Reviewed By: jingping2015

Differential Revision: D30832550

fbshipit-source-id: 33e83e231260281a15403b73f66b0a4b6cb71820""",0.7,None,added

917,Jin Hou,jinhou@fb.com,"""Add parceling test to AuthenticationHeader

Summary:
# Facebook:

This diff adds parceling test for AuthenticationHeader

 ---

## End Goal (See below)

Problem -
Currently the create from parcel method on root level `AuthenticationToken` relies on creating the whole token from expected nonce. This actually tries to verify claims+signature again, which does another HTTP round trip to get Public Key to validate signature. This is not ideal, we would want to organically re-construct the AuthenticationToken from parcel without validating the signature again.

Solution -
Make sure Header and claims parceling works, then when we do a writeToParcel, we can just do `writeParcel` instead of `writeString`

Reviewed By: linmx0130

Differential Revision: D30832248

fbshipit-source-id: 3631c9df6ecad2105ef0fa463d0cd1fef783bcae""",0.7,None,added

918,Jin Hou,jinhou@fb.com,"""Update iss checking to include www.facebook.com

Differential Revision: D30830555

fbshipit-source-id: a8644cc70d1319396c2382b8c900b2771b93f2b9""",0.7,None,changed

919,Mengxiao Lin,mxlin@fb.com,"""Move ShareInternalUtilityTest to correct package

Summary: As title. It allow us to remove an Excuse.

Reviewed By: jingping2015

Differential Revision: D30819748

fbshipit-source-id: b9137282842186cecd5b0a317a9dbb5e7dadf7c5""",0.7,None,changed

920,Jing Ping,jingping@fb.com,"""Convert package-info

Reviewed By: linmx0130

Differential Revision: D30819365

fbshipit-source-id: e48b49ce729385ece71ca3cc008397f4b75af8c6""",0.7,None,changed

921,Mengxiao Lin,mxlin@fb.com,"""Migreate AppLinkResolver, Capture and Continuation to Kotlin

Summary:
As title. This diff migrates `AppLinkResolver` and `Continuation` to Kotlin and remove `Capture`. Now the CoreKit is 100% in Kotlin.

The reason to remove `Capture` is that it's for building closures in Java, which is natively supported by Kotlin.

Reviewed By: jingping2015

Differential Revision: D30788118

fbshipit-source-id: c73fab20ed6e94af853cf2f7d4c090275801eddd""",0.7,None,changed

922,Jing Ping,jingping@fb.com,"""2/n Move more tests to common folder and enforce all common kit test live in own folder

Reviewed By: jawwad

Differential Revision: D30690402

fbshipit-source-id: ec5475befd3097c27076f94f9074519891311880""",0.7,None,changed

923,Mengxiao Lin,mxlin@fb.com,"""Address the flakyness in TaskTest.testDelay

Summary:
The old `testDelay` relies on `Thread.sleep` to wait for the completion of the delayed task. However, it's not reliable since any executors can only promise the command to be run ""after"" the delay, but not ""at"" the delay.

Since bolts library should delegate these kind of ""waiting"" to `BoltsExecutors.schedule()`, I add another command to the executor so that when assertions are executed, we can make sure that all commands within the time period are finished.

Reviewed By: jingping2015

Differential Revision: D30793311

fbshipit-source-id: 89e7ecb20dad6cd8892594f241ed1e0a5dbd0ee5""",0.7,None,added

924,Jing Ping,jingping@fb.com,"""1/n Move tests to common kits

Reviewed By: jawwad

Differential Revision: D30683321

fbshipit-source-id: a0d06939990dc41c86a657b07de75d4c74719a51""",0.7,None,changed

925,Jing Ping,jingping@fb.com,"""Enable common kit has its own tests folder

Reviewed By: jawwad

Differential Revision: D30650186

fbshipit-source-id: ea3db86867be6f8ec3e066ee095e990dcfe168cc""",0.7,None,changed

926,Jin Hou,jinhou@fb.com,"""Add id_token to GetTokenLoginMethodHandler

Reviewed By: ppansy

Differential Revision: D30734137

fbshipit-source-id: d8842fe5502014a3bc01f0806abaacb5dc8d6d4a""",0.7,None,added

927,Xabi Losada,xabi@fb.com,"""Convert LoginResult class to Kotlin (#992)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Rewrite `com.facebook.login.LoginResult` class in Kotlin.

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/992

Test Plan: ./gradlew build

Reviewed By: jingping2015

Differential Revision: D30559104

Pulled By: xilosada

fbshipit-source-id: 6386926e7ce89d6047ab7a8af80e529ffee7a490""",0.7,None,added

928,Jing Ping,jingping@fb.com,"""Add deprecation information for device share feature

Reviewed By: jawwad

Differential Revision: D30712353

fbshipit-source-id: 8b67b4308618b2236c3d085ee0a41eb3342273f3""",0.7,None,added

929,Jin Hou,jinhou@fb.com,"""Add nonce to PlatformService

Reviewed By: jingping2015

Differential Revision: D30723757

fbshipit-source-id: fd3c9187e8d2a1b22bd1e4b9ba79f1129b8c0b01""",0.7,None,added

930,pradumnasaraf,pradumnasaraf@gmail.com,"""Fix broken link (#993)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Fix the broken link for singing CLA (contributor license agreement).

Broken link - https://developers.facebook.com/opensource/cla
Updated link - https://code.facebook.com/cla

![Pradumna Saraf](https://user-images.githubusercontent.com/51878265/131685258-dc9b181e-b8f6-49e0-9d42-1f698b6be22c.png)

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/993

Test Plan: **Add your test plan here**

Reviewed By: jawwad

Differential Revision: D30702791

Pulled By: jingping2015

fbshipit-source-id: 00554ed392b39c2f0af53a15d88d9491dfcfefd3""",0.7,None,fixed

931,Junjin Pu,junjinp@fb.com,"""Add game load complete logging in android sdk

Summary: So that developers can measure how long the game loading takes

Reviewed By: demosdemon

Differential Revision: D30713628

fbshipit-source-id: c11839f0bd322f9c9345db45fea0f91691573449""",0.7,None,added

932,Jin Hou,jinhou@fb.com,"""Update nonce for ProxyAuth

Reviewed By: ppansy

Differential Revision: D30519554

fbshipit-source-id: c9bd57439281e9d3f6b6d872fda32a6b70ee4a09""",0.7,None,changed

933,Jin Hou,jinhou@fb.com,"""Add/Update protocol version for OIDC

Reviewed By: ppansy

Differential Revision: D30659323

fbshipit-source-id: 23be6754227a90741997c36217a6ad9513a690a8""",0.7,None,added

934,Jin Hou,jinhou@fb.com,"""Update all login method in LoginManager

Reviewed By: ppansy, xiaohaiguicc

Differential Revision: D30523785

fbshipit-source-id: 8dcde04e03cacf98fb2008666cbc072ccb474525""",0.7,None,changed

935,Prashant Bhushan Singh,singhpra@fb.com,"""Exposing a package-visible method to load extra device info

Summary:
For ""Portal Reauth Push notification"" project: https://www.figma.com/file/PkzaRx46OKwrMo042kxWL3/DBL?node-id=1%3A6
We need to send deviceName to the backend, which can send it to along with notification. We display the deviceName to user when they tap on the notification. Since I couldn't find a good way to retrieve the display name on server side itself, passing it from client.

Created a package visible method `addExtraDeviceInfo` which will be overriden by Portal sdk `AlohaDeviceAuthDialog` which has same package name `com.facebook.login`. So `AlohaDeviceAuthDialog` should be able to override this method and provide extra info i.e. device name to it.

Reviewed By: khp

Differential Revision: D30591187

fbshipit-source-id: 3c35832672bdd7486f6d5b185957c8f14c1a623f""",0.7,None,changed

936,Jing Ping,jingping@fb.com,"""Bump version to v11.3 for Android SDK

Summary: Bump version to v11.3

Reviewed By: iquintero

Differential Revision: D30644032

fbshipit-source-id: f666d0475bae91c0a0983bfa3362e79514af4671""",0.2,None,changed

937,Mengxiao Lin,mxlin@fb.com,"""Add test for CustomTabUtils

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30606863

fbshipit-source-id: cd3f78c4ef7bc1fa9a6c04c3410b77e8f84e9bbf""",0.7,None,added

938,Jing Ping,jingping@fb.com,"""Add doc to public method

Reviewed By: linmx0130

Differential Revision: D30596512

fbshipit-source-id: 6eb5f68514b65a2340de8fe4553c6abad57ddbd5""",0.7,None,added

939,Jin Hou,jinhou@fb.com,"""Add AuthenticationToken Cache

Reviewed By: ppansy

Differential Revision: D30306296

fbshipit-source-id: 3684fe1d1081ec2927d519f7b54f6b0a384f4c8d""",0.7,None,added

940,CiCi Cai,cicicai@fb.com,"""Add client-sode events for fb & ig actions

Summary:
We need to add logger for fb and ig button
1.FB  Button impression: `EVENT_FOA_FB_LOGIN_BUTTON_CREATE`
2. FB Button click: `EVENT_FOA_FB_LOGIN_BUTTON_DID_TAP`
3. IG Button impression: `EVENT_FOA_IG_LOGIN_BUTTON_CREATE`
4.IG Button click: `EVENT_FOA_IG_LOGIN_BUTTON_DID_TAP`

Reviewed By: jvlyn

Differential Revision: D30528749

fbshipit-source-id: 84f0f037c7a19bd365ab3186b4e2b47e1298535f""",0.7,None,added

941,Jing Ping,jingping@fb.com,"""Convert class to Object

Reviewed By: linmx0130

Differential Revision: D30532378

fbshipit-source-id: 26a4629fd26f5a42daaa78512f84de43cae4e9f2""",0.7,None,changed

942,Jing Ping,jingping@fb.com,"""Fix buck test coverage

Reviewed By: linmx0130

Differential Revision: D30521045

fbshipit-source-id: c77d5058306290cf352b40c3b1ab31eec16a1839""",0.7,None,fixed

943,Jin Hou,jinhou@fb.com,"""Update Web Login (CCT) to get Id_token

Reviewed By: ppansy

Differential Revision: D30388417

fbshipit-source-id: d116fff3ddc5ea6f0fb7b2f53f32797267f52275""",0.7,None,changed

944,Jin Hou,jinhou@fb.com,"""Add openid and id_token to scope and response_type

Reviewed By: ppansy

Differential Revision: D30359049

fbshipit-source-id: 425f283033b93553337b7cbbf497ea5b57e4a608""",0.7,None,added

945,Jing Ping,jingping@fb.com,"""Remove the lateinit for InAppPurchaseBillingClientWrapper instance

Reviewed By: linmx0130

Differential Revision: D30500828

fbshipit-source-id: 4f0fa9604590c86dd9a611e7dedd17a69dc2be92""",0.7,None,changed

946,Andrey Putilin,regresscheck@fb.com,"""Enable Login Connect parameters for App Switch

Summary: In order to support Login Connect, we should send parameters during IG app switch

Reviewed By: linmx0130

Differential Revision: D30434659

fbshipit-source-id: 0e3dae55c5218b292d7641dae384567f60e4e713""",0.7,None,changed

947,Jing Ping,jingping@fb.com,"""Applied enforce Kotlin class test rule on common kit

Reviewed By: panavenue

Differential Revision: D30462106

fbshipit-source-id: 52d33a5cc68d30d62a0475d161ebf1a78eea53f6""",0.7,None,changed

948,Jin Hou,jinhou@fb.com,"""Fix Parcel issue

Reviewed By: ppansy

Differential Revision: D30418741

fbshipit-source-id: be3ee2d53d54cf048bc64e84917f0549b240c658""",0.7,None,fixed

949,Andrey Putilin,regresscheck@fb.com,"""Add Login Connect parameters to CCT and Webview

Summary: Login Connect is supported on web, we can enable it for both CCT and Webview

Reviewed By: jvlyn

Differential Revision: D30404608

fbshipit-source-id: 2d1346b37b11db08da74c2b59e7411851e60cee6""",0.7,None,added

950,Jin Hou,jinhou@fb.com,"""Add Signature Validation

Reviewed By: ppansy

Differential Revision: D30398376

fbshipit-source-id: c064079bbfe16e863a4a8a3da3e90e348a48e1a9""",0.7,None,added

951,Jin Hou,jinhou@fb.com,"""fix LoginConfiguration to allow null permission

Reviewed By: alsun2001

Differential Revision: D30455500

fbshipit-source-id: 17ed51f2c0502ed87b2bab9b9ef891e5226bee1a""",0.7,None,fixed

952,Jan Zahornadsky,janz@fb.com,"""Make ParcelableResourceWithMimeType public

Summary: During Kotlin migration, we have switched from `public` to `internal` `ParcelableResourceWithMimeType`, making it no longer possible to upload file with specified MIME type in Android. This diff reverts the said class visibility to public.

Reviewed By: linmx0130

Differential Revision: D30370701

fbshipit-source-id: ab3d062dcda01b54c8805a1e90788fbd15fec060""",0.7,None,changed

953,Jin Hou,jinhou@fb.com,"""Add Signature Validation

Reviewed By: ppansy

Differential Revision: D30398110

fbshipit-source-id: 590f0d147a1138f4dd5a491c2ca4b7a314668909""",0.7,None,added

954,Jin Hou,jinhou@fb.com,"""Fix Exp and Iat date to Long

Reviewed By: ppansy

Differential Revision: D30428876

fbshipit-source-id: 2f1f106cac024fce3879b9bcd700df5d4b6e255d""",0.7,None,fixed

955,Nacho Quintero Rizo,roboto@fb.com,"""Add CustomUpdate and CustomUpdateContent to GamingServices

Summary: This adds a CustomUpdate class which allows performing CustomUpdate graph API calls. As well as CustomUpdateContent which holds all the data that the  Graph API expects.

Reviewed By: jingping2015

Differential Revision: D30412727

fbshipit-source-id: 302c7800937317798fd4df3d4ead67e69b3cf0b2""",0.2,None,added

956,Nacho Quintero Rizo,roboto@fb.com,"""Enable automated unit tests for GamingServicesKit

Summary: This just sets all the build rules no actual tests added with this change.

Differential Revision: D30412538

fbshipit-source-id: 1a0beb3a1d78b7c6e360658840292a0c3670f71c""",0.2,None,added

957,Nacho Quintero Rizo,roboto@fb.com,"""Set GamingContext from Intent Payload

Summary: This sets currentGamingContext if a contextTokenID is passed via GamingPayload.

Differential Revision: D30412147

fbshipit-source-id: 8b41698f96b5e5f0325fd2e9b0d6940992f77f65""",0.2,None,changed

958,Andres Barragan Salas,andresbarragan@fb.com,"""Name change for performHapticFeedback

Summary: The function performHapticFeedback was changed from performHapticFeedbackAsync to match normal Android SDK conventions

Reviewed By: iquintero

Differential Revision: D30429512

fbshipit-source-id: b007160413f1b428430828c533f7d5c47f12e00f""",0.7,None,changed

959,Jing Ping,jingping@fb.com,"""Add no test excuse to common kit

Reviewed By: linmx0130

Differential Revision: D30410758

fbshipit-source-id: 5258f57429cd7cfa0ac0b2ead4de8a30f81ff42a""",0.2,None,added

960,Jin Hou,jinhou@fb.com,"""Update AuthenticationTokenHeader validation

Reviewed By: ppansy

Differential Revision: D30186279

fbshipit-source-id: 2e13221e927acfb968f62b3ad4a6bd8848d464cf""",0.7,None,changed

961,Jin Hou,jinhou@fb.com,"""Add unit test for ProxyAuth with id_token and nonce

Summary: Make sure proxy auth (app-switch) works with correct id_token create (with correct nonce)

Reviewed By: ppansy

Differential Revision: D30406454

fbshipit-source-id: 94b362e518aebc41f80df2168c8888c11526e582""",0.7,None,added

962,Jin Hou,jinhou@fb.com,"""Add unit test for CCT with id_token and nonce

Summary:
Add the unit test to make sure CCT flow work when requesting id_token with expected nonce.
- Need to ensure id_token get created with correct nonce

Next diff:
Add Unit test to native flow when requesting id_token with nonce

Reviewed By: ppansy

Differential Revision: D30400697

fbshipit-source-id: 0f43f905d13ae7cc6f0c04d56008b1976b17e8af""",0.7,None,added

963,Jin Hou,jinhou@fb.com,"""Update login handlers (Native and web-cct) to create Id Token with expected Nonce

Summary:
# Facebook:
1. (as mentioned from title)
2. Remove `optional nonce` from Token classes, to enforce nonce validation

Overall Steps:
1. Updates the token and claims from facebook-core package files to include Nonce
2. Update LoginClient's Request to include or encapsulate expected nonce
3. Update LoginManager to use LoginConfiguration
4. **Update CCT and Native handlers to pass in `expected nonce` when creating Authentication Token. Also need to enforce Nonce validation in ID Token and Token Claim classes <-- Current Step**

Reviewed By: ppansy

Differential Revision: D30385283

fbshipit-source-id: c36895e80bd4754fb0552e08d04ec0a8f5a37006""",0.7,None,changed

964,Jin Hou,jinhou@fb.com,"""Update LoginManager to use LoginConfiguration

Summary:
# Facebook:

Before this diff, developer will need to call LoginWithReadPermission() to init the login flow.
This diff
1. adds additional method LoginWithConfiguration to login with permission and nonce being encapsulated in LoginConfiguration object
2. Update existing loginWithReadPermission() method to uses LoginConfiguration

Overall Steps:
1. Updates the token and claims from facebook-core package files to include Nonce
2. Update LoginClient's Request to include or encapsulate expected nonce
3. **Update LoginManager to use LoginConfiguration <-- Current Step**
4. Update CCT and Native handlers to pass in `expected nonce` when creating Authentication Token. Also need to enforce Nonce validation in ID Token and Token Claim classes

NOTE: Some of the login method are still being used by Device Login. We will keep all existing methods right now, and deprecate/clean them up later on on this task: T98460003

Reviewed By: ppansy

Differential Revision: D30384597

fbshipit-source-id: f4b6046de83138f5b7994cc65c8d81fb27e92fc5""",0.7,None,changed

965,Jin Hou,jinhou@fb.com,"""Update LoginClient Request to include Nonce

Reviewed By: ppansy

Differential Revision: D30383995

fbshipit-source-id: 08a414a43c7601b79afb3fc0a028b5e340290bc1""",0.7,None,changed

966,Jin Hou,jinhou@fb.com,"""Update Token and Claim to include Nonce

Reviewed By: ppansy

Differential Revision: D30382976

fbshipit-source-id: f32f9af20b4d70543485fada553cd0d7caad76b1""",0.7,None,changed

967,Jin Hou,jinhou@fb.com,"""Remove id token check for webview handler test

Reviewed By: ppansy

Differential Revision: D30383254

fbshipit-source-id: ae723557ae2ba588cb4e7a14ef4b6d356b1ab403""",0.7,None,changed

968,Jin Hou,jinhou@fb.com,"""Update buck and gradle file to to include Kotlin

Reviewed By: jingping2015

Differential Revision: D30377871

fbshipit-source-id: b6dbf5e2b061b365c25a0aaffd566f02361693b8""",0.7,None,changed

969,Jing Ping,jingping@fb.com,"""3/n Run postprocess_kotlin_conversion for appevents tests

Reviewed By: linmx0130

Differential Revision: D30329726

fbshipit-source-id: 257ba5abfca402dbc3c57ca82484b7b6eb3a8d92""",0.7,None,changed

970,Jing Ping,jingping@fb.com,"""2/n Run postprocess_kotlin_conversion for internal tests

Reviewed By: linmx0130

Differential Revision: D30319655

fbshipit-source-id: ca702a0858911826d9476cf1adc2737b81fe452e""",0.7,None,changed

971,Jing Ping,jingping@fb.com,"""Convert test until class to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30296872

fbshipit-source-id: 6160810c6b480cc8b185c170a33ae1f0780fef38""",0.7,None,changed

972,Alan Wilms,alanwilms@fb.com,"""Suppress JSONExceptions and internally log

Reviewed By: iquintero

Differential Revision: D30288581

fbshipit-source-id: be6474955b41d2d5bbe4ed0326ef93904eb3e86a""",0.7,None,changed

973,Alan Wilms,alanwilms@fb.com,"""Make IAP and IAA API parameters be strongly typed

Reviewed By: iquintero

Differential Revision: D30281096

fbshipit-source-id: 8f53dcf8912b5c151b7b6989df6c48045dc97e47""",0.7,None,changed

974,Jing Ping,jingping@fb.com,"""1/n Run postprocess_kotlin_conversion for android sdk tests

Reviewed By: linmx0130

Differential Revision: D30316250

fbshipit-source-id: 4f9fbbd587130b5ef9197727590faca22c159d8e""",0.7,None,changed

975,CodemodService FBSourceGoogleJavaFormatLinterBot,,"""Daily `arc lint --take GOOGLEJAVAFORMAT`

Reviewed By: zertosh

Differential Revision: D30335401

fbshipit-source-id: 41c2378f791acae45cb4477ce2effeb9dcb688aa""",0.2,None,changed

976,Jin Hou,jinhou@fb.com,"""Add LoginConfig class

Differential Revision: D30115419

fbshipit-source-id: 2122161751876f76c36923da3eab575b7058c97a""",0.7,None,added

977,Jin Hou,jinhou@fb.com,"""Add Claims validation

Reviewed By: linmx0130, ppansy

Differential Revision: D30060467

fbshipit-source-id: 8477c72fa7a31fb3adc42b7e6105c1e3d763b966""",0.7,None,added

978,Jing Ping,jingping@fb.com,"""Move more test to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30287734

fbshipit-source-id: 8d33bc856579061f803642fe926806692c95a525""",0.7,None,changed

979,Jing Ping,jingping@fb.com,"""cleanup java test helper class

Summary: Move InAppPurchaseTestClass into InAppPurchaseUtilsTest

Reviewed By: linmx0130

Differential Revision: D30286912

fbshipit-source-id: 3bba0b6a2b00ee4aa6fe521feea03ce58aa83719""",0.7,None,changed

980,Jing Ping,jingping@fb.com,"""Migrate Constants

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30255939

fbshipit-source-id: 4a9803eb4123664643b00b40c566922216197cb8""",0.7,None,changed

981,Mengxiao Lin,mxlin@fb.com,"""Migrate UnityReflection to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30260421

fbshipit-source-id: ee39aca6447d0b2f2816c5c978f5d54883643127""",0.7,None,changed

982,Mengxiao Lin,mxlin@fb.com,"""Add test for UnityReflection

Summary: As title. Create a fake unity player class for testing.

Reviewed By: jingping2015

Differential Revision: D30259050

fbshipit-source-id: 85cbff4054ded2b7d6ffa9e69e7f1c80ef813f55""",0.7,None,added

983,Jing Ping,jingping@fb.com,"""Migrate RCTCodelessLoggingEventListener to Kotlin

Reviewed By: linmx0130

Differential Revision: D30259778

fbshipit-source-id: 612843b3789c444260ba72a738b94f45f65d1b51""",0.7,None,changed

984,Jing Ping,jingping@fb.com,"""Add RCTCodelessLoggingEventListenerTest

Reviewed By: linmx0130

Differential Revision: D30259268

fbshipit-source-id: 5126f9ace16f94a080141d7b7c9d0d89cc40059c""",0.7,None,added

985,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingContext to GamingServices

Summary: This class will be used to keep track of the current gaming context that the Game is in.

Reviewed By: jingping2015

Differential Revision: D30237137

fbshipit-source-id: c50e8a5e374b0e9e8145eb1e278cc40757fa714a""",0.2,None,added

986,Jing Ping,jingping@fb.com,"""Convert ViewHierarchyTest to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30254961

fbshipit-source-id: e8d2d5937c554eb68648d72f7f546ec3ce72c5cc""",0.7,None,changed

987,Mengxiao Lin,mxlin@fb.com,"""Migrate Core to kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30252060

fbshipit-source-id: 5088eac92d6d5fd413da7ed4dcb6f010b8832e0c""",0.7,None,changed

988,Mengxiao Lin,mxlin@fb.com,"""Migrate EventBinding to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30252611

fbshipit-source-id: a40a03e38ba39029e622217e48d13e37320f98c9""",0.7,None,changed

989,Jing Ping,jingping@fb.com,"""Migrate ViewHierarchy to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30238923

fbshipit-source-id: 0aeaacc6dfa8d4ab00262de425a896d0b40b367c""",0.7,None,changed

990,Jing Ping,jingping@fb.com,"""Migrate CodelessLoggingEventListener to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30236353

fbshipit-source-id: 4d99e88c7aae22250a778d3e459cceec671f46b1""",0.7,None,changed

991,Mengxiao Lin,mxlin@fb.com,"""Migrate PathComponent to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30254144

fbshipit-source-id: e7b8aa71941be9b3a257a2f02bdcb36f95749c78""",0.7,None,changed

992,Jing Ping,jingping@fb.com,"""Migrate ViewIndexer to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30212804

fbshipit-source-id: 2fa54517d673c488bd3cf7f942bdbcfecac144d7""",0.7,None,changed

993,Mengxiao Lin,mxlin@fb.com,"""Move all unit tests in facebook.internal.instrument to core-kit

Summary: As title. Now all corekit unit tests are moved to corekit. I also increased heap size for gradle unit tests to 4GB.

Reviewed By: jingping2015

Differential Revision: D30229994

fbshipit-source-id: aed60660557ffeb24cf517cccb2a4b89a16c6aa0""",0.7,None,changed

994,Mengxiao Lin,mxlin@fb.com,"""Move more internal unit tests to corekit

Summary: As title, more unit tests in `com.facebook.internal` and one unit test in `com.facebook.login` are moved to the core-kit. A public field is changed to internal after this move.

Reviewed By: jingping2015

Differential Revision: D30226070

fbshipit-source-id: 64c3c74fd3fd01ce6b713b6164368ea697409d5c""",0.7,None,changed

995,Jing Ping,jingping@fb.com,"""Migrate CodelessManager to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30204818

fbshipit-source-id: 564d67715dff80351cec98959fa6d098562a32ab""",0.7,None,changed

996,Mengxiao Lin,mxlin@fb.com,"""Migrate ParameterComponent to Kotlin

Summary: As title. Since it's kind of ""internal"", the fields are changed into a conventional Java way: all fields should be obtained through the getters in Java.

Reviewed By: jingping2015

Differential Revision: D30203168

fbshipit-source-id: ee7a2e9543dc13452bb74e1a877c585ed4b3d5e2""",0.7,None,changed

997,Mengxiao Lin,mxlin@fb.com,"""New document generation script for dokka

Summary: By adding all production source code to `facebook` kit for document generation, it's easy to use gradle to call dokka for all kits in Facebook SDK. The generation will flatten the source code folders.

Reviewed By: jingping2015

Differential Revision: D30200274

fbshipit-source-id: e8063e27e470a4d5794963213119405d79af73b5""",0.7,None,added

998,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseBillingClientWrapper to Kotlin

Reviewed By: linmx0130

Differential Revision: D30166396

fbshipit-source-id: 78d5a1579185dffe7e4666c896b9b01ef3c44fc8""",0.7,None,changed

999,Mengxiao Lin,mxlin@fb.com,"""Migrate SensitiveUserDataUtils to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30204415

fbshipit-source-id: 9447654c9d81fbae3506b161052e7b218881e2df""",0.7,None,changed

1000,Jing Ping,jingping@fb.com,"""Migrate CodelessMatcher to Kotlin

Reviewed By: linmx0130

Differential Revision: D30185483

fbshipit-source-id: fa2bf80912a368e082dcbd14d882c2b2b83b0286""",0.7,None,changed

1001,Jing Ping,jingping@fb.com,"""Remove uncessary interface only used for test (#987)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/987

Reviewed By: linmx0130

Differential Revision: D30197936

fbshipit-source-id: 1af033cd1d47ca6cdfd9ee9c9eef8ac2db8b7ec6""",0.7,None,changed

1002,Mengxiao Lin,mxlin@fb.com,"""Migrate ViewIndexingTrigger to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30167757

fbshipit-source-id: 80703f7d36b175b35a8a24b3191d6e3f9845e885""",0.7,None,changed

1003,Mengxiao Lin,mxlin@fb.com,"""Migrate InAppPurchaseActivityLifecycleTracker to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30118804

fbshipit-source-id: 3ffc0b21a20a81cdb0572c9220cee47a6f9c4986""",0.7,None,changed

1004,Mengxiao Lin,mxlin@fb.com,"""Add test for ViewIndexingTrigger

Summary: As title

Reviewed By: jingping2015

Differential Revision: D30166364

fbshipit-source-id: 97c735ba45df009d0115a25b851b4043cb01f1bc""",0.7,None,added

1005,Mengxiao Lin,mxlin@fb.com,"""Fix PendingIntent vulnerability

Summary: Following https://support.google.com/faqs/answer/10437428 to address the PendingIntent vulnerability issue in our SDK.

Reviewed By: jingping2015

Differential Revision: D30137822

fbshipit-source-id: ceb9baf21074d1cf4187ab3d523f2c75fd0957f2""",0.7,None,fixed

1006,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseBillingClientWrapperTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D30142887

fbshipit-source-id: 6c035703afa758a98da3fab37b2cf3f298a4f91e""",0.7,None,changed

1007,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseSkuDetailsWrapper to Kotlin

Reviewed By: linmx0130

Differential Revision: D30124819

fbshipit-source-id: df16f3b5627c8ea69e4253a62ccde4d34dfcb552""",0.7,None,changed

1008,Jing Ping,jingping@fb.com,"""Backfill InAppPurchaseSkuDetailsWrapperTest

Reviewed By: linmx0130

Differential Revision: D30122358

fbshipit-source-id: 875d4ada97cfcae543ba1d8960a5b5aebcb27b54""",0.7,None,changed

1009,Mengxiao Lin,mxlin@fb.com,"""Add test for InAppPurchaseActivityLifecycleTracker

Summary: As tile. Modified InAppPurchaseActivityLifecycleTracker to make the testing easier.

Reviewed By: jingping2015

Differential Revision: D30116647

fbshipit-source-id: b286be12e3d6cec96eee4ff71cd4e1d72f0d1672""",0.7,None,added

1010,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseManager

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30095411

fbshipit-source-id: 030d033ffe3f48611a0f5a8f95785d59b5d00d2c""",0.7,None,changed

1011,Omer Strulovich,ostrulovich@fb.com,"""Update ktfmt component on FBS:master

Summary:
Manual component version update
Bump Schedule: https://www.internalfb.com/intern/msdk/bump/?schedule_fbid=2417906665138164
Package: https://www.internalfb.com/intern/msdk/package/759645261536811/
Oncall Team: ktfmt
NOTE: This build is expected to expire at 2022/08/03 10:24AM PDT
---------
New project source changes since last bump based on D28749258 (fef679f4ee67cf0de45b209aee91f939361fde81 at 2021/05/31 02:23PM IST):
| 2021/05/31 11:21PM IDT | cgrushko | D27972459 | [ktfmt][PR] Update ktfmt to fix odd formatting with DSLs. |
| 2021/06/01 11:13AM IDT | cgrushko | D28745757 | [ktfmt] ktfmt-diff.sh doesn't abort if ktfmt crashed; and handles long lists of files to process |
| 2021/06/06 10:08AM IDT | cgrushko | D28778136 | [ktfmt][PR] Fix explicit ctor formatting; and KDoc's ``` followed by more text |
| 2021/06/21 06:26PM IDT | cgrushko | D29253701 | [ktfmt] Bump version to 0.26 |
| 2021/06/21 06:26PM IDT | cgrushko | D29253700 | [ktfmt] Bump version to 0.27-SNAPSHOT |
| 2021/06/28 11:49PM IDT | cgrushko | D29423991 | [ktfmt] Bump version to 0.27 |
| 2021/06/28 11:49PM IDT | cgrushko | D29423992 | [ktfmt] Bump version to 0.28-SNAPSHOT |
| 2021/06/28 11:49PM IDT | cgrushko | D29423247 | Back out ""[ktfmt][PR] Update ktfmt to fix odd formatting with DSLs.""

Original commit changeset: 6f815a2083f1 |
| 2021/07/06 11:43AM EDT | strulovich | D29525151 | [Ktfmt] Put some delegate expressions in a block |
| 2021/07/07 03:39PM IDT | cgrushko | D29585429 | [ktfmt] Fix perpetual addition of newline |
| 2021/07/07 03:54PM IDT | cgrushko | D29585829 | [ktfmt] Update name of AWS policy required to deploy the AWS Lambda that powers https://facebookincubator.github.io/ktfmt/ |
| 2021/07/07 05:18PM IDT | cgrushko | D29586013 | [ktfmt] Update release docs now that it's mostly automated |
| 2021/07/13 03:42PM IDT | ilangold | D29586045 | Solution for ktfmt not processing .kts files |
---------

build-break (bot commits are not reviewed by a human)
drop-conflicts

Reviewed By: cgrushko

Differential Revision: D30074827

fbshipit-source-id: 3759224f3fa33c48c96bd8d6758bae1a83151347""",0.2,None,changed

1012,Jin Hou,jinhou@fb.com,"""Link claims and header to AuthenticationToken

Reviewed By: ppansy

Differential Revision: D29953602

fbshipit-source-id: 6ef5dcae7c6cbafa7385033b9106c03d79589936""",0.7,None,changed

1013,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseEventManager

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30094447

fbshipit-source-id: 3923fe04341de81ee65e1b3a64a285b7008fb4e5""",0.7,None,changed

1014,Jing Ping,jingping@fb.com,"""Add test for InAppPurchaseEventManager

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30083898

fbshipit-source-id: 71fd4717dee9892a76e7ac06d3c62aa8cbedaab2""",0.7,None,added

1015,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseLoggerManager

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30062396

fbshipit-source-id: 5d07f98043590db48ce95bdfa8282255633abb90""",0.7,None,changed

1016,Mengxiao Lin,mxlin@fb.com,"""Backfilled tests for InAppPurchaseManager

Summary: As title

Reviewed By: jingping2015

Differential Revision: D30076919

fbshipit-source-id: 0f22fb0382d1c22b3d54bb8321cc53ea3742171f""",0.7,None,changed

1017,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseLoggerManagerTest to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30057583

fbshipit-source-id: a0e86b630f3312943749d00da5cb05906f293ee0""",0.7,None,changed

1018,Jin Hou,jinhou@fb.com,"""Add AuthenticationTokenHeader and test

Reviewed By: ppansy

Differential Revision: D29872168

fbshipit-source-id: 5d068fc3572ee09a1f7ffcf30fb2b318f92462d6""",0.7,None,added

1019,Mengxiao Lin,mxlin@fb.com,"""Version Bump 11.2.0

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D30053088

fbshipit-source-id: cb19daea299eba0e4bf7a7a7ddd08043d7f90e1b""",0.2,None,changed

1020,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseUtils and its test to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30054405

fbshipit-source-id: 342d4f715d76a0432a638ae7cdc0169bdc055b3b""",0.7,None,changed

1021,Jing Ping,jingping@fb.com,"""Migrate InAppPurchaseAutoLogger to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30053624

fbshipit-source-id: 4567ad89915b72866e95e6b97fe91162fa53fe90""",0.7,None,changed

1022,Jin Hou,jinhou@fb.com,"""Add AuthenticationToken to LoginResult

Reviewed By: ppansy, jvlyn

Differential Revision: D29842703

fbshipit-source-id: d293a5addf0ad5c1cf53b444baa63c90dbeaff0a""",0.7,None,added

1023,Jing Ping,jingping@fb.com,"""Add InAppPurchaseAutoLoggerTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30052594

fbshipit-source-id: 2541a4784e30e3f529b4211efc591278723d51b6""",0.7,None,added

1024,Jing Ping,jingping@fb.com,"""Migrate SuggestedEventViewHierarchy

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30022545

fbshipit-source-id: 81e72340f1195fe3cf3a6b9d7441764350812865""",0.7,None,changed

1025,Mengxiao Lin,mxlin@fb.com,"""Fix AppEventsLoggerImpl.augmentWebView

Summary: As title. Two unit tests are added to verify the result

Reviewed By: jingping2015

Differential Revision: D30024427

fbshipit-source-id: a1cb65bf0122a75a323c9e3c385c2aa503c179d9""",0.7,None,fixed

1026,Jin Hou,jinhou@fb.com,"""Add AuthenticationTokenClaims class

Reviewed By: ppansy

Differential Revision: D29788788

fbshipit-source-id: 84f3f1b57889ea885bdb69c955246fe7752d1eda""",0.7,None,added

1027,Mengxiao Lin,mxlin@fb.com,"""Remove useless empty units tests for com.facebook.bolts

Summary: As title. These 3 unit tests are empty and the classes to be test are in fact interfaces. Preparing for add the rules that require unit tests be put in their own kits.

Reviewed By: joesus

Differential Revision: D30020529

fbshipit-source-id: f3f0afdfdac1bcf9906a7b2cc72da3f663b94431""",0.7,None,added

1028,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookSdk to Kotlin

Summary: As title. The central configuration class of CoreSDK is migrated to Kotlin in this diff. Some unit tests are modified to mock the new `FacebookSdk` class correctly and avoid null pointer exceptions.

Reviewed By: jingping2015

Differential Revision: D29974556

fbshipit-source-id: a36d65361f51fe492cbdce8d15a6625519edd2b6""",0.7,None,added

1029,Jing Ping,jingping@fb.com,"""Migrate PredictionHistoryManager

Summary: As title

Reviewed By: linmx0130

Differential Revision: D30003568

fbshipit-source-id: 1e3080c5e93c0bb959c963c5e060a8b1ee9af4e1""",0.7,None,changed

1030,Jing Ping,jingping@fb.com,"""Add PredictionHistoryManagerTest

Reviewed By: linmx0130

Differential Revision: D30002179

fbshipit-source-id: 5421feb6d1729cb4ccd2f6ce84f6969c76128cec""",0.7,None,added

1031,Mengxiao Lin,mxlin@fb.com,"""Fix Kotlin annotation rules on verifying the existance of an annotation

Reviewed By: jingping2015

Differential Revision: D29994325

fbshipit-source-id: 859d77b69d7ed7336a044fbe21fc714f44f69174""",0.7,None,fixed

1032,Jing Ping,jingping@fb.com,"""Migrate ViewObserver to Kotlin

Reviewed By: linmx0130

Differential Revision: D29997464

fbshipit-source-id: 24087b13fb0ecfc2cc8a861f50b79009ee19bc64""",0.7,None,changed

1033,Jing Ping,jingping@fb.com,"""Add ViewObserverTest

Reviewed By: linmx0130

Differential Revision: D29995124

fbshipit-source-id: b24991642820ce7270ffc876282c8afdbffd4323""",0.7,None,added

1034,Jing Ping,jingping@fb.com,"""Migrate ViewOnClickListener

Reviewed By: linmx0130

Differential Revision: D29974396

fbshipit-source-id: 92700090c3ab20873d592cfa029a7ce45e7afd20""",0.7,None,changed

1035,Jing Ping,jingping@fb.com,"""Add ViewOnClickListenerTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29973715

fbshipit-source-id: 18919602618c40e798ce3584813da1cb09734e49""",0.7,None,added

1036,Jing Ping,jingping@fb.com,"""Migrate SuggestedEventsManager to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29954794

fbshipit-source-id: 9307306e999bb258331fd1a4a1b9af341b6589ca""",0.7,None,changed

1037,Mengxiao Lin,mxlin@fb.com,"""Backfilled unit tests for FacebookSdk

Summary: As title. Two unit tests are added for preparing the migration of `FacebookSdk`.

Reviewed By: jingping2015

Differential Revision: D29967221

fbshipit-source-id: b11de4415d1c376649b95c130219a2fba9c788d7""",0.7,None,added

1038,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookSdk test to Kotlin

Summary: As title. Also refactor the test to use AssertJ and move the test to core-kit

Reviewed By: jingping2015

Differential Revision: D29950194

fbshipit-source-id: 1a20b4b17846fce7691c9241140e2732ec3024d3""",0.7,None,changed

1039,Jing Ping,jingping@fb.com,"""Migrate FeatureExtractor

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29954146

fbshipit-source-id: 41b7c8cd674108eccc5ecac0fecd9562ae886eff""",0.7,None,changed

1040,Jing Ping,jingping@fb.com,"""Add FeatureExtractorTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29953620

fbshipit-source-id: 543d8dc1a2e76e1cc0eaa7d1a1da60333b7ab7b2""",0.7,None,added

1041,Jing Ping,jingping@fb.com,"""Migrate MetadataViewObserver to Kotlin

Reviewed By: linmx0130

Differential Revision: D29928645

fbshipit-source-id: 5be55705363fc54992b838b6373e21da983ac34a""",0.7,None,changed

1042,Jin Hou,jinhou@fb.com,"""Add AuthenticationToken to CCT and Webview Handler

Reviewed By: ppansy, jvlyn

Differential Revision: D29781505

fbshipit-source-id: e4306659dd3b3f39676fda2ae686a7e614edc98b""",0.7,None,added

1043,Mengxiao Lin,mxlin@fb.com,"""Migrate AppLinks to Kotlin

Summary: As title. Also backfilled its test.

Reviewed By: jingping2015

Differential Revision: D29947099

fbshipit-source-id: fd6dec5fe2dedc470c8f1251b4a36e0e6de3bc80""",0.7,None,changed

1044,Mengxiao Lin,mxlin@fb.com,"""Move core-kit Kotlin tests to core-kit package

Summary: As title

Reviewed By: jingping2015

Differential Revision: D29945923

fbshipit-source-id: 36283400cf12dffa8ca088c6a74b7b3e530f63ef""",0.7,None,changed

1045,Jin Hou,jinhou@fb.com,"""Add AuthenticationToken to LoginClient.Result and NativeAppLoginMethodHandler

Reviewed By: jvlyn

Differential Revision: D29717414

fbshipit-source-id: dbb979261642e12503e6bf866b79f7df2ac22696""",0.7,None,added

1046,Jin Hou,jinhou@fb.com,"""Create AuthenticationToken class and test

Reviewed By: ppansy

Differential Revision: D29713557

fbshipit-source-id: 5d995e2742b8be28d06c2e6d8eb60c6a72874cce""",0.7,None,changed

1047,Jing Ping,jingping@fb.com,"""Add MetadataViewObserverTest

Reviewed By: linmx0130

Differential Revision: D29927913

fbshipit-source-id: 6cac96c1b7e841ec0edfb01540358c37e5f79501""",0.7,None,added

1048,Mengxiao Lin,mxlin@fb.com,"""Add warning message for apps target Android 11 when calling native fbapps

Summary: As title. Many developers complain that we don't provide enough or correct warnings for them to declare package visibility needs on Android 11. Now there will be a warning message and a link to our FAQ page when it detected that the targetSDK >= 30 and no fb apps are available.

Reviewed By: jvlyn

Differential Revision: D29921182

fbshipit-source-id: 23f63bce0e009d31e13dd84aea5f8771f9dc15fe""",0.7,None,added

1049,Jing Ping,jingping@fb.com,"""Migrate MetadataIndexer

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29921341

fbshipit-source-id: 9afde414a28ac0a7bcb082e673a236d9b99b7933""",0.7,None,changed

1050,Jing Ping,jingping@fb.com,"""Add MetadataIndexerTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29918038

fbshipit-source-id: 45a0ec809da1ec3caa392c67149e25c94fe6537a""",0.7,None,added

1051,Jing Ping,jingping@fb.com,"""Convert MetadataMatcher Kotlin

Reviewed By: linmx0130

Differential Revision: D29915524

fbshipit-source-id: 1b525b2960c3ff7abb320bc1f31332e7d6e0cd5c""",0.7,None,changed

1052,Mengxiao Lin,mxlin@fb.com,"""Migrate AndroidExecutors to Kotlin

Summary: As title. Since our minSDK = 15, `allowCoreThreadTimeout()` is removed.

Reviewed By: jingping2015

Differential Revision: D29888840

fbshipit-source-id: b9b198b36e82fbc27e4dbbb27a3814d9b08a0c25""",0.7,None,removed

1053,Mengxiao Lin,mxlin@fb.com,"""Add test for AndroidExecutors

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D29888194

fbshipit-source-id: 666351eaf9f2d4fde33929e363339b743495e8f0""",0.7,None,added

1054,Jing Ping,jingping@fb.com,"""Fix buck test coverage

Summary:
After we rebuild the data of line coverage for android sdk, the covered line decreased: https://fburl.com/daiquery/o4iruo8e  ~ 19% coverage, we used to have around 40%

Dig into this fond when run `buck test --code-coverage --code-coverage-format XML //fbandroid/first-party/java/androidsdk/facebook-core:test`

/FileDownloadTaskTest.kt failed.  P432336907

Reviewed By: linmx0130

Differential Revision: D29904254

fbshipit-source-id: 99e5d18b34501c87f006fc5341cd6d723359b597""",0.7,None,fixed

1055,Julie Yuan,julieyuan@fb.com,"""Merge x-FoA fork of GraphRequest

Reviewed By: jingping2015

Differential Revision: D29757151

fbshipit-source-id: 7faa81312b2eb532a012ed897e1cb70e643089fe""",0.2,None,changed

1056,Julie Yuan,julieyuan@fb.com,"""Merge the rest of facebook-common

Differential Revision: D29737093

fbshipit-source-id: 10030dbf4872fcfda4a6e54ff698391d2b7640af""",0.2,None,changed

1057,Julie Yuan,julieyuan@fb.com,"""Merge NativeProtocol + the native app login handlers

Reviewed By: jingping2015

Differential Revision: D29756143

fbshipit-source-id: e95a44f5fcf3890e336c23e7ae543bd5ee36a016""",0.2,None,changed

1058,Julie Yuan,julieyuan@fb.com,"""Merge x-FoA fork of facebook-core's Profile class

Reviewed By: jingping2015

Differential Revision: D29713655

fbshipit-source-id: 00591d0f43b6587540716f56ff76cb8ad1431c3c""",0.2,None,changed

1059,Julie Yuan,julieyuan@fb.com,"""Merge most core module files for x-FoA Login

Reviewed By: linmx0130

Differential Revision: D29701072

fbshipit-source-id: 5f9ba44be6e2e83021f15c46148edc903018a33f""",0.2,None,changed

1060,Mengxiao Lin,mxlin@fb.com,"""Refactor instrument tests for Kotlin 1.5

Summary: Powermock's `thenCallRealMethod` will fail on Kotlin 1.5. By refactoring instrument tests to remove these usage, we can smoothly migrate to new Kotlin JVM/IR backend.

Reviewed By: jingping2015

Differential Revision: D29882104

fbshipit-source-id: a00db12010a59a0340ab6d1beff68a2fa22a8377""",0.7,None,changed

1061,Mengxiao Lin,mxlin@fb.com,"""Set jvmTarget to 1.6 for Kotlin 1.5

Summary:
By default, Kotlin 1.5 generates Java 8 bytecode (with `invokedynamic` op). However, it's supported by Android only by API level 26+ (Android O , android 8.0) or through d8 desurgering with Android Gradle Plugin 4.0.0+ (https://developer.android.com/studio/write/java8-support).

Facebook Android SDK maintains to be compatible with minSDK >= 15. Hence for now we can only keep jvmTarget to 1.6 to have the same behaviors as the old Kotlin compilers and avoid changes in developer's side.

Reviewed By: jingping2015

Differential Revision: D29857382

fbshipit-source-id: a94b706f72fa2be743f18377da4edaada3dad990""",0.7,None,changed

1062,David Torres,detorres@fb.com,"""Update test app with context APIs

Summary: Update the test app with the context APIs added in D28913010 (https://github.com/facebook/facebook-android-sdk/commit/0938b7fe9e9cf44272f85350ef29a2c30cccc4ce), D29303453 (https://github.com/facebook/facebook-android-sdk/commit/3ef7244fec3c4cb7ceee449cf9e512d60977afc3) and D29314088

Differential Revision: D29108772

fbshipit-source-id: 39c4812bbdd8ca801f20f0a46cc81e4f5e6d2072""",0.7,None,changed

1063,David Torres,detorres@fb.com,"""Add ContextCreateDialog to GamingServices

Differential Revision: D29314088

fbshipit-source-id: 0e23eeac3a143e0b92f7bd0a19f4c0f402962010""",0.7,None,added

1064,Jing Ping,jingping@fb.com,"""Convert UserSettingsManager

Reviewed By: linmx0130

Differential Revision: D29834567

fbshipit-source-id: c139f064d2640d86471aa6346e9157279ff0448c""",0.7,None,changed

1065,Mengxiao Lin,mxlin@fb.com,"""Add rules that require @JvmField on all Kotlin object properties

Summary: As title. I also catch some public static fields that are not annotated.

Reviewed By: jingping2015

Differential Revision: D29798397

fbshipit-source-id: 5817281461206ce759df6ec8f69c508f9e850e9e""",0.7,None,added

1066,Mengxiao Lin,mxlin@fb.com,"""Remove thenCallRealMethod on static mocks from AppEvents tests

Reviewed By: jingping2015

Differential Revision: D29830174

fbshipit-source-id: 203b68db5d63e4dd07f21bdf3ba8233d1ffaee90""",0.7,None,changed

1067,Jing Ping,jingping@fb.com,"""Remove thenCallRealMethod on static mock of CrashHandlerTest and InstrumentUtilityTest.kt

Reviewed By: linmx0130

Differential Revision: D29689103

fbshipit-source-id: 1ff8e986029508b26dbaec7f849c42ab276d2b47""",0.7,None,changed

1068,Mengxiao Lin,mxlin@fb.com,"""Upgrade to Kotlin 1.5

Summary: As title. Some tests are not compatible with Kotlin's new JVM/IR compiler, so we still use the old backend.

Reviewed By: jingping2015

Differential Revision: D29667821

fbshipit-source-id: c9b60ec97a8537cc6dd632b6ad236c1d8ab980f9""",0.7,None,changed

1069,David Torres,detorres@fb.com,"""Add ContextChooseDialog to GamingServices

Differential Revision: D29303453

fbshipit-source-id: bc41432528865dee56e1daaa956ccd405df5f901""",0.7,None,added

1070,David Torres,detorres@fb.com,"""Add ContextSwitchDialog to GamingServices

Reviewed By: iquintero

Differential Revision: D28913010

fbshipit-source-id: ddd9114c71ad9ca40d4b37b16282d818e7988841""",0.7,None,added

1071,Jing Ping,jingping@fb.com,"""Migrate IntegrityManager

Reviewed By: linmx0130

Differential Revision: D29806305

fbshipit-source-id: f5c8d9c0745223fb92038ff4c8f6085f2699c7a2""",0.7,None,changed

1072,Mengxiao Lin,mxlin@fb.com,"""Move com.facebook.internal tests to corekit

Summary: As title. It allows us to hide some internal fields exposed for testing.

Reviewed By: jingping2015

Differential Revision: D29802818

fbshipit-source-id: fc215b29aad53e533e6d7d0c83d328ffa241b9c2""",0.7,None,changed

1073,Mengxiao Lin,mxlin@fb.com,"""Update maven configuration to include Kotlin code for source jar

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D29804917

fbshipit-source-id: 16efee0f28e0a2ae041e47147df873a33f5592bd""",0.7,None,changed

1074,Jing Ping,jingping@fb.com,"""Fix AppEventsLoggerImplTest run in gradle

Reviewed By: linmx0130

Differential Revision: D29780149

fbshipit-source-id: d7076254bc2c2ffbf2125c119c52cb0ab74981c8""",0.7,None,fixed

1075,Jing Ping,jingping@fb.com,"""Migrate FacebookSDKJSInterface to Kotlin

Reviewed By: linmx0130

Differential Revision: D29773894

fbshipit-source-id: 40c05c196f403314f158bbf6485d4f3557c422b5""",0.7,None,changed

1076,Jing Ping,jingping@fb.com,"""Convert AnalyticsUserIDStore to Kotlin

Reviewed By: linmx0130

Differential Revision: D29768854

fbshipit-source-id: e088d89048cccbf17b6350cd795b9e166992b741""",0.7,None,changed

1077,Jing Ping,jingping@fb.com,"""Migrate AppEventsManager to Kotlin

Summary:
Facebook :
Concert AppEventsManager to Kotlin and add test

Reviewed By: linmx0130

Differential Revision: D29740154

fbshipit-source-id: debb303c62d08134259641893e84e8efb8fbed8f""",0.7,None,added

1078,Mengxiao Lin,mxlin@fb.com,"""Make AccessToken internal methods package private

Summary: At title, also migrate `LegacyTokenCacheTest` to Kotlin.

Reviewed By: jingping2015

Differential Revision: D29720929

fbshipit-source-id: 8c463c16336adf71775617901795b2922bb74b16""",0.7,None,changed

1079,Mengxiao Lin,mxlin@fb.com,"""Version bump 11.1.1

Summary: This is a bug fix release.See CHANGELOG.md for the details

Reviewed By: jingping2015

Differential Revision: D29748311

fbshipit-source-id: c7054b1399ff328c851f1fbec6cbfe3933b069d1""",0.2,None,fixed

1080,Nacho Quintero Rizo,roboto@fb.com,"""Fix Attachments in GraphApiRequests

Summary: A bug was recently introduced that made any attachment not being actually sent to the server for Graph Requests. This fixes that.

Reviewed By: jingping2015

Differential Revision: D29742299

fbshipit-source-id: 03a4d0b2c06f686aaa491434e0b06c86228b6b2c""",0.2,None,fixed

1081,Jing Ping,jingping@fb.com,"""Migrate FacebookSdkVersion to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29724377

fbshipit-source-id: 97daf5fa0123acfa4b1eb2bfb0ea2e5f3d548f7b""",0.7,None,changed

1082,Jing Ping,jingping@fb.com,"""Migrate UserDataStore

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29722014

fbshipit-source-id: 8014a8380ee85a29f34180df59883a634b49e490""",0.7,None,changed

1083,Jing Ping,jingping@fb.com,"""Migrate UserDataStoreTest to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29720219

fbshipit-source-id: c27301337b7ee65ee0307120a0b971fb5707ef45""",0.7,None,changed

1084,Mengxiao Lin,mxlin@fb.com,"""Deprecate bolts.Capture and wait for its removal in next major release

Summary:
As title. Migrate `CancellationTest` to Kotlin to avoid using Capture

`Capture` is used to capture a variable in the context for creating a closure. These capturing is supported by Kotlin by default, so we should not use it anymore. I deprecate it because some client code may (highly unlikely) still use it.

Reviewed By: jingping2015

Differential Revision: D29719597

fbshipit-source-id: 52518826c9da7be5e6f08fde4cad75f1c97cc3fe""",0.7,None,changed

1085,Mengxiao Lin,mxlin@fb.com,"""Migrate BoltsExecutors to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D29720000

fbshipit-source-id: b2b46a07e3baaa6ab4576c35dbc1b03cf14f5eff""",0.7,None,changed

1086,Alan Wilms,alanwilms@fb.com,"""Fix race condition where a quick response from Daemon is received by SDK before the request is stored

Differential Revision: D29725771

fbshipit-source-id: 4ef36e60bb1c9986d0ef393a65094c8c5fe27310""",0.7,None,fixed

1087,Jing Ping,jingping@fb.com,"""Make LegacyTokenHelper Internal

Reviewed By: linmx0130

Differential Revision: D29716728

fbshipit-source-id: f4413d63931ce066c49cd20068bf05bc1404b17f""",0.7,None,changed

1088,Mengxiao Lin,mxlin@fb.com,"""Migrate bolts.Task into Kotlin

Summary:
As title. Following changes are made:
1. Make clear that `trySetResult` may receive null and `Task<T>.result` is nullable. All client code should check the whether the result is null before using it.
2. `TaskCompletionSource` is also updated to accept nullable result.
3. Adopt `ReentrantLock` to replace the object lock.

Reviewed By: jingping2015

Differential Revision: D29715522

fbshipit-source-id: 02b2878ad58b8b59a10154a9d943a111e19e0ea5""",0.7,None,changed

1089,Mengxiao Lin,mxlin@fb.com,"""Migrate TaskTest to Kotlin

Summary:
As title. This diff moves this huge test into the corekit and rewrites TaskTest in following ways:
1. Adopt `assertThat`
2. Replace object lock with `ReentrantLock` and `Condition`
3. Remove JUnit Rule and adopt Test with expected exceptions.

Reviewed By: jingping2015

Differential Revision: D29703285

fbshipit-source-id: 45c739e1c5efd1c421433ae24d3776ed56f68cc4""",0.7,None,changed

1090,Jing Ping,jingping@fb.com,"""Remove VisibleForTesting from profile related classes

Reviewed By: linmx0130

Differential Revision: D29704954

fbshipit-source-id: cd2ff178ed5f9a9b20eb1908d154f6471658dc51""",0.7,None,changed

1091,Mengxiao Lin,mxlin@fb.com,"""Move bolts Kotlin tests to core-kit and remove unnecessary VisibleForTesting

Summary: As title. Add internal modifiers to `CancellationToken`, `CancellationTokenRegistration`, `CancellationTokenSource` and `UnobservedErrorNotifier`.

Reviewed By: jingping2015

Differential Revision: D29701596

fbshipit-source-id: 9cf18297f2fd696fbc6cff75dd721ff60ea83497""",0.7,None,added

1092,Mengxiao Lin,mxlin@fb.com,"""Kotlin SAM interface rule

Reviewed By: jingping2015

Differential Revision: D29669672

fbshipit-source-id: bec205110b429c4c557312b808b9ff189b1a3e80""",0.7,None,changed

1093,Jing Ping,jingping@fb.com,"""move appenvets tests into facebook-core

Reviewed By: linmx0130

Differential Revision: D29655506

fbshipit-source-id: d2fd3d21be3f0f2fad5b61244c811b24092bf448""",0.7,None,changed

1094,Jing Ping,jingping@fb.com,"""Make classes internal

Reviewed By: linmx0130

Differential Revision: D29655303

fbshipit-source-id: 8ef25e8916e284f8b95bd46f814d4f828acb47ab""",0.7,None,changed

1095,Jing Ping,jingping@fb.com,"""Make SourceApplicationInfo and HashUtils internal

Reviewed By: linmx0130

Differential Revision: D29646755

fbshipit-source-id: 9972cbd77d3759c4a3abd340a427d62201cb886e""",0.7,None,changed

1096,Mengxiao Lin,mxlin@fb.com,"""Kotlin version unification

Reviewed By: jingping2015

Differential Revision: D29663741

fbshipit-source-id: cc797815c88b67c805279b705b333a9241bf2695""",0.7,None,changed

1097,Jing Ping,jingping@fb.com,"""Make SessionInfo and SessionLogger internal

Reviewed By: linmx0130

Differential Revision: D29645979

fbshipit-source-id: 1d3097f07dbcaecd3fa6d406e0f313ccb0140f17""",0.7,None,changed

1098,Jing Ping,jingping@fb.com,"""Make PersistedEvents and SessionEventsState internal

Reviewed By: linmx0130

Differential Revision: D29629982

fbshipit-source-id: 289b7eee4a98c93c2f68f028049221c703d5d895""",0.7,None,changed

1099,Jing Ping,jingping@fb.com,"""Make FlushReason and FlushStatistics internal class

Reviewed By: linmx0130

Differential Revision: D29627157

fbshipit-source-id: 5574e61982112a10028e57e6ce5c809bda864ede""",0.7,None,changed

1100,Mengxiao Lin,mxlin@fb.com,"""Remove VisibleForTesting in GraphResponse

Summary: As title, make internal methods in GraphResponse be really internal.

Reviewed By: jingping2015

Differential Revision: D29621878

fbshipit-source-id: 65270205ce1901d3794fd89b33fd1314fc30b361""",0.7,None,changed

1101,Jing Ping,jingping@fb.com,"""Remove AppEventTestUtilities in Facebook

Reviewed By: linmx0130

Differential Revision: D29625332

fbshipit-source-id: d056827abbbeeedf0ead919952294ec308db9879""",0.7,None,changed

1102,Mengxiao Lin,mxlin@fb.com,"""Fix crash when requesting ads identifer through service fails

Summary:
On some strange Android device (maybe GMS is modified or not complete), `bindService()` call to retrieve ads identifier may throw `SecurityException`. This diff will fix the problem and a unit test is added to test the behavior.

According to [Google's document](https://developer.android.com/reference/android/content/Context#bindService(android.content.Intent,%20android.content.ServiceConnection,%20int)), throwing a `SecurityException` is an expected behavior of `bindService()` and we should handle it

Reviewed By: jingping2015

Differential Revision: D29616037

fbshipit-source-id: 61f8cc28eccf3ca654cfc1220b7f4ac8799b44d7""",0.7,None,fixed

1103,Jing Ping,jingping@fb.com,"""make AppEventsLoggerImpl and InternalAppEventsLogger internal class

Reviewed By: linmx0130

Differential Revision: D29579929

fbshipit-source-id: 065f9227ac7228643ad342e65741b568a39a55df""",0.7,None,changed

1104,Andres Barragan Salas,andresbarragan@fb.com,"""Add SDK message call for Haptic Feedback on cloud gaming

Summary:
Added call for message PERFORM_HAPTIC_FEEDBACK_ASYNC on cloud gaming
Added button on test app to test itâ€™s functionality

Reviewed By: iquintero

Differential Revision: D29520388

fbshipit-source-id: b615c403dbb1712dc91b03a106a4927eb32b3d5a""",0.7,None,added

1105,Mengxiao Lin,mxlin@fb.com,"""Update AndroidSDK readme to reflect new versions in gradle configuration

Summary: As title.

Reviewed By: jingping2015, Oliverccccct

Differential Revision: D29597916

fbshipit-source-id: cf18406bbabed80e5e8ac828204b09e968e06153""",0.7,None,changed

1106,Mengxiao Lin,mxlin@fb.com,"""Version bump v11.1.0

Summary: As title

Reviewed By: jingping2015

Differential Revision: D29464393

fbshipit-source-id: 66aeee4ce43c9b958c20878351bdcf0bb8a7c51c""",0.2,None,changed

1107,Mengxiao Lin,mxlin@fb.com,"""Fix IncorrectContextUseViolation on Android 11

Summary: When StrictMode is enabled, Android 11 will display a warning if the app requests `WindowManager` on application contexts. Following [Microsoft AppCenter's method](https://github.com/microsoft/appcenter-sdk-android/pull/1429) we fixed it by requesting display managers.

Reviewed By: jingping2015

Differential Revision: D29496571

fbshipit-source-id: 7c83817a3f472843f82270f50709dfad9fa31a95""",0.7,None,fixed

1108,Mengxiao Lin,mxlin@fb.com,"""Make AccessTokenCache and AccessTokenManager internal

Summary:
As title, this diff makes two internal classes that manage AccessToken real internal to improve the robustness. Related tests are also moved to the CoreKit for test visibility.

A new test utility class `FacebookTestUtility` is added in the testutil package to replace the old `TestUtil`.

Reviewed By: jingping2015

Differential Revision: D29471026

fbshipit-source-id: 762a4428e1c25424d290b9bc1323bb98c06351dd""",0.7,None,fixed

1109,Jing Ping,jingping@fb.com,"""Add deprecated message

Reviewed By: linmx0130

Differential Revision: D29465469

fbshipit-source-id: e3a477817bf0d4f6c3ee10d596fa0f9329bc0461""",0.7,None,added

1110,Jing Ping,jingping@fb.com,"""Migrate AppEventsLogger

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29441108

fbshipit-source-id: bb390d789ddce42df099bf28c56da20aae6ad73f""",0.7,None,changed

1111,Mengxiao Lin,mxlin@fb.com,"""Migrate AggregateException to Kotlin

Summary: as title. also fixed a potential NPE

Reviewed By: jingping2015

Differential Revision: D29445283

fbshipit-source-id: 4d11e1f3df1f0a888ed02abc79d154a0256b6aef""",0.7,None,fixed

1112,Mengxiao Lin,mxlin@fb.com,"""Add test for AggregateException

Summary: As title. Also fixed an NPE on passing null to construct `AggregateException`

Reviewed By: jingping2015

Differential Revision: D29443989

fbshipit-source-id: d6146ea803ba60fb910a1b57f3ac9e9f17363901""",0.7,None,added

1113,Jing Ping,jingping@fb.com,"""Make AppEventCollection internal

Reviewed By: linmx0130

Differential Revision: D29434556

fbshipit-source-id: 4f7655baf7e6c6b6be5284726cd5721d11293d6c""",0.7,None,changed

1114,Jing Ping,jingping@fb.com,"""Migrate AppEventsLoggerImpl to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29412495

fbshipit-source-id: 2187da12f5c509b51da797879dccbc1626dc318c""",0.7,None,changed

1115,Jing Ping,jingping@fb.com,"""Modernize AppEventsLoggerTest

Reviewed By: linmx0130

Differential Revision: D29408191

fbshipit-source-id: 18bbe759eb5133d0e5f2afd4b376cd3cbdbb66e6""",0.7,None,changed

1116,Daiwei Liu (Games),davidlx@fb.com,"""Resolve Issue that can crash Game when requesting App Request

Summary: Resolve Issue that can crash Game when requesting App Request

Reviewed By: iquintero

Differential Revision: D29398057

fbshipit-source-id: e61d11183b72c0285453ef0761f315f1525f7823""",0.7,None,changed

1117,Mengxiao Lin,mxlin@fb.com,"""Add test for BoltsExecutors

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D29398418

fbshipit-source-id: 1eec41f5385766bdf5f42ba45d6f267b1e6068c4""",0.7,None,added

1118,Mengxiao Lin,mxlin@fb.com,"""Migrate TaskCompletionSource to Kotlin

Summary: As title. Also backfill the tests.

Reviewed By: jingping2015

Differential Revision: D29403092

fbshipit-source-id: 3bc7eed55e4f33ce11d264092a9aa55a26e69b0f""",0.7,None,changed

1119,Mengxiao Lin,mxlin@fb.com,"""Update feature requests template for Android SDK (#977)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/977

Update feature requests template to use issue form. Also fix a link in bug report template.

Reviewed By: jingping2015

Differential Revision: D29396235

fbshipit-source-id: 468ae9e759cbc493be3fe711328a774a22280aa3""",0.7,None,changed

1120,Mengxiao Lin,mxlin@fb.com,"""Only trust Google Play as checksum provider on Android 12+

Summary:
This diff adds Google Play's certificates as the trusted installer. For other installers, the checksum will be computed by the OS when it's requested.

The trusted installer certificates are generated by following code with Google's Base16 encoded certificates so that we can avoid the dependency on extra base16 decoders.

```
import base64
from sys import stdin

code16 = """"
for line in stdin:
    code16 += line.strip()
print(""Base16 code: "")
print(code16)
code = base64.b16decode(code16.upper())
print(""\n\nBase 64 code: "")
print(base64.b64encode(code))
```

Reviewed By: jingping2015

Differential Revision: D29176450

fbshipit-source-id: 2ea3df15e965d6c86372344c2f555bd9353ebcd0""",0.2,None,changed

1121,Mengxiao Lin,mxlin@fb.com,"""Make AppEventStore internal and migrate related tests

Summary:
Due to the visibility problem in kotlin, we expose a lot of internal classes/methods to allow unit tests to access them. By moving the tests related to an internal class to the kit's own test package, we can add the `internal` modifer back to protect the visibility.

It's harder than we thought before. Many tests classes are coupled together. In order to verify that we are ready for doing this refactor, I do an experiment with `AppEventStore` and fix the configuration for building/executing the tests inside the CoreKit.

Reviewed By: jingping2015

Differential Revision: D29345011

fbshipit-source-id: 452ba959ec7c2f36baaecc49031a5b584de7b2b9""",0.7,None,added

1122,Jing Ping,jingping@fb.com,"""Migrate AppEventCollection

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29339069

fbshipit-source-id: 2cf00374ee00c3291571a556d887dcd3e35bf64f""",0.7,None,changed

1123,Mengxiao Lin,mxlin@fb.com,"""Add the link to the developer support

Summary: As title: there will be a link in ""New issue"" page on Github.

Reviewed By: jingping2015

Differential Revision: D29372514

fbshipit-source-id: 3a0891036e78abd994a22a4f83da569f3d417b52""",0.7,None,added

1124,Mengxiao Lin,mxlin@fb.com,"""Add Github issue form for AndroidSDK bug report (#975)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/975

As title, we update the issue template to apply issue form on bug report issues.

Reviewed By: joesus

Differential Revision: D29354411

fbshipit-source-id: 4e6155712135e095c6a280da1a055bad8d6a92c7""",0.7,None,added

1125,Jing Ping,jingping@fb.com,"""Migrate FlushReason and FlushStatistics to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D29372932

fbshipit-source-id: 5f4af1dc8658b36323b73761dac107c4019d3d45""",0.7,None,changed

1126,Jing Ping,jingping@fb.com,"""Convert AutomaticAnalyticsTest

Reviewed By: linmx0130

Differential Revision: D29368084

fbshipit-source-id: 4b890eb485470386872442f1faee8e2911612b85""",0.7,None,changed

1127,Mengxiao Lin,mxlin@fb.com,"""Create the independent test package for corekit

Summary:
This diff create the test directory in corekit so that we can gradually move unit tests from `facebook` package back to `facebook-core`. One test is moved there to verify the correctness of the configuration.

Also updated github CI configuration so that github action will run all tests.

Reviewed By: jingping2015

Differential Revision: D29341762

fbshipit-source-id: 0dfb8cb3021a4e5c9d7b1dd005328a5463ac7451""",0.7,None,changed

1128,Jing Ping,jingping@fb.com,"""Migrate AppEventQueue to Kotlin

Reviewed By: linmx0130

Differential Revision: D29287662

fbshipit-source-id: 6f2483442f1c25b03cc252355b7c4ca2047eff1a""",0.7,None,changed

1129,Mengxiao Lin,mxlin@fb.com,"""Migrate UnobservedErrorNotifier to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D29276085

fbshipit-source-id: 1636ab9f79ff7fe219a017405ec01ab777a7b368""",0.7,None,changed

1130,Mengxiao Lin,mxlin@fb.com,"""Add test for UnobservedErrorNotifier

Summary: As title

Reviewed By: jingping2015

Differential Revision: D29269097

fbshipit-source-id: d2f861477b7b92387785b660ccc990179d57f481""",0.7,None,added

1131,Mengxiao Lin,mxlin@fb.com,"""Make test utils library independent

Summary:
This diff moves the basic test utils into an independent module so that it can be referred by any other modules. It allows modules to build their own tests rather than inserting test classes into the big `facebook` package.

The context is in https://fb.workplace.com/groups/318987792570218/permalink/535085777627084/

Reviewed By: jingping2015, Oliverccccct

Differential Revision: D29221188

fbshipit-source-id: 933c48d982122e51b0e9e85cb6a75167f46b4173""",0.7,None,changed

1132,Jing Ping,jingping@fb.com,"""Migrate AppEventTest

Summary: As  title

Reviewed By: linmx0130

Differential Revision: D29075766

fbshipit-source-id: 6a45299b812ee8eeefa98f2d5774b7058dfd6e3e""",0.7,None,changed

1133,Tao Chen,oliverct@fb.com,"""Add GK Check for ANR Detection

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D29218458

fbshipit-source-id: 6d1ee5d475f5bf18bab4716fdab833894fe7546e""",0.7,None,added

1134,Tao Chen,oliverct@fb.com,"""Move ANR detector from Beta to Core

Summary:
- Move ```ANRHandler``` and ```ANRDetector``` into core
- Move related tests

Reviewed By: KylinChang

Differential Revision: D29180463

fbshipit-source-id: b3d812091d3de21e5f04b3d78cdb6ae7301e201d""",0.7,None,changed

1135,Mengxiao Lin,mxlin@fb.com,"""Migrate ExecutorException to Kotlin

Summary: As title. Also removed an empty test.

Reviewed By: jvlyn

Differential Revision: D29142593

fbshipit-source-id: 10d414bac8c877a71f56766ceb69043cf8112041""",0.7,None,removed

1136,Mengxiao Lin,mxlin@fb.com,"""Properly delete temporary files created in tests

Summary: This diff fixes 3 tests that doesn't remove temporary files properly. Also it attempts to fix UrlRedirectCacheTest by using random UUID as test filename.

Reviewed By: joesus

Differential Revision: D29148283

fbshipit-source-id: c4eff3f8121ee1cf547eb76cf0f9b7e24a72ae65""",0.7,None,removed

1137,Tao Chen,oliverct@fb.com,"""Better implementation

Summary:
- Ignore Marketing Kit check since it's deprecated
- Replace For loop with forEach to make the code more clean.

Reviewed By: KylinChang

Differential Revision: D29148398

fbshipit-source-id: 1de3004d9afe0a5a61a3646ad4d325872de6fcee""",0.7,None,changed

1138,Tao Chen,oliverct@fb.com,"""Only save SDK related ANR

Summary:
- Only save stack trace which starts with ""com.facebook""
  - Exclude ```onClick()```, ```onItemClick()``` and ```onTouch()``` for FBSDK click listeners since we should not count the ANRs caused by app itself
  - If the ANR is caused by a SDK function called from FBSDK ```onClick()```, we also need to count it as SDK related.

Reviewed By: KylinChang

Differential Revision: D29082260

fbshipit-source-id: fd2d4c4939098a78766abd34d4d342b0c0fe66ae""",0.7,None,changed

1139,Jing Ping,jingping@fb.com,"""Migrate AppEvent to Kotlin

Reviewed By: linmx0130

Differential Revision: D29046567

fbshipit-source-id: 7b44e40cfd0a9981b9695eed145c26d888244e11""",0.7,None,changed

1140,Mengxiao Lin,mxlin@fb.com,"""Fix flaky tests caused by conflict filenames

Summary: `FileLruCacheTest` and `AccessTokenAppIdPairTest` uses a hard-coded filename for testing, which may cause race-condition on the file during stress tests. Fix this problem by using random UUID as filename.

Reviewed By: jingping2015

Differential Revision: D29050176

fbshipit-source-id: 1e0abe739fb80e9e1252a0c2b54b7e0c0be8444c""",0.7,None,fixed

1141,Tao Chen,oliverct@fb.com,"""Add the unit test for sending reports

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D29024275

fbshipit-source-id: 70843be533b413cb43ca7d87c2b71a44d0b71213""",0.7,None,added

1142,Mengxiao Lin,mxlin@fb.com,"""Migrate Cancellation Token Registration to Kotlin

Summary:
As title. Changes:
1. Added null check on action to avoid NPE if a null action is registered.
2. Removed the lock object and to synchronize on the registration object directly since all public methods require the lock.

Reviewed By: jingping2015

Differential Revision: D29036869

fbshipit-source-id: 3d615bd53f942b14d836349ed184d8ec66cf32b2""",0.7,None,added

1143,Mengxiao Lin,mxlin@fb.com,"""Add test for CancellationTokenRegistration

Summary: As title

Reviewed By: jingping2015

Differential Revision: D29036053

fbshipit-source-id: 42c54536387166f126ea5314d210b66159cc73a1""",0.7,None,added

1144,Mengxiao Lin,mxlin@fb.com,"""Migrate CancellationToken to Kotlin

Summary: As title. As backfilled the tests

Reviewed By: jingping2015

Differential Revision: D29011699

fbshipit-source-id: 4806088d397f6e191035d92dcdc193d5f8515619""",0.7,None,changed

1145,Tao Chen,oliverct@fb.com,"""Support ANR report storage.

Summary:
- Save ANR report
- Load ANR report

Reviewed By: KylinChang

Differential Revision: D28972080

fbshipit-source-id: 86352471847aac90684807c11dfafc3b7287a1dc""",0.7,None,changed

1146,Jing Ping,jingping@fb.com,"""Migrate PersistedEvents to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28949485

fbshipit-source-id: 81e5f19ef3fee3c9a2a82b959ed72f6b5d3bde38""",0.7,None,changed

1147,Mengxiao Lin,mxlin@fb.com,"""Migrate CancellationTokenSource to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28944395

fbshipit-source-id: a4503a2d4852a53e90427ff69af27e97f15a33c7""",0.7,None,changed

1148,Mengxiao Lin,mxlin@fb.com,"""Backfilled test for CancellationTokenSource

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28944405

fbshipit-source-id: db890b95066b9ea37f92aa63fad437f22658ee1a""",0.7,None,changed

1149,Evan Scott,erscott@fb.com,"""daemon: Send ACTION_VIEW intents as SDK messages to client

Summary:
Design doc for opening links on client: https://fb.quip.com/RBv9Am0RhnIq

This diff adds an activity to the Android CG Daemon to catch ACTION_VIEW intents representing links and send an SDK message containing the URL to the worker.
This will then be used by D27619993 to open a dialog and open the link on the client side.

The response from JS is currently ignored like with the message to open the Play Store because we do not require information to be sent back.

Differential Revision: D28324489

fbshipit-source-id: 6aadfd6b466ecfc81e8fd830c7832ebd8bfb55fb""",0.7,None,changed

1150,Jing Ping,jingping@fb.com,"""bump version to 11.0

Reviewed By: linmx0130

Differential Revision: D28950616

fbshipit-source-id: 47a46d640159f9982a3a83a814b8ca5d26707bc6""",0.2,None,changed

1151,Mengxiao Lin,mxlin@fb.com,"""Fix AutomaticAnalyticsLoggerTest

Summary:
`AutomaticAnalyticsLoggerTest` has a strange behavior: when the test class is run as a whole, the tests pass. However, if some of its test cases run independently, the tests fail. It's caused because the test tries to verify whether `InternalAppEventsLogger` is created during logging. However, at the initialization of `AutomaticAnalyticsLogger` an instance of `InternalAppEventsLogger` will be created.

This diff fixes the bug by verifying the actual logging behavior rather than object creation.

Reviewed By: jingping2015

Differential Revision: D28916089

fbshipit-source-id: bd5619ec4ab11eb61edd0a1eb94054a1f43606f1""",0.7,None,fixed

1152,Mengxiao Lin,mxlin@fb.com,"""Fix FacebookSdkPowerMockTest#testFacebookDomain

Summary: As title. This test will fail when it's run independently. Fix it by mocking the return value of `FacebookSdk.getApplicationContext`.

Reviewed By: jvlyn

Differential Revision: D28922471

fbshipit-source-id: e7aef808551bf64b36f1b0b02a5d9d79872f60b6""",0.7,None,fixed

1153,Jing Ping,jingping@fb.com,"""Migrate AccessTokenAppIdPair to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28812793

fbshipit-source-id: 13e263380aeb5bb568c1f1c0a756a746a3e10e3d""",0.7,None,changed

1154,Mengxiao Lin,mxlin@fb.com,"""Migrate Model to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28887637

fbshipit-source-id: 86f032a81d48a060551e52b2dd900caf64a465bc""",0.7,None,changed

1155,Sreenu Yatam,sreenuyatam@fb.com,"""Revert D28811333: bump version to 11.0

Differential Revision:
D28811333 (https://github.com/facebook/facebook-android-sdk/commit/d771e97ae950fa5757a0c12a0374957cb17afe5b)

Original commit changeset: 7f44410d686a

fbshipit-source-id: 98e8807500fadc1bf1d5fe046093c9a0a37e7be0""",0.2,None,changed

1156,Jing Ping,jingping@fb.com,"""Migrate SessionEventsState to Kotlin

Reviewed By: linmx0130

Differential Revision: D28851927

fbshipit-source-id: 2c4ea75a5e0a8a11a223f918a7596968a14df851""",0.7,None,changed

1157,Mengxiao Lin,mxlin@fb.com,"""Add tests for Model

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28875531

fbshipit-source-id: e268e5dfcf1a59b3e0f2f213930e684de43f9435""",0.7,None,added

1158,Mengxiao Lin,mxlin@fb.com,"""Move AppEvents Model file parsing to Utils and backfilled tests

Summary:
This diff is the first step to migrate `Model` to Kotlin. In this diff
1. Model file parsing is moved to `Utils` so it's easy to test. The format description is also included in the documents.
2. Backfilled the test for parsing model files.

Reviewed By: jingping2015

Differential Revision: D28859001

fbshipit-source-id: fba643e7c233566411a35ea1f915ff4e74e4fee5""",0.7,None,changed

1159,Lauren Bentley,lebentle@fb.com,"""remove .buckversion file from fbandroid

Summary: Buck has not relied on the .buckversion file for a while now. I am trying to clean up the number of configs at the root of the cell for buck. This diff attempts to remove .buckversion code referecnes from fbsource/fbandroid . Instead of calling cat .buckversion to get the buckversion hash, you can call buck --fast-version which parses the buck-java11 file without downloading buck. Alternatively, you can also do something like cat .buck-java11 | grep -o -E -e ""[0-9a-f]{40}"" | head -1  to get the buckversion hash.

Differential Revision: D28579489

fbshipit-source-id: c92fd724011f03be454bbfee5ba33c0f1c9e9ca2""",0.7,None,changed

1160,Mengxiao Lin,mxlin@fb.com,"""Migrate AppLink to Kotlin

Summary: As title. Also backfilled tests.

Reviewed By: jingping2015

Differential Revision: D28843895

fbshipit-source-id: c2c5ab0f1c8d8a1b3b709dea5664333c1a54c2ab""",0.7,None,changed

1161,Jing Ping,jingping@fb.com,"""bump version to 11.0

Summary: As title

Reviewed By: joesus

Differential Revision: D28811333

fbshipit-source-id: 7f44410d686a14e881fbae999e09e9f40650af45""",0.2,None,changed

1162,Jing Ping,jingping@fb.com,"""Migrate AppEventStore to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28817741

fbshipit-source-id: 894a8632c2f93b58e6f1480561069f1eb10f588a""",0.7,None,changed

1163,Jing Ping,jingping@fb.com,"""Add AccessTokenAppIdPair Test

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28810920

fbshipit-source-id: 6e56b45e463c7c4ac0e5f6026176365bd70254ce""",0.7,None,added

1164,Mengxiao Lin,mxlin@fb.com,"""Refactor hb4a to use SDK internal bolts

Reviewed By: jingping2015

Differential Revision: D28808218

fbshipit-source-id: a5fc06050bf9f8a1980d7378f58ffbccff86565b""",0.7,None,changed

1165,Julie Yuan,julieyuan@fb.com,"""Convert NativeProtocolTest to Kotlin

Reviewed By: jingping2015

Differential Revision: D28729252

fbshipit-source-id: ca833fb2af13caf4afbc71ba57c60bc936e527b9""",0.7,None,changed

1166,Julie Yuan,julieyuan@fb.com,"""Specify method args in access token cache tests

Reviewed By: linmx0130

Differential Revision: D28604562

fbshipit-source-id: e61c742c3c47d8087b9b99d3e7ed0393c8cdf3b1""",0.7,None,changed

1167,Julie Yuan,julieyuan@fb.com,"""Convert GraphRequestTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D28604554

fbshipit-source-id: 9ff090d1c7ff091812f0d309d034d967493e12b7""",0.7,None,changed

1168,Jing Ping,jingping@fb.com,"""Migrate PerformanceGuardian

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28738054

fbshipit-source-id: 6e478b6feec17ec11509889b7674aa53bdd0c91c""",0.7,None,changed

1169,Mengxiao Lin,mxlin@fb.com,"""Set client token warning to v13

Summary: As title

Reviewed By: joesus

Differential Revision: D28764775

fbshipit-source-id: 9dde6f847437d96a6b1eb05a1ae6a157d2a6d0e5""",0.7,None,changed

1170,Mengxiao Lin,mxlin@fb.com,"""Migrate UnobservedTaskException to Kotlin

Summary: As title. No test is required for this exception wrapper so I deleted the empty test code.

Reviewed By: jingping2015

Differential Revision: D28755069

fbshipit-source-id: 28ef48f210ef7af41bd89092688f1705164c0a96""",0.2,None,changed

1171,Jing Ping,jingping@fb.com,"""Migrate PerformanceGuardianTest to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28735235

fbshipit-source-id: 7c023c4cc4cfc71f7682def49e85a05bc8a129db""",0.7,None,changed

1172,Mengxiao Lin,mxlin@fb.com,"""Add warning for client tokens in GraphRequest

Summary:
When the client token is not set in the SDK, a warning will be raised in logcat.
Otherwise, Android SDK will add the client token by default. We can safely remove the warning in v12.

Also, a test is added for raising the warning.

Reviewed By: jingping2015

Differential Revision: D28731057

fbshipit-source-id: 3a4dd3272b64c763287ac628ca5aef0c5a2848c9""",0.7,None,added

1173,Jing Ping,jingping@fb.com,"""Migrate EventDeactivationManagerTest to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28702379

fbshipit-source-id: b007cf10906c4d659b22b0436609017a37f6b315""",0.7,None,changed

1174,Jing Ping,jingping@fb.com,"""Migrate FlushResult to Kotlin

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D28723714

fbshipit-source-id: fb017f4dba6e9899c3b6fcfeac0dd12d781ddcab""",0.7,None,changed

1175,Jing Ping,jingping@fb.com,"""Migrate EventDeactivationManager to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28701972

fbshipit-source-id: 43cc4af7b19ea46321ac313a04e6f23e7526ac30""",0.7,None,changed

1176,Jing Ping,jingping@fb.com,"""Migrate RestrictiveDataManagerTest to Kotlin

Summary: As title

Reviewed By: jiangcici

Differential Revision: D28697357

fbshipit-source-id: 0fbaf7f5488dd647139d9d41d1afbdeda66026e7""",0.7,None,changed

1177,Mengxiao Lin,mxlin@fb.com,"""Migrate ModelManager to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28694680

fbshipit-source-id: 70c8fd90b27606f8667342919e9109527f35d28b""",0.7,None,changed

1178,Jing Ping,jingping@fb.com,"""Fix the comment that will generated error java doc

Reviewed By: linmx0130

Differential Revision: D28687599

fbshipit-source-id: bd5eb9db92e4e7387c54151b0d783c0326af485f""",0.7,None,fixed

1179,Mengxiao Lin,mxlin@fb.com,"""Fix nullable type in InternalAppEventsLogger

Summary: The return value of `getPushNotificationsRegistrationId()` is nullable.

Reviewed By: Oliverccccct

Differential Revision: D28689818

fbshipit-source-id: 70f911453c00719127808bf1544370afc0b52334""",0.7,None,fixed

1180,Mengxiao Lin,mxlin@fb.com,"""Add test for ModelManager

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28659068

fbshipit-source-id: eb113dd140c4996342c9ee782375f2287d185149""",0.7,None,added

1181,Jing Ping,jingping@fb.com,"""Migrate RestrictiveDataManager to Kotlin

Summary: As title

Reviewed By: jiangcici

Differential Revision: D28666767

fbshipit-source-id: 8154a8880d84e78c6bffb23cea8e046b3b65d58e""",0.7,None,changed

1182,Jing Ping,jingping@fb.com,"""Migrate OnDeviceProcessingManagerTest

Reviewed By: linmx0130

Differential Revision: D28654432

fbshipit-source-id: be27b60a7cec4dec04fca10ec5a4e7a929acf123""",0.7,None,changed

1183,Jing Ping,jingping@fb.com,"""Migrate OnDeviceProcessingManager to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28652582

fbshipit-source-id: 371178cc26192d787e4bfba109cb7520b1bb867d""",0.7,None,changed

1184,Mengxiao Lin,mxlin@fb.com,"""Migrate appevents.ml.Utils to Kotlin

Summary: As title. Also backfilled a test for obtaining bytes of non-ascii characters and creating ml dirs.

Reviewed By: jingping2015

Differential Revision: D28651915

fbshipit-source-id: c4205c39e50e825b0870779068c15f700ab45c84""",0.7,None,changed

1185,Mengxiao Lin,mxlin@fb.com,"""Migrate Operator to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28614352

fbshipit-source-id: e6295fe702c4e685a83d327f2c88598c16bccf0f""",0.7,None,changed

1186,Mengxiao Lin,mxlin@fb.com,"""Migrate OperatorTest to Kotlin and fixed a bug in MTensor

Summary: As title. I also removed the dependency on `PowerMock.Whitebox` from `OperatorTest` and detected a bug I introduced in D28550633 (https://github.com/facebook/facebook-android-sdk/commit/3dbf036252ca62a16593454f86ebad659066f537) (`MTensor.getShape()` won't return correct value after reshape). Since no test covers the bug, I backfilled a test for it.

Reviewed By: jingping2015

Differential Revision: D28577268

fbshipit-source-id: 522fcf4ce1a657f0431d6cf829fb8125ef6a2cf1""",0.2,None,fixed

1187,Jing Ping,jingping@fb.com,"""Migrate RemoteServiceParametersHelperTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D28578042

fbshipit-source-id: 4aedc638a010b264f5a1a64cf81b8aebb1484649""",0.7,None,changed

1188,Jing Ping,jingping@fb.com,"""Migrate RemoteServiceParametersHelper

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28561497

fbshipit-source-id: 8705ee87e987505a8f202b29f5de07f19a672f5c""",0.7,None,changed

1189,Jing Ping,jingping@fb.com,"""Migrate RemoteServiceWrapperTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D28558050

fbshipit-source-id: 7c06605169e5cbc729160673a9dcaf527d208024""",0.7,None,changed

1190,Jing Ping,jingping@fb.com,"""Migrate RemoteServiceWrapper to Kotlin

Reviewed By: linmx0130

Differential Revision: D28556045

fbshipit-source-id: e6c05f253b7403e8da3191349707f859c7a4d5d5""",0.7,None,changed

1191,Mengxiao Lin,mxlin@fb.com,"""Migrate MTensor to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28550633

fbshipit-source-id: e890e3c5fd443fef5c74c5d2f755197e9d6ff237""",0.7,None,changed

1192,Jing Ping,jingping@fb.com,"""Migrate AppEventsConstants to Kotlin

Reviewed By: linmx0130

Differential Revision: D28520520

fbshipit-source-id: 6d8f5b91a525db5d391ad6fa0fe89a5c46537c25""",0.7,None,changed

1193,David Torres,detorres@fb.com,"""Add optional tournament end time to creation config

Differential Revision: D28521027

fbshipit-source-id: 09209ae1fc5653c6c69573a8ac04302d77ac6926""",0.7,None,added

1194,Jing Ping,jingping@fb.com,"""Migrate ProfileManagerTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D28487846

fbshipit-source-id: 720202fb2f83056af48ab5b8f5d6e4d07c456e12""",0.7,None,changed

1195,Jing Ping,jingping@fb.com,"""Move function in ProfileTest class into a helper class

Reviewed By: linmx0130

Differential Revision: D28496633

fbshipit-source-id: 4b7cc0da22b6b84c9ad9b1e282e8e97a70d9c636""",0.7,None,changed

1196,Jing Ping,jingping@fb.com,"""Migrate FacebookOperationCanceledException to Kotlin

Reviewed By: linmx0130

Differential Revision: D28516621

fbshipit-source-id: 830245cc7cd99b933f6f9ad475268f0593c2c158""",0.7,None,changed

1197,Mengxiao Lin,mxlin@fb.com,"""Migrate CallbackManager to Kotlin

Summary: As title.

Reviewed By: joesus

Differential Revision: D28488297

fbshipit-source-id: 228fac05d706e59da81ed3c52ef1bacf523052f9""",0.7,None,changed

1198,Mengxiao Lin,mxlin@fb.com,"""Support Android S+ checksum API for faster checksum computation

Summary: The implementation is similar to D26652535: using reflection to call `PackageManager.requestChecksum()`. While AN uses a polling method to query the checksum results, I use a condition to wait for the checksum. The timeout of waiting is also supported but it's not enable in the use cases now.

Reviewed By: jingping2015

Differential Revision: D28496324

fbshipit-source-id: 711b5b56992d9982f7bf157cd850dfc66badb645""",0.7,None,changed

1199,Mengxiao Lin,mxlin@fb.com,"""Migrate GraphRequestTest to Kotlin

Summary: As title. Also removed some useless tests (NPE) and added a new test for delete object request.

Reviewed By: jingping2015

Differential Revision: D28484389

fbshipit-source-id: e8f9279e5d6896002deb0e6a47d63aaf6b810cd2""",0.7,None,removed

1200,Jing Ping,jingping@fb.com,"""Migrate HttpMethod to Kotlin

Summary:
Facebook :
As title

Reviewed By: linmx0130

Differential Revision: D28425372

fbshipit-source-id: 2a850965cec1a31a3322de5b1ba3025eacd25c7d""",0.7,None,changed

1201,CodemodService FBSourceKtfmtLinterBot,,"""Daily `arc lint --take KTFMT`

Reviewed By: zertosh

Differential Revision: D28470687

fbshipit-source-id: 17c8348543ea91576b6c9f672a1b790bb8ca28c2""",0.2,None,changed

1202,CodemodService FBSourceGoogleJavaFormatLinterBot,,"""Daily `arc lint --take GOOGLEJAVAFORMAT`

Reviewed By: zertosh

Differential Revision: D28471123

fbshipit-source-id: 1f66417d72eb8d53449986ce1f2298ac075ee565""",0.2,None,changed

1203,Kanghee Park,khp@fb.com,"""Add messengerPageId and resetMessengerState to Login SDK

Reviewed By: jvlyn

Differential Revision: D27685551

fbshipit-source-id: 24ce49d279b6cf2a99a2af3afa7f157d89ff536a""",0.7,None,added

1204,Evan Scott,erscott@fb.com,"""daemon: Fix DaemonRequest GraphResponse constructions

Summary:
D28236156 (https://github.com/facebook/facebook-android-sdk/commit/063392e66923e00eb28267c5b9c702de44c5f9ac) added the requirement for some of the constructor args for `GraphResponse` to be non-null.
However, `DaemonReceiver` currently passes `null` for these args, which means that apps built using a commit of `DaemonReceiver` after D28236156 (https://github.com/facebook/facebook-android-sdk/commit/063392e66923e00eb28267c5b9c702de44c5f9ac) will not properly handle graph responses.
The following is an example crash upon receiving a response:
```
05-13 14:36:32.320  4605  4633 E AndroidRuntime: FATAL EXCEPTION: com.facebook.gamingservices.DAEMON_RESPONSE_HANDLER
05-13 14:36:32.320  4605  4633 E AndroidRuntime: Process: com.facebook.cloud_gaming_daemon.test_app, PID: 4605
05-13 14:36:32.320  4605  4633 E AndroidRuntime: java.lang.RuntimeException: Error receiving broadcast Intent { act=com.facebook.gamingservices.DAEMON_RESPONSE flg=0x10 pkg=com.facebook.cloud_gaming_daemon.test_app (has extras) } in com.facebook.gamingservices.cloudgaming.DaemonReceiver$DaemonBroadcastReceiver@a494591
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.app.LoadedApk$ReceiverDispatcher$Args.lambda$getRunnable$0(LoadedApk.java:1401)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.app.-$$Lambda$LoadedApk$ReceiverDispatcher$Args$_BumDX2UKsnxLVrE6UJsJZkotuA.run(Unknown Source:2)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.os.Handler.handleCallback(Handler.java:873)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.os.Handler.dispatchMessage(Handler.java:99)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.os.Looper.loop(Looper.java:193)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.os.HandlerThread.run(HandlerThread.java:65)
05-13 14:36:32.320  4605  4633 E AndroidRuntime: Caused by: java.lang.NullPointerException: Parameter specified as non-null is null: method kotlin.jvm.internal.Intrinsics.checkNotNullParameter, parameter request
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at com.facebook.GraphResponse.<init>(Unknown Source:3)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at com.facebook.gamingservices.cloudgaming.DaemonReceiver.createSuccessResponse(DaemonReceiver.java:92)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at com.facebook.gamingservices.cloudgaming.DaemonReceiver.processResponse(DaemonReceiver.java:78)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at com.facebook.gamingservices.cloudgaming.DaemonReceiver.access$200(DaemonReceiver.java:43)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at com.facebook.gamingservices.cloudgaming.DaemonReceiver$DaemonBroadcastReceiver.onReceive(DaemonReceiver.java:139)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        at android.app.LoadedApk$ReceiverDispatcher$Args.lambda$getRunnable$0(LoadedApk.java:1391)
05-13 14:36:32.320  4605  4633 E AndroidRuntime:        ... 5 more
```

Differential Revision: D28418925

fbshipit-source-id: 02cc900f5dc5afa98b05511853e5c381c2bf2b75""",0.7,None,fixed

1205,Mengxiao Lin,mxlin@fb.com,"""Remove dependencies on deprecated kotlin-android-extensions

Summary:
We don't actually use any utilities from `kotlin-android-extensions`. It's easy to remove it from the gradle configuration.

`kotlin-android-extensions` will be removed from Kotlin from this September (https://android-developers.googleblog.com/2020/11/the-future-of-kotlin-android-extensions.html) when Kotlin 1.5 releases. Adding it in the dependency will block developers to upgrade to Kotlin 1.5 in the near future.

Reviewed By: jingping2015

Differential Revision: D28422597

fbshipit-source-id: 502df9ccd86bf38ff59578ca28e716b830ffb386""",0.2,None,removed

1206,Jing Ping,jingping@fb.com,"""Migrate FacebookException to Kotlin

Reviewed By: linmx0130

Differential Revision: D28398937

fbshipit-source-id: 680fefe6d46c7e48918f224df77fcda2f8a6badc""",0.7,None,changed

1207,Jing Ping,jingping@fb.com,"""Migrate FacebookServiceException toKotlin

Reviewed By: linmx0130

Differential Revision: D28401978

fbshipit-source-id: b44e592d9869e6fa02d99c2b20e127814a01b3ca""",0.7,None,changed

1208,Mengxiao Lin,mxlin@fb.com,"""Migrate CurrentAccessTokenExpirationBroadcastReceiver to Kotlin and backfilled tests

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28400044

fbshipit-source-id: b6ceab844fd68af8ba036284e54abe41fa0e4603""",0.7,None,changed

1209,Jing Ping,jingping@fb.com,"""Add FacebookExceptionTest

Reviewed By: linmx0130

Differential Revision: D28395580

fbshipit-source-id: d48a67271b001e78e5c7bb73df0376408f6eee4c""",0.7,None,added

1210,Jing Ping,jingping@fb.com,"""Migrate FacebookSdkNotInitializedException to Kotlin

Reviewed By: linmx0130

Differential Revision: D28394065

fbshipit-source-id: 3cdef65efd8c626dc31e71a0da3aa82bd6cfbc60""",0.7,None,changed

1211,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookBroadcastReceiver to Kotlin

Summary:
As title.

Following the semantics, all callback methods in `FacebookBroadcastReceiver` will have nonnull parameters in Kotlin.

Note: I found that for all protected methods declared in Kotlin, they're not allowed to be accessed in test. If we do need to access them, we can inherit the class the make all protected methods public without changing the original visibility settings.

Reviewed By: jingping2015

Differential Revision: D28393069

fbshipit-source-id: 06245f973f50f03f7a4b0a748fdb4f334facf683""",0.7,None,changed

1212,Mengxiao Lin,mxlin@fb.com,"""Migrate GraphRequest to Kotlin

Summary:
As title. `GraphRequest` is one of the most important class in the SDK and this diff unavoidably changed the external interfaces. I try my best to minimize the changes and for Java code nothing need to be changed. But there still some differences in Kotlin side.

1. `Callback.onComplete()` will have a nonnull parameter.For Kotlin side, if the client code implements it with nullable parameters, it will be treated as different function. It can be fixed with very little effort.
2. `GraphJSONArrayCallback` and `GraphJSONObjectCallback` will have a nullable parameter following the documents. For Kotlin side if the client code implement it with nonnull parameter, it will be treated as different function. It will force the client to do null check on the parameters.

Also updated the tests that require mocking static methods of GraphRequest.

`GraphRequest` in ushba is also migrated to Kotlin, otherwise many tests that needs to mock behaviors of GraphRequest will fail.

When `GraphRequest.java` is in Java, public version and ushba version have following differences:
1. [ushba add] a new private field named `graphDomainOverride`
2. [ushba add] getter/setter for a public field name `graphDomainForSingleRequest`. This field is computed based on `graphDomainOverride`
3. [ushba add] new private methods `getAccessTokenToUseForRequest`, `getClientTokenForRequest`, `getUrlWithGraphPath`, `isValidGraphRequestForDomain`, `shouldForceClientTokenForRequest`, `isApplicationRequest`
4. [ushba modify] implementation of private method `addCommonParameters`

So all added fields/methods are translated to Kotlin in this diff. I also follow the ushba's `addCommonParameters` to write the Kotlin version of it.

Reviewed By: jingping2015

Differential Revision: D28341175

fbshipit-source-id: 503c8171763423d7d486fd29b5fbbaca6dc455a6""",0.7,None,changed

1213,Jing Ping,jingping@fb.com,"""Migrate InternalAppEventsLoggerTest to Kotlin

Reviewed By: linmx0130

Differential Revision: D28345767

fbshipit-source-id: 197ec97617c954a38ecf074979da5371016aeb53""",0.7,None,changed

1214,Cecily Jiang,jiangyx@fb.com,"""Add test for purchase logger manager

Reviewed By: dreamolight

Differential Revision: D28252847

fbshipit-source-id: 2babe33db17a8b3a61bef20b8fcfc1708c50e583""",0.7,None,added

1215,Jing Ping,jingping@fb.com,"""Migrate InternalAppEventsLogger to Kotlin

Reviewed By: linmx0130

Differential Revision: D28336018

fbshipit-source-id: 0124903163c0e5ca4f273a9ef8adbab38f4553a6""",0.7,None,changed

1216,Mengxiao Lin,mxlin@fb.com,"""Migrate MetadataRule to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28363694

fbshipit-source-id: 891deccae5227623c8270c58381ca12fd7379a34""",0.7,None,changed

1217,Mengxiao Lin,mxlin@fb.com,"""Add test for MetadataRule

Summary: Backfilled the test for `MetadataRule`.

Reviewed By: jingping2015

Differential Revision: D28362691

fbshipit-source-id: af70bfad29bfe6aebb437d7569c66ca04cd110f4""",0.7,None,added

1218,Cecily Jiang,jiangyx@fb.com,"""Migrate iap auto logger

Reviewed By: dreamolight

Differential Revision: D27876205

fbshipit-source-id: ea87092d47baea74764952e68ce6fbac0f0270f0""",0.7,None,changed

1219,Cecily Jiang,jiangyx@fb.com,"""Migrate purchase logger manager

Reviewed By: dreamolight

Differential Revision: D27876087

fbshipit-source-id: 570da6d0f6a6cf6a934ac1a947b6943b90adcaa9""",0.7,None,changed

1220,Cecily Jiang,jiangyx@fb.com,"""Test Billing Client Wrapper

Reviewed By: dreamolight

Differential Revision: D28180443

fbshipit-source-id: 6b052678478e4b6c98e441d0e4a56e17081fd225""",0.7,None,changed

1221,Cecily Jiang,jiangyx@fb.com,"""Migrate billing client wrapper

Reviewed By: dreamolight

Differential Revision: D27875844

fbshipit-source-id: 6051890215345e93cadaf566dffe694f54c70ab2""",0.7,None,changed

1222,Cecily Jiang,jiangyx@fb.com,"""Migrate sku details wrapper

Reviewed By: linmx0130

Differential Revision: D27875277

fbshipit-source-id: 530f0b52c3416fdb55d8551f904ace5c8c21a472""",0.7,None,changed

1223,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenManager to Kotlin

Summary:
As title.

The package-private methods are made public because if they are ""kotlin-internal"", existing Java code cannot access them. We may have the chance to made them internal again after the whole core SDK is migrated to Kotlin.

Reviewed By: jingping2015

Differential Revision: D28262955

fbshipit-source-id: cab6ee37810d90c20eb35a478b0c0ec65295e86f""",0.7,None,changed

1224,Jing Ping,jingping@fb.com,"""Migrate ProfileManager to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27933127

fbshipit-source-id: 3750ae358bc18201e804ffb6d3fda2d64d4853dc""",0.7,None,changed

1225,Jing Ping,jingping@fb.com,"""Migrate ActivityLifecycleTracker

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28273654

fbshipit-source-id: ddc636abbc3ab98f72a318c08b7903c989c5c482""",0.7,None,changed

1226,Mengxiao Lin,mxlin@fb.com,"""Migrate GraphRequestAsyncTask to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28293460

fbshipit-source-id: aa16088d2eb59e1de4d959237ff72701dd1e18fb""",0.7,None,changed

1227,Mengxiao Lin,mxlin@fb.com,"""Add test for GraphRequestAsyncTask

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28292765

fbshipit-source-id: b619c883a6eb0d636aee21da53f8472748340c2e""",0.7,None,added

1228,Jing Ping,jingping@fb.com,"""Add ActivityLifecycleTrackerTest

Reviewed By: joesus

Differential Revision: D28271055

fbshipit-source-id: 2514179d1c78c9e7b6e60fef80e4af99657a90a1""",0.7,None,added

1229,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenManagerTest to Kotlin

Summary: As title. Also backfilled two tests for refreshing access token.

Reviewed By: jingping2015

Differential Revision: D28262237

fbshipit-source-id: 17f4378f17eaa7f90d03b7ff888a38735e81caaa""",0.7,None,changed

1230,David Torres,detorres@fb.com,"""Update Tournament API in SDK

Reviewed By: shootingsyh

Differential Revision: D28202606

fbshipit-source-id: 2e78ed896ba1022d9b854ed857520d2b95e503a5""",0.7,None,changed

1231,Mengxiao Lin,mxlin@fb.com,"""Migrate GraphResponse to Kotlin

Summary: As title. Many constructors are declared with nonnull parameters following their semantics. Also, most fields are nullable so the code in our codebase are updated to add null checks.

Reviewed By: jingping2015

Differential Revision: D28236156

fbshipit-source-id: 37d2d75a20da2eb2e89024b291c5e8c71b74cba7""",0.7,None,added

1232,Jing Ping,jingping@fb.com,"""Migrate AutomaticAnalyticsLogger to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28198941

fbshipit-source-id: f22f186a13dc225e37bd8aabcf86a7d14b51c861""",0.7,None,changed

1233,Jing Ping,jingping@fb.com,"""Migrate FileDownloadTask

Summary:
Facebook :
As title
`Callback` is a SAM interface, add `fun` before this interface definition.

Reviewed By: linmx0130

Differential Revision: D28247466

fbshipit-source-id: a068699efea49927beaad099420c2c1aebcdd6da""",0.7,None,added

1234,Jing Ping,jingping@fb.com,"""Add test for FileDownloadTask

Reviewed By: linmx0130

Differential Revision: D28243370

fbshipit-source-id: 271a7fe1526eb01c2a141863deac859155ef58bf""",0.7,None,added

1235,Jing Ping,jingping@fb.com,"""Migrate SessionLogger to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28166397

fbshipit-source-id: 2078b1d35001168682b3ab80dd8f2aeb6df43475""",0.7,None,changed

1236,Jing Ping,jingping@fb.com,"""Migrate AppEventsLoggerUtility to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28206293

fbshipit-source-id: 49abdffd2ef0138b3ebfff137848602aa82a798d""",0.7,None,changed

1237,Mengxiao Lin,mxlin@fb.com,"""Migrate LegacyTokenHelper to Kotlin

Summary:
As title. Many details around this helper are modified:
1. The validation of non-null values are removed since Kotlin has non-null types.
2. Make `getDate()` and `putDate()` private since both of them are package-private functions before, and all use cases in our codebase can be replaced by existing public functions.
3. Updating `AccessToken.kt` to follow the new non-null interfaces of LegacyTokenHelper.

Reviewed By: jingping2015

Differential Revision: D28200692

fbshipit-source-id: 3b4fb978695a1b57c6c33d5228238c14eba02132""",0.7,None,removed

1238,Jing Ping,jingping@fb.com,"""Migrate ViewHierarchyConstants to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28203093

fbshipit-source-id: 2a4a86b339a941166d06f6b257c5a576a5968887""",0.7,None,changed

1239,Mengxiao Lin,mxlin@fb.com,"""Migrate GraphRequestBatch into Kotlin

Summary:
As title. `GraphRequestBatch` inherits `AbstractList`, which is modified in Kotlin.

The most notable difference is that the basic remove method `remove(index: int)` is renamed to `removeAt(index: int)`, and other remove methods use the new basic remove method to do the deletion. However, the interface in Java remains unchanged. Hence I only override the new `removeAt` method.

Finally, all parameters are declared as non-null following their semantics and usages in our codebase.

Reviewed By: jingping2015

Differential Revision: D28162734

fbshipit-source-id: b26429943cab198bdf99f3fea0a6c2dc01cfd4fb""",0.7,None,added

1240,Jing Ping,jingping@fb.com,"""Migrate SessionInfo to Kotlin

Reviewed By: linmx0130

Differential Revision: D28162864

fbshipit-source-id: b61dfaf7ac81edf18b2fc7eaefe460df7a35dacf""",0.7,None,changed

1241,Jing Ping,jingping@fb.com,"""Migrate SourceApplicationInfo to Kotlin

Reviewed By: linmx0130

Differential Revision: D28132382

fbshipit-source-id: d3b71f526c87841a09c9e180dd27fef01ce510ca""",0.7,None,changed

1242,Jing Ping,jingping@fb.com,"""Migrate Constants to Kotlin

Reviewed By: linmx0130

Differential Revision: D28164440

fbshipit-source-id: c56b57b2044e74fdcd8458bc4c7892a5f27ce6ab""",0.7,None,changed

1243,Jing Ping,jingping@fb.com,"""Add SourceApplicationInfoTest

Reviewed By: linmx0130

Differential Revision: D28130214

fbshipit-source-id: f0a6dcc8005067e0d7b23fe6c7894cf3ace6cb4c""",0.7,None,added

1244,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenCache to Kotlin

Summary: As title. Also removed a non-necessary test on null parameters.

Reviewed By: jingping2015

Differential Revision: D28108532

fbshipit-source-id: a907b7a36b0aa3f0f565da79557248665b23978f""",0.7,None,removed

1245,Jing Ping,jingping@fb.com,"""Migrate AppEventUtility to Kotlin

Reviewed By: linmx0130

Differential Revision: D28108627

fbshipit-source-id: 63e0eefdf6a716101497242d51e97d5da42426b6""",0.7,None,changed

1246,Mengxiao Lin,mxlin@fb.com,"""Add test for GraphRequestBatch

Summary: As title

Reviewed By: jingping2015

Differential Revision: D28125587

fbshipit-source-id: 456479a220972d57b3cd7eded34481fcf11f3d82""",0.7,None,added

1247,Jing Ping,jingping@fb.com,"""Migrate ProfileTest

Reviewed By: linmx0130

Differential Revision: D28113068

fbshipit-source-id: 83824e13d44cc93ca056bf47f98d88a3315cf7ef""",0.7,None,changed

1248,Jing Ping,jingping@fb.com,"""Migrate HashUtils

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28101897

fbshipit-source-id: 3f6819e9735db2be5acc739b9204d4a2a043916e""",0.7,None,changed

1249,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenCacheTest to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D28106135

fbshipit-source-id: 1bbc4878cf7086dad7c2287d57d5242a84f5c040""",0.7,None,changed

1250,Jing Ping,jingping@fb.com,"""Migrate DefaultAudience

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28099801

fbshipit-source-id: 7a8c3abbda07ffb1589bf6012b98b42dfacd2982""",0.7,None,changed

1251,Jing Ping,jingping@fb.com,"""Migrate AppEventUtilityTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28107071

fbshipit-source-id: b443fd5742d7dca195106bbe9594efb7e60c0497""",0.7,None,changed

1252,Jing Ping,jingping@fb.com,"""Migrate FacebookContentProvider to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28074077

fbshipit-source-id: fb235a30eb3c601744c5f67a76b2d929d3772b43""",0.7,None,changed

1253,Jing Ping,jingping@fb.com,"""Migrate FacebookContentProviderTest

Reviewed By: linmx0130

Differential Revision: D28073433

fbshipit-source-id: df00c5b99fb62f57ba357e0dba22e628377d335c""",0.7,None,changed

1254,Jing Ping,jingping@fb.com,"""Migrate LoggingBehavior

Summary: As title

Reviewed By: linmx0130

Differential Revision: D28079274

fbshipit-source-id: 5bc353703600db38b1a47bf4851c6ebc9e9a8ee4""",0.7,None,changed

1255,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenTest to Kotlin

Summary:
As title. Some changes:
1. Backfilled the tests for `AccessToken.createFromNativeLinkingIntent`
2. Removed tests on null parameters and immutable sets because these properties are supported in the grammar-level in Kotlin.

Reviewed By: jingping2015

Differential Revision: D28039161

fbshipit-source-id: 87668ac1804f943a84dc8b3d5d5cbf560a269740""",0.7,None,removed

1256,Jing Ping,jingping@fb.com,"""migration FacebookRequestError to Kotlin

Reviewed By: linmx0130

Differential Revision: D28015495

fbshipit-source-id: 9226eed37ea2636dc366d486aa2224989af780b6""",0.7,None,changed

1257,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessToken into Kotlin

Summary:
As title. `AccessToken` is an important and foundational class in the SDK, hence I try my best to keep the API unchanged. However, we still have very small differences in the behaviors. I believe these differences won't lead to a change in client codes (in fact, we only make client code easier). Here are the differences:
1. `token`, `applicationId`, `userId` and `permissions` fields are promised to be nonnull. The reason is that according to its constructor, these properties must be nonnull if it's properly constructed.
2. The validations on `token`, `applicationId` and `userId` are also enforced when the users call `CREATOR.createFromParcel()`. Now if the source parcel object is invalid, there will be an exception rather than returning an invalid `AccessToken` object. It's reasonable because `createFromParcel()` assumes the parameter is correct and valid.

There is still a problem needs to be done: an interface for callback has terrible function naming. We can only fix it in a major release so I keep it unchanged.

Also, we have some static getters and I keep them rather than using static fields. If we use static fields, the interface to Java is unchanged, but the interface to Kotlin will be changed. It's interesting that Kotlin will only treat getter/setters on objects as fields when import Java code.

Reviewed By: jingping2015, Oliverccccct

Differential Revision: D27975759

fbshipit-source-id: 08a5dd376a0e42790af9f4ce689d3fbff27c3325""",0.7,None,changed

1258,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookGraphResponseException to Kotlin

Summary: As title. Also backfilled the tests.

Reviewed By: Oliverccccct

Differential Revision: D28041340

fbshipit-source-id: eaa4a065f553136ed13e52ceedcd72102a93d547""",0.7,None,changed

1259,Jing Ping,jingping@fb.com,"""refactor FacebookRequestError properties sequence

Summary: Adjust the contractor's parma sequence, make it easier to migrate to Kotlin

Reviewed By: joesus

Differential Revision: D28010809

fbshipit-source-id: 1bb493ee3dac74a09f1cb41d69c59a8917efb4e1""",0.7,None,changed

1260,Mengxiao Lin,mxlin@fb.com,"""Migrate RequestOutputStream into Kotlin

Summary: As title. It's only an internal-use interface.

Reviewed By: jingping2015

Differential Revision: D28014587

fbshipit-source-id: b2287f3b6231c57da1286cd8dff0381173c30fdd""",0.7,None,changed

1261,Jing Ping,jingping@fb.com,"""Move FacebookRequestErrorTest to kt and rename

Reviewed By: Oliverccccct

Differential Revision: D27982594

fbshipit-source-id: 8a49300ddcfaaafd58632a8bc3b79d07b40fc723""",0.7,None,changed

1262,Mengxiao Lin,mxlin@fb.com,"""Migrate AccessTokenSource into Kotlin

Summary: As title.

Reviewed By: KylinChang

Differential Revision: D27971866

fbshipit-source-id: c5bee6c2a768717775bda6243e61d17b5cacfaff""",0.7,None,changed

1263,Jing Ping,jingping@fb.com,"""Migrate ProfileTracker to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27946935

fbshipit-source-id: c5a493441cb0d64ba6fe4551c0d58d59eebc4efb""",0.7,None,changed

1264,Jing Ping,jingping@fb.com,"""Migrate ProfileCache to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27950417

fbshipit-source-id: 72b915fd6fbc66fc507de6750b3e2b5a846c476c""",0.7,None,changed

1265,Mengxiao Lin,mxlin@fb.com,"""Migrate RequestProgress to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D27926007

fbshipit-source-id: 51efe9081a4648059fbbee453017595fc5382914""",0.7,None,changed

1266,Mengxiao Lin,mxlin@fb.com,"""add test for RequestProgress

Summary: As title

Reviewed By: joesus

Differential Revision: D27923161

fbshipit-source-id: 84af5a819de502dcdeb366ad529b85750588f39f""",0.7,None,added

1267,Cecily Jiang,jiangyx@fb.com,"""Migrate utils

Reviewed By: linmx0130

Differential Revision: D27346235

fbshipit-source-id: feb9e5934a2ed4b17b4bc4180f047fa6874ed1fa""",0.7,None,changed

1268,Mengxiao Lin,mxlin@fb.com,"""Migrate ProgressNoopOutputStreamTest to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D27914073

fbshipit-source-id: a1d1c7ac1e636e28f4803c76003a976d5622d6da""",0.7,None,changed

1269,Jing Ping,jingping@fb.com,"""Introduce Dokka to generate doc for Kotlin

Summary:
Current javadoc exclude kt file from doc gen https://fburl.com/diffusion/y0a4v4fj

Current javadoc be used in 2 places:
1. Script generate doc to publish on developer.facebook https://fburl.com/diffusion/lcveazw2
2. Publish androidsdk package : https://fburl.com/diffusion/0mzpvsel

This diff mainly fix 2.

Reviewed By: linmx0130

Differential Revision: D27903640

fbshipit-source-id: ffb1593332cb842cb3fff3d518a9d6d7b76bfddd""",0.7,None,fixed

1270,Jing Ping,jingping@fb.com,"""Migrate Profile to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27893315

fbshipit-source-id: 43ab11a923d51a25e35046bf9b95e969bbb9a6be""",0.7,None,changed

1271,Mengxiao Lin,mxlin@fb.com,"""Migrate ProgressNoopOutputStream to Kotlin

Summary:
As title.

Updated `addProgress` to do literally nothing if no request is set.

Reviewed By: Oliverccccct

Differential Revision: D27893370

fbshipit-source-id: 99f03eebc72ebb59df3226fe4f73432136287f89""",0.7,None,changed

1272,CodemodService FBSourceKtfmtLinterBot,,"""Daily `arc lint --take KTFMT`

Reviewed By: zertosh

Differential Revision: D27904804

fbshipit-source-id: 5fe4ec7c09e423cdf6b6ab2399a8f6a117dbd5b3""",0.2,None,changed

1273,Jing Ping,jingping@fb.com,"""Move InstrumentData to Kotlin

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27864550

fbshipit-source-id: 0eca41cc77cf0581e17ea5b574e5d55c2499c86f""",0.7,None,changed

1274,Mengxiao Lin,mxlin@fb.com,"""Migrate ProgressOutputStream to Kotlin

Summary: As title. In order to perform test, `ProgressOutputStream` and `RequestProgress` are migrated as public class because Kotlin's internal classes cannot be accessed by tests even in the same package. Kotlin's `internal` is not package-private.

Reviewed By: jingping2015

Differential Revision: D27866650

fbshipit-source-id: 8d47045ae0dcac89e0402cf98f8b44b3e9d74bb5""",0.7,None,changed

1275,Mengxiao Lin,mxlin@fb.com,"""Migrate ProgressOutputStreamTest to Kotlin

Summary: As title. Also add a new test for `ProgressOutputStream.close()`

Reviewed By: Oliverccccct

Differential Revision: D27863576

fbshipit-source-id: b14bc7d0c71045cde75546ecd0f10e70c0545fea""",0.7,None,added

1276,Mengxiao Lin,mxlin@fb.com,"""Fix NPE caused by calling deprecated AppEventsLogger.activateApp(Context context)

Summary:
The deprecated `AppEventsLogger.activateApp(Context context)` will call real `activateApp` with null, which causes a NPE. Since this method should not be used any more, following the similar deprecated methods, I remove the call and add a warning.

All crashes reported are from an app with package name `gsn.game.zingplaynew.AppActivity`. The deprecated method is calling from a modified version of Cocos2d-x. Hence the impact is small.

Reviewed By: jingping2015

Differential Revision: D27860866

fbshipit-source-id: c55bf3db544e517d844d6d17fa4ec2e196d8edf6""",0.7,None,fixed

1277,Stan Wu,dreamolight@fb.com,"""Remove deprecated signing key hashes

Summary: As title

Reviewed By: joesus

Differential Revision: D27802465

fbshipit-source-id: 50bf68a52594a849591d5e02f2b850189df37667""",0.7,None,changed

1278,Mengxiao Lin,mxlin@fb.com,"""Migrate BoltsMeasurementEventListener to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D27679506

fbshipit-source-id: 9b808074b1fc2a2e5545a80a18ff59daf10c574d""",0.7,None,changed

1279,Mengxiao Lin,mxlin@fb.com,"""Migrate FacebookInitProvider to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D27757190

fbshipit-source-id: 64f4e4184f0620576caf4cf4a038801c4b29438f""",0.7,None,changed

1280,Mengxiao Lin,mxlin@fb.com,"""Migrate qualityvalidation to Kotlin

Summary: As title. Both Excuse and ExcuseForDesignViolations are migrated.

Reviewed By: jingping2015

Differential Revision: D27775436

fbshipit-source-id: fb7f9a90cec073a669dde8e0f09ee9464542ff70""",0.7,None,changed

1281,Cecily Jiang,jiangyx@fb.com,"""Add billing library version check

Reviewed By: linmx0130

Differential Revision: D27317724

fbshipit-source-id: ef24ae2140a247225306259d2bef0a834cdf9f9b""",0.7,None,added

1282,Jing Ping,jingping@fb.com,"""Migrate EndToEndDumpsysHelper to kt

Reviewed By: linmx0130

Differential Revision: D27570780

fbshipit-source-id: decf54d1ed28e2baed6972180c553678d4bd26c9""",0.7,None,changed

1283,Andrey Putilin,regresscheck@fb.com,"""Do not close CustomTab when home button is pressed

Summary:
When user has 2FA enabled, there's no way for them to finish Facebook Login as they usually need to switch to another app. This closes current flow, and they are stuck.

We added this line as a mitigation for an intent filter bug from 5 years ago. This doesn't seem to reproduce nowadays. Should be safe to remove.

Reviewed By: jvlyn

Differential Revision: D27266684

fbshipit-source-id: 63d0e211ca2dc514baa3c3fedc6d07d7c9010874""",0.7,None,added

1284,Yi Liu,yiliu@fb.com,"""fix param initialScore for tournament APIs

Reviewed By: windsfantasy6

Differential Revision: D27760979

fbshipit-source-id: 61619374ba4ddde378f8c83f011108f12e29cf03""",0.7,None,fixed

1285,Mengxiao Lin,mxlin@fb.com,"""Add test for BoltsMeasurementEventListener

Summary: As title

Reviewed By: joesus

Differential Revision: D27632845

fbshipit-source-id: 31a0ebc33b280f487e8dad58b3fa06fd1efb4dd2""",0.7,None,added

1286,Mengxiao Lin,mxlin@fb.com,"""Add test for FacebookInitProvider

Summary: As title. It only tests that the provider does call sdkInitialize.

Reviewed By: jingping2015

Differential Revision: D27610943

fbshipit-source-id: ba1f38d3e574c8f8cd74862fb1d9408fe639c295""",0.7,None,added

1287,David Torres,detorres@fb.com,"""Add tournament APIs to cloud sdk

Differential Revision: D27663190

fbshipit-source-id: 37129e4c7a0468282232ef444226a80b3663188b""",0.7,None,added

1288,Jing Ping,jingping@fb.com,"""Add EndToEndDumpsysHelperTest

Summary: As title

Reviewed By: linmx0130

Differential Revision: D27561863

fbshipit-source-id: 439662979de21d90e5e2821ca37f17ff835ed08e""",0.7,None,added

1289,Mengxiao Lin,mxlin@fb.com,"""Update Android SDK changelog for v9.1.1

Summary: D27615059 (https://github.com/facebook/facebook-android-sdk/commit/f67f6a2dc43ee02390552c739fb5d9f725b8b250) will be included in v9.1.1 release, hence we need to update the changelog.

Reviewed By: jingping2015

Differential Revision: D27653570

fbshipit-source-id: 3bebb32a985eb9ae080991c94541100ebfd9ffcf""",0.7,None,changed

1290,Cecily Jiang,jiangyx@fb.com,"""Fix IAP enable logic

Reviewed By: dreamolight

Differential Revision: D27615059

fbshipit-source-id: b0472379bc4ba6d76c379e6660fdf36a2aae89f7""",0.7,None,fixed

1291,Mengxiao Lin,mxlin@fb.com,"""Migrate AttributionIdentifiers to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D27581758

fbshipit-source-id: 1fa8f4fa64612efeaec8af6e4ff26b2d7ca40846""",0.7,None,changed

1292,Mengxiao Lin,mxlin@fb.com,"""Bump Android SDK version v9.1.1

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D27574961

fbshipit-source-id: f2544be8ea5c56d71c271e4bf3ff2be6af806970""",0.2,None,changed

1293,Mengxiao Lin,mxlin@fb.com,"""Migrate LockOnGetVariable to Kotlin

Summary:
As title.
The value of this lock is explicitly marked as nullable.

Reviewed By: Oliverccccct

Differential Revision: D27515630

fbshipit-source-id: 7dd3aa7a3fe9b9c765ac0d7e1da36fef24fee676""",0.7,None,changed

1294,Mengxiao Lin,mxlin@fb.com,"""add test for LockOnGetVariable

Summary:
As title.

A new executor, CaptureExecutor, is added for testing multi-thread codes.

Reviewed By: jingping2015

Differential Revision: D27514258

fbshipit-source-id: ecc9627a1ac7aecf920ecf7b46161c13bcfbd9d4""",0.7,None,added

1295,Jing Ping,jingping@fb.com,"""Migrate AndroidRootResolver

Reviewed By: linmx0130

Differential Revision: D27516288

fbshipit-source-id: 36dba46d2473ce2d0e39eba78c28debe4dc0994b""",0.7,None,changed

1296,Mengxiao Lin,mxlin@fb.com,"""add test for AttributionIdentifiers

Summary: `AttributionIdentifiers` handles stuffs that interacting with Google Play and wakizashi. This test mainly covers the logic itself including obtaining correct `isLimitedTracking` value and cache stuffs.

Reviewed By: jingping2015

Differential Revision: D27482228

fbshipit-source-id: 1d166f637504b7a712411136746afa1a27f46b81""",0.7,None,added

1297,Mengxiao Lin,mxlin@fb.com,"""Migrate InstrumentManager to Kotlin

Summary:
As title.

Also changed `FeatureManager.Callback` to a functional (SAM) interface so that both Kotlin and Java side can use lambda expression for this callback.

Reviewed By: jingping2015

Differential Revision: D27416757

fbshipit-source-id: a6bf8ed2da7e4f51799bb2833ac67162dc9af7e4""",0.7,None,changed

1298,Jing Ping,jingping@fb.com,"""Add AndroidRootResolverTest

Reviewed By: linmx0130

Differential Revision: D27489090

fbshipit-source-id: 156caa9c159f7b923467a46b9c575e8570690625""",0.7,None,added

1299,Mengxiao Lin,mxlin@fb.com,"""Add test for InstrumentManager

Summary: As title.

Reviewed By: KylinChang

Differential Revision: D27413317

fbshipit-source-id: 67a7025a777b4f0eca339d691bc2667d4645cf4f""",0.7,None,added

1300,Cecily Jiang,jiangyx@fb.com,"""Consolidate enable logic and adjust files

Reviewed By: KylinChang, jvlyn

Differential Revision: D26291233

fbshipit-source-id: 491ac9e4a1cdba339936f02920acdbc9424d8ba7""",0.7,None,changed

1301,Jing Ping,jingping@fb.com,"""migrate WebViewDumpHelper to kt

Reviewed By: linmx0130

Differential Revision: D27354897

fbshipit-source-id: 772b89db0712f97d023c6081cd7d8a1cd3950a49""",0.7,None,changed

1302,Mengxiao Lin,mxlin@fb.com,"""Migrate InstrumentUtility to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D27366952

fbshipit-source-id: 0db968668388b0edefd952161afd0614464a4d19""",0.7,None,changed

1303,Mengxiao Lin,mxlin@fb.com,"""Migrate CrashHandler to Kotlin

Summary: as title

Reviewed By: jingping2015

Differential Revision: D27348103

fbshipit-source-id: 64418aa056bcab2fde266cb0a0535bf154818826""",0.7,None,changed

1304,Jing Ping,jingping@fb.com,"""add WebViewDumpHelperTest

Summary: Add test

Reviewed By: KylinChang

Differential Revision: D27349044

fbshipit-source-id: aa18e36ccad188c8c74fb527aa2479d1ddcdf99b""",0.7,None,added

1305,Mengxiao Lin,mxlin@fb.com,"""Add mockito-kotlin2 support for Android SDK

Summary: Adding mockito-kotlin2 into build scripts and test it with ThreadCheckHandlerTest.

Reviewed By: jingping2015

Differential Revision: D27334632

fbshipit-source-id: 562f64d91b867d6ffcaf0f91d8af4acf1ec8b86f""",0.7,None,added

1306,Jing Ping,jingping@fb.com,"""Move ResourcesUtil to kt

Reviewed By: linmx0130

Differential Revision: D27312073

fbshipit-source-id: fc4e0888e7ee2e82462b43ba363b0a9c2ce0da58""",0.7,None,changed

1307,Mengxiao Lin,mxlin@fb.com,"""Add test for CrashHandler

Summary: As title

Reviewed By: jingping2015

Differential Revision: D27312174

fbshipit-source-id: d38251489f7533f5d83b83cb0d7b51e31fe6507a""",0.7,None,added

1308,Jing Ping,jingping@fb.com,"""Add test for ResourcesUtil

Reviewed By: joesus

Differential Revision: D27279475

fbshipit-source-id: 63bab4fbedef2e80ded9058f260d9900a14f2511""",0.7,None,added

1309,Roman Shakhmanaev,shakhmanaev@fb.com,"""adding ability and a new event for Portal to track back button pressing

Summary: adding a new analytics event to track back button pressing at device auth dialog (DBL).

Differential Revision: D27298019

fbshipit-source-id: d8f1603825299e9f1b1dbcb3fbc46ead0a7512d1""",0.7,None,added

1310,Mengxiao Lin,mxlin@fb.com,"""Migrate ExceptionAnalyzer to Kotlin

Summary: as title

Reviewed By: jingping2015

Differential Revision: D27278392

fbshipit-source-id: 3007c098d3d97306f69c442d8690e42781f6d587""",0.7,None,changed

1311,Jing Ping,jingping@fb.com,"""migrate ErrorReportHandler

Reviewed By: linmx0130

Differential Revision: D27256207

fbshipit-source-id: 8e370e1be52e38651bf56118cb188f37badf8ed3""",0.7,None,changed

1312,Mengxiao Lin,mxlin@fb.com,"""Migrate ThreadCheckHandler to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D27238844

fbshipit-source-id: d0bac8e31f50f8e47b1e1ea7d9e4f98e59a5565a""",0.7,None,changed

1313,Jing Ping,jingping@fb.com,"""Add ErrorReportHandlerTest

Reviewed By: linmx0130

Differential Revision: D27253795

fbshipit-source-id: 9432bba027dd83816c757accba7c47bc87bef013""",0.7,None,added

1314,Mengxiao Lin,mxlin@fb.com,"""Migrate ExceptionAnalyzerTest to Kotlin and backfill tests

Summary: By mocking `isDebug()`, this diff re-enables ExceptionAnalyzerTest. A new test for sending error reports is also added.

Reviewed By: jingping2015

Differential Revision: D27248698

fbshipit-source-id: f6c5d8e202c25847db816fa907614dd435bbd872""",0.7,None,added

1315,Mengxiao Lin,mxlin@fb.com,"""Add test for ThreadCheckHandler

Summary: As title.

Reviewed By: Oliverccccct

Differential Revision: D27175278

fbshipit-source-id: b741541c730f6da58db1a63edb8c1f7ac36cf897""",0.7,None,added

1316,Mengxiao Lin,mxlin@fb.com,"""Mock LocalBroadcastManager to avoid unexpected testing errors (#923)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/923

Many tests around trackers depend on `LocalBroadcastManager`. However, this class is provided by Android system and it's not stable in testing. In order to minimize the false test signals, this diff introduces a simple mock for `LocalBroadcastManager`.

Reviewed By: jvlyn

Differential Revision: D27210602

fbshipit-source-id: cf086a08bd81f3a32982126bdf22420384c6d55c""",0.7,None,changed

1317,Jing Ping,jingping@fb.com,"""Move ErrorReportData to kt

Summary: as title

Reviewed By: KylinChang

Differential Revision: D27174692

fbshipit-source-id: d85eb1311abae41f47696f8347155cbf6e68a787""",0.7,None,changed

1318,Mengxiao Lin,mxlin@fb.com,"""Ignore CrashShieldHandler test on debug mode on local machine

Summary:
The test of throwing exceptions in debug mode may cause false signals if the handler gets twice compiling.

In order to reduce the confusion, we only keep this test in sandcastle and github actions.

Reviewed By: jingping2015

Differential Revision: D27181614

fbshipit-source-id: 1ca56e3fd2f80958ddc4b15cbd1f622eee72aff0""",0.7,None,changed

1319,Mengxiao Lin,mxlin@fb.com,"""Migrate NativeProtocol to Kotlin

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D27088947

fbshipit-source-id: 0e1ebdd5bfaa298ac0019cd678a7da8e12066bb2""",0.7,None,changed

1320,Julie Yuan,julieyuan@fb.com,"""Fix NPE due to inferred non-nullable type

Summary: Annotate explicitly with `String?` here so that we don't get an NPE in the case that `pi.versionName` is null.

Differential Revision: D27189808

fbshipit-source-id: 253976cc3236c883dd80b51d9aada67f16679ed5""",0.7,None,fixed

1321,Jing Ping,jingping@fb.com,"""move Utility to kt

Summary: As title

Reviewed By: joesus

Differential Revision: D26927195

fbshipit-source-id: 25a478282929ec8075dfa14de757d25768f59f1f""",0.7,None,changed

1322,Jing Ping,jingping@fb.com,"""Move Utility tests to kt

Reviewed By: linmx0130, KylinChang

Differential Revision: D26987603

fbshipit-source-id: f132f2ef31406fffb2fdf91085a8f0c2ade159f4""",0.7,None,changed

1323,Mengxiao Lin,mxlin@fb.com,"""Migrate CrashShield to Kotlin

Summary: Migrate all classes in crashshield to kotlin.

Reviewed By: KylinChang

Differential Revision: D27125745

fbshipit-source-id: bebb770915b1d3e3103e5cabf31a1413a7e2dbbe""",0.7,None,changed

1324,Jing Ping,jingping@fb.com,"""Move ValidateTest to kt

Reviewed By: joesus

Differential Revision: D27127792

fbshipit-source-id: 42b129d75445a40f37e75f32f3d487546b1a8029""",0.7,None,changed

1325,Mengxiao Lin,mxlin@fb.com,"""Add test for CrashShieldHandler

Summary: As title.

Reviewed By: Oliverccccct

Differential Revision: D27065175

fbshipit-source-id: 1917e7d4aa3f5297efd7e5c5b19bcf9dff883acd""",0.7,None,added

1326,Jing Ping,jingping@fb.com,"""Move Validate to kt

Summary: As title

Reviewed By: jvlyn

Differential Revision: D27065926

fbshipit-source-id: bd4e338738e310682afe69d020b2943f67eb7744""",0.7,None,changed

1327,Mengxiao Lin,mxlin@fb.com,"""Migrate FeatureManager to Kotlin

Summary: As title. Also add a new test for unknown code

Reviewed By: jingping2015

Differential Revision: D27016653

fbshipit-source-id: 58e09a1eb607da20475c052ebf0dcdc15a762cfc""",0.7,None,added

1328,Julie Yuan,julieyuan@fb.com,"""Bypass 1 hr timeout for refetching GKs after switching app IDs

Summary: Detect whether the application ID has changed by checking for the key in cache and bypass the usual one-hour timeout for refetching GKs if so (see D13128690 (https://github.com/facebook/facebook-android-sdk/commit/b98eb65eee31600b65196848bbc462996205ad3f) for more explanation of how this works).

Differential Revision: D26956478

fbshipit-source-id: ccd690e624e62cddb9a62f52e7cb994e168e6a13""",0.7,None,changed

1329,Jing Ping,jingping@fb.com,"""fix POM validation error in staging phase

Summary:
Get error when validation on staging repository  (https://oss.sonatype.org/#stagingRepositories)
`Unable to initialize POM pom.xml: Failed to validate POM`
Since it need a specific version for depend package.

Reviewed By: joesus

Differential Revision: D27059450

fbshipit-source-id: 947fcad0ea1dbfe84e0231872f4bb63f770a7818""",0.7,None,fixed

1330,Mengxiao Lin,mxlin@fb.com,"""Migrate test of CallbackManagerImpl to Kotlin

Summary:
Move CallbackManagerImplPowerMockTest to CallbackManagerImplTest.

Change the initialization part to use mocked FacebookSdk.

Reviewed By: jingping2015

Differential Revision: D26931877

fbshipit-source-id: 7a09bc7965fb62d2780221da83813d28669aa2de""",0.7,None,changed

1331,Cecily Jiang,jiangyx@fb.com,"""Manage iap enable feature

Reviewed By: KylinChang

Differential Revision: D26290389

fbshipit-source-id: 2c28b892c30d81b48ebab1b45488dff39372ea92""",0.7,None,added

1332,Mengxiao Lin,mxlin@fb.com,"""Support multiple application ID in GKCache

Summary: For better internal testing, this diff allow GKCache to store GK values for multiple appIDs.

Reviewed By: jvlyn

Differential Revision: D26968362

fbshipit-source-id: fb8a874cf4eddc8f708baf112814e80865ebbe7a""",0.7,None,changed

1333,Jing Ping,jingping@fb.com,"""Migirate ImageDownloader

Summary: As title

Reviewed By: linmx0130

Differential Revision: D26696399

fbshipit-source-id: 5fe42e6d7c0b1960073693b294eb386301585d5b""",0.7,None,changed

1334,Mengxiao Lin,mxlin@fb.com,"""Migrate CertificateUtil to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D26928138

fbshipit-source-id: 7125896d2cf4448fbaf8e800204f18cf7f0a4d24""",0.7,None,changed

1335,Mengxiao Lin,mxlin@fb.com,"""Migrate InstallReferrerUtil into Kotlin

Summary:
As title.
Because Kotlin doesn't support lambda grammar for SAM (https://developer.android.com/kotlin/interop#lambda_arguments), I updated the callback declaration in tests. The change in Kotlin interface won't be treated as an incompatible difference as it's an internal class.

Reviewed By: jingping2015

Differential Revision: D26897989

fbshipit-source-id: f9a9459a33e14d6e7d883329d58e197f3087bf41""",0.7,None,changed

1336,Mengxiao Lin,mxlin@fb.com,"""Add InstallReferrerUtilTest

Summary: As title, test for InstallReferrerUtil is added. A new test dependency on Google Play install referrer API is introduced.

Reviewed By: jingping2015

Differential Revision: D26856256

fbshipit-source-id: 0d071d720c508de0770528455086ed5b62586da4""",0.2,None,added

1337,Mengxiao Lin,mxlin@fb.com,"""Add test for CertificateUtil

Summary: As title.

Reviewed By: joesus

Differential Revision: D26925601

fbshipit-source-id: 9ad48ce3e3fcbd7670588396ebedfd9ca739921c""",0.7,None,added

1338,Jing Ping,jingping@fb.com,"""Remove unused class

Summary: Since the monitoring feature never be used in prod. Remove this to decrease the move to kt work. Can bring this back if we want this feature in later.

Reviewed By: Oliverccccct

Differential Revision: D26854731

fbshipit-source-id: 14da297c8d29952a2970e0c31bfb4dface8d2e4b""",0.7,None,removed

1339,Mengxiao Lin,mxlin@fb.com,"""Migrate BundleJSONConverterTest to Kotlin

Summary: As title.

Reviewed By: jingping2015

Differential Revision: D26887828

fbshipit-source-id: 1b63272ea74086ab4d28e2c3b183803118d66a1f""",0.7,None,changed

1340,Mengxiao Lin,mxlin@fb.com,"""Make default error classification a Kotlin property

Summary: By changing the method of accessing default error classification into a Kotlin property, this diff make the code style looks better in Kotlin.

Reviewed By: jingping2015

Differential Revision: D26893445

fbshipit-source-id: 0cc3b891293e93057b581c3e1e353ad303bb7b02""",0.7,None,changed

1341,Mengxiao Lin,mxlin@fb.com,"""Set thread pool executor for WorkQueueTest (#913)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Since WorkQueueTest may block verifybuild. This PR tries to fix it with a new executor.

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/913

Test Plan: Wait for verifybuild

Reviewed By: jingping2015

Differential Revision: D26902615

Pulled By: linmx0130

fbshipit-source-id: 2a64604ee678deb2b38f26ca2869d5445c16d4fa""",0.7,None,added

1342,Mengxiao Lin,mxlin@fb.com,"""Migrate FetchedAppSettings to Kotlin

Summary: Migrate FetchedAppSettings to Kotlin and update related tests to correctly run new version.

Reviewed By: joesus

Differential Revision: D26832168

fbshipit-source-id: 2639dfd46d8a49d5120330fecab4598f635f0350""",0.7,None,changed

1343,Mengxiao Lin,mxlin@fb.com,"""Migrate FileLruCache into Kotlin

Summary: As title, migrating FileLruCache intro Kotlin. The lock is reimplemented with ReentrantLock.

Reviewed By: joesus

Differential Revision: D26763262

fbshipit-source-id: b194144ec0a2345e4b779737bb744b38afe3e60c""",0.7,None,changed

1344,Jing Ping,jingping@fb.com,"""Add test for ImageDownloader

Summary: Add Test

Reviewed By: joesus

Differential Revision: D26659260

fbshipit-source-id: 0b21abc657545e9ff68ffa0e2f80768db5d219d7""",0.7,None,added

1345,Mengxiao Lin,mxlin@fb.com,"""Migrate BundleJSONConverter to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D26764962

fbshipit-source-id: e6c234f94b4a1d79e2262fab4105090d8258236f""",0.7,None,changed

1346,Cecily Jiang,jiangyx@fb.com,"""Query sku details and construct logging

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D26431474

fbshipit-source-id: 6fac082a924900abd7adb0e807a5af1d20bdb7f1""",0.7,None,changed

1347,Jing Ping,jingping@fb.com,"""Bump Android SDK version

Summary: As title

Reviewed By: linmx0130

Differential Revision: D26853263

fbshipit-source-id: 68cdf033ea836e4721c8ff861c2b4081914a0eed""",0.2,None,changed

1348,Mengxiao Lin,mxlin@fb.com,"""Migrate WorkQueueTest to Kotlin

Summary: As title

Reviewed By: jingping2015

Differential Revision: D26793667

fbshipit-source-id: f53971df6f5305376b3a506a4b3cc96da5f9ff38""",0.7,None,changed

1349,Mengxiao Lin,mxlin@fb.com,"""Migrate WorkQueue to Kotlin

Summary:
By migrating WorkQueue to Kotlin, two things are changed:
1. `workLock` is implemented with `ReentrantLock`
2. `assert` is replaced by a new private function that throw exception if the condition isn't satisfied since in Android, assertions are always disabled.

Reviewed By: jingping2015

Differential Revision: D26791692

fbshipit-source-id: 4760f6df6e19907a71bdf76b4712c650166065f9""",0.7,None,changed

1350,Mengxiao Lin,mxlin@fb.com,"""Migrate ServerProtocol to Kotlin

Summary: Move ServerProtocol to Kotlin and adding ""get"" to the method for accessing error information to make the interfaces consistent with other ""getter"" methods.

Reviewed By: jingping2015

Differential Revision: D26728888

fbshipit-source-id: 3dee9bd28365d10d910aed7f29fe34cee4e65d5a""",0.7,None,changed

1351,Jing Ping,jingping@fb.com,"""move FacebookRequestErrorClassification to kt

Reviewed By: joesus

Differential Revision: D26616956

fbshipit-source-id: 1e01f6d71c2d7db4244b6bd372f611a5b3a84994""",0.7,None,changed

1352,Jing Ping,jingping@fb.com,"""Move FacebookRequestErrorClassificationTest to kt

Summary: Move java test to kt and add more test case

Reviewed By: linmx0130

Differential Revision: D26621452

fbshipit-source-id: 1075b9b5e6ba97556d9175527e0dd882348957ef""",0.7,None,added

1353,Mengxiao Lin,mxlin@fb.com,"""Migrate FileLruCacheTest to Kotlin

Summary: As title. I refactored the test to mock FacebookSdk rather than initializing it with deprecated APIs.

Reviewed By: jingping2015

Differential Revision: D26733931

fbshipit-source-id: 46f623ceb56d7b24227915f2d5267121e73c4b03""",0.7,None,changed

1354,Julie Yuan,julieyuan@fb.com,"""Update url parsing for platform dialogs in SDK webview

Differential Revision: D26059722

fbshipit-source-id: 757f89215eae61c8deea8984d5bdd5a763eef661""",0.7,None,changed

1355,Mengxiao Lin,mxlin@fb.com,"""Migrate NativeAppCallAttachmentStore to Kotlin

Summary: This diff migrates NativeAppCallAttachmentStore to Kotlin and remove the null tests of arguments given that the argument types are declared nonnull in Kotlin.

Reviewed By: jingping2015

Differential Revision: D26705336

fbshipit-source-id: 5ba22d4a6142614d6c78b5ab18c8ae610c096284""",0.7,None,changed

1356,Mengxiao Lin,mxlin@fb.com,"""Move NativeAppCallAttachmentStoreTest to Kotlin

Summary: Before moving NativeAppCallAttachmentStore to Kotlin, I migrate its test firstly. Four new tests on attachment creation are also added to improve test coverage.

Reviewed By: joesus

Differential Revision: D26672966

fbshipit-source-id: c053ad2da487185ceef6f4eed8fe69dfbe670b2e""",0.7,None,added

1357,Mengxiao Lin,mxlin@fb.com,"""FacebookSignatureValidatorTest

Summary: Migrate `FacebookSignatureValidatorTest` to Kotlin.

Reviewed By: jingping2015

Differential Revision: D26655155

fbshipit-source-id: 2c418792b15700cd7cbc1c7140a058dd6b766c81""",0.7,None,changed

1358,Mengxiao Lin,mxlin@fb.com,"""FacebookSignatureValidator

Summary:
Refactor `FacebookSignatureValidator` with Kotlin. Some logics are changed to make the code more readable in Kotlin.

While `PackageInfo.signatures` is deprecated in API 28, for now I keep it as the original code.

Reviewed By: jingping2015

Differential Revision: D26614542

fbshipit-source-id: 91284c84237601ace3bee26fa7fc33db8b14277c""",0.7,None,changed

1359,Mengxiao Lin,mxlin@fb.com,"""CallbackManagerImpl

Summary:
Move `CallbackManagerImpl` into Kotlin.

The nullable `Callback` arguments are removed because if the argument is null, an exception will be thrown in the original code. With Kotlin non-nullable argument, it's simpler to keep the safety. Also, test code for checking whether it will throw exceptions when passing a null value is removed.

Reviewed By: jingping2015

Differential Revision: D26583629

fbshipit-source-id: faa92bd8279edf42791fa8f4b4b0afbea99ccb02""",0.7,None,removed

1360,Mengxiao Lin,mxlin@fb.com,"""Fix OOM exception in android-sdk-gradle-test

Summary: `android-sdk-gradle-test` often fails recently. This diff increases the memory limit for test in gradle settings so that it can finish successfully.

Reviewed By: jingping2015

Differential Revision: D26694762

fbshipit-source-id: d14478cacf60af8aa3f821dfa8ba6a0fdd7c0033""",0.7,None,fixed

1361,Mengxiao Lin,mxlin@fb.com,"""UrlRedirectCache

Summary: This diff migrates `URLRedirectCache` into Kotlin. I did minimal refactoring here to keep the behavior of the original code.

Reviewed By: jingping2015

Differential Revision: D26650151

fbshipit-source-id: 86b3d0af229083c7798d0e6fc1813efcedf1f927""",0.7,None,changed

1362,Mengxiao Lin,mxlin@fb.com,"""Add UrlRedirectCacheTest and fix UrlRedirectCache on loop redirects

Summary:
This is the test for `UrlRedirectCache`. 3 static methods are tested in this unit test:
1. `cacheUriRedirect(Uri, Uri)`
2. `getRedirectedUri(Uri)`
3. `clearCache()`

This diff also fixes UrlRedirectCache if there is a loop in the redirect chain. If there is an A->A loop, the cache will return A. If there is more than or equal to 2 addresses in the loop, null will be returned and an error will be reported in log.

Reviewed By: joesus

Differential Revision: D26624011

fbshipit-source-id: 15728a4c75f1f1e02db4e7c8c406c9e37fe2f99d""",0.7,None,added

1363,Mengxiao Lin,mxlin@fb.com,"""Remove deprecated sdkInitialize from tests

Summary:
This diff is for unblocking D26624011.

It's quite strange that if I add a new test with mocked `FacebookSdk`, some other tests fails during `buck test androidsdk` even the failed tests can pass independently.

These tests all throw NullPointerException when requesting `Facebook.getApplicationContext()`. By changing them to using the mocked `FacebookSdk` from initializing SDK manually, the tests pass correctly.

Reviewed By: jingping2015

Differential Revision: D26638579

fbshipit-source-id: 86a4228a5fcd4cfb0dcdcf5d99ea988a35b6c46a""",0.7,None,added

1364,Maxim Goretskyy,maximg@fb.com,"""FetchedAppSettingsManager (#902)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/902

title, same deal as GK manager with object and testing that.

Some things _maybe_ could be refactored more aggressively w.r.t nullable types, but I will go with Android Studio recommendation for now to make it simple

NOTE: `request.executeAndWait().jsonObject` claimed to return non-null by Kotlin, but reading documentation and checking code it could actually return null. Hence I check for null manually. Please be aware of this when migrating other files to kt

Reviewed By: linmx0130

Differential Revision: D26534113

fbshipit-source-id: 85f37fa0c02e03dcfd9bb3df3cd66e4fb495d0bd""",0.7,None,changed

1365,Jing Ping,jingping@fb.com,"""Move Logger to kt

Reviewed By: joesus

Differential Revision: D26561539

fbshipit-source-id: eb66da90768da2dd2b74e7d5799ba822443da320""",0.7,None,changed

1366,Mengxiao Lin,mxlin@fb.com,"""Add GateKeeperRuntimeCache

Summary: This diff adds GateKeeperRuntimeCache into the codebase, which allows the user to modify GK values through SDK for runtime testing.

Reviewed By: joesus

Differential Revision: D26527643

fbshipit-source-id: 334fe22b041e6c95640551e4e7bec61244f23e94""",0.7,None,added

1367,generatedunixname89002005325672,generatedunixname89002005325672@fb.com,"""Daily `arc lint --take KTFMT`

Reviewed By: zertosh

Differential Revision: D26603382

fbshipit-source-id: ad882e4b601174c4a65d4047719d51fee794fd5e""",0.7,None,changed

1368,Jing Ping,jingping@fb.com,"""Add Logger test

Reviewed By: Mxiim

Differential Revision: D26539925

fbshipit-source-id: 7e33922a364d127bdbca22e8295e4c63000acd15""",0.7,None,added

1369,Jing Ping,jingping@fb.com,"""move ImageResponseCache to kt

Reviewed By: joesus

Differential Revision: D26272646

fbshipit-source-id: b812ae69c1bcfdc82bb34136b5dc50df89a4a24a""",0.7,None,changed

1370,Jing Ping,jingping@fb.com,"""move AnalyticsEvents to kt

Reviewed By: Mxiim

Differential Revision: D26499051

fbshipit-source-id: bcabc3f59a6635908fb8aa7b243c065c6a8f7f30""",0.7,None,changed

1371,Jing Ping,jingping@fb.com,"""Add ImageResponseCacheTest

Summary: As title

Reviewed By: Mxiim

Differential Revision: D26272493

fbshipit-source-id: 64f4ee5bc7536442483606d8de0fac33181f6189""",0.7,None,added

1372,Maxim Goretskyy,maximg@fb.com,"""FetchedAppGateKeepersManager

Summary:
title

`object` is special because it is singleton in kotlin land and powermock isnt aware of such features, so the workaround is to statically mock it and set an internal instance variable to new mock instance, since that is how singletons usually work.

Reviewed By: joesus

Differential Revision: D26395302

fbshipit-source-id: 8f3e033d517b7f91ab892901ada3598d7ba3c04c""",0.7,None,added

1373,Maxim Goretskyy,maximg@fb.com,"""Unblock GH CI (#901)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/901

Unblock github actions

* updates to run ubuntu latest
* splits assemble and tests into two different flows, also assembleDebug only
* kills a useless test(just tests a getter) which was also blocking for some reason
* lower timeout on a fuzzy function (should probably kill it since we have tests for GK

Since the feedback loop between github and this is longer than I want, I wasnt splitting into multiple diffs to make sure it works as I expect it to

Reviewed By: jingping2015

Differential Revision: D26463351

fbshipit-source-id: fc4848a56548c6749c640e2447b5543cf73b2628""",0.7,None,changed

1374,Julie Yuan,julieyuan@fb.com,"""Re-enable several more unit tests

Summary:
These tests have been disabled for a while. They all seem to be passing though? (Not sure what the original rationale was behind disabling them - seemed to be related to some appevents changes.)

There was only one test I wasn't able to re-enable and that's `ExceptionAnalyzerTest` because it relies on `!BuildConfig.DEBUG`. We could technically make this work by setting up a different build config for unit tests but that seems like a lot of work to make one unit test out of 700+ work so I'm leaving the `Ignore` for now.

Reviewed By: Mxiim

Differential Revision: D26442339

fbshipit-source-id: 85b445f3d25e3b1a76617ee8c85b638c730aa9c8""",0.7,None,changed

1375,Julie Yuan,julieyuan@fb.com,"""Fix and re-enable FacebookSignatureValidatorTest

Summary: This test has been disabled since 2017. Let's re-enable it.

Reviewed By: Mxiim

Differential Revision: D26442336

fbshipit-source-id: 8ff83c596207413f5ceb0ae25295756c06ae31e0""",0.7,None,fixed

1376,Adam Woods-Mccormick,alanbly@fb.com,"""Revert D25820813: Replace usages of Future.cancel(true) with Future.cancel(false)

Differential Revision:
D25820813 (https://github.com/facebook/facebook-android-sdk/commit/a96a44cb84ec6fe234e330757d1797ffefe50c2c)

Original commit changeset: 02ac273ea6e9

fbshipit-source-id: 6ee7fb90915ec0b3e6aa8841296e60d1da9c99dd""",0.7,None,changed

1377,Nacho Quintero Rizo,roboto@fb.com,"""Use new FB UI for GameRequests

Summary: For Apps that are using Facebook Gaming Login and have a recent FB App installed they will be able to use the new UI rather than getting the WebView UI.

Reviewed By: dloomb

Differential Revision: D26413235

fbshipit-source-id: d7141099252509cf950ceceb9fd43dce4b35226e""",0.2,None,added

1378,Adam Woods-Mccormick,alanbly@fb.com,"""Replace usages of Future.cancel(true) with Future.cancel(false)

Summary:
Justification for the original task below.

# Future.cancel(true) considered harmful

The Future.cancel API takes a boolean indicating whether to interrupt the task if it's currently running. Please pass false only.

## DETAILS
Future.cancel(true) will interrupt the thread upon which the task is running. This is only safe to do if you can guarantee that all the code running within your task handles interrupts gracefully. If your code is running in FB4A (and probably other apps too, but I haven't checked), then you can't guarantee this. You may cause code running outside of your task, in a different thread, to fail mysteriously.In fact, any use of Thread.interrupt (other than invoking it on the current thread) can cause the same problem.

This logview trace is an example of what happens when a thread is interrupted and it's not handled gracefully. You can look into logcat and see more details. Here's a symbolicated view: P130429284

We use FileChannel when loading classes. FileChannel will throw ClosedByInterruptException if it's running within a thread that is interrupted. I'm going to catch/handle this one particular problem, but I'm not confident there aren't others.
Exceptions that result from attempts to load classes will be saved and re-thrown the next time the same class load is attempted. Which may be on a different thread. See [http://androidxref.com/.../art/runtime/class_linker.cc...](http://androidxref.com/9.0.0_r3/xref/art/runtime/class_linker.cc#208)

The ExecutorService API will normally ignore Throwables (unless afterExecute is overridden). This is potentially worse than a crash, since if a particular class is only used within an ExecutorService task, the resulting NoClassDefFoundError may never be detected. Instead the app will just silently fail to run such tasks. In the case of the pasted trace, the problem is initially ignored when it happens within the SocialWifiDetector$1 Runnable (which is run within a FutureTask), but is then detected when the same class load is attempted within TigonObservableRunnable (which is not within a FutureTask).

## Follow-ups:
T66631068 - Fix known causes of interrupts during classloading causing failures
T66631113 - Lint on usage of Future.cancel(true)
T66631161 - Replace usages of Future.cancel(true) with Future.cancel(false)
T66631218 - Soft error upon afterExecute if the Throwable is an Error
cc Delyan Kratunov, Austin Vandergon

Differential Revision: D25820813

fbshipit-source-id: 02ac273ea6e9a2ded9da58aaf27911c9331d685d""",0.7,None,fixed

1379,Roman Shakhmanaev,shakhmanaev@fb.com,"""calling dismiss on the inner dialog

Summary: it seems after this change D26158274 (https://github.com/facebook/facebook-android-sdk/commit/8c72d0d8a2c3a447167109a3ae2b0e2dcc05448d) we started to have crashes. so, I am tweaking this code with hope that it will not introduce a new memory leak and also fixes the crash.

Differential Revision: D26419165

fbshipit-source-id: 70232318771f0435635b1bf215355dbd69437c3d""",0.7,None,changed

1380,Maxim Goretskyy,maximg@fb.com,"""Removes two deadlocks

Summary:
almost tl;dr
FacebookSDK.java has a lot synchronized methods,
when it calls statically class A or class B, they call methods from FacebookSDK themselves, but the lock on those methods is acquired already because it is synchronized on class lock.
This is a ticking bomb. Right now it worked because we call things in a very specific order and call it in Executor first time.
Hence the solution is to
1) remove class lock and have variable lock on initialized. This should be safe because we just change what we lock on.

2) remove dependency on another synchronized method since it is not needed. This should be safe as the SDK should already be initialized to get applicationID. This is either done in ContentProvider automatically, or will be done in your Application/Main-activity as recommended in the docs. If there are concerns, we can always add same method unsynchronized to only be used inside AppEventsLogger since the possible deadlock can arise from there.

Reviewed By: jingping2015

Differential Revision: D26157231

fbshipit-source-id: 1c73d4fcfcd375678a590b057a25f0354cae2b6b""",0.2,None,changed

1381,Jing Ping,jingping@fb.com,"""Migirate ProfileInformationCache

Reviewed By: joesus

Differential Revision: D26332674

fbshipit-source-id: 4ccc32c8b1b70a91c54ad68ec8f0b5a7d6f3bd0d""",0.7,None,changed

1382,Jing Ping,jingping@fb.com,"""Update verifybuild.yml (#899)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [ ] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Describe what you accomplished in this pull request (for example, what happens before the change, and after the change)

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/899

Test Plan: **Add your test plan here**

Reviewed By: Mxiim

Differential Revision: D26344280

Pulled By: jingping2015

fbshipit-source-id: 015a55d0d81088804b2a32dc7cb65ea6d527c7b3""",0.7,None,changed

1383,Mengxiao Lin,mxlin@fb.com,"""Add InstrumentDataTest.kt

Summary:
Test for InstrumentData.java
This test cover 3 constructors of InstrumentData and a case of invalid file input.

Reviewed By: jingping2015

Differential Revision: D26341137

fbshipit-source-id: 652a11b4487c7b2e38d6fac6307c9a6a82470a12""",0.7,None,added

1384,Maxim Goretskyy,maximg@fb.com,"""Make InjKit work for kotlin

Summary:
We want to make sure `AutoHandleExceptions` annotations also work with Kotlin to make sure migration is smooth and does not have much changes in behaviour.

`apply-plugin` is needed in order for kotlin-tasks in gradle to exist, so we can use them in `safekit-build.gradle` when we try to get `kotlinProvider`. This is because the safekit-build is in the root and applies to all plugins. _Maybe_ it is possible to refactor the existing stuff and copypaste the same config everywhere, but I do not think it is worth the time.

The addition in InjKit is similar to invoke-method without class-loading stuff. I am not sure why it is needed, it will recursively call itself after, I tried to go back in history and I suspect it couldve been some bug in gradle. Not having it works as well. I also did not want to ruthlessly refactor it since I do not know how many might use it as it is, and easier to add a new method that does almost same things and imo it is still clean.

KotlinTask does not call getBootstrapPath, reason for that is I have not been able to find a method like it when I used reflection. To repro:

```
//    System.out.println(""task clazz "" + compileTask.getClass());
//    Method[] declaredMethods = compileTask.getClass().getDeclaredMethods();

//    for (Method m : declaredMethods) {
//      System.out.println(m.toString());
//    }
//    System.out.println(compileTask.getClass().getDeclaredMethods());
//    System.out.println(""XXXXX"");
//    Object getKotlinOptions = invokeGetter(compileTask, ""getKotlinOptions"");
//    Method[] declaredMethods1 = getKotlinOptions.getClass().getDeclaredMethods();
//    for (Method m : declaredMethods1) {
//      System.out.println(m.toString());
//    }
```

Reviewed By: ashaevy

Differential Revision: D26286342

fbshipit-source-id: 3f7b39b2d1d073b8718f3dc5aa56b85fb2e0f179""",0.7,None,changed

1385,Julie Yuan,julieyuan@fb.com,"""Make bitmap input to ImageResponse nullable

Summary: This is causing the app to crash when there's an ImageRequest that doesn't return a valid bitmap response (for example, if the query times out or is corrupted).

Reviewed By: Mxiim

Differential Revision: D26247127

fbshipit-source-id: 5a2fe3b66b4558990792bcc23ff5103d8b268b1f""",0.7,None,changed

1386,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: cdd4f820619ef4d750c1b03df5f8bf3c6bd7c6cb""",0.7,None,changed

1387,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: e27e59627f2c77e8c9fef063f32224ebfb17c62e""",0.7,None,changed

1388,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0fe0b1005229510378b20bd17746025fe787b2c0""",0.7,None,changed

1389,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/oculus-mirage.config.json on master

fbshipit-source-id: ce30f385433b3ba781a0139ee5ba5e6c6a20ac14""",0.7,None,changed

1390,Jing Ping,jingping@fb.com,"""remove unused tests under /androidTest

Reviewed By: Mxiim

Differential Revision: D26214504

fbshipit-source-id: b34e078cd2324fc04f620ad053d3d47ce13a092c""",0.7,None,removed

1391,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 555f603887173afd820562e225824f6a9d1cdad0""",0.7,None,changed

1392,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingPayload class

Summary: This adds gaming_services.GamingPayload

Reviewed By: Mxiim

Differential Revision: D26187443

fbshipit-source-id: bdecf5fdbc71846f3bc7fac189ec58a15c1f0b58""",0.2,None,added

1393,Xuewei Peng,xueweipeng@fb.com,"""Set parameters cta in sdk

Summary: Set parameters cta in sdk for developer to be able to customize it

Reviewed By: dloomb

Differential Revision: D26202089

fbshipit-source-id: 8b0143bb7b2efa052eb5b75162f1adeada1b7dfe""",0.7,None,changed

1394,Xuewei Peng,xueweipeng@fb.com,"""Set parameters options in sdk

Summary: Set parameters options in sdk to use to show all friends

Reviewed By: dloomb

Differential Revision: D26201925

fbshipit-source-id: 2e8c8b59599f67af0601f8b46bf6e29a7c9a397f""",0.7,None,changed

1395,Jing Ping,jingping@fb.com,"""Migirate ImageResponse

Summary: As title

Reviewed By: Mxiim

Differential Revision: D26158433

fbshipit-source-id: 3e03daab7bc988f2e1fa591ca813d3a53c6d58c7""",0.7,None,changed

1396,Jing Ping,jingping@fb.com,"""Migirate ImageRequest

Summary: As title

Reviewed By: Mxiim

Differential Revision: D26058208

fbshipit-source-id: 7e6eb897c1ac4b4e26fd8418c652852992783244""",0.7,None,changed

1397,Davy Leggieri,davyl@fb.com,"""Fixed Activity leak in AlohaDeviceAuthDialog

Summary: Fixed views and context leaks in AlohaDeviceAuthDialog and AlohaFacebookActivity.

Differential Revision: D26158274

fbshipit-source-id: 91266a7c9a7dcdb56f440530d6b78315e5207032""",0.7,None,fixed

1398,Jing Ping,jingping@fb.com,"""Migirate InternalSettings

Summary: As title

Reviewed By: Mxiim

Differential Revision: D26030541

fbshipit-source-id: ae906e8d4ce15722c4c07af9ab5bd33d399db652""",0.7,None,changed

1399,Maxim Goretskyy,maximg@fb.com,"""introduce kotlin to source

Summary:
title
I get error if I do this without any kotlin files at all, so migrate the simplest internal class that has a test already.

Reviewed By: jingping2015

Differential Revision: D26006437

fbshipit-source-id: 2cbf7361afd264492f7e36cdc16fef3cd0ec19a6""",0.7,None,changed

1400,Xuewei Peng,xueweipeng@fb.com,"""adjust the type for invite

Summary: adjust the type for invite

Reviewed By: iquintero

Differential Revision: D26091642

fbshipit-source-id: c4fbb93b9fb5c15457acae3e0587d3846f1d836f""",0.7,None,changed

1401,Xuewei Peng,xueweipeng@fb.com,"""modify Test App to be able to pass an example test payload

Summary: modify Test App to be able to pass an example test payload

Reviewed By: iquintero

Differential Revision: D26086333

fbshipit-source-id: 68d1b09400ed793aa151fa3eb67efbedd233d444""",0.7,None,changed

1402,Zilin Zhang,kylinchang@fb.com,"""Bump version to 9.0.0

Summary: As title

Reviewed By: joesus

Differential Revision: D25876089

fbshipit-source-id: 748fc5b0a54a831f3a0be648b7ca3573d3f6d198""",0.2,None,changed

1403,Zilin Zhang,kylinchang@fb.com,"""Improvement

Summary: Add try/catch block to codeless function

Reviewed By: joesus

Differential Revision: D25727475

fbshipit-source-id: a9eea8765c8c19aa8311bc9876e0b9f5b01b8daa""",0.7,None,added

1404,Ian Childs,ianc@fb.com,"""Move android sdk test to use binary resources (#885)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/885

Legacy resources are deprecated. The manifest can no longer be loaded as it is created as part of the binary resources creation, so remove that config line. The gradle tests seem to pass still so seems fine.

Reviewed By: Mxiim

Differential Revision: D25819373

fbshipit-source-id: 8d23b343118cd5b98d2286d5539b0eb236b10c14""",0.7,None,changed

1405,Merab Tato Kutalia,tatocaster@users.noreply.github.com,"""Updating README - Add notes for the multi-process app support (#880)

Summary:
related to issue https://github.com/facebook/facebook-android-sdk/issues/879
https://github.com/facebook/facebook-android-sdk/issues/879

Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

This PR is related to the issue when Facebook SDK crashes in a `multi-process` app while being run on a `non-main` process. more details: https://github.com/facebook/facebook-android-sdk/issues/879
Updated Readme to include the info for the rest of the community and to save their precious time.

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/880

Reviewed By: jingping2015

Differential Revision: D25758909

Pulled By: Mxiim

fbshipit-source-id: 1ccb6e38eb49e40d694a6dc4ec94b12cd3f0818d""",0.7,None,added

1406,Jing Ping,jingping@fb.com,"""Add AutomaticAnalyticsLoggerTest

Summary: As title

Reviewed By: joesus

Differential Revision: D25715777

fbshipit-source-id: 7217b2320190c824c841136e048af386458e87ce""",0.7,None,added

1407,Riley Dulin,dulinr@fb.com,"""Apply whitespace linter to all gradle files

Summary: Run whitespace and license linters on gradle build files.

Reviewed By: zertosh

Differential Revision: D25687355

fbshipit-source-id: 44330daac7582fed6c05680bffc74e855a9b1dbc""",0.7,None,changed

1408,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 6ff26a8b519e8d2d88c75ec0e2162fcddc836220""",0.7,None,changed

1409,Intl Scheduler,generatedunixname89002005309424@fb.com,"""@allow-large-files [i18n] remove unused generated strings.xml files on master

fbshipit-source-id: 1ca70828d94d7e30c78897f3a7e32b70fab95da5""",1,None,removed

1410,Tao Chen,oliverct@fb.com,"""Clean buck files and bolt-internal folder

Summary:
Same as the title
We could remove Instrumented Test for Task since we have unit tests for that.

Reviewed By: KylinChang

Differential Revision: D25634504

fbshipit-source-id: 1c660b38ae75842b5d8f1319a5b5a465b0654cbc""",0.7,None,changed

1411,Tao Chen,oliverct@fb.com,"""Clean gradle build bolts-1.4.0 lib

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D25634445

fbshipit-source-id: 445560f435e875ec02d516667e5d9d728f8ad0c2""",0.7,None,changed

1412,Tao Chen,oliverct@fb.com,"""Clean unsed funcitons in AppLink class

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D25633619

fbshipit-source-id: 7994e77131881a8c3d070afbb6b96c3d34c24f7f""",0.7,None,changed

1413,Tao Chen,oliverct@fb.com,"""Clean unsed funcitons in AndroidExecutors class

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D25633571

fbshipit-source-id: 17cedfed9f84ed2465d1a9f733c323cf4524a738""",0.7,None,changed

1414,Tao Chen,oliverct@fb.com,"""Clean unsed funcitons in AggreagteException class

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D25633327

fbshipit-source-id: ba6135cd1a2d9370da573d613ffa92b03a75dd77""",0.7,None,changed

1415,Tao Chen,oliverct@fb.com,"""Migrating bolts to CoreKit

Summary: Replace bolt. with com.facebook.bolts.

Reviewed By: KylinChang

Differential Revision: D25633121

fbshipit-source-id: 767b41c2baf2fba571d866f646e1bb92b27fa9d1""",0.7,None,changed

1416,Maxim Goretskyy,maximg@fb.com,"""remove travis completely

Summary:
See task
We are already running github actions, ran in parallel to make sure no issues. Now time to kill travis.
As far as release goes, the person releasing would need to manually check it is passing (as before), alternatively we could look into githubs API what they have, but this is out of scope of this diff. Additionally, the right solution is to release from github actions directly, but we cannot do that due InjKit.

Reviewed By: jingping2015

Differential Revision: D25589466

fbshipit-source-id: 567ef52f7af7dfe7e974b1071962201d1564cde2""",0.7,None,changed

1417,Jing Ping,jingping@fb.com,"""some improvement for SuggestedEventViewHierarchy and its test

Summary: As title.

Reviewed By: joesus

Differential Revision: D25544628

fbshipit-source-id: 49ef1ffd2acb3de2c829d3feb83c1558883dd952""",0.7,None,changed

1418,Jing Ping,jingping@fb.com,"""Add Test for SuggestedEventViewHierarchy

Summary: Add Unit Test for SuggestedEventViewHierarchy

Reviewed By: Mxiim

Differential Revision: D25514230

fbshipit-source-id: cda6090a0f0e3dfe1742ef96f21e0ec135f3ed34""",0.7,None,added

1419,Andrey Putilin,regresscheck@fb.com,"""Add more logging to Profile calls

Summary: For debug purposes.

Reviewed By: Mxiim

Differential Revision: D25498487

fbshipit-source-id: 07b8c1b90d968b9a67360ef6c539f2facf13899a""",0.7,None,added

1420,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Prevent waiting threads when service is available but returned binder is null

Summary: Prevent waiting threads for Binder connection when Receiver service is available inside FB4A but PPML is disabled due to GK or privacy checks.

Reviewed By: dreamolight

Differential Revision: D25444518

fbshipit-source-id: 662c5a31808b88dda7185e3fe23ae44cdfd60b32""",0.7,None,changed

1421,Aryaman Tummalapalli,ary31415@fb.com,"""Added unit tests for ParameterComponent.java

Summary: Added some unit tests for ParameterComponent.java modeled after those in EventBindingTest.kt

Reviewed By: Mxiim

Differential Revision: D25351243

fbshipit-source-id: fbb1539583f242686afd887736fa6f1fda933f71""",0.7,None,added

1422,Zilin Zhang,kylinchang@fb.com,"""Catch Throwable in saveEvents

Summary: As title, oos.writeObject may throw InternalError and we need to catch that via Throwable

Reviewed By: Mxiim

Differential Revision: D25345518

fbshipit-source-id: 0bd5de9883b690cd91c224b220d33b0be78ef016""",0.7,None,changed

1423,Nacho Quintero Rizo,roboto@fb.com,"""Support nested data response in Cloud Game Requests Dialog

Summary: Sometimes the response has a nested data field that should also be supported.

Reviewed By: Mxiim

Differential Revision: D25339762

fbshipit-source-id: ff8cbb261bfcbc5beebb25c97c5b9573d89e6a8e""",0.2,None,changed

1424,Xinzhu Cai,kongxinzhu@fb.com,"""Add SessionLoggerTest (#873)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/873

as title

Reviewed By: Mxiim

Differential Revision: D25127677

fbshipit-source-id: 6ae518ae43b11abb47974694c8f5363e26458f57""",0.7,None,added

1425,Frieder Bluemle,frieder.bluemle@gmail.com,"""Fix file extensions and line endings (#868)

Summary:
Three related commits to fix a few file extensions/formatting. No content changes.

See discussion in https://github.com/facebook/facebook-android-sdk/issues/660 for some context.

cc rightparen

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/868

Reviewed By: Mxiim

Differential Revision: D25137908

Pulled By: jawwad

fbshipit-source-id: 046057e889f187ed892a939b59f085203963e7ea""",0.7,None,fixed

1426,Jawwad Ahmad,jawwad@fb.com,"""Move the test for ViewHierarchy.java to the correct matching location

Summary:
Moved ViewHierarchyTest.java from appevents.codeless to appevents.codeless.internal to match the location of ViewHierarchy.java

Had to make CodelessTestBase.root protected so that it would be visible to ViewHierarchyTest.java

Reviewed By: Mxiim

Differential Revision: D24910059

fbshipit-source-id: 958457786dcf861ec8367d5c7a9a5f244a5974df""",0.7,None,changed

1427,Maxim Goretskyy,maximg@fb.com,"""exclude a test from running on gh actions (#867)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/867

the test seems flaky on gh actions only, buck stress testing works, and so does sandcastle with gradle

I tried increasing timeouts, but still see issues on gh, decide to exclude to unblock the queue signal of build

Reviewed By: jingping2015

Differential Revision: D25126563

fbshipit-source-id: 2ba40be979e2773f68cf3cf312b310360394d2d4""",0.7,None,changed

1428,Maxim Goretskyy,maximg@fb.com,"""try fix flakiness in ondeviceprocessmanager

Summary:
it seems to work fine with travis and on sandcastle, but github actions seem to not like it

the numbers are magic, the other easy option I see is to add a flag to disable it during github actions, but then we lose potential signal.

Reviewed By: Nathaaaalie

Differential Revision: D25101744

fbshipit-source-id: 5b410d4125b0921a2619ca6e1f739ec153621216""",0.7,None,fixed

1429,Mouwu Lin,mouwul@fb.com,"""unit test for ImageRequest.java

Summary: add unit tests for ImageRequest.java. tests are written in Kotlin

Reviewed By: Mxiim

Differential Revision: D25072697

fbshipit-source-id: f446cf99bd281e0fa8f0c07f9793ad8f84722fb1""",0.7,None,added

1430,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Updated on-devices processing note in Android SDK changelog

Summary: As title

Reviewed By: dreamolight

Differential Revision: D24990473

fbshipit-source-id: 4c4b451776d58caac97e94d2f21b1138e011d86e""",0.7,None,changed

1431,generatedunixname89002005325672,generatedunixname89002005325672@fb.com,"""Daily `arc lint --take KTFMT`

Reviewed By: zertosh, cgrushko

Differential Revision: D25085009

fbshipit-source-id: 2f32caa66778cd7703cd7c8977cfcf561d91cb5d""",0.7,None,changed

1432,Maxim Goretskyy,maximg@fb.com,"""attempt to fix flakiness in instrumentutil test

Summary: test was disabled because flaky, I think it is due stressruns and same folder is created/deleted and there is concurrency issue there. I just randomly generated the dir name.

Reviewed By: Nathaaaalie

Differential Revision: D25063435

fbshipit-source-id: 8e7eca849b90b7345fb82bad54edc82d16cec698""",0.7,None,fixed

1433,Andrey Putilin,regresscheck@fb.com,"""Allow setting init callback for webview

Summary: This is primarly needed for E2E tests, to be able to redirect webview requests to e2e proxy.

Reviewed By: jvlyn

Differential Revision: D24316249

fbshipit-source-id: c1eac614c2685255745f061fb0fe7bdfb339c121""",0.7,None,changed

1434,Andrey Putilin,regresscheck@fb.com,"""Dump activity hierarchy for E2E testing

Summary: Adding helper class to dump activity information when E2E test framework is running the app. We rely on helper class to filter elements by text, understand what's visible, etc.

Reviewed By: Mxiim

Differential Revision: D24364849

fbshipit-source-id: a918f0f474fff364ac6ef8da21ec9624b5d7cabb""",0.7,None,changed

1435,Stan Wu,dreamolight@fb.com,"""Update key name for app ID

Summary: To make the key name consistent

Reviewed By: KylinChang

Differential Revision: D25046180

fbshipit-source-id: d5dc1d22842e347a57e689fb48a0db530c00ace3""",0.7,None,changed

1436,Jawwad Ahmad,jawwad@fb.com,"""Add MTensorTest.kt to test MTensor.java

Summary:
Added MTensorTest.kt for testing MTensor.java.
There was an existing test for testing the reshape method in MTensor in OperatorTest.java. Moved it out of OperatorTest.java and into MTensorTest.kt. Also added tests for getShape() and getShapeSize().

Also updated the `for` loop in MTensor.java since there was an Android Studio suggestion for it.

Reviewed By: Mxiim

Differential Revision: D25012522

fbshipit-source-id: eea4da10bf00c3441f72d7eae0ab2d61f40e7f05""",0.7,None,added

1437,Yonghong Shi,yongshi@fb.com,"""add postsessionscore

Summary: add post session score

Differential Revision: D25039667

fbshipit-source-id: 62aa868bbc95c6045888f8f03166967b847e8aa6""",0.7,None,added

1438,Xinzhu Cai,kongxinzhu@fb.com,"""Add SessionInfoTest (#865)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/865

as title

Reviewed By: Mxiim

Differential Revision: D24908222

fbshipit-source-id: fe62864481e43b3a4842fb069859b7ef210ef65a""",0.7,None,added

1439,Frieder Bluemle,frieder.bluemle@gmail.com,"""Fix README link to CI (#678)

Summary:
Small PR that fixes the link to Travis CI in README - It was linking to the svg image instead of the actual build job.

Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/678

Reviewed By: Mxiim

Differential Revision: D24992575

Pulled By: jawwad

fbshipit-source-id: 51323e8ac7f13729767317be6f49815c112bb520""",0.7,None,fixed

1440,Xinzhu Cai,kongxinzhu@fb.com,"""Adjust timeout for testGenFuzzy

Summary:
Adjust the timeout for testGenFuzzy.

More context in D24925690 (https://github.com/facebook/facebook-android-sdk/commit/3ec10e69eb44718a4884990fc0447c68f24afc34).

Reviewed By: Mxiim

Differential Revision: D24967142

fbshipit-source-id: 2f70e236ce3859ace1f89636d026d4b79e7af95f""",0.7,None,changed

1441,Jawwad Ahmad,jawwad@fb.com,"""Remove the PlacesGraphSample project under samples (#863)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/863

Removed the PlacesGraphSample project since the Places SDK is obsolete

Reviewed By: IanChilds

Differential Revision: D24915774

fbshipit-source-id: 41703946131b082a8daa10a16bc81f25a3e9eadd""",0.7,None,removed

1442,Maxim Goretskyy,maximg@fb.com,"""add timeout for fuzzy testing (#862)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/862

this sometimes take very long time (i saw it with github actions), the current workaround is to just ignore it locally, so better add timeout.
Additionally, it only tests FetchedAppSettingsManager as of now, and we already added test for that.

Reviewed By: jawwad

Differential Revision: D24925690

fbshipit-source-id: a9b785810f7df4438dbed6ca1ad4bc8aed35be94""",0.7,None,added

1443,Jawwad Ahmad,jawwad@fb.com,"""Add HashUtilsTest.kt unit test (#861)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/861

Added a test for appevents.internal.HashUtils.java

Also:
- Removed Nullable due to warning: Nullable method 'computeFileMd5' always returns a non-null value
- Moved the assertThrows helper from EventBindingTest.kt into a util/common/TestHelpers.kt file

Reviewed By: Mxiim

Differential Revision: D24908731

fbshipit-source-id: 803af582e94a56d4e0583e3db53e6b555e7933da""",0.7,None,added

1444,Jawwad Ahmad,jawwad@fb.com,"""Add a unit test for appevents.ml.Utils.java

Summary:
Added UtilsTest.kt

Also removed the extra joinedString variable to fix the ""Local variable 'joinedString' is redundant"" Android Studio warning

Reviewed By: Mxiim

Differential Revision: D24907218

fbshipit-source-id: ca4f3d36d7c6a63d18866695547f41872ca3a879""",0.7,None,added

1445,Maxim Goretskyy,maximg@fb.com,"""facebooksdkjsinterface test

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24905223

fbshipit-source-id: bf1e398a57028dc28b6d9b2997e0fb16b28d7586""",0.7,None,changed

1446,Maxim Goretskyy,maximg@fb.com,"""try build with github actions

Summary: we are moving away from travis this year, lets try out github actions :)

Reviewed By: Nathaaaalie

Differential Revision: D24915269

fbshipit-source-id: 0be1df412e12e79087f90d97b637c68a770605ad""",0.7,None,changed

1447,Maxim Goretskyy,maximg@fb.com,"""run kotlin tests with buck

Summary:
kotlin.test is not inside buck-kotlin, ran following commands:

```
abgs kotlin.test.assertEquals -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertEquals/org.junit.Assert.assertEquals/g'
abgs kotlin.test.assertNotEquals -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertNotEquals/org.junit.Assert.assertNotEquals/g'
abgs kotlin.test.Test -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.Test/org.junit.Test/g'
abgs kotlin.test.assertNull -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertNull/org.junit.Assert.assertNull/g'
abgs kotlin.test.assertNotNull -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertNotNull/org.junit.Assert.assertNotNull/g'
abgs kotlin.test.assertFalse -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertFalse/org.junit.Assert.assertFalse/g'
abgs kotlin.test.assertTrue -f androidsdk/ -sl | xargs sed -i -e 's/kotlin.test.assertTrue/org.junit.Assert.assertTrue/g'
```
Manually fixed some failing tests.
For broadcastreceiveir it tries to mock constructor of an abstract class, so refactored a work around to mock it instead of spying.
AssertEquals only has 2 args in that version.
AssertThrows does not exist, either we need to use expected-annotation or the workround I created, can later refactor it out so other classes can use it too.

Reviewed By: Nathaaaalie

Differential Revision: D24896900

fbshipit-source-id: 9b48a5b86a48dcfff56953c4cb6b0da4c2f64f52""",0.7,None,fixed

1448,Jawwad Ahmad,jawwad@fb.com,"""Update the README with the latest version number and remove references to the places SDK

Summary: The Places SDK has been deprecated for a while and will be removed in the near future. It is also currently not released to maven.

Reviewed By: Mxiim

Differential Revision: D24894965

fbshipit-source-id: f5b551332a8e84b5822fd4545103645f6b14c48b""",0.7,None,changed

1449,Maxim Goretskyy,maximg@fb.com,"""test appeventsloggerutil

Reviewed By: Nathaaaalie

Differential Revision: D24867599

fbshipit-source-id: 20ce987f488c1d3f59549dddf581d11addc859d2""",0.7,None,changed

1450,Xinzhu Cai,kongxinzhu@fb.com,"""Add ViewIndexerTest (#860)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/860

as title

Reviewed By: joesus

Differential Revision: D24847874

fbshipit-source-id: 5b53a31660ed7103493b3bbe99aa2ad06e9361ca""",0.7,None,added

1451,Maxim Goretskyy,maximg@fb.com,"""test legacy token helper

Summary: mostly taken from AccessToken class

Reviewed By: Nathaaaalie

Differential Revision: D24806458

fbshipit-source-id: e6e8c3e6639d6a2d9997c571ed54a8dafdf9db77""",0.7,None,changed

1452,Jay Tang,jaytang@fb.com,"""add new test cases for SmartLoginOption class

Reviewed By: Mxiim

Differential Revision: D24844361

fbshipit-source-id: b77baeb798e0b884bc497d1b4bc3e8e2b74761b2""",0.7,None,added

1453,Qinxi Chen,qinxichen@fb.com,"""facebook: Add DaemonRequest. executeAsync to accept string type

Differential Revision: D24850083

fbshipit-source-id: 48347980ea20979ff4407cd44acc3b466e36cfb0""",0.7,None,added

1454,Qinxi Chen,qinxichen@fb.com,"""facebook: Remove unused test parameter and SDK message

Differential Revision: D24849392

fbshipit-source-id: ed41f63a6edaf51c9cd73b13dd39d710c325c399""",0.7,None,removed

1455,Dani Katz,danikatz@fb.com,"""logging change setting implicitly using both current and previous values of autlogEventsEnabled

Summary:
# Context
When changing the setting for autoLogAppEventsEnabled from true to false there is not log because the logging is made with the actual value of autoLogAppEventsEnabled as disabled.
we need to log this case anyway; in order to know that will be not further events logging.
The CPIR authorising  this modification is
https://fburl.com/launch_manager/ml2ft18y

Reviewed By: dreamolight

Differential Revision: D24711002

fbshipit-source-id: c8e7d977a25e4151d9baa091db4659665e48ea01""",0.7,None,changed

1456,Maxim Goretskyy,maximg@fb.com,"""test facebookbroadcastreceiver

Summary: ^

Reviewed By: jingping2015

Differential Revision: D24803239

fbshipit-source-id: f8159465ce2e2eab68a74c978b5a25020ae674e2""",0.7,None,changed

1457,Xinzhu Cai,kongxinzhu@fb.com,"""Add CodelessMatcherTest (#858)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/858

as title

Reviewed By: Mxiim

Differential Revision: D24760513

fbshipit-source-id: 83450fd00e623188fc7ffbcb3b18a55f83c65020""",0.7,None,added

1458,Maxim Goretskyy,maximg@fb.com,"""stop requesting link field

Summary:
because of sev, would still affect old versions so there is a server change already, but new clients do not need to continue to request it

could not find any other references to ""link"" (super generic word...)

Reviewed By: jingping2015

Differential Revision: D24706246

fbshipit-source-id: fa144dcaba6e754e38076530c1d80fbd07af1bb8""",0.7,None,changed

1459,Qinxi Chen,qinxichen@fb.com,"""Change from test_id to testId

Summary: Because test_id doesn't match the naming convension in www side.

Differential Revision: D24742401

fbshipit-source-id: c1a14cc07464d5968703fe56c35cd6d51bd56ea4""",0.7,None,changed

1460,Xinzhu Cai,kongxinzhu@fb.com,"""Add EventBindingTest (#857)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/857

as title

Reviewed By: Mxiim

Differential Revision: D24713805

fbshipit-source-id: e0fe6e8b01027f4d11aed8cf66d6a37b15bff2eb""",0.7,None,added

1461,Shengye Wan,simonwan@fb.com,"""Add unit test for PersistedEvents

Summary: Add the unit test for the legacy PersistedEvents

Reviewed By: Mxiim

Differential Revision: D24707974

fbshipit-source-id: 9486aac86fe7a9d7500deb572a1c4bb870de0fed""",0.7,None,added

1462,Shengye Wan,simonwan@fb.com,"""Add unit test for AppEventCollection

Summary: Add unit test for the legacy class AppEventCollection

Reviewed By: Mxiim

Differential Revision: D24707174

fbshipit-source-id: 338fec36034ab5de1dd10468235043b48d4e6870""",0.7,None,added

1463,Qinxi Chen,qinxichen@fb.com,"""Facebook: Add new sdk message param for CG E2E testing.

Reviewed By: AlanWilms

Differential Revision: D24696052

fbshipit-source-id: bdb58235ce07a4de35b49f0fa90bf5aacf761a95""",0.7,None,added

1464,Xinzhu Cai,kongxinzhu@fb.com,"""Add AppEventQueueTest (#853)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/853

as tittle.

Reviewed By: Mxiim

Differential Revision: D24580311

fbshipit-source-id: 028bd87132ea714282bbe397467e027b35f44c2c""",0.7,None,added

1465,Cecily Jiang,jiangyx@fb.com,"""Fix metadataRule concurrentmodification exception

Reviewed By: KylinChang

Differential Revision: D24629698

fbshipit-source-id: 35f2af14572746bb871ffef0a00faebfc98a5d2f""",0.7,None,fixed

1466,Nacho Quintero Rizo,roboto@fb.com,"""Add Cloud Support for GameRequestDialog

Differential Revision: D24533111

fbshipit-source-id: 73a22ea78be753ee831f8abbb6a15c859a5b053b""",0.2,None,added

1467,Cecily Jiang,jiangyx@fb.com,"""update app indexing enable flag to AtomicBoolean

Reviewed By: KylinChang

Differential Revision: D24520822

fbshipit-source-id: e39d09e262fd8cb09f8b7d80ecd02fa77c718a75""",0.7,None,changed

1468,Maxim Goretskyy,maximg@fb.com,"""fix travis build (#854)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/854

Reviewed By: Nathaaaalie

Differential Revision: D24608706

fbshipit-source-id: 9136b8e46ca6d02f37f82163e4efd09746a3d3fc""",0.7,None,fixed

1469,Maxim Goretskyy,maximg@fb.com,"""Run android sdk gradle tests on diffs

Reviewed By: Nathaaaalie

Differential Revision: D24491362

fbshipit-source-id: 7661303d5cc98920ba2ba0798ff5d91f07c82dbb""",0.7,None,changed

1470,Zilin Zhang,kylinchang@fb.com,"""Respect DPO in on-device processing

Summary: $title

Reviewed By: dreamolight

Differential Revision: D24585260

fbshipit-source-id: 3fc504d0ce8c1f752dfe2fe1cc86f1cc6204fbea""",0.7,None,changed

1471,Ming Cao,mingcao@fb.com,"""Remove getPlayerData and setPlayerData in GamesFeatureLibarary

Summary:
These API was never supported and not functional.
This should prevent dev to try to call this two to some extend.

Differential Revision: D24487301

fbshipit-source-id: a2c9f935f6e7d6afb8fffc075c2ad29d6f418836""",0.7,None,changed

1472,Zilin Zhang,kylinchang@fb.com,"""Bump v8.2.0

Summary: As title

Reviewed By: jingping2015

Differential Revision: D24545373

fbshipit-source-id: 08bf551e738ec543fe3887ba2c1cec87c03bdf6b""",0.2,None,changed

1473,Maxim Goretskyy,maximg@fb.com,"""test errorreportdata

Summary: ^

Reviewed By: Nathaaaalie

Differential Revision: D24465938

fbshipit-source-id: 87e10c82352e443391c39d7953b2069639d0eeb8""",0.7,None,changed

1474,Maxim Goretskyy,maximg@fb.com,"""instrument utility test

Summary: ^

Reviewed By: Nathaaaalie

Differential Revision: D24464234

fbshipit-source-id: afb210d80bb718818aece023036d2a20e0846553""",0.7,None,changed

1475,Xinzhu Cai,kongxinzhu@fb.com,"""Move SensitiveUserDataUtilsTest to the right folder

Summary: as tittle

Reviewed By: Mxiim

Differential Revision: D24509576

fbshipit-source-id: b2e8b03d1ef20b59d0d5ae60650316999b579ee4""",0.7,None,changed

1476,Xinzhu Cai,kongxinzhu@fb.com,"""Fix CodelessManagerTest failure on Travis CI (#849)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/849

The failure can not repro locally, I just narrowed the cause area down to the mock of the static function checkCodelessSession. For some reason it doesn't work on Travis CI. The reason of mocking this is to verify it has been called under some test cases, since Robolectric4 stop supporting verify a particular static function has been called.

Refactor CodelessManager so that makes it testable.

Reviewed By: Mxiim

Differential Revision: D24482448

fbshipit-source-id: 8c4c6341586fd02dd56c1cd0042d04e46e950d9f""",0.7,None,fixed

1477,Xinzhu Cai,kongxinzhu@fb.com,"""Add test CodelessManagerTest

Summary: As tittle

Reviewed By: Mxiim

Differential Revision: D24455064

fbshipit-source-id: e0b28fadf2e065bb09bab0faae7166f106fb2d80""",0.7,None,added

1478,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Fixed license on IReceiverService

Summary: As description

Reviewed By: dreamolight

Differential Revision: D24425956

fbshipit-source-id: 06021a574a1ab7534d516e480f1c3f5567f51c6b""",0.7,None,fixed

1479,Andrey Putilin,regresscheck@fb.com,"""Add post-login heartbeat event to FB Login

Summary:
Currently our last client-side event is passing access token back to the app. If something suddenly breaks after this, we have no visibility.
To catch such issues, I'm adding new event that will be logged 5 seconds after passing token back to the app.
If app breaks, this event won't be logged and we'll see a sudden drop.

Differential Revision: D24403530

fbshipit-source-id: b300b5635c8536654da82b1f7fd64d4559f8aa9d""",0.7,None,added

1480,Xinzhu Cai,kongxinzhu@fb.com,"""Refactor updateParameters() in CodelessLoggingEventListener.java for null safe

Summary: as tittle

Reviewed By: Mxiim

Differential Revision: D24404416

fbshipit-source-id: 812a2a093547422eadc09da35bddec9adf0dca8c""",0.7,None,changed

1481,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Added APP_INSTALL logging and event serialization

Summary: Added APP_INSTALL logging and event serialization

Reviewed By: dreamolight

Differential Revision: D23392255

fbshipit-source-id: 42172205bab3b0613a10ef50cc148f6f30fa2eca""",0.7,None,added

1482,Maxim Goretskyy,maximg@fb.com,"""test graphresponse

Summary: ^

Reviewed By: joesus

Differential Revision: D24403811

fbshipit-source-id: aa4e1714ae9c01f492923b7caf468ebcd3ec7df5""",0.7,None,changed

1483,Xinzhu Cai,kongxinzhu@fb.com,"""Add CodelessLoggingEventListenerTest

Summary: as tittle

Reviewed By: Mxiim

Differential Revision: D24399097

fbshipit-source-id: 9f9c8c23e26479a7963349a080e4ab35fc7ea2a4""",0.7,None,added

1484,Maxim Goretskyy,maximg@fb.com,"""move test to right place

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24376852

fbshipit-source-id: 5a41fc3026c0b81234247af2d6b2cacd59912a6e""",0.7,None,changed

1485,Maxim Goretskyy,maximg@fb.com,"""testing sessioneventstate

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24363692

fbshipit-source-id: 1288dcfa48e5ccc1a114f4da86d16b0f65dd64d2""",0.7,None,changed

1486,Maxim Goretskyy,maximg@fb.com,"""fetchedappsettings test

Summary: ^

Reviewed By: Nathaaaalie

Differential Revision: D24320614

fbshipit-source-id: a069f23a7cecea737823afebc9f80378d82b4560""",0.7,None,changed

1487,Maxim Goretskyy,maximg@fb.com,"""simplify addition of persisted events

Reviewed By: Nathaaaalie

Differential Revision: D24290161

fbshipit-source-id: 57241b04670508b7a078a0491b39da066af28147""",0.7,None,changed

1488,Maxim Goretskyy,maximg@fb.com,"""test appeventstore

Summary: did not refactor out the spy-objects as I prefer to keep them method-local. Let me know if it is a bad pattern. Just want to ensure the behaviour will not persist across methods/carry over.

Reviewed By: Nathaaaalie

Differential Revision: D24289517

fbshipit-source-id: 99e59b2e98410baedb1869ac51419a5a44a4161f""",0.7,None,changed

1489,Maxim Goretskyy,maximg@fb.com,"""fix broken travis (#844)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/844

there are some places tests that need this to be compiled. I previously removed it from source as it was packaged into the fat jar and being released.
Do not want to remove all references to places just yet.

Reviewed By: Nathaaaalie

Differential Revision: D24340577

fbshipit-source-id: 7e05f5881a3f423723ea4c8c75f6b6408d8b695a""",0.7,None,fixed

1490,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Bind to the RemoteService from FB4A

Summary:
Added binding to the service with FB4A signature validation.

Removed changes to the Feature Manager from the diff D23187818 (https://github.com/facebook/facebook-android-sdk/commit/046d9d0919fed36828bebcdd21313b8b25b59b2e).

Reviewed By: dreamolight

Differential Revision: D23304267

fbshipit-source-id: ad61695e858ebbab58533e65a411d73495352bce""",0.7,None,added

1491,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Added OnDeviceProcessingManager gated by Feature Manager

Summary: Added `OnDeviceEventProcessing` and `OnDevicePostInstallEventProcessing` features to the FeatureManager

Reviewed By: dreamolight

Differential Revision: D23187818

fbshipit-source-id: a65807c130b7f217850ea6814dd8d3b081d6797d""",0.7,None,added

1492,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Updated event service AIDL

Summary: Updated AIDL interface to conform with agreed protocol

Reviewed By: dreamolight

Differential Revision: D23350634

fbshipit-source-id: 9bd0851209e46981c1ee7dc6388b91aca961647a""",0.7,None,changed

1493,Vitaliy Zasadnyy,vzasadnyy@fb.com,"""Fixed logging

Summary: Fixed log message formatting.

Reviewed By: YOUDAN, dreamolight

Differential Revision: D23392238

fbshipit-source-id: 41d5f259282d3010e8398f0280ce3536ee978d6d""",0.7,None,fixed

1494,Maxim Goretskyy,maximg@fb.com,"""remove places from build

Summary: we deprecated places kit, we did not release it in v8, just manually removed, so lets actually remove it

Reviewed By: Nathaaaalie

Differential Revision: D24320090

fbshipit-source-id: 75118ed330b6b32e59256b74515b531c943b6799""",0.7,None,removed

1495,Julie Yuan,julieyuan@fb.com,"""Fix .equals() logic in Profile class

Summary: The existing `.equals()` method was throwing null pointer exceptions if certain fields of the `Profile` were null (which they are allowed to be, since we have explicitly specified that they are `nullable`). Fix this logic and add a sanity check to confirm that `.equals()` is indeed commutative.

Reviewed By: YOUDAN

Differential Revision: D24284819

fbshipit-source-id: 4efc3d3ac3228f3251a2e3d2c8e44a7f4fb93260""",0.7,None,fixed

1496,Maxim Goretskyy,maximg@fb.com,"""Bump v8.1.0

Summary: title

Reviewed By: CFFChi

Differential Revision: D24282508

fbshipit-source-id: f733d8a0754858ffcc2dc87df3f76b7cd83774df""",0.2,None,changed

1497,Maxim Goretskyy,maximg@fb.com,"""suggestedeventsmanager test

Summary:
title
moved out to a new method so easier to test

Reviewed By: Nathaaaalie

Differential Revision: D24257770

fbshipit-source-id: d2291ccd25371035528b6257fc4f938899e118c5""",0.7,None,added

1498,Tao Chen,oliverct@fb.com,"""Move Suggested Event initialization off main thread

Summary: same as the title

Reviewed By: Mxiim, KylinChang

Differential Revision: D24264372

fbshipit-source-id: cf36e880d31c3ba4f399a6ccaefdd76638a79a58""",0.7,None,changed

1499,Maxim Goretskyy,maximg@fb.com,"""verify number of times async was called

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24257771

fbshipit-source-id: 21d6c176dd5cdeb8d4db94b67d488e6f243d7c21""",0.7,None,changed

1500,Calvin Mak,cmak@fb.com,"""Only keep track of numActivitiesReturned for KatanaProxyLoginMethodHandler

Summary: In KatanaProxyLoginMethodHandler, we can potentially fire multiple intents, depending on which FB apps are installed on the device. As a result, we would need to keep track of how many might return. However, for other login methods such as CustomTabLoginMethodHandler, we will only fire 1 potentially, so there is no point in checking logic for numActivitiesReturned.

Reviewed By: jvlyn

Differential Revision: D24257099

fbshipit-source-id: 97f71442a272db9f3341421af4a5508829e63ee8""",0.7,None,changed

1501,Maxim Goretskyy,maximg@fb.com,"""test for fetch app manager

Summary: title

Reviewed By: joesus

Differential Revision: D24223170

fbshipit-source-id: ab17eda7c7ed6233c59119e869707a4c244012f7""",0.7,None,changed

1502,Irina Makhalova,imakhalova@fb.com,"""Add fragment that shows gatekeepers of SDK

Summary: Basic list view that shows key/value pairs for gatekeepers

Reviewed By: Mxiim

Differential Revision: D24209797

fbshipit-source-id: 3619634ee06ced5526c869ead060c77aa70d576f""",0.7,None,added

1503,Maxim Goretskyy,maximg@fb.com,"""add test parse gks

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24098962

fbshipit-source-id: bdbf1eb421613dacc9bf1efd7774c1579c44d1ef""",0.7,None,added

1504,generatedunixname89002005325674,generatedunixname89002005325674@fb.com,"""Daily `arc lint --take GOOGLEJAVAFORMAT`

Reviewed By: zertosh

Differential Revision: D24133116

fbshipit-source-id: dd3f577d90d90fa1967a286a46ce2f040a7f70a9""",0.7,None,changed

1505,Calvin Mak,cmak@fb.com,"""Launch Custom tab intent without querying if it exists

Summary:
Building with Android 11 affects package visibility. Reference: https://developer.android.com/about/versions/11/privacy/package-visibility.
For Custom tab details for Android 11, see this guide: https://developers.google.com/web/android/custom-tabs/implementation-guide#how_can_i_check_whether_the_android_device_has_a_browser_that_supports_custom_tab

Notice that the app needs to add the intent to the queries element.

This diff changes the way FB Login on Android handles Custom Tabs. Instead of initially querying for the package and only trying to open Custom tabs if it does succeed, now this will attempt to open and catch ActivityNotFoundException if it does not succeed. It then falls back to the next handler in that case.

The functionality changes a bit when building with 30. It defaults to choosing the user's preferred browser. Originally, it would pick the first intent it finds, which may not be the user's preferred browser.

Reviewed By: regresscheck

Differential Revision: D24096036

fbshipit-source-id: 9edeb4b876352e0a9fd5649379ee25df124a3a7f""",0.7,None,added

1506,Maxim Goretskyy,maximg@fb.com,"""enable jetifier for some internal projs for CI

Summary:
some projs use support libraries, its enough to reenable jetifier just for those
this also fixes the travis failure

Reviewed By: joesus

Differential Revision: D24098961

fbshipit-source-id: e8957093bf1308a6fa8d4551e3e37742d615efc4""",0.7,None,changed

1507,Maxim Goretskyy,maximg@fb.com,"""parallelise gradle build/test

Summary: title

Reviewed By: jingping2015

Differential Revision: D24064884

fbshipit-source-id: c10671af234b46f7410b775430ad757542c4c305""",0.7,None,changed

1508,Maxim Goretskyy,maximg@fb.com,"""remove jetifier

Summary:
this shouldnt be needed anymore, and will prevent us from introducing old libs, also see https://proandroiddev.com/the-state-of-jetification-in-early-2019-plus-a-bonus-gradle-plugin-aac5854af910
ran the command from there and get P144227842

Reviewed By: jingping2015

Differential Revision: D24060629

fbshipit-source-id: 3005d907dd3939c7da8ca70425e8dcaa6944ea42""",0.7,None,changed

1509,Maxim Goretskyy,maximg@fb.com,"""remove unused dep

Summary:
title
came up as something that used non-androidx libs, and i want to remove jetifier flag, this came up as the only blocker, and good thing it is unused.
see next diff for more info

Reviewed By: jingping2015

Differential Revision: D24062639

fbshipit-source-id: c9851aaaac2ff5a9c20d4f18d59383fbf7421d9f""",0.7,None,removed

1510,generatedunixname89002005325674,generatedunixname89002005325674@fb.com,"""Daily `arc lint --take GOOGLEJAVAFORMAT`

Reviewed By: zertosh

Differential Revision: D24075844

fbshipit-source-id: df939f1885dd646f3b561e217ce0e2c27626ff47""",0.7,None,changed

1511,Maxim Goretskyy,maximg@fb.com,"""test for server protocol

Summary: title

Reviewed By: Nathaaaalie

Differential Revision: D24020903

fbshipit-source-id: e1fbdb09d2288e478155c9e3e16f47cfa04b05e7""",0.7,None,changed

1512,Maxim Goretskyy,maximg@fb.com,"""rename test

Summary: title

Reviewed By: YOUDAN

Differential Revision: D24020905

fbshipit-source-id: 78f49618ba7f61a7364872087de8f7fa41d58b4c""",0.7,None,changed

1513,Maxim Goretskyy,maximg@fb.com,"""allow powermock pattern

Summary: title

Reviewed By: jingping2015

Differential Revision: D24020904

fbshipit-source-id: 165d10b867d4ea095f1dc4ff70d5611981d9aab8""",0.7,None,changed

1514,Calvin Mak,cmak@fb.com,"""Do not check if intent exists before firing proxy auth intent

Summary:
Building with Android 11 affects package visibility. Reference: https://developer.android.com/about/versions/11/privacy/package-visibility.

To mitigate, we will try calling the intent and hope it works as package visibility doesn't limit intents firing to other apps. We now need to change tryAuthorize to return an int as it will return the amount of intents that it fires.

Reviewed By: Mxiim

Differential Revision: D24000953

fbshipit-source-id: db13043e17d5e5f17d15d841bcba9a63568a4ab1""",0.7,None,changed

1515,Stan Wu,dreamolight@fb.com,"""Move aidl file to facebook-core as this should be shipped with core kit

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D24040326

fbshipit-source-id: a149859c5c7efa7ccc691c02e972bf0da872a400""",0.7,None,changed

1516,Joshua Selbo,jselbo@fb.com,"""Upgrade Robolectric from 4.3.1 -> 4.4

Summary: Changelog: [Internal]

Reviewed By: jiawei-lyu

Differential Revision: D23718455

fbshipit-source-id: 39c684722db1269e2179cf9680cb728be1171afb""",0.7,None,changed

1517,Cecily Jiang,jiangyx@fb.com,"""Revert tracking limit inside codeless and suggested events

Summary: Revert D22421953 (https://github.com/facebook/facebook-android-sdk/commit/6dd47c62e06192802bbfd7ea8b4b94c2072e377a) and D22422973 (https://github.com/facebook/facebook-android-sdk/commit/2b1ef46059f5aca2219260b7ec8b47ba01b5c99a) . Will not ship with sdk v8

Reviewed By: YOUDAN, dreamolight

Differential Revision: D23945227

fbshipit-source-id: c2b3d213a45658f938d2753674927fd334dcacc4""",0.7,None,changed

1518,Calvin Mak,cmak@fb.com,"""Fix orientation change bug

Summary:
We actually want to use onDestroyView to set isBeingDestroyed = true because onDestroyView is being called before onDismiss when orientation change happens. In this case, we do not actaully cancel the dialog.

When user dismissed the dialog, onDismiss is called first

Now, when orientation change happens, we keep the login request so that it can persist throughout the orientation change

Reviewed By: Mxiim

Differential Revision: D23913834

fbshipit-source-id: 54824b4e1d6a7ea0a1bc9a6f0b322e8bc49e8acf""",0.7,None,fixed

1519,Calvin Mak,cmak@fb.com,"""Fix crash in device login success

Summary: This one is super hard to debug and repro. I can ocasionally repro it, but it usually works. When I see a crash log, I see that the following class variable ""deviceAuthMethodHandler"" (in comments) is null. So simply null checking should works. I believe this happens due to race condition between the short polling and the dialog dismissal.

Reviewed By: Mxiim

Differential Revision: D23892194

fbshipit-source-id: 4954b16d3058bb49e5d1afa8fa75b5f2e5c3110d""",0.7,None,fixed

1520,Zilin Zhang,kylinchang@fb.com,"""Bump v8.0.0

Summary: As title

Reviewed By: jingping2015

Differential Revision: D23886708

fbshipit-source-id: 355291a6cb126dbf9345e47a249301e3194150b5""",0.2,None,changed

1521,Nacho Quintero Rizo,roboto@fb.com,"""Fix GamingVideoUploader shouldLaunchMediaDialog param.

Summary: To be consistent with GamingImageUploader and the docstring this param should be shouldLaunchMediaDialog.

Reviewed By: KylinChang

Differential Revision: D23888222

fbshipit-source-id: 42bd158fe7415272bb9aa998c30b47c1a98759ba""",0.2,None,fixed

1522,Sagar Rathi,srathi@fb.com,"""Integrated express login in login sample

Summary: If someone logs into an app on one device and then changes devices, Express Login logs them in with their FB account instead of asking for them to select a login method.

Reviewed By: KylinChang

Differential Revision: D23530080

fbshipit-source-id: b7b721851913f9077a3a2f172cbd3194e336e034""",0.7,None,changed

1523,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 9d930419474d06581dc8a2cfc191b634950794ce""",0.7,None,changed

1524,Nacho Quintero Rizo,roboto@fb.com,"""Adding GameRequestDialog to gaming services.

Summary: This marks the GameRequestDialog in share as deprecated and adds a copy of it in gamingservices. Moving forward all changes to this class will happen in gamingservices.GameRequestDialog and eventually share.widget.GameRequestDialog will be deleted.

Reviewed By: Mxiim

Differential Revision: D23655695

fbshipit-source-id: 2b4eba1620267eeb1413c6ccce9712959b7d0ff9""",0.2,None,changed

1525,Maxim Goretskyy,maximg@fb.com,"""rename back to instrument

Summary: title

Reviewed By: regresscheck

Differential Revision: D23636370

fbshipit-source-id: 0234c4fb1b7a252b385ffd2b9120f83b9d8d46b9""",0.7,None,changed

1526,Maxim Goretskyy,maximg@fb.com,"""rename folder

Summary:
title,  mac is case-insensitive but sandcastle runs on linux it seems. So used on-demand to rename so hg could pick up the changes.
The result needs to be instrument with lower case for the sake of quality validation

Reviewed By: regresscheck

Differential Revision: D23633626

fbshipit-source-id: 9b2b7a939b388f8bdf1a21f4d454ddd348e58c06""",0.7,None,changed

1527,Maxim Goretskyy,maximg@fb.com,"""add more annotations

Summary: title, forgot a few

Reviewed By: jingping2015

Differential Revision: D23593833

fbshipit-source-id: aea4bd8861034b5e2964c3d021e2584d4354b822""",0.7,None,added

1528,Nacho Quintero Rizo,roboto@fb.com,"""Delete FriendFinderDialog from cloudgaming (#826)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/826

This file is a duplicate of gamingservices/FriendFinderDialog.java which is already present. It should have been deleted already.

Differential Revision: D23585081

fbshipit-source-id: a0783db227aa380d950e5e73924695a0d99ccd57""",0.2,None,removed

1529,Zilin Zhang,kylinchang@fb.com,"""Add crashshield to installReferrerStateListener

Summary: As title

Reviewed By: Mxiim

Differential Revision: D23580887

fbshipit-source-id: 6339a2ca82195eacdac8e6678d4d866000bb7927""",0.7,None,added

1530,Maxim Goretskyy,maximg@fb.com,"""add excuses for missing tests

Summary:
title
we care more about new cases, and this is also a good way to have untested classes marked

Reviewed By: Nathaaaalie

Differential Revision: D23551494

fbshipit-source-id: 8f8de1f84ba67395ebcd0e926ff53a5516025823""",0.7,None,added

1531,Maxim Goretskyy,maximg@fb.com,"""adding necessary classes for qvt

Summary: needed for rest of the stack, because the ""original"" annotations are outside opensource and our repo. We _could_ include them in buck, but not in gradle. Hence we create them here. For the purposes how they are used, the naming of them is the important thing, and not their import.

Reviewed By: Nathaaaalie

Differential Revision: D23551493

fbshipit-source-id: 5aff2e733bfe3025aab2dfa6325085116366021b""",0.7,None,changed

1532,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 853fa2cb6ee3febf16b4e200e0a790f1de2eddec""",0.7,None,changed

1533,Pansy Pan,pansy0419@fb.com,"""update logger params

Summary:
- add new logger param logger id
- always add all params to each event to ensure predictable mapping on the backend.

Reviewed By: ct2mak

Differential Revision: D23410972

fbshipit-source-id: b4547083e3a516a2a9a785823976c0a0e01453f6""",0.7,None,changed

1534,Pansy Pan,pansy0419@fb.com,"""add state param to referral request

Summary: state param is a string value created randomly to maintain state between the request and callback. This parameter would be used for preventing Cross-site Request Forgery. it should be attached to the server reponse and we will return and error if it doesn't match

Reviewed By: ct2mak

Differential Revision: D23410318

fbshipit-source-id: 9d741c4c4817dda0e69151ebf577bb577c48b1c7""",0.7,None,added

1535,Maxim Goretskyy,maximg@fb.com,"""tokenless profile pic fix

Summary:
title
from 10/24 you need access_token for profile pic, without one you will get default pic
this diff just undo's the previous fix and adds a debug message

Reviewed By: jingping2015, Nathaaaalie

Differential Revision: D23301071

fbshipit-source-id: 61c642d274391ab1079a232f61582fdb8ffc13e9""",0.7,None,fixed

1536,Ming Cao,mingcao@fb.com,"""Delete logging for user id to comply with app event table OFA policy.

Summary: If a row is logged with a user id, all its info will be removed due to the OFA policy even though all Cloud Games events actually happen on FB. We don't have the bandwidth to XFN with PXFN folks at the moment also without user id, the logging is already useful enough so we decided to take down the user id logging first and later go through the PXFN once we have more bandwidth and the needs arise.

Differential Revision: D23365890

fbshipit-source-id: 84a44e9fcc343f0cf49afc279ea9fdd52c7a0fc2""",0.7,None,removed

1537,Ming Cao,mingcao@fb.com,"""Add session id logging into SDK logger.

Summary: After www change landed, we will have session id packed with the other start info sent to the worker and then the Daemon Service. It is critical to have session if for debug purpose.

Differential Revision: D23310893

fbshipit-source-id: 41f776d6e8c5f94e78bd512c56f26cd025b038ae""",0.7,None,added

1538,Nacho Quintero Rizo,roboto@fb.com,"""Initialize Profile in CloudGameLoginHandler.init

Summary: All the other SDK calls that retrieve an AccessToken also initialize the current Profile information. This was missing in CloudGameLoginHandler.init()

Differential Revision: D23274105

fbshipit-source-id: f546198dbd28cdadf58880380ef3b6af033f4587""",0.2,None,changed

1539,Alan Wilms,alanwilms@fb.com,"""Add Developer Payload support for IAP

Summary: Adds optional developer payload support for purchase call.

Differential Revision: D23147783

fbshipit-source-id: 13afdc8faab64878edb6369dcc1fcb3abf228c8b""",0.7,None,added

1540,Jing Ping,jingping@fb.com,"""Add message to notify sdk stil call v6.0

Summary: We miss to update SDK to latest API version, v7: we didn't update, v8, we plan to delay the release.

Reviewed By: joesus

Differential Revision: D23092397

fbshipit-source-id: 114f478c8422942fe1ddbeccd6d1fba493153ab1""",0.7,None,added

1541,Nacho Quintero Rizo,roboto@fb.com,"""Allow GamingVideoUploader to open the Media Dialog

Summary: currently the GamingVideoUploader has no way to automatically open the Media Dialog. This change modifies OpenGamingMediaDialog to work for videos too and it adds a new uploadVideoToMediaLibrary call that takes a shouldOpenMediaDialog boolean similar to how the imageUploader works.

Differential Revision: D23014624

fbshipit-source-id: f54b446b489e198831c08740c114f77a7116ded7""",0.2,None,changed

1542,Nacho Quintero Rizo,roboto@fb.com,"""Make GamingServices UIs cloud-aware.

Summary: This change makes FriendFinderDialog and OpenGamingMediaDialog work when running on Facebook's servers.

Differential Revision: D23009158

fbshipit-source-id: 2ded4f54530843ff51fa4a41e377e809fa85313b""",0.2,None,changed

1543,Yi Liu,yiliu@fb.com,"""Move all the cloud sdk code to gamingservice package

Reviewed By: iquintero

Differential Revision: D22995488

fbshipit-source-id: 50dd285c9e299e39e4875a0f8d3084fd02ba8c79""",0.7,None,changed

1544,Pansy Pan,pansy0419@fb.com,"""Add logging for ReferralManager

Summary: log start referral and referral complete event

Reviewed By: ct2mak

Differential Revision: D23042061

fbshipit-source-id: 0dc8bc3754df68e7e2e4a183f365fde4c51e858e""",0.7,None,added

1545,Zach Zundel,zachzundel@fb.com,"""bee -> be

Summary:
Found while investigating an unrelated issue

Created from Diffusion's 'Open in Editor' feature.

Reviewed By: Mxiim

Differential Revision: D23070464

fbshipit-source-id: 306243257c239f80cad910f5bd30d1a73b76b02d""",0.7,None,added

1546,Pansy Pan,pansy0419@fb.com,"""Add ReferralClient onActivityResult unit test

Summary: Add test cases in ReferralClientTest for onActvityResult function

Reviewed By: ct2mak

Differential Revision: D23006155

fbshipit-source-id: 3cd31dcb4df2c28ef42658163e35908b954fb62a""",0.7,None,added

1547,Omer Strulovich,ostrulovich@fb.com,"""Daily `arc lint --take KTFMT`

Reviewed By: zertosh

Differential Revision: D23025847

fbshipit-source-id: d5144098be74ba57a6d445cc8e840fabd4f9a32b""",0.7,None,changed

1548,Pansy Pan,pansy0419@fb.com,"""Add ReferralClient startReferral unit test

Summary: add test cases for startReferral in ReferralClient

Reviewed By: ct2mak

Differential Revision: D23004187

fbshipit-source-id: 544e8f78dcc0174ae2cdb66e0d40ef17acc1395f""",0.7,None,added

1549,Pansy Pan,pansy0419@fb.com,"""refactor code into ReferralClient

Summary: Refactor logics to ReferralClient class for easier testing

Reviewed By: ct2mak

Differential Revision: D22908159

fbshipit-source-id: dc0a40265e68acc298670b0cef2c6a552b558671""",0.7,None,changed

1550,Pansy Pan,pansy0419@fb.com,"""Add ReferralManager unit test

Summary: Add ReferralManagerTest, mostly following LoginManagerTest

Reviewed By: ct2mak

Differential Revision: D22959842

fbshipit-source-id: d795285813312988b860b71d8f9579c09b2f45b2""",0.7,None,added

1551,Christina Xu,christina1012@fb.com,"""Enable app events after server config fetched

Reviewed By: dreamolight

Differential Revision: D22366515

fbshipit-source-id: 686eeb7b356275bd4206870c2e8ba678f91b8a68""",0.7,None,changed

1552,Pansy Pan,pansy0419@fb.com,"""improve error handling

Summary: When Chrome not installed or internet permission not granted, make error more explicit by passing error back to user callback instead of failing silently.

Reviewed By: ct2mak

Differential Revision: D22952058

fbshipit-source-id: b9aa606f864713e17138e736e5c79ff41cb710de""",0.7,None,fixed

1553,Pansy Pan,pansy0419@fb.com,"""Add user callback for sending back referral codes

Summary:
- Allow user to register callback
- Pass result back to user callback
TODO:
- error handling

Reviewed By: ct2mak

Differential Revision: D22939353

fbshipit-source-id: 22793f939a5ed49661ee43f3d614d99af1917cb2""",0.7,None,added

1554,Pansy Pan,pansy0419@fb.com,"""receive and parse result from CCT

Summary:
- receive result from CustomTabMainActivity in ReferralFragment, parse and send result to user activity
- receive result in referral manager and parse for referral code
TODO:
- add user callback
- right now redirect only works for referral dialog cancel but not for send referral, need to investigate

Reviewed By: ct2mak

Differential Revision: D22911933

fbshipit-source-id: d2e33e22acb9b35a8cda18b048389ddbb5af271c""",0.7,None,added

1555,Pansy Pan,pansy0419@fb.com,"""handle CCT tab close

Summary: close the activity after CCT closed so that it doesn't open another tab

Reviewed By: ct2mak

Differential Revision: D22904097

fbshipit-source-id: 62ac3b8ae119e0a198e59105ced388b2ec2a3f34""",0.7,None,changed

1556,Pansy Pan,pansy0419@fb.com,"""Open referral dialog in CCT

Summary:
Update ReferralFragment to open referral dialog on start.
TODO:
- preload CCT for faster loading
- handle tab close
- add progress bar

Reviewed By: ct2mak

Differential Revision: D22858553

fbshipit-source-id: 7fd292d6d1c3697ff929adcc18cd91b39127f3c6""",0.7,None,changed

1557,Maxim Goretskyy,maximg@fb.com,"""deprecate device sharing

Summary: title, context, row 10 https://docs.google.com/spreadsheets/d/1F6C0NsTCnXa54p8VZSGbUd5Ujdt-6ssJzvvwytzWJWI/edit#gid=0

Reviewed By: joesus

Differential Revision: D22805013

fbshipit-source-id: 7867ea668f8c5d29c5cf932ada637158eaaed13d""",0.7,None,changed

1558,Maxim Goretskyy,maximg@fb.com,"""prepare imagerequest for apiv8

Summary:
title, similar to D22699837.
calls to profile need to have token, if token is null it will at least return silhoutte picture. This case shouldnt happen since you will probably be logged in already.

This is a special case when we do not through GraphRequest.
Inside GraphRequest even if accesstoken is null, we will check of clienttoken. Later on, we can add similar check to graphRequest.

Reviewed By: Nathaaaalie

Differential Revision: D22802750

fbshipit-source-id: f9afbfd0e44142c58f0865ca94bd3e91438b7d32""",0.7,None,added

1559,Pansy Pan,pansy0419@fb.com,"""Update FacebookActivity to open ReferralFragment

Summary: When the action is set to ReferralFragment, the startReferral function should go through FacebookActivity to open ReferralFragment

Differential Revision: D22833587

fbshipit-source-id: 72f48e0984ba55ab58e34343e69208c9bc07e157""",0.7,None,changed

1560,Pansy Pan,pansy0419@fb.com,"""update startReferral to open FacebookActivity

Summary: title

Reviewed By: ct2mak

Differential Revision: D22833089

fbshipit-source-id: d432db0fda592fb171e3fd9cb6910624de9ea7c9""",0.7,None,changed

1561,Pansy Pan,pansy0419@fb.com,"""add startReferral function skeleton

Summary: Create ReferralManger and entrypoint function startReferral. It's just an empty function for now

Reviewed By: leeys202

Differential Revision: D22797165

fbshipit-source-id: 2004b674fac6a457f8d0dc459ac2c5854d1624b0""",0.7,None,added

1562,Nacho Quintero Rizo,roboto@fb.com,"""Fix GamingMediaUploader callback when shouldOpenMediaDialog = false (#811)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/811

When shouldOpenMediaDialog = False
and a callback was passed it would silently be dropped. This fixes this bug.

Reviewed By: Mxiim

Differential Revision: D22798752

fbshipit-source-id: ad9d2e7e61c4ac3fb636ff4e61115e7b4dc1d48c""",0.2,None,fixed

1563,Bijoy Kochar,bijoysingh@fb.com,"""Adding SuppressWarnings for ExternalStorageUse in Utility

Reviewed By: Mxiim

Differential Revision: D22768497

fbshipit-source-id: 7b04e982b7f18f7f99ac9c49427c34045ad81923""",0.7,None,changed

1564,Xinzhu Cai,kongxinzhu@fb.com,"""Adjust the order of sampling check (#807)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/807

Moved isSampled() to the stage right before the generating performance log.
Checked with event name, if it's not sampled, we can stop the measurement directly.

Reviewed By: Mxiim

Differential Revision: D22646927

fbshipit-source-id: fa886098c1f25292bfa135177b16c7b171ad9e80""",0.7,None,changed

1565,Xinzhu Cai,kongxinzhu@fb.com,"""Add thread id when we measure the performance event (#806)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/806

Considering the same performance event could be triggered concurrently, thread id is added to distinguish the different call from different thread.
In the case of `startMeasurePerfFor()` and `stopMeasurePerfFor()` are supposed to be called from different thread, i.e. pass `stopMeasurePerfFor()` via callback function, we provide API to generate a unique long, this extra id need to be passed in `startMeasurePerfFor()` and `stopMeasurePerfFor()` by the dev.

Note:
To avoid overflow issue of generated extra id, please use `generateExtraId()` only when needed.

Reviewed By: Mxiim

Differential Revision: D22507221

fbshipit-source-id: 309895005b1f5ce7b01b17a252d64d1ca321826e""",0.7,None,added

1566,Xinzhu Cai,kongxinzhu@fb.com,"""Convert JsonArray to String in GraphObject (#804)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/804

The endpoint can not get the `entries` as a part of paramters if we pass JsonArray to GraphObject.
Convert JsonArray to String to fix it.

Reviewed By: jingping2015

Differential Revision: D22415163

fbshipit-source-id: e357bd3b769209c4c0199311c7868155f15f3de6""",0.7,None,fixed

1567,Xinzhu Cai,kongxinzhu@fb.com,"""Move MetricsUtil to monitor folder (#802)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/802

MetricsUtil is for Monitoring system
Move MetricsUtil to monitor folder

Reviewed By: Mxiim

Differential Revision: D22506452

fbshipit-source-id: 1e9d140761c3a3c7b81cd555c877d477af649fd2""",0.7,None,changed

1568,Xinzhu Cai,kongxinzhu@fb.com,"""Add RestrictTo annotation (#800)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/800

Added `RestrictTo(RestrictTo.Scope.LIBRARY_GROUP)` to the monitoring system since it will be used inside the SDK.

Reviewed By: Mxiim

Differential Revision: D22440145

fbshipit-source-id: 001b91b7c12f7e896591cc5d8abaf57a1bf74712""",0.7,None,added

1569,Xinzhu Cai,kongxinzhu@fb.com,"""Adjust flush period (#799)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/799

Adjust flush period
Considering of sending the logs to the server every 60 seconds maybe too often, adjust the flush period to 5 minutes.

Reviewed By: joesus

Differential Revision: D22416049

fbshipit-source-id: 80823115930c95c9c2250af3df2b377c718b788c""",0.7,None,changed

1570,Daniel Loomb,dloomb@fb.com,"""Forwarding back button press to WebView Login method (#786)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/786

Fixing native back button support for WebView login.

Reviewed By: joeymrios

Differential Revision: D21979037

fbshipit-source-id: e5fadb46315cc5701f63306db3a8c41ce9705481""",0.7,None,changed

1571,Cecily Jiang,jiangyx@fb.com,"""crawling improce

Reviewed By: dreamolight

Differential Revision: D22422973

fbshipit-source-id: 375a4a3b0dd3945a233027a91ef931c941859276""",0.7,None,changed

1572,Cecily Jiang,jiangyx@fb.com,"""crawling improve

Reviewed By: dreamolight

Differential Revision: D22421953

fbshipit-source-id: 8b964757079a91fc2bda40c035178e68208b1a59""",0.7,None,fixed

1573,Cecily Jiang,jiangyx@fb.com,"""Activity process time regulator

Reviewed By: YOUDAN, dreamolight

Differential Revision: D22418879

fbshipit-source-id: cb20b722d67fdd60b630b24a875cba727ec434d3""",0.7,None,changed

1574,Xinzhu Cai,kongxinzhu@fb.com,"""MeasurePerformance in Monitor class (#798)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/798

Add measure performance related methods in Monitor class to make the API easier to use.
The dev can use the methods directly to measure the performance and send them back to our server.

Reviewed By: Mxiim

Differential Revision: D22259453

fbshipit-source-id: 9fdd0b4918cd16f7949c23219d65c8e61b5b5d38""",0.7,None,added

1575,Xinzhu Cai,kongxinzhu@fb.com,"""Update MetricsUtil (#797)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/797

We will calculate the consumption and create the log directly, rather than writing them to Shared Preferences. Updated MetricsUtil to fit the new use case.

We will wrap `startMeasureFor()` and `stopMeasureFor()` in `Monitor` class in the next diff.

Reviewed By: Mxiim

Differential Revision: D22196920

fbshipit-source-id: d2b695f4187e32a7ce5ac2ac2d5f94c5cc8d6958""",0.7,None,changed

1576,Xinzhu Cai,kongxinzhu@fb.com,"""Add PerformanceEventName enum (#796)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/796

As title

Reviewed By: Mxiim

Differential Revision: D22333081

fbshipit-source-id: 03a8e74d443d3e7cc778315ea0b3d9d08395a5cb""",0.7,None,added

1577,Zilin Zhang,kylinchang@fb.com,"""Add CrashShield annotaions

Summary: Make sure CrashShield annotaitons fully cover CoreKit

Reviewed By: joesus

Differential Revision: D22297719

fbshipit-source-id: 8ef8f196d6f926c9d540a4ae394e2701d7d32b89""",0.7,None,added

1578,Xinzhu Cai,kongxinzhu@fb.com,"""Fix AppLinkDataTest failure (#795)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/795

AppLinkDataTest: testCreateFromJsonWithNestedArray start to fail in Gradle test.

Reverted AutoHandleException annotation to the status before D22204647 (https://github.com/facebook/facebook-android-sdk/commit/b862ec37798422ccd18ee31f82dd22aa0dc4f5ac)
Allowed `toBundle()` throwing FacebookException as expected

Reviewed By: KylinChang

Differential Revision: D22300260

fbshipit-source-id: 93bc5766f9cbe28a9fad050d00a46066028252ee""",0.7,None,fixed

1579,Zilin Zhang,kylinchang@fb.com,"""Fix annotation

Summary: finishShareToMessenger is supposed to throw exception and we should not annotate this function

Reviewed By: Mxiim

Differential Revision: D22228659

fbshipit-source-id: ddf0ad6d33b25f132a54e536f19f5366a18db03c""",0.7,None,fixed

1580,Zilin Zhang,kylinchang@fb.com,"""Cover facebook-gamingservices with AutoHandleExceptions

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D22228464

fbshipit-source-id: 2a4deb711e2f72abbedf227194b9ab7ecf8f9718""",0.7,None,changed

1581,Zilin Zhang,kylinchang@fb.com,"""Cover facebook-login with AutoHandleExceptions

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D22215909

fbshipit-source-id: c578a041a42b1d49db21026d7fa597d744ecdc00""",0.7,None,changed

1582,Zilin Zhang,kylinchang@fb.com,"""Cover facebook-common with AutoHandleExceptions

Summary: As title

Reviewed By: jingping2015

Differential Revision: D22204866

fbshipit-source-id: 634114d68b09a66e41d3aacbe13edfc8544a5e1a""",0.7,None,changed

1583,Zilin Zhang,kylinchang@fb.com,"""Cover facebook-applinks with AutoHandleExceptions

Summary: As title

Reviewed By: ninanina0815

Differential Revision: D22204647

fbshipit-source-id: b654571ab3eaf5628fdf9627c3813379e805ab74""",0.7,None,changed

1584,generatedunixname89002005287564,generatedunixname89002005287564@fb.com,"""Daily `arc lint --take GOOGLEJAVAFORMAT`

Reviewed By: zertosh

Differential Revision: D22183348

fbshipit-source-id: afd4f7e8c18587c6ce1e1d6e76c8eeb9c558de15""",0.7,None,changed

1585,Maxim Goretskyy,maximg@fb.com,"""share kit

Summary:
Added to class-level, because only methods that throw are private and used within the same class, they are also properly caught meaning that the crashhandler should not affect them anyway.
Left out `DeviceShareDialog` since it appears it needs to throw
Left out `VideoUploader` since it looks like the methods are either throwing exception manually, or require the caller to take care of it, or have callbacks for errors. We can add to it if we get reports that it crashes here.

Reviewed By: jingping2015

Differential Revision: D22142359

fbshipit-source-id: 2f6c2d0c0bee93c8b11aaa264b3790d9862b3004""",0.7,None,added

1586,Maxim Goretskyy,maximg@fb.com,"""messenger kit

Summary: title

Reviewed By: joesus

Differential Revision: D22141000

fbshipit-source-id: 31291d4112b46f47a763562b91319b7074a4d175""",0.7,None,changed

1587,Zilin Zhang,kylinchang@fb.com,"""Bump version v7.1.0

Summary: As title

Reviewed By: ninanina0815

Differential Revision: D22149187

fbshipit-source-id: 62506a96c2c143fc64b556b338dc94d3f5cb3dfb""",0.2,None,changed

1588,Zilin Zhang,kylinchang@fb.com,"""Don't send instrument reports when DataProcessingOption is restricted

Summary: As title

Reviewed By: dreamolight

Differential Revision: D22146440

fbshipit-source-id: b3dd6dd4976771e186135f13ee97115da413ea45""",0.7,None,changed

1589,Zilin Zhang,kylinchang@fb.com,"""Add DataProcessingOption to Android SDK

Summary: As title

Reviewed By: dreamolight

Differential Revision: D22112491

fbshipit-source-id: c5f1caa65c2c12a02b7aa0539929788293172292""",0.7,None,added

1590,Zilin Zhang,kylinchang@fb.com,"""Deprecate userproperty functions

Summary: We won't support UserProperty in the next SDK version.

Reviewed By: dreamolight

Differential Revision: D22133140

fbshipit-source-id: 3124d01ff53a2545902d032f90749892a0343429""",0.7,None,changed

1591,Intl Scheduler,generatedunixname89002005309424@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 80672659cb88993a51dbc76dc0e1982f3c1e8b33""",0.7,None,changed

1592,Daniel Loomb,dloomb@fb.com,"""Adding GroupIntegration to Gaming Services (#787)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/787

Preparing the SDK for a new Gaming Service.

Reviewed By: iquintero

Differential Revision: D22095284

fbshipit-source-id: f2f077057c4617d02af8ee38208c9fb8e13e7d81""",0.7,None,added

1593,Chinmay Kulkarni,30969403+Grandolf49@users.noreply.github.com,"""Updated README.mdown (#778)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Fixed the incorrect URL for Contributing Guidelines in readme.md file.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/778

Test Plan: NA

Reviewed By: Mxiim

Differential Revision: D22039017

Pulled By: Nathaaaalie

fbshipit-source-id: 17c25fbbe17ae72df966c1336fc325f2dfcff24e""",0.7,None,added

1594,Zilin Zhang,kylinchang@fb.com,"""Clean up MarketingKit

Summary: As title

Reviewed By: tianqibt

Differential Revision: D21961922

fbshipit-source-id: 5d62f6d890720d3917934e0955a576696f900cbd""",0.7,None,changed

1595,Zilin Zhang,kylinchang@fb.com,"""Bump version 7.0.1

Summary: As title

Reviewed By: tianqibt

Differential Revision: D21949024

fbshipit-source-id: b3bc336ff4530786031bb0f063e8fbee14e8a8b4""",0.2,None,changed

1596,Zilin Zhang,kylinchang@fb.com,"""Add proguard for enum

Summary: SmartLoginOption uses Enum and we need to avoid over-optimization for Enum

Reviewed By: Oliverccccct

Differential Revision: D21938985

fbshipit-source-id: f7aadee3b019d60b5748ff0933a65bd98bd81cdc""",0.7,None,added

1597,Cecily Jiang,jiangyx@fb.com,"""Optimize user data send back when opt-out params

Reviewed By: dreamolight

Differential Revision: D21890472

fbshipit-source-id: 777117d307e836d62145ddb09343e73e125a9b2a""",0.7,None,fixed

1598,Zilin Zhang,kylinchang@fb.com,"""Fix the report type of crash reports

Summary: We use the prefix of a log file to infer a report's type(CrashShield or CrashReport, etc), but we have the same prefix for both CrashShield and CrashReport.

Reviewed By: dreamolight

Differential Revision: D21879258

fbshipit-source-id: affbf4c1f4d9fa7d7d29f3a39cb4430086c944e3""",0.7,None,fixed

1599,Zilin Zhang,kylinchang@fb.com,"""Add AutoHandleExceptions to CoreKit

Summary:
As title
Add AutoHandleExceptions annotation to CoreKit to prevent potential crash

Reviewed By: dreamolight

Differential Revision: D21616435

fbshipit-source-id: 369243028a49be590c4ab8331343fb4ecda96b5c""",0.7,None,added

1600,Lina Jin,lina@fb.com,"""add InstallReferrerClient in proguard rules

Summary:
Class InstallReferrerClient not found and caused error in T64720729

I learnt  different 'keep' directives from https://jebware.com/blog/?p=418 and ended up using
> -keepnames

feedbacks are appreciated.

Reviewed By: dreamolight

Differential Revision: D21829839

fbshipit-source-id: 779aa80aaa0344c84eb03f4d221a23ec5da88797""",0.7,None,added

1601,Zilin Zhang,kylinchang@fb.com,"""Add check to avoid potential exceptions

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D21770247

fbshipit-source-id: f66a1484e0e90afebb7b05133efd11c6bbb6ac93""",0.7,None,added

1602,Alice Wong,alicew@fb.com,"""Break up integrity manager tests based on use case

Summary: Refactored IntegrityManagerTest into two smaller tests, each testing data with a different level of integrity.

Reviewed By: ninanina0815

Differential Revision: D21724430

fbshipit-source-id: 14ed342112a1e0eaf82c0a60d5051dc506f27453""",0.7,None,changed

1603,Andrey Putilin,regresscheck@fb.com,"""Refactor Android SDK fuzzy test to make it work with Powermock 2 (#780)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/780

Refactoring the way arguments passed to make the test work. Previously, calling anything from `org.json.*` made the test to fail.

Reviewed By: Mxiim

Differential Revision: D21694427

fbshipit-source-id: 22372e77af2ec1544f8a828c393f97651b0e76d2""",0.7,None,changed

1604,Xinzhu Cai,kongxinzhu@fb.com,"""Fix SDK initialized error

Summary: as title

Reviewed By: Mxiim, KylinChang

Differential Revision: D21726395

fbshipit-source-id: d5b2e4f155d3395b6c11518ead8c448e8bca6968""",0.7,None,fixed

1605,Puxuan Qi,puxuanqi@fb.com,"""get appid from JSSDK

Summary: capture url from JSSDK. Block the redirect inside Native Android

Differential Revision: D21586364

fbshipit-source-id: e81679be02b821ee455d64260c984c20f3fa909b""",0.7,None,changed

1606,Andrey Putilin,regresscheck@fb.com,"""Create fuzzy test for Android SDK setting fetch

Summary:
As SEV follow up, we want to make sure that wrong server-side data doesn't cause SDK initialization to break.

I'm introducing new test helper class that takes JSON string and tries to replace any key with random type. SDK should never break for all of this inputs.

Due to my lack of knowledge on Android testing or/and old testing frameworks, I had to come up with pretty awful code.
- Robolectric 3 explodes when JSON(or just Object) types are being passed. Migrating to Robolectric 4 is different big thing.
- JSON package is unmocked and not allowed to be called in preparation methods, forcing me to write yet another awful code. I'm truly sorry.

But in the end it works, it generates ~100 tests with different variations of input JSON.

Reviewed By: dreamolight

Differential Revision: D21560174

fbshipit-source-id: 7186047df4379772c6c7f9871310eddec8d738cb""",0.7,None,added

1607,Xinzhu Cai,kongxinzhu@fb.com,"""Enable Monitor during SDK is initializing (#779)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/779

Added MonitorManager to control enable or not the Monitor
Change loadSamplingRatesMapAsync() from public to protected (allow test to access)
Enabled Monitor when SDK is initializing

The dev need to turn on the feature toggle on Dev site to enable Monitor Feature.
To support the EU consent, the dev can set MonitorEnabled to false in AndroidManifest and once they get user's consent call Facebook.setMonitorEnabled(true) to re-enable.

The default value of the flag MonitorEnabled in AndroidManifest is true.

Reviewed By: Mxiim

Differential Revision: D21506564

fbshipit-source-id: 4e53a24492fe2778ad2f9213e6ba483ed28c2658""",0.7,None,added

1608,Zilin Zhang,kylinchang@fb.com,"""Move internal logging to FutureTask

Summary: As title, reduce the SDK initialize time

Reviewed By: Oliverccccct

Differential Revision: D21482914

fbshipit-source-id: a9a86c2a94e4595e855cea9f24add1cb5c7873ce""",0.7,None,changed

1609,Joshua Selbo,jselbo@fb.com,"""Migrate androidsdk/facebook tests (#775)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/775

Reviewed By: dreamolight

Differential Revision: D21428508

fbshipit-source-id: 2c26d672a4ba2e8aaea5035ad87774376fe53109""",0.7,None,changed

1610,Joshua Selbo,jselbo@fb.com,"""Enable ktfmt formatting

Reviewed By: zertosh

Differential Revision: D21537323

fbshipit-source-id: 9d4e4e6fdc18565eceeea57b4ec10a2ae307749c""",0.7,None,changed

1611,Cecily Jiang,jiangyx@fb.com,"""Fix drop deprecated event

Reviewed By: tianqibt

Differential Revision: D21558326

fbshipit-source-id: 0cdc47723bb052a690bf0d3a71a1896b7b361080""",0.7,None,fixed

1612,Cecily Jiang,jiangyx@fb.com,"""fix model cache json exception

Reviewed By: YOUDAN, KylinChang

Differential Revision: D21531395

fbshipit-source-id: a680bbe446a098342125f0b4b8a77560f902fb3f""",0.7,None,fixed

1613,Zilin Zhang,kylinchang@fb.com,"""Use AppEventUtility.getRootView to get rootview instead

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D21484416

fbshipit-source-id: 2729e0804981cf3056090d1d27ebb0c5494a166a""",0.7,None,changed

1614,Joshua Selbo,jselbo@fb.com,"""Enable google-java-format formatter

Reviewed By: Mxiim

Differential Revision: D21469168

fbshipit-source-id: d38ce733b9ce36f598911b13ce6c97c3a1d958da""",0.7,None,changed

1615,Abigail Patron,abigail.patron@zalora.com,"""Catch RejectedExecutionException in schedule() (#771)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Add try catch for RejectedExecutionException thrown in ViewIndexer's getExcetutor().execute().
This exception may be thrown by Executor.execute() when maxPoolSize is reached.
Android app using the SDK may keep getting the crash but won't have a way to catch it.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/771

Test Plan: **Add your test plan here**

Reviewed By: dreamolight

Differential Revision: D21477097

Pulled By: Mxiim

fbshipit-source-id: 5ce486a7d7572f1ac219f7b4e4d47ca6abd79a7a""",0.7,None,added

1616,Joshua Selbo,jselbo@fb.com,"""Fix up license comments

Summary:
```
hg files -I 'fbandroid/first-party/java/androidsdk/**/*.java' | xargs sed -i '1 s|\/\*\*|/*|g'
```

Motivation: Prep for D21469168 where we apply google-java-format across all of androidsdk.

The license comment should be a regular multi-line comment `/* */` and not a Javadoc comment `/** */` which is treated differently by formatters and linters.

Reviewed By: Mxiim

Differential Revision: D21468810

fbshipit-source-id: 3800db013740de66467a5834b75cf090eee9e3cd""",0.7,None,fixed

1617,Xinzhu Cai,kongxinzhu@fb.com,"""Add fetchAllLogs in LoggingCache (#770)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/770

Adding `fetchAllLogs()`, it will return all logs in LoggingCache and clear it.

Reviewed By: Mxiim

Differential Revision: D21430826

fbshipit-source-id: 1da346797209e855df4648254a6f84df17d96b67""",0.7,None,added

1618,Xinzhu Cai,kongxinzhu@fb.com,"""Change List to Collection in LoggingStore (#769)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/769

Changed type List to Collection since we use LinkedList in MonitorLoggingQueue, change the input type from List to Collection will be easier to operate.

Reviewed By: Mxiim

Differential Revision: D21412768

fbshipit-source-id: e32ff0ab127546138f4062ffbeea67db24f6cc9b""",0.7,None,changed

1619,Xinzhu Cai,kongxinzhu@fb.com,"""Add monitorEnabled for AppSettings (#768)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/768

We are going to add a feature toggle for monitoring on Devsite - settings.

Added monitorEnabled in FetchedAppSettings, in order to fetch the user settings from endpoint in the future.

Reviewed By: dreamolight

Differential Revision: D21406421

fbshipit-source-id: b7b306ecd450dccd71cfb6bdcd4dc3fad786d8f7""",0.7,None,added

1620,Maxim Goretskyy,maximg@fb.com,"""Bump Version 7.0

Summary: title

Reviewed By: KylinChang

Differential Revision: D21405565

fbshipit-source-id: 26665c44d85f99d253908b21d82b00606d6a55f7""",0.2,None,changed

1621,Zilin Zhang,kylinchang@fb.com,"""Mark MarketingKit deprecated (#767)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/767

As title

Reviewed By: Mxiim

Differential Revision: D21398480

fbshipit-source-id: 718bca589a014b9176aedc3dfd7a7288d7f78c01""",0.7,None,changed

1622,Maxim Goretskyy,maximg@fb.com,"""We androidX now (#766)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/766

Migrating to android X for next major release on 5th May.
Reason being is a few partners are asking for it, and it is nice to use shiny new things.

At the same time updating travis to use android x sdk.

I plan to rebase after our release on 20th April, but want to hear your opinions and concerns now.

Reviewed By: jingping2015

Differential Revision: D20074358

fbshipit-source-id: 13bdc460dbc84a188d1d85915605ccd5d9763be8""",0.7,None,added

1623,Andrey Putilin,regresscheck@fb.com,"""Ignore app switch if FB4A is logged out

Summary: When app is logged out, there's still the chance that Chrome Custom Tabs will be logged in. We can try to ignore app switch in this case.

Differential Revision: D21053972

fbshipit-source-id: bb06ff4e37598254dbc96f0eeb82f5af7f9566d8""",0.7,None,changed

1624,Xinzhu Cai,kongxinzhu@fb.com,"""Add Monitoring feature in FeatureManager (#764)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/764

Added Monitoring feature in FeatureManager, in order to check GK status  and manage the feature later.

Reviewed By: dreamolight

Differential Revision: D21291659

fbshipit-source-id: 8486e29f64faf41631623619f4ab3329b9eb69fe""",0.7,None,added

1625,Xinzhu Cai,kongxinzhu@fb.com,"""Fix flaky Monitor test (#762)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/762

Fixed flaky test, making the executor is serialExecutor in the test.

Reviewed By: jingping2015, Oliverccccct

Differential Revision: D21229074

fbshipit-source-id: ede71e5be26128b740baf8bf2009890156f4f528""",0.7,None,fixed

1626,Zilin Zhang,kylinchang@fb.com,"""Add CrashShield to SessionLogger

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D21213567

fbshipit-source-id: 9e5873a726fceedc07d5087f3b4e56d2916e9874""",0.7,None,added

1627,Zilin Zhang,kylinchang@fb.com,"""Bump version 6.5.1

Summary: As title

Reviewed By: joesus

Differential Revision: D21213316

fbshipit-source-id: f55198519d0412993bfdec20ac9e230198c988e8""",0.2,None,changed

1628,Tao Chen,oliverct@fb.com,"""Fix the bug of isAdapterViewItem

Summary:
The support library has been superseded by AndroidX which is part of Jetpack. And Google won't maintain support library. And in some edge cases, there would be class not found exception for NestedScrollingChild.

- **java.lang.ClassNotFoundException: Didn't find class \""androidx.core.view.NestedScrollingChild\""**
- **java.lang.ClassNotFoundException: android.support.v4.view.NestedScrollingChild""**

Thus we should get class through Class.forName(String className)

Reviewed By: Mxiim

Differential Revision: D21198283

fbshipit-source-id: f6076eddd5258b54b8a7ec6e3172e13353e57d73""",0.7,None,fixed

1629,Zilin Zhang,kylinchang@fb.com,"""Add CrashShield to AppLinkData

Summary: As title

Reviewed By: ninanina0815

Differential Revision: D21211166

fbshipit-source-id: 75ccfc347dd238716f59feb5f7ded1138b46d3e3""",0.7,None,added

1630,Shu-Ting Tseng,suiting@fb.com,"""fix the caching for models

Reviewed By: KylinChang

Differential Revision: D21180216

fbshipit-source-id: 866f5ac0ead24545a200c81dd7711bc13d0a2dc1""",0.7,None,fixed

1631,Xinzhu Cai,kongxinzhu@fb.com,"""Add Monitor class (#757)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/757

Added Monitor class
Monitor class is the entry point of the Monitoring System.
The usage of the Monitoring System will be:
```
// assign value of timeStart, timeSpent or the value want to be logged
LogEvent logEvent = new LogEvent(""FB_CORE_STARTUP"", LogCategory.PERFORMANCE);
MonitorLog log = new MonitorLog.LogBuilder(logEvent)
                .timeStart(timeStart)
                .timeSpent(timeSpent)
                .build();
Monitor.add(log);
```
Monitor needs to be enabled before using it to add log. Enable Monitor will fetch the sampling rates from FB server, send the logs in the disk and clean the disk. *Enable part will be added in the next diff.*

**Sampling rate** is an integer indicating that we will send one every x logs for a specific event name. We have a default sampling rate for all events which are not specified in the list.

Reviewed By: Mxiim

Differential Revision: D20903128

fbshipit-source-id: 3a482b4d8a1968b5cc33c6155e44736f1ada213e""",0.7,None,added

1632,Wendy Deng,dzhuowen@fb.com,"""Handle media hosted on server (#756)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/756

Handle media hosted on server

Reviewed By: iquintero

Differential Revision: D21146687

fbshipit-source-id: 0e658a8f983689dcd2bd065ac5e14c12a72e4c37""",0.7,None,changed

1633,Cecily Jiang,jiangyx@fb.com,"""Get button text again for prediction when click

Reviewed By: dreamolight

Differential Revision: D21145826

fbshipit-source-id: 69196ff9c6dac12c8e0bdc36ecf5d53a6bd576f7""",0.7,None,changed

1634,Cecily Jiang,jiangyx@fb.com,"""Update getTextView to attach listener on navigationViews

Reviewed By: dreamolight

Differential Revision: D21081644

fbshipit-source-id: 92e52f03dd1436af79d2569626b1fadb8ef900c1""",0.7,None,changed

1635,Zilin Zhang,kylinchang@fb.com,"""Fix kotlin test

Summary: As title

Reviewed By: jiangcici

Differential Revision: D21139212

fbshipit-source-id: 9ffefeb142248556fb0250ea31e5428c0c62ba3d""",0.7,None,fixed

1636,Zilin Zhang,kylinchang@fb.com,"""Bump Version v6.5.0

Summary: As title

Reviewed By: tianqibt

Differential Revision: D21126954

fbshipit-source-id: 30f7f18908852d670860529673d3fd40990f3bd0""",0.2,None,changed

1637,Cecily Jiang,jiangyx@fb.com,"""Add GK for model request

Reviewed By: KylinChang

Differential Revision: D21127556

fbshipit-source-id: 79b40721ad0749d338c22756ee739c26929e46ff""",0.7,None,added

1638,Cecily Jiang,jiangyx@fb.com,"""Request model info only after 3 days before previous request

Reviewed By: YOUDAN

Differential Revision: D21077427

fbshipit-source-id: 9bb6fb7e916470d35696d1b69868272449804326""",0.7,None,changed

1639,Cecily Jiang,jiangyx@fb.com,"""Change integrity sample GK name

Reviewed By: tianqibt

Differential Revision: D21127698

fbshipit-source-id: d96b12e9a597620e02cc6f1003f7bb9cfc62802c""",0.7,None,changed

1640,Zilin Zhang,kylinchang@fb.com,"""Remove MTML GK check

Summary:
1. Remove MTML GK check
2. other refactor

Reviewed By: YOUDAN, jiangcici

Differential Revision: D21094795

fbshipit-source-id: 4e4bd2d5d39fc6e22a71f400d236eb2a0223db64""",0.7,None,changed

1641,Tao Chen,oliverct@fb.com,"""Add null check on SessionInfo before using it

Summary: Since SessionInfo is volatile and It's necessary to check null when we using it on a new async thread.

Reviewed By: Mxiim

Differential Revision: D21077539

fbshipit-source-id: ecf88c5cd8074570e14c82929431e193901cde2f""",0.7,None,added

1642,Cecily Jiang,jiangyx@fb.com,"""Change class and package name for in feature manager

Reviewed By: tianqibt

Differential Revision: D21055865

fbshipit-source-id: c3a39ef422728075c95921efd2146c00e8ef624e""",0.7,None,changed

1643,Cecily Jiang,jiangyx@fb.com,"""Process integrity prediction result

Reviewed By: tianqibt

Differential Revision: D21027100

fbshipit-source-id: 3c45e2fffc6a9751aacd99f6c22ecdc5dbd1916b""",0.7,None,changed

1644,Cecily Jiang,jiangyx@fb.com,"""Preparing integrity model change by renaming task, folder and file

Reviewed By: KylinChang

Differential Revision: D21026037

fbshipit-source-id: 530fede41c4371b87ed15cfbfc2d2af570e19b1b""",0.7,None,changed

1645,Cecily Jiang,jiangyx@fb.com,"""Recursively update hint and text to support getting text from view

Reviewed By: YOUDAN

Differential Revision: D21037013

fbshipit-source-id: 392e54e63dfde0a5fd1de9a404b9518fe5c44d61""",0.7,None,changed

1646,Wendy Deng,dzhuowen@fb.com,"""Add internal utility functions

Summary: Add internal utility functions

Reviewed By: iquintero

Differential Revision: D21002736

fbshipit-source-id: 7a2842624d200c00477de07f4af67f42bd5abd51""",1,None,added

1647,Zilin Zhang,kylinchang@fb.com,"""Bump version 6.4.0

Summary: As title

Reviewed By: joesus

Differential Revision: D21037023

fbshipit-source-id: 07c2ed384880e208a85252ec5cbdc3837f300ea0""",0.2,None,changed

1648,Maxim Goretskyy,maximg@fb.com,"""Python script for androidSDK size test

Reviewed By: joesus

Differential Revision: D20884051

fbshipit-source-id: a6da31bcb56b7f97f0677d22bc73ae747205d5b0""",0.7,None,changed

1649,Tao Chen,oliverct@fb.com,"""Fix Travis Broken because of Unit Tests not passed (#754)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/754

- Add Annotation
- Add related mock objects to fix test testLogAndSendAppEvent()
- Set Executor when test on a runnable method.

Reviewed By: Mxiim

Differential Revision: D21024872

fbshipit-source-id: 06c1d14556b6f1ddc2008bffdf38cf58a6c28f74""",0.7,None,fixed

1650,Tao Chen,oliverct@fb.com,"""Refactor predict() to support batch predictions

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D21003819

fbshipit-source-id: 29417b411418d30d41deb05ebefe3733d8b975af""",0.7,None,changed

1651,Cecily Jiang,jiangyx@fb.com,"""Change getPathID logic to include all class path of hostview

Reviewed By: KylinChang

Differential Revision: D21006697

fbshipit-source-id: b3eb0efe45d57de766fa69561a1164b6393ea32e""",0.7,None,changed

1652,Andrey Putilin,regresscheck@fb.com,"""Do warmup and pre-fetching

Summary:
Two things are happening here:
1. Chrome Custom Tabs(CCT) docs suggest up to 0.7 speedup from warmup call. - https://developers.google.com/web/android/custom-tabs/best-practices#connect_to_the_custom_tabs_service_and_call_warmup
2. Let's try to pre-load CCT request when SDK is building it. We can't do it before request being built, because we provide CCT and other parameters, it changes URI.

Potentially, we could prepare CCT request while we're trying other method with higher priority(app switch, for example), saving more time. Maybe for future improvement.

Reviewed By: ct2mak

Differential Revision: D20969122

fbshipit-source-id: 18800016a554d42c61a756c2ca6b69fef9520481""",0.7,None,changed

1653,Cecily Jiang,jiangyx@fb.com,"""Remove the logic of recursively update text and hint

Reviewed By: YOUDAN, KylinChang

Differential Revision: D20995901

fbshipit-source-id: c555846956e45d340bb37f1b127d0d2c9f24c701""",0.7,None,changed

1654,Zilin Zhang,kylinchang@fb.com,"""Remove values-fb (#753)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/753

As title

Reviewed By: Mxiim

Differential Revision: D20967439

fbshipit-source-id: bbcabc7625aa181a27f16200780bcb6eb5e9a90c""",0.7,None,changed

1655,Tao Chen,oliverct@fb.com,"""Refactor Softmax Operator

Summary:
- Refactor Softmax Operator
- Add unit test for Softmax

Reviewed By: YOUDAN

Differential Revision: D20863682

fbshipit-source-id: 09083ed6357fcabd9a7ac96d9557993a8331355b""",0.7,None,changed

1656,Tao Chen,oliverct@fb.com,"""Refactor Relu Operator

Summary:
- refactor relu operator
- add unit test for relu

Reviewed By: ninanina0815

Differential Revision: D20863673

fbshipit-source-id: 1661d3cf722a4d578c58e171595a8094270a0bc4""",0.7,None,changed

1657,Tao Chen,oliverct@fb.com,"""Refactor Dense and Mul Operator

Summary:
- refactor mul() and dense()
- add unit tests for mul() and dense()

Reviewed By: dreamolight

Differential Revision: D20863671

fbshipit-source-id: 8a5b0faddaa4c3e540f067ad1639a96f978c48be""",0.7,None,changed

1658,Tao Chen,oliverct@fb.com,"""Refactor Concatenate Operator

Summary:
- refactor concatenate operator
- add unit test for concatenate

Reviewed By: dreamolight

Differential Revision: D20863666

fbshipit-source-id: d38ed2fdd837d6cafe176b0a30dd53ada746c6e1""",0.7,None,changed

1659,Tao Chen,oliverct@fb.com,"""Add Flatten operator

Summary:
Actually before concatenation, the Tensor need to be flattened.
https://our.intern.facebook.com/intern/diffusion/FBS/browse/master/fbcode/experimental/charlieyan/numpy_model_for_pytorch.py?commit=6f87e42b7b5cc3ca2fa68abd47ebfd2df78cc77f&lines=150-153

- Add MTensor flatten(MTensor x, int start_dim)
```
example1:
x shape: n_examples, seq_len, input_size
start dim: 1
return shape: n_examples, seq_len * input_size

example2:
x shape: n_examples, seq_len, input_size
start dim: 0
return shape: n_examples * seq_len * input_size
```

- Add unit test for flatten()

Reviewed By: dreamolight

Differential Revision: D20863662

fbshipit-source-id: 651309d82b56dbc9b9727b6c04f5bed4dd6fecdf""",0.7,None,added

1660,Tao Chen,oliverct@fb.com,"""Add Reshape function to MTensor

Summary:
- Add reshape() function
- Add unit test for reshape()

Reviewed By: ninanina0815

Differential Revision: D20863660

fbshipit-source-id: 61250a3011c95b5048bae8042ee360e8ed39775d""",0.7,None,added

1661,Tao Chen,oliverct@fb.com,"""Refactor Add Operator

Summary:
- Refactor Add Operator
- Add unit test for add

Reviewed By: YOUDAN

Differential Revision: D20863655

fbshipit-source-id: b005efef0ba5feb6e750d232a4f43f8bd9d15750""",0.7,None,changed

1662,Tao Chen,oliverct@fb.com,"""Refactor Conv1D and MaxPool1D to support batch prediction

Summary:
- Refactor Conv1D and MaxPool1D to support batch prediction (n_examples)
- Add related unit tests

Reviewed By: dreamolight

Differential Revision: D20863651

fbshipit-source-id: a4809552a9c03128ecdcc426e83d03db8a93e4a3""",0.7,None,changed

1663,Xinzhu Cai,kongxinzhu@fb.com,"""Remove MonitorEvent class and modify MonitorLog (#749)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/749

Since we added category attribute, and decided to track unique application id which is the package name for Android, I added these new fields in `MonitorLog` class.

`MonitorLog` has a required attribute `LogEvent` which contains event name and category. If the category is `PERFORMANCE`, the event name should be one of the values in `validPerformanceEventNames` Set.

Also, I removed `MonitorEvent`, because we want to track the usage of method in the future. The method name will be stored under event name field, using pattern className::methodName. We can't make the `MonitorEvent` as an Enum any more.

Reviewed By: Mxiim

Differential Revision: D20775666

fbshipit-source-id: 36de5fcf14f6cf68943a9d5645b486ab4bd0f1a9""",0.7,None,added

1664,Tao Chen,oliverct@fb.com,"""Fix the bug of MaxPool1D

Summary:
Previously, for code:
```
for (int r = i; r < i + pool_size; r++) {
    res[i * cols + c] = Math.max(res[i * cols + c], x[r * cols + c]);â€‹
```
will get 0 if all the number in x is smaller than 0, which would make the prediction not accurate if there is no relu() after maxpooling.

Reviewed By: ninanina0815

Differential Revision: D20881716

fbshipit-source-id: a8a50f1fb584a35780683377a10548f19ab4fede""",0.7,None,fixed

1665,Tao Chen,oliverct@fb.com,"""Refactor Embedding Operator

Summary: Same as the title

Reviewed By: ninanina0815

Differential Revision: D20863648

fbshipit-source-id: 66519528ad07f208dc44b6e328ae1e8552fb6e09""",0.7,None,changed

1666,Tao Chen,oliverct@fb.com,"""Remove Non-MTML model

Summary: Same as the title

Reviewed By: jiangcici

Differential Revision: D20863645

fbshipit-source-id: e34e7b2a6a3aaddbf82b543c46eda834339da7ae""",0.7,None,changed

1667,Tao Chen,oliverct@fb.com,"""Change access modifier of MTensor fields into private

Summary: Same as the title

Reviewed By: YOUDAN, KylinChang

Differential Revision: D20832237

fbshipit-source-id: 2faeb7fba946fd1afb5affba27bf0b30ae04d011""",0.7,None,changed

1668,Tao Chen,oliverct@fb.com,"""Refactor transpose2D function

Summary:
- Wrap float[] data in MTensor for transpose2D
- Align the shape with the transposed tensor

Reviewed By: KylinChang

Differential Revision: D20831166

fbshipit-source-id: f0bee28a1d44b45f4d3e9deb24b39d3af27d41cd""",0.7,None,changed

1669,Tao Chen,oliverct@fb.com,"""Refactor transpose3D function

Summary:
- Wrap float[] data in MTensor for transpose3D
 - Align the shape with the transposed tensor

Reviewed By: KylinChang

Differential Revision: D20824241

fbshipit-source-id: 040e4d66c93bdf54bec8b4379f6993e67e9b4ec8""",0.7,None,changed

1670,Tao Chen,oliverct@fb.com,"""Rename Weight into MTensor

Summary: Same as the title

Reviewed By: KylinChang

Differential Revision: D20808396

fbshipit-source-id: 9d3222d65bdbc504aa68dcc195baed6b66db2538""",0.7,None,changed

1671,Maxim Goretskyy,maximg@fb.com,"""Introduce kotlin for tests

Summary: Introduce ability to write tests in kotlin by showing a simple test-file written in kotlin. The file was randomly chosen amongst files that did not have tests.

Reviewed By: joesus

Differential Revision: D20352261

fbshipit-source-id: a4bd5be57bfa06fd6d3e09ba4381e15cb44f7a56""",0.7,None,changed

1672,Calvin Mak,cmak@fb.com,"""Remove profile generation code in android sdk

Summary: We should fetch the profile with the Access Token

Reviewed By: Mxiim

Differential Revision: D20777195

fbshipit-source-id: b71357a8d5a1bfa46788d76238999ead10c5a803""",0.7,None,changed

1673,Xinzhu Cai,kongxinzhu@fb.com,"""Move device related info to overall payload (#746)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/746

Move device related info to overall payload from MonitorLog to MonitorLoggingManager, since it will be the same for each log.

Reviewed By: joesus

Differential Revision: D20812553

fbshipit-source-id: c0d715558ed4f9a246a3eb6943b04d57c368e5e0""",0.7,None,changed

1674,Nacho Quintero Rizo,roboto@fb.com,"""Fix GamingImageUploader callback when mediaDialog=false (#745)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/745

When shouldOpenMediaDialog = false. the ImageUploader would not call the provided callback (if any). This fixes that.

Reviewed By: Mxiim

Differential Revision: D20806519

fbshipit-source-id: 04c0d1f331167292deee0492e5c79bc3f5d37d49""",0.2,None,fixed

1675,Zilin Zhang,kylinchang@fb.com,"""Add flag for advertiser_id_collection_enabled

Reviewed By: YOUDAN

Differential Revision: D20732697

fbshipit-source-id: 6cef44e981aefd1a9c396d36616ed6a2bcc0b9a8""",0.7,None,added

1676,Xinzhu Cai,kongxinzhu@fb.com,"""Add MonitorLoggingManager class (#744)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/744

New log will be passed in MonitorLoggingManager via Monitor.
The MonitorLoggingManager adds the new log to the MonitorLoggingQueue. If the MonitorLoggingQueue has reached the flush limit, the MonitorLoggingManager will flush the MonitorLoggingQueue and send the logs back to our server. If not, MonitorLoggingManager will schedule a future task of sending logs in 60 second.

Each PostGraphRequest contains 20 logs in the parameter in maximum. After all of the logs are built as PostGraphRequests, they will be sent to our server using Batch call.

Using single-threaded Executor to make sure flushAndWait() will be executed safely. Single-threaded Executor can guarantee that no more than one task will be active at any given time.

https://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor()

Reviewed By: Mxiim

Differential Revision: D20689760

fbshipit-source-id: 536aab4aa6d714ed7870f7852f56e2cf3a2c08d5""",0.7,None,added

1677,Zilin Zhang,kylinchang@fb.com,"""Fix build warning (#739)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/739

1. Upgrade buildtool to 28.0.3, which is the minimum buildtool version of Gradle 3.5.2
2. variant.getJavaCompile() is deprecated and replaced by variant.getJavaCompileProvider()
3. revert the change of gradle.properties introduced by D18569316

Reviewed By: Mxiim

Differential Revision: D20727706

fbshipit-source-id: c6e89d4c4d1a340df623927be05130270b387023""",0.7,None,fixed

1678,Xinzhu Cai,kongxinzhu@fb.com,"""Fix MonitorLoggingStoreTest failure (#741)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/741

Try to fix MonitorLoggingStoreTest, using FacebookPowerTestCase

Reviewed By: joesus

Differential Revision: D20740811

fbshipit-source-id: 48359d6e1bbbce98b28611c0a2e393c165d36cb3""",0.7,None,fixed

1679,Calvin Mak,cmak@fb.com,"""Pass in login behavior for CCT and webview

Summary: One of the things I want to debug is if apps have a lot of webviews because they purposely set their login behavior as such. This diff adds this param into the URI so we can check to see what the different login behaviors are

Differential Revision: D20715280

fbshipit-source-id: fb55af9b442b483d963db4a0e6f3c04f260e5f7d""",0.7,None,changed

1680,Zilin Zhang,kylinchang@fb.com,"""Add @AutoHandleExceptions to avoid crash

Summary:
As title
1. getDecorView never returns null
2. getRootView may throw runtime exception and we add the annotation to avoid crash.

Reviewed By: jiangcici

Differential Revision: D20717024

fbshipit-source-id: 8dc26ab42124d78e2d22b556d572d64b7593d2e7""",0.7,None,added

1681,Cecily Jiang,jiangyx@fb.com,"""Fix gradle by update to 6.0.1 (#738)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/738

Reviewed By: Mxiim, KylinChang

Differential Revision: D20684054

fbshipit-source-id: f40aaa734068c1087d15c107cf14cc179dd12b4b""",0.7,None,fixed

1682,Cecily Jiang,jiangyx@fb.com,"""Fix aam crash caused by getRootView

Reviewed By: KylinChang

Differential Revision: D20679789

fbshipit-source-id: 73529c246314bc34378f2b90e6c644e634458ba3""",0.7,None,fixed

1683,Xinzhu Cai,kongxinzhu@fb.com,"""Make monitor test package name as same as source code

Summary: Made the monitor related test's package name as same as its source code's package name, in case we access protected scope method/field in the test.

Reviewed By: Mxiim

Differential Revision: D20672783

fbshipit-source-id: 91c0b19f28be1805f65b44d8d0feba745dd1c763""",0.7,None,changed

1684,Xinzhu Cai,kongxinzhu@fb.com,"""Add MonitorLoggingQueue

Summary:
Added MonitorLoggingQueue class
Basically it's a Queue that stores the logs in the memory. There is a FLUSH_LIMIT, `addLog()` and `addLogs()` will return a boolean indicates if the queue has reached flush limit.

Reviewed By: jingping2015

Differential Revision: D20479965

fbshipit-source-id: 9fb1d1dc764c4e5ceb797e1d5bfa796ee2ee6265""",0.7,None,added

1685,Xinzhu Cai,kongxinzhu@fb.com,"""Add MonitorLoggingStore

Summary:
MonitorLoggingStore will read/write the logs from/to the disk.
We will delete the logs in the disk once they are read from the disk in order to avoid sending them twice.

The logs in the LoggingCache will be written into the disk only when the app is stopped/crash. We will flush the disk once we enable the monitor.
We will discard the logs if they failed to be sent, for the reason 1) our log is not that important 2) reduce the usage of storage.

Reviewed By: Mxiim

Differential Revision: D20477932

fbshipit-source-id: 523bf5cb36ce5bfe3240730be33bb33ab72801bf""",0.7,None,added

1686,Zilin Zhang,kylinchang@fb.com,"""Bump version 6.3.0 (#736)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/736

As title

Reviewed By: tianqibt

Differential Revision: D20653570

fbshipit-source-id: 5703aaeb74cc0986ac02a31a9cd4a7ac562cf2a5""",0.2,None,changed

1687,Cecily Jiang,jiangyx@fb.com,"""fix feature extractor wrong input order

Reviewed By: tianqibt, YOUDAN

Differential Revision: D20633998

fbshipit-source-id: 9649dce5bc37fe8edaf3f359c43990cd510f2429""",1,None,fixed

1688,Cecily Jiang,jiangyx@fb.com,"""Add annotation to avoid warning

Reviewed By: YOUDAN

Differential Revision: D20625996

fbshipit-source-id: 55837843796417326b4caa2290db729f79f24205""",0.7,None,added

1689,Cecily Jiang,jiangyx@fb.com,"""Better naming model parameters

Reviewed By: KylinChang

Differential Revision: D20608455

fbshipit-source-id: 58e44113362a247b81bc93b4929a20b97ea208db""",0.7,None,changed

1690,Cecily Jiang,jiangyx@fb.com,"""fix not return prediction event type

Reviewed By: YOUDAN, dreamolight

Differential Revision: D20609473

fbshipit-source-id: 7f00eef6fdb0aa8deb46436f00814126316c417a""",0.7,None,fixed

1691,Christina Xu,christina1012@fb.com,"""Remove unnecessary checks

Reviewed By: KylinChang

Differential Revision: D20606799

fbshipit-source-id: 0d3f0b2d32951fd7fd24ba4f21e1a2243560076c""",0.7,None,changed

1692,Xinzhu Cai,kongxinzhu@fb.com,"""Rename LoggingCollection to LoggingCache and add signatures

Summary:
Rename `LoggingCollection` to `LoggingCache` to avoid the confusion of Java Collection.

Considering all `LoggingCache` should implement `addLog()`, `addLogs()`, `isEmpty()` and `fetchLog()`, added these signatures.
`addLog()` and `addLogs()` will return a boolean indicates if it has reached flush limit after adding new log(s).

Reviewed By: joesus

Differential Revision: D20553075

fbshipit-source-id: 36ec7680fc85a0ddce5732845977269d6b944586""",0.7,None,added

1693,Zilin Zhang,kylinchang@fb.com,"""Rethrow exception in debug mode

Summary:
In debug mode:
1. rethrow exception
2. don't disable feature

Reviewed By: dreamolight

Differential Revision: D20572077

fbshipit-source-id: 21cacd74fd9a84f9504388f67499ab436e2f0c5b""",0.7,None,added

1694,Zilin Zhang,kylinchang@fb.com,"""Add @AutoHandleExceptions to SuggestedEvents

Summary: As title

Reviewed By: dreamolight

Differential Revision: D20568012

fbshipit-source-id: ef9dae7b59859387f259f983c0258ecb8592e600""",0.7,None,added

1695,Cecily Jiang,jiangyx@fb.com,"""Support old model

Reviewed By: KylinChang

Differential Revision: D20568346

fbshipit-source-id: b7b01bfeed0ca346b7d0ee6fd9d338a0f61d9a34""",0.7,None,changed

1696,Cecily Jiang,jiangyx@fb.com,"""Change initiate checkout predictor

Reviewed By: KylinChang

Differential Revision: D20520495

fbshipit-source-id: 57e0d71cea66253efebfcdc8bf84309d90a8a551""",0.7,None,changed

1697,Daniel Loomb,dloomb@fb.com,"""Adding Chrome Custom Tabs to Game Request

Summary:
In response to S178350, we want to move to a more secure approach to these Game Request dialogs.

Similar was done on iOS D20294227

Reviewed By: AmarBhosale

Differential Revision: D20429097

fbshipit-source-id: c3199dca9b9edba61c509cc059e3d44ed43bffdb""",0.7,None,changed

1698,Xinzhu Cai,kongxinzhu@fb.com,"""Add MonitorLog

Summary:
Added MonitorLog class:
MonitorLog should have an event name which is MonitorEvent Enum type.
We have FB_CORE_STARTUP in MonitorEvent for now, new event type should be added in MonitorEvent.

If you have already the time start and time spent value, MonitorLog will be used as below,
```
MonitorLog log = new MonitorLog.LogBuilder(FB_CORE_STARTUP)
                .timeStart(timeStart)
                .timeSpent(TEST_TIME_SPENT)
                .build()
```

Reviewed By: jingping2015

Differential Revision: D20377171

fbshipit-source-id: 4a9ed5e5f8d46a0c69c768013635bbdae4976212""",0.7,None,added

1699,Cecily Jiang,jiangyx@fb.com,"""Fix gradle (#716)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/716

Reviewed By: KylinChang

Differential Revision: D20493751

fbshipit-source-id: 5dc8376913f00eefacea2e060ba91ed35c900c01""",0.7,None,fixed

1700,Alan Wilms,alanwilms@fb.com,"""Make GraphResponse constructors public

Summary: Add public keyword to GraphResponse's currently protected-private constructors so they can be used in a different package (gaming-services) in the future.

Reviewed By: Mxiim

Differential Revision: D20495890

fbshipit-source-id: 18004ae8df28491f7d24454976ab1b543243d8bc""",0.7,None,added

1701,Alex Beggs,sunyal@gmail.com,"""Bump support libraries to 28.0.0 (#710)

Summary:
- Prepare SDK for Jetifier tool which requires 28.0.0 version of the support libraries
- Update sample apps to use the constants

Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details
Bump support libraries to 28.0.0 to support Jetifier https://developer.android.com/studio/command-line/jetifier

Would like to be able to use the Jetifier internally on this library but the requirement is 28.0.0
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/710

Reviewed By: joesus

Differential Revision: D20473472

Pulled By: Mxiim

fbshipit-source-id: f8d87b7cc00d839f1f5886e9d208a8859ef1812b""",0.2,None,changed

1702,Xinzhu Cai,kongxinzhu@fb.com,"""Add logging related interface

Summary: built basic structure of logging system for the log need to be sent to server

Reviewed By: Mxiim

Differential Revision: D20369949

fbshipit-source-id: b11b180784c7089e2005cb38b7b5d9c5f722bc64""",0.7,None,added

1703,Makoto Yamazaki,makoto1975@gmail.com,"""throw exception when facebookAppId is placed in AndroidManifext.xml without 'fb' prefix. (#709)

Summary:
- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

In some cases, facebookAppId in AndroidManifest.xml is treated as Float if it is placed directly in AndroidManifest.xml.
We should throw exception in that case.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/709

Reviewed By: joesus

Differential Revision: D20446415

Pulled By: Mxiim

fbshipit-source-id: 007bfecf68e34c74f0496ca4e48117d31cf6457d""",0.7,None,added

1704,Nacho Quintero Rizo,roboto@fb.com,"""Use the correct Graph Domain for graph-video (#715)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/715

use Graph Domain in graph-video too.

Reviewed By: joeymrios

Differential Revision: D20434205

fbshipit-source-id: 1d09e8914fb7c93cef080826011ec9ca8cc3a3e8""",0.2,None,changed

1705,Maxim Goretskyy,maximg@fb.com,"""Revert removal of minsdk in some sampleapps

Summary:
When building with buck, it requires to have minsdk in manifest.
Using buck to define minsdk for some reason does not work as in https://buck.build/rule/android_binary.html#manifest_entries

Reviewed By: Nathaaaalie

Differential Revision: D20442715

fbshipit-source-id: 3a10c96dbef1e43b2524c5b1aaa6c7dd64bea8fe""",0.7,None,changed

1706,Maxim Goretskyy,maximg@fb.com,"""Delete all (#703)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/703

https://developers.facebook.com/docs/accountkit/android

Reviewed By: ct2mak

Differential Revision: D20203573

fbshipit-source-id: baa31c5aa96cd1a9fa92080a684f5023ef93ec6b""",0.7,None,removed

1707,Maxim Goretskyy,maximg@fb.com,"""update gradle (#712)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/712

Most of the change is upgrading android gradle to 3.5.2 and gradle to 6.0
Rest if fixing the issues that the new versions introduce for android studio.

Reviewed By: jingping2015

Differential Revision: D20295668

fbshipit-source-id: 6e9f295fb4995ab20ffa0edbafe29aad84c7a4c5""",0.7,None,changed

1708,Cecily Jiang,jiangyx@fb.com,"""Fix typo

Reviewed By: YOUDAN

Differential Revision: D20353075

fbshipit-source-id: 37ce08e2a79a71e10282d5cc861b3f1f9f953744""",0.7,None,fixed

1709,Zilin Zhang,kylinchang@fb.com,"""Bump version 6.2.0

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D20332628

fbshipit-source-id: 352d73339ad080188dd1e2ac038111b59893caf9""",0.2,None,changed

1710,Zilin Zhang,kylinchang@fb.com,"""Gradle build for CrashShield (#711)

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/711

Reviewed By: jingping2015

Differential Revision: D20332604

fbshipit-source-id: 78396b714d59bc570fb884351d0e0ab4fd2114b9""",0.7,None,changed

1711,Christina Xu,christina1012@fb.com,"""Some updates for aam

Reviewed By: Oliverccccct

Differential Revision: D20315349

fbshipit-source-id: 3e0566804fe206f89ef043807d0bdc52b9a4616e""",0.7,None,changed

1712,Cecily Jiang,jiangyx@fb.com,"""Change getJson to optJson in case return null

Reviewed By: KylinChang

Differential Revision: D20310481

fbshipit-source-id: 443694da8bf0af799b5f4e27228508b56ae81925""",0.7,None,changed

1713,Cecily Jiang,jiangyx@fb.com,"""change automaticBoolean to boolean

Reviewed By: KylinChang

Differential Revision: D20310646

fbshipit-source-id: 58b67645d4519a32c2f30c7bd5a0fe8860dc4cfb""",0.7,None,changed

1714,Zilin Zhang,kylinchang@fb.com,"""Add annotations

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D20312386

fbshipit-source-id: 05dedbbbd61669a77941ce566630c9e6825485bd""",0.7,None,added

1715,Cecily Jiang,jiangyx@fb.com,"""construct empty value rules and test rule matching

Reviewed By: YOUDAN

Differential Revision: D20092695

fbshipit-source-id: e8fcf2dbacbd8ef9a8c55764a41c73c98039db0c""",0.7,None,changed

1716,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingServices to AppEventsLogger (#708)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/708

Add the new component into the AppEvents logger.

Reviewed By: joeymrios, KylinChang

Differential Revision: D20267831

fbshipit-source-id: 05b5a1dc15bd044c67879700258767d6e37a1ca3""",0.2,None,added

1717,Cecily Jiang,jiangyx@fb.com,"""Restrictive param json better naming

Reviewed By: YOUDAN

Differential Revision: D20233944

fbshipit-source-id: 352ebb456eb11146cd47e136e3783be28bc304bc""",0.7,None,changed

1718,Cecily Jiang,jiangyx@fb.com,"""Add event name replacement for health apps

Reviewed By: KylinChang

Differential Revision: D20111571

fbshipit-source-id: db8467b78d1c3f1ffe5bceec6be98570781a0616""",0.7,None,added

1719,Nacho Quintero Rizo,roboto@fb.com,"""Allow GamingImageUploader to support callbacks (#707)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/707

Developers may be interested in doing a custom action when an image upload is complete or fails. This now adds an extra callback parameter to all uploadToMediaLibrary() calls.

This change is backwards compatible.

Reviewed By: joeymrios

Differential Revision: D20256993

fbshipit-source-id: 2e64e644678fc2d54ea0386a9bbbf6cbad43d3d9""",0.2,None,changed

1720,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingServices as a dependency of the root Facebook package (#706)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/706

This change will make GamingServices a dependency of the root Facebook package so that it gets pulled via Maven.

Reviewed By: Mxiim

Differential Revision: D20240472

fbshipit-source-id: 5517ea960cc4d169bf3c05026f8b300f6bee0397""",0.2,None,added

1721,Zilin Zhang,kylinchang@fb.com,"""Add switch for MTML

Summary:
1. Add MTML to FeatureManager
2. If MTML is enabled, mTaskHandlers only contains MTML related handlers and vice verca
3. Switch to MTML if needed

Reviewed By: dreamolight

Differential Revision: D20188896

fbshipit-source-id: cebbd68112f5f3a1ee7e8d8e78feaa456a966a46""",0.7,None,added

1722,Zilin Zhang,kylinchang@fb.com,"""Refactor ML infra

Summary:
1. Add TaskHandler to hold the information for each task: rules, thresholds, etc
2. Move file related operations to TaskHandler
3. Other improvements: constantify some strings

Note: TaskHandler has execute function which has master task and slave tasks and they are responsible for downloading model file and rule file respectively, slave task handler also enables corresponding features. The function is designed for MTML.

Reviewed By: Oliverccccct

Differential Revision: D20149904

fbshipit-source-id: f0ff8c344cfd6e5a6850e4d03eea6fc6095f5912""",0.7,None,changed

1723,Maxim Goretskyy,maximg@fb.com,"""Update robolectric (#705)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/705

Updates robolectric, consistently fails locally when I run
```
./gradlew clean :facebook:test -i --rerun-tasks
```
this seemed to fix it.

Reviewed By: jingping2015

Differential Revision: D20264390

fbshipit-source-id: 4df8101c6940c7c24e66bc446485aae08d676f2c""",0.7,None,changed

1724,Zilin Zhang,kylinchang@fb.com,"""Move FileDownloadTask to a single .java file

Summary: As title

Reviewed By: dreamolight

Differential Revision: D20091966

fbshipit-source-id: bad3f04009946448ca0804e5712486b4bcc64d10""",0.7,None,changed

1725,Zilin Zhang,kylinchang@fb.com,"""Add multi-task prediction support

Summary: Support multi-task prediction and keep backward compatibility

Reviewed By: jiangcici

Differential Revision: D20091043

fbshipit-source-id: 7116502a55c17ef5186f491ec19a2113775d2c1b""",1,None,added

1726,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingVideoUploader to GamingServices (#702)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/702

This is a utility class similar to GamingImageUploader that will upload videos to a user's Gaming Media Library.

Reviewed By: Mxiim

Differential Revision: D20102853

fbshipit-source-id: 851be6d3563d7ff486a79dd7bbcd83840f2c3f48""",0.2,None,added

1727,Zilin Zhang,kylinchang@fb.com,"""Add sendExceptionAnalysisReports to ExceptionAnalyzer

Summary: ExceptionAnalyzer can send Exception Analysis report

Reviewed By: dreamolight

Differential Revision: D20065459

fbshipit-source-id: 37a12fe1a9f8e0114ab95fbe3fd4000cbf83eca1""",0.7,None,added

1728,Maxim Goretskyy,maximg@fb.com,"""undeprecate messenger sharing

Summary:
See old D19396777 which deprecated.
Decided to undeprecate everything except generic and media templates.

Reviewed By: joesus

Differential Revision: D20185787

fbshipit-source-id: cdcd5fa26fe82b3e9ed8d90b0d4c7a5e5893aae6""",0.7,None,changed

1729,Maxim Goretskyy,maximg@fb.com,"""Attempts to fix #695

Summary:
https://github.com/facebook/facebook-android-sdk/issues/695

InstallReferrerClientImpl tries to bind to a service inside startConnection, guess some OEMs don't allow that so catching all.

Reviewed By: joesus

Differential Revision: D20037257

fbshipit-source-id: 9d292bb4897372f635760d50aa90138154212a84""",0.7,None,fixed

1730,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight-mirage.config.json on master

fbshipit-source-id: 81da0ab3f4b144dbb314b75a9a28447f46bf7b9a""",0.2,None,changed

1731,Yunus Rahbar,yrahbar@fb.com,"""Merge pull request #697 from yns88/fixup-T62698785-master

Re-sync with internal repository""",0.2,None,changed

1732,Yunus Rahbar,yrahbar@fb.com,"""Re-sync with internal repository""",1,None,changed

1733,Zilin Zhang,kylinchang@fb.com,"""Refactor InstrumentData And CrashHandler

Summary:
1. Add Builder for InstrumentData and make it's constructors private
2. Add type Analysis
3. Get type from file prefix instead of file content
4. Remove redundant code of CrashHandler

Reviewed By: ninanina0815

Differential Revision: D20063070

fbshipit-source-id: 7e263d774a1fe8488e5ac9f3e0d0cab5b22ca34f""",0.7,None,changed

1734,Zilin Zhang,kylinchang@fb.com,"""Add ExceptionAnalyzer

Summary: ExceptionAnalyzer analyzes the crash exception and disable corresponding features if necessary

Reviewed By: ninanina0815

Differential Revision: D19994658

fbshipit-source-id: f0b45f2bbc4967877cad108ada8c5b0a41f145eb""",0.7,None,added

1735,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 424659a16b4a065c737edf8a450b341657e900a5""",0.2,None,changed

1736,Zilin Zhang,kylinchang@fb.com,"""Add disableFeature in FeatureManager

Summary:
As title,
the function disables feature it a crash happenes in this feature

Reviewed By: tianqibt

Differential Revision: D19959244

fbshipit-source-id: 5910636a7760c20e47b776db5649eff22bfd4c08""",0.7,None,added

1737,Zilin Zhang,kylinchang@fb.com,"""Move CrashShieldHandler and related annotations to folder crashshield

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D19875724

fbshipit-source-id: 99728f1b6d679aa8ccf22f9b0406de0e9e9c02e9""",0.7,None,changed

1738,Zilin Zhang,kylinchang@fb.com,"""Add Feature check for CrashShield&ThreadCheck

Summary: As title

Reviewed By: tianqibt, ZebingZong

Differential Revision: D19875333

fbshipit-source-id: ae0a615804918dfd5ddb84f6d7c15345692d206a""",0.7,None,added

1739,Zilin Zhang,kylinchang@fb.com,"""Add maven functionalities to facebook-gamingservices (#688)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/688

As title

Reviewed By: iquintero

Differential Revision: D19918248

fbshipit-source-id: f31dce0bb544248f72f0c1fa1e07a8c0eb894113""",0.7,None,added

1740,Zilin Zhang,kylinchang@fb.com,"""Bump Version 6.1.0

Summary: As title

Reviewed By: iquintero, ninanina0815, ZebingZong, YOUDAN

Differential Revision: D19909517

fbshipit-source-id: 8837350dcb11a91d5fd855a6e1e67ac1d8f7d0cb""",0.2,None,changed

1741,Maxim Goretskyy,maximg@fb.com,"""Deprecate Places sdk

Summary: title

Reviewed By: ZebingZong

Differential Revision: D19898963

fbshipit-source-id: 40dfdc331ed80ab20b8ae2f36ea0fea14229e658""",0.7,None,changed

1742,Zilin Zhang,kylinchang@fb.com,"""Add CrashShield&ThreadCheck to FeatureManager

Summary: As title

Reviewed By: joesus, YOUDAN

Differential Revision: D19870264

fbshipit-source-id: 3ab1f3718010de2573dbdd0ab826afb419b06c50""",0.7,None,added

1743,Nacho Quintero Rizo,roboto@fb.com,"""use AccessToken domain only for graph requests (#683)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/683

the different domain returned at login should only be used for graph API requests. This change introduces the old getFacebookDomain() behavior and renames the new domain aware to getGraphDomain()

Differential Revision: D19810447

fbshipit-source-id: e4d12e0ed7f7081f9349869d1f8b1b2eaaef5ce9""",0.2,None,changed

1744,Cecily Jiang,jiangyx@fb.com,"""Add copyright

Reviewed By: tianqibt

Differential Revision: D19818275

fbshipit-source-id: f11cecd529fa47b3d19baff0db036ed0d44d2d33""",0.7,None,added

1745,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingImageUploader (#679)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/679

Adds GamingImageUploader a convencience wrapper around async image uploads to Gaming Media Library.

Also  adds OpenGamingMediaDialog which is a callback handler for the raw GraphRequest.

Reviewed By: joeymrios

Differential Revision: D19758538

fbshipit-source-id: 6ab2c2b82ec59f10ffd24255158faa378f36bfa1""",0.2,None,added

1746,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingServices FriendFinderDialog (#677)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/677

Adds a new FriendFinderDialog which opens the Gaming Friend Finder Dialog for the current logged in App.

Differential Revision: D19730116

fbshipit-source-id: f100e62f26af5de018b95cb8b6c913360b994049""",0.2,None,added

1747,Zilin Zhang,kylinchang@fb.com,"""Add @UiThread to Codeless

Summary: As title

Reviewed By: ZebingZong

Differential Revision: D19592935

fbshipit-source-id: 82f1b5bb772a51bc992ace0449bc711fc1d31b35""",0.7,None,added

1748,Cecily Jiang,jiangyx@fb.com,"""Add @UiThread to AAM

Summary: As title

Reviewed By: ZebingZong

Differential Revision: D19669439

fbshipit-source-id: 3b79efbe2e45f9a06d0ada6b79c504ae5fca35a9""",0.7,None,added

1749,Nacho Quintero Rizo,roboto@fb.com,"""Add GamingServices component (#674)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/674

This adds a new SDK component: GamingServices.

Reviewed By: joeymrios, Mxiim

Differential Revision: D19670456

fbshipit-source-id: 4ddd064b6841bcf59a5f50d50dcb5ec56c4deec7""",0.2,None,added

1750,Jing Ping,jingping@fb.com,"""bump to v6.0

Summary: Update version to 6.0

Reviewed By: Mxiim

Differential Revision: D19703893

fbshipit-source-id: 8bfc2e8fea1f73e33af9e4589b8b889037c50f09""",0.2,None,changed

1751,Maxim Goretskyy,maximg@fb.com,"""Bump version 5.15.2

Summary: Attempts to solve https://github.com/facebook/facebook-android-sdk/issues/665

Reviewed By: jingping2015

Differential Revision: D19699219

fbshipit-source-id: 84baaa1533cde237f5d31a62f67677ee09cd3b75""",0.2,None,changed

1752,Maxim Goretskyy,maximg@fb.com,"""Downgrade installreferrer dep (#671)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/671

See https://github.com/facebook/facebook-android-sdk/issues/665
and https://stackoverflow.com/questions/59263642/install-referrer-library-v1-1-adds-permissions

Reviewed By: jingping2015

Differential Revision: D19643851

fbshipit-source-id: 7d285fd22b117338de9b256877f11a9f1fe94034""",0.7,None,changed

1753,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: d7c6e56ca1187dbdbc4f7e1cde3c5445d16a3a77""",0.2,None,changed

1754,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: a99553890436ddb89cb327dc3a87af21864998f0""",0.2,None,changed

1755,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c92a8fb8e3681fe8c2c963b8a26cf16c643a9517""",0.2,None,changed

1756,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 297afdd85f79afd4b5c72b0ac647a3f4102b4f70""",0.2,None,changed

1757,Calvin Mak,cmak@fb.com,"""Remove GK from SDK code

Summary: The feature is now 100% and the change is looking good. Let's remove the check from the code to reduce complexity

Differential Revision: D19647880

fbshipit-source-id: 2e9477ef85934295fbcbee6cac889b5ab81634cf""",0.7,None,added

1758,Nacho Quintero Rizo,roboto@fb.com,"""Add graph_domain support to AccessToken (#664)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/664

Access Tokens can now be granted for specific domains.
This updates the SDK to use 'fb.gg' when the graph_domain is 'gaming' for an AccessToken.

Differential Revision: D19563997

fbshipit-source-id: 981b3632afd7a8d1f82bfe86bac42305fe1d4c0c""",0.2,None,added

1759,Cecily Jiang,jiangyx@fb.com,"""Refactor: better naming and several small changes

Reviewed By: ZebingZong

Differential Revision: D19523661

fbshipit-source-id: 664f47c474172136f9ef6e2f7f157f428cd8f5f6""",0.7,None,changed

1760,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 8e4ab87d2f281ec39925b86538ab1be7bc6e536f""",0.2,None,changed

1761,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 9158fe4584fe98ac2beed62f976fbb02316bca9c""",0.2,None,changed

1762,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_login.config.json on master

fbshipit-source-id: 786fdc3a28073591b49bbc83851704ff613fa1c9""",0.2,None,changed

1763,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 3cededfd1507911d7a95347cb96ff9a62d3dc8f9""",0.2,None,changed

1764,Zilin Zhang,kylinchang@fb.com,"""Add ThreadCheckHandler

Summary: ThreadCheckHandler checks whether there is thread annotation(UIThread, WorkerThread) violation in SDK. If there is an violation, we will log the message to console and send it as crash report.

Reviewed By: Oliverccccct

Differential Revision: D19588973

fbshipit-source-id: 4b2513dfcaee875fd35f4769cdc0d69bca84841a""",0.7,None,added

1765,Zilin Zhang,kylinchang@fb.com,"""Rename CrashData as InstrumentData

Summary: InstrumentData is used to report Crash related, Thread related issue. We reuse the data structure of CrashData and rename it as InstrumentData.

Reviewed By: Oliverccccct

Differential Revision: D19587182

fbshipit-source-id: c9950ce5b5384ee82374caddc2cf0130d4e68bad""",0.7,None,changed

1766,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 473638c46666daf5945c2e0458dd4f78d9f874ec""",0.2,None,changed

1767,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 2bf49f5c7df645eff6fcc0b8eb5ca1ac4b419bff""",0.2,None,changed

1768,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_login.config.json on master

fbshipit-source-id: ec92494ce8a64d1510496b34d9e429995791e4ef""",0.2,None,changed

1769,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 7c8895c2552198b07925da7a03f685ee8f98838a""",0.2,None,changed

1770,Maxim Goretskyy,maximg@fb.com,"""Cert Hashing

Summary: See D19583338 for context

Reviewed By: jingping2015

Differential Revision: D19584725

fbshipit-source-id: 0d31a7a989a57d717930c37bc7aa54e6c7f537ae""",0.7,None,changed

1771,Zilin Zhang,kylinchang@fb.com,"""Bump version v5.15.1

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D19618016

fbshipit-source-id: ee58d8a5b51f037440498843ff747ee0aec02a78""",0.2,None,changed

1772,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: d45bcb099ba430eb249197afa46a21cb78968173""",0.2,None,changed

1773,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 6586749e63c1e2418d4d547795ce45d212486cab""",0.2,None,changed

1774,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 008179c946f86f8717e4c9bde4f86218832aa0be""",0.2,None,changed

1775,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: d80ff8fdba73b2dedb0232889d011dd9106801cf""",0.2,None,changed

1776,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9844e3ee687cd5f1245a3358ae220690b4fd6612""",0.2,None,changed

1777,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 0a8206c9d8ee40364ad24c9a81c516b06051bb31""",0.2,None,changed

1778,Maxim Goretskyy,maximg@fb.com,"""Check for more things in referrer url

Summary: We want to check for more referrer urls.

Reviewed By: YOUDAN

Differential Revision: D19609200

fbshipit-source-id: 3d6b3e8bd040b79291bc43c8b8e3de17186aed92""",0.7,None,changed

1779,varnit.khandelwal,varnit@zilingo.com,"""AndroidX Custom Tab Issue Fix (#670)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [ ] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details
Custom Tab has to be working for AndroidX enabled projects

## Expected Results
What do you expect to happen?
If the Facebook app is not installed, then on click of the Facebook login button in App, Custom Chrome Tab has to be open.

## Actual Results
What actually happened? Can you provide a stack trace?
If the Facebook app is not installed, then on click of Facebook login button in App, by default WebView is opening instead of Custom Chrome Tab even I have enabled the Custom Tab for my project.

## Steps to Reproduce
What are the steps necessary to reproduce this issue?
Integrate Facebook Login Button in App
Uninstall Facebook App from the Device
Make sure your project is migrated to AndroidX.
Click on the ""Login With Facebook"" button, WebView is opening instead of Custom Chrome Tab

Please merge the Pull Requests, so that we can use the Custom Chrome Tab in Facebook SDK for AndroidX Projects
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/670

Test Plan:
Built Hackbook with Gradle and buck and chrome custom tabs works for both
Buck: buck install hb4a. This uses Android X and is not working without this fix
Gradle: On Android studio

Went to Login > Login with custom tab to test the feature

Reviewed By: Mxiim

Differential Revision: D19603133

Pulled By: ct2mak

fbshipit-source-id: 44d2f463d2fbd3a50646dc8caf3e4f7cb02c026b""",0.2,None,fixed

1780,Calvin Mak,cmak@fb.com,"""Use FacebookSDK.getApplicationContext for package name in redirect

Summary: Right now, Validate.hasCustomTabRedirectActivity is using loginClient.getActivity().getPackageName(). We should be consistent and use the same way to get package name just in case when defining the redirect URI

Differential Revision: D19587465

fbshipit-source-id: 94ce5de45638d7cc0a2bd0ce6f511be62d468023""",0.7,None,changed

1781,Calvin Mak,cmak@fb.com,"""Prioritize developer defined redirect URI

Summary:
By default, the package name and the application ID would match. However, the developer can choose to change either of them. Therefore, we should only use the application ID intent filter if the dev has not defined their own intent filter. I cannot find a reliable way of getting the application ID from code. If there was a way, that would be the better solution

In this case, the intent filter with the application ID is only additive

Refer to D18607800 for some background

There is only 1 app so far from the newest SDK that I have seen that has a difference is Ludo Star 2
Package Name: com.ludo.star.ludogame.allstar2
Application ID: com.gameberry.ludo.star2

Reviewed By: hillbrad

Differential Revision: D19576349

fbshipit-source-id: 818dbc82aca3e82f0ab450be3f3072eb70dba930""",0.7,None,changed

1782,Maxim Goretskyy,maximg@fb.com,"""Attemps to fix resource not found issue

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/663

Reviewed By: joesus

Differential Revision: D19560307

fbshipit-source-id: 9162515d843bad529adead0802d89582e3125251""",0.7,None,fixed

1783,Maxim Goretskyy,maximg@fb.com,"""Asks developer to use their app id for sample apps (#662)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/662

Title.
There are a few reasons:
1) We do not want developers to use app ids of sample apps for their real apps.
2) We want to understand how useful the sample apps are.

This requires the devs to follow the getting-started guide.

Bypasses alert if you change the string to anything else, but giving a non-valid appid will not make it work correctly.

Only doing it for FBLoginSample app for now. After we decide what other sample apps to keep we can do same thing there.

Reviewed By: joesus

Differential Revision: D19539088

fbshipit-source-id: 5d917cc48d8aab1ed7fd052532466e081131feae""",0.7,None,changed

1784,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: a842429c57b726cd476e93d72486d66966531a34""",0.2,None,changed

1785,Maxim Goretskyy,maximg@fb.com,"""Update travis to accept sdk 28 license (#659)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/659

Title, see build failure on github

Reviewed By: jingping2015

Differential Revision: D19517120

fbshipit-source-id: 462eb96ad09c8625f637cedb113e8e0d167e4eb7""",0.7,None,changed

1786,Zilin Zhang,kylinchang@fb.com,"""Add CrashShieldHandler

Summary:
CrashShieldHandler saves the throwable in classes/functions annotated with AutoHandleExceptions, the reports are sent along with CrashReports. CrashShieldHandler respects AutoLog flag.

In this diff:
1. Refactor crash report
2. Add CrashShieldHandler

Reviewed By: Mxiim

Differential Revision: D19459262

fbshipit-source-id: a0254c2c294fe6b6950b6ec43d51cfb5e7330d32""",0.7,None,added

1787,Zilin Zhang,kylinchang@fb.com,"""Add annotations for CrashShield

Summary: As title

Reviewed By: Mxiim

Differential Revision: D19432581

fbshipit-source-id: 3e07385403d2ce307039a9e21c7a2bf79ad16e6a""",0.7,None,added

1788,Zilin Zhang,kylinchang@fb.com,"""Change targetSdk, compileSdk and buildTools version to 28

Summary: As title

Reviewed By: Mxiim

Differential Revision: D19440346

fbshipit-source-id: ad096ff3b15bbca693b332bb72d4aea6f9103544""",0.7,None,changed

1789,Zilin Zhang,kylinchang@fb.com,"""Bump Version: 5.15.0 (#658)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/658

Bump Version: 5.15.0

Reviewed By: tianqibt

Differential Revision: D19506728

fbshipit-source-id: 332275c5e84f56687d1d278b4f2f96871f9e12fd""",0.2,None,changed

1790,Cecily Jiang,jiangyx@fb.com,"""Remove deactivation logic in RestrictiveDataManager

Reviewed By: ZebingZong

Differential Revision: D18902076

fbshipit-source-id: 46bc684f49f6f9ded206ab5eafc1340eea6a8676""",0.7,None,changed

1791,Cecily Jiang,jiangyx@fb.com,"""Add processEvents and processParameters function

Reviewed By: YOUDAN

Differential Revision: D18901612

fbshipit-source-id: 85f84e2ce48dd85d327b0de959aa190e56c3f9c0""",0.7,None,added

1792,Cecily Jiang,jiangyx@fb.com,"""Fetch deactivated events and params from server

Reviewed By: ZebingZong

Differential Revision: D18895022

fbshipit-source-id: bf3d13219a54473b4f0fe474226b12549406f102""",0.7,None,changed

1793,Cecily Jiang,jiangyx@fb.com,"""Add feature manager for event deactivation

Reviewed By: ZebingZong

Differential Revision: D18891705

fbshipit-source-id: 320b0936ddf045ff196a1b95caa3ace84f69f51f""",0.7,None,added

1794,Zilin Zhang,kylinchang@fb.com,"""Log fb_auto_applink in sdkInitialize (#657)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/657

fb_auto_applink event is logged when com.facebook.sdk.AutoAppLinkEnabled is set to be true and it respects AutoLog flag.
We also need to log this event when developers manually initialize FB SDK and thus we move the logging to sdkInitialize.

Reviewed By: joesus

Differential Revision: D19502505

fbshipit-source-id: 243318e5e816fc615ef20dad9ceb5633374408f2""",0.7,None,changed

1795,Maxim Goretskyy,maximg@fb.com,"""Deletes LoginSample sample app (#656)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/656

The LoginSample shows how to use the login- and accountkit-sdk.
Reasons for removal:
FBLoginSample already shows how to use the login functionality, and accountkit will be deprecated on 9 March, 2020 (https://developers.facebook.com/docs/accountkit/android)
Hence it is better to remove sample apps so developers do not use it as example code.

Reviewed By: joesus

Differential Revision: D19499950

fbshipit-source-id: 2bf19fb1c2201b63dba2e4b20aa18c4840d050f5""",0.7,None,changed

1796,Calvin Mak,cmak@fb.com,"""Bump version to 5.14.0

Summary:
Bumping version and updating changelog for release jan 21
Followed this diff: D18607800

Reviewed By: KylinChang

Differential Revision: D19455354

fbshipit-source-id: 1e5c360d1730475910e7ce444893ed06407544bd""",0.2,None,changed

1797,Maxim Goretskyy,maximg@fb.com,"""Deletes Iconicus sample app (#653)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/653

Iconicus sample app was trying to show facebook:share-kit, check build.gradle file. Removing because we are trying to make Sample apps more ""useful"", and this is just basically some game which you can share.

Both ShareIt and HelloFacebookSample both use share-kit too, will decide what to do with those later.

Reviewed By: Nathaaaalie

Differential Revision: D19449581

fbshipit-source-id: 6e1ec5cbe9b38c90e1931a05da388afb22de3970""",0.7,None,changed

1798,Maxim Goretskyy,maximg@fb.com,"""Deletes scrumptious sample app (#654)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/654

Check the removed build.gradle file, wants to show login and share-sdks. Other sample apps already do that. Also it does not seem to completely work, wrong appID.

Reviewed By: jingping2015

Differential Revision: D19456141

fbshipit-source-id: a2591da5f80cea9a352fb6c11259c1579dc5a304""",0.7,None,removed

1799,Cecily Jiang,jiangyx@fb.com,"""Remove useless fields clear and delete synchronized declaration

Reviewed By: ZebingZong

Differential Revision: D18975242

fbshipit-source-id: eea7dcc9e5a3ce620f359b4808047a2dc56de3cd""",0.7,None,removed

1800,Calvin Mak,cmak@fb.com,"""Create intent filter in facebook-common manifest

Summary:
We want to grow adoption of chrome custom tabs for FB Login. Currently, we require a developer to manually add the intent filter into their app manifest. Adoption has been very low as a result. This diff moves the intent filter into the facebook-common manifest. The main difference here is that we would need to use package name as the identifier instead of fb app ID. Hence, we are using the URI scheme:
fbconnect://cct.<package_name> such as fbconnect://cct.com.facebook.hackbook.internal.current

Old redirect URI:
fb<app_id>://authorize

Reviewed By: hillbrad

Differential Revision: D18607800

fbshipit-source-id: 9751f54539f8c77ef775b5694c471a4580e018a3""",0.7,None,added

1801,Maxim Goretskyy,maximg@fb.com,"""Updates deprecated API usages

Summary:
Title.
https://pxl.cl/WLDw

sdkInitialize is removed because it is done in the contentprovider which is automatically included when including sdk in gradle.

Reviewed By: jingping2015

Differential Revision: D19432005

fbshipit-source-id: efaa948b9481f01b395a042bef5d92902977964a""",0.7,None,removed

1802,Maxim Goretskyy,maximg@fb.com,"""Deprecate Messenger Sharing

Summary:
Deprecates messenger sharing. See: https://developers.facebook.com/docs/sharing/messenger for more details on why the deprecation is occurring and how you can update your application to account for this change.

The deprecated occurrences were found by grepping for classes from the above link.

Reviewed By: jingping2015

Differential Revision: D19396777

fbshipit-source-id: e698f7d964120a7f2be7898f69cc2ef4d281c778""",0.7,None,changed

1803,Zilin Zhang,kylinchang@fb.com,"""Integrate with InjKit

Summary: Integrate with InjKit, which can do the thread check and crash shield

Reviewed By: Mxiim

Differential Revision: D19414888

fbshipit-source-id: b63e50e12222b8e2f10a8f5258c008d101fdf24a""",0.7,None,changed

1804,Cecily Jiang,jiangyx@fb.com,"""Fix RestrictiveDataManager crash

Reviewed By: ZebingZong

Differential Revision: D19356649

fbshipit-source-id: 1e4055bd8aab71abefc9f93cdfb1b5578bdf29fe""",0.7,None,fixed

1805,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: f3ceba2a075198f85c8f75fbba0fd7187a883bd6""",0.2,None,changed

1806,Maxim Goretskyy,maximg@fb.com,"""Startup metrics API

Summary:
The idea is that API will be used internally to measure different possible startup metrics starting with cold start.

Note that TAG does not necessarily have to be 1:1 mapping to an SDK folder. The idea is that the TAG can describe your use-case. Since this will be internal API we have freedom to change/refactor naming of the tags if the needs arise.

The usage would be (after TAG enum is moved to its own file).

```
MetricsUtil.getInstance(applicationContext).startMeasureFor(FACEBOOK_CORE_STARTUP);
//your code
MetricsUtil.getInstance(applicationContext).stopMeasureFor(FACEBOOK_CORE_STARTUP);
```
AppEventsLoggerImpl can later poll this data with
```
MetricsUtil.getInstance(applicationContext).getLastTimeDifferenceFor(FACEBOOK_CORE_STARTUP);
```

Even if we decide to directly send it to the server, we would need a service that checks that SDK is fully initialized and then sends it separately. We would still need to store the data somewhere on device (sharedpreferences). I prefer AppEventsLoggerImpl approach because we need to map the startup time to some appid+device anyway which is handled by AppEvents already.

If adding new metrics to measure, it would be about adding new HashMap<Tag, YOUR_METRIC> and a new base string for that metric. The start/stop measure would collect all metrics, and then it will be up to the user  to query for the data they want.

The goal is to make an easy to use API.
Are there some use-cases that will not be covered by this?
For example, the class is not really thread-safe but it also does not make sense to call startMeasure/endMeasure for same tag from different threads.

All kinds of feedback is appreciated.

Reviewed By: jingping2015

Differential Revision: D19318122

fbshipit-source-id: 840a00c4da4b8ed4ddc0df6a48d7f39e66e8ad35""",0.7,None,changed

1807,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 67a6133570840d5c6ae04541665171761c823879""",0.2,None,changed

1808,Maxim Goretskyy,maximg@fb.com,"""Upload stale config for androidSDK

Summary: Automating closure of stale issues using stalebot.

Reviewed By: jingping2015

Differential Revision: D19322070

fbshipit-source-id: 35010313263600fa5edbfb17b4f70b817297d694""",0.7,None,changed

1809,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 7b124ce0277b9fb9ba11d03ca85bcd57254b52e5""",0.2,None,changed

1810,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 1108981d65563203b9f3fc11e1c7cc9272e1f0a8""",0.2,None,changed

1811,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 00c6a133c132f449ab2b7a79f760ee22c27f1411""",0.2,None,changed

1812,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 03233c8322e536575b795378e71ba29b3c8b502e""",0.2,None,changed

1813,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 1c9ba2a3a0be153befc243d146f183712cf42fee""",0.2,None,changed

1814,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 0e976ee7bf34cf2d83218f45d55b4ed0501fd35d""",0.2,None,changed

1815,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: ff9f4ce0e92dd4d0acee082bbdee7834d297f912""",0.2,None,changed

1816,Maxim Goretskyy,maximg@fb.com,"""Install referrer uses new API

Summary:
InstallBroadcast will be deprecated in March, 2020 according to https://android-developers.googleblog.com/2019/11/still-using-installbroadcast-switch-to.html hence we need to update to use the new API.

This information needs only to be retrieved once.
Reason: Google does not change it for 90 days. During app uninstall (assuming no backup) the sharedpreferences are deleted as well, and the data can not possibly change when the app is not re-installed.

A small nit-problem is since we are making an async call to retrieve the data, the first time we get the URL it might not be there in time so we will receive null. As explained in the comments it should not be a problem, as all subsequent calls will have it.

Reviewed By: joesus

Differential Revision: D19237948

fbshipit-source-id: 4f4cc040d882c585918d870acd60da865278760b""",0.7,None,added

1817,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 88880bdf7d4e581e383a849a15629a83f7c53465""",0.2,None,changed

1818,Rob Hudson,rhudson@fb.com,"""Add ies and cbt to Android login dialog

Summary: Add the 'client baseline time' (cbt) and 'initial event sent' (ies) params to the login dialog URL, which have already been added to the iOS SDK.

Reviewed By: Mxiim

Differential Revision: D19169906

fbshipit-source-id: 56ca5e848d13dee7bf2bf193f3a19de44a1d15ef""",0.7,None,added

1819,Tao Chen,oliverct@fb.com,"""Better implementation for demo

Summary: Same as the title

Reviewed By: YOUDAN

Differential Revision: D18970080

fbshipit-source-id: 8213eba985cac5e5dc8a82523ed16644a90cb005""",0.7,None,changed

1820,Cecily Jiang,jiangyx@fb.com,"""Better dense initialize

Reviewed By: tianqibt

Differential Revision: D18967892

fbshipit-source-id: 7db3e220b9947e0a681113e3b06ebc14a9aaf991""",0.7,None,changed

1821,Cecily Jiang,jiangyx@fb.com,"""Remove meaningless enable check

Reviewed By: tianqibt

Differential Revision: D18967766

fbshipit-source-id: 967f4162667352454a2b72e2cec93cf77fa84d8c""",0.7,None,changed

1822,Cecily Jiang,jiangyx@fb.com,"""Add try catch block when processParameters

Reviewed By: tianqibt

Differential Revision: D18966950

fbshipit-source-id: 5ece9d106c66422aa933737580ea337f305ce37f""",0.7,None,added

1823,Christina Xu,christina1012@fb.com,"""Bump version

Summary: Bump version

Reviewed By: tianqibt

Differential Revision: D18944545

fbshipit-source-id: ab5ce7760059ad4dfe84b517b59bc834b17934b3""",0.2,None,changed

1824,Cecily Jiang,jiangyx@fb.com,"""Fetch restrictive data settings

Reviewed By: YOUDAN

Differential Revision: D18929517

fbshipit-source-id: 9fc786ca86fa3caf0ccc8e5be0dc89687d677fdb""",0.7,None,changed

1825,Lina Jin,lina@fb.com,"""support non eng char vectorization

Summary:
1. encode string to UTF8
2. convert the char to integer from 0 - 255

Reviewed By: YOUDAN

Differential Revision: D18939163

fbshipit-source-id: 98865801f34840576a7b49d9e735424f7ab441a4""",0.7,None,changed

1826,Jing Ping,jingping@fb.com,"""Adjust the changes in D18760262 in sample RPS to make our Travis CI job work fine

Summary: Android travisCI build is caused by D18760262

Reviewed By: Oliverccccct

Differential Revision: D18900339

fbshipit-source-id: 8010fea229a0d054b0a73d6068a174bc974b9b95""",0.7,None,changed

1827,Cecily Jiang,jiangyx@fb.com,"""Refuse sending back _onDeviceParams when addressParams is empty

Reviewed By: tianqibt

Differential Revision: D18914762

fbshipit-source-id: 261c7e8ce859794f0043ecdaaa9ceaf31c07d00a""",0.7,None,changed

1828,Jing Ping,jingping@fb.com,"""Log MD5 hashsum of the APK file from FB SDK

Reviewed By: YOUDAN

Differential Revision: D18514094

fbshipit-source-id: 524c14fc845abe0be8b6640c5de36bc39dbbbfd9""",0.7,None,changed

1829,Lina Jin,lina@fb.com,"""fix weights key

Summary: as title

Reviewed By: jiangcici

Differential Revision: D18905040

fbshipit-source-id: 0a18fe3146c5a23cb193201de4712d7fa60dd4f5""",0.7,None,fixed

1830,Lina Jin,lina@fb.com,"""change weights in Model class to be non static

Summary: weights variables should be non static as it is specific to an instance not the class

Reviewed By: dreamolight

Differential Revision: D18904594

fbshipit-source-id: 148bb45bb686f2820799e79164154a39efe92411""",0.7,None,changed

1831,Cecily Jiang,jiangyx@fb.com,"""rename the key of data filtering

Reviewed By: tianqibt

Differential Revision: D18900660

fbshipit-source-id: 8b5371e8d3c58d3235974b7d9d744a64dacf3c24""",0.7,None,changed

1832,Christina Xu,christina1012@fb.com,"""bump version

Reviewed By: dreamolight

Differential Revision: D18880741

fbshipit-source-id: f71870ba23778a1baf5968254da038e9b80b3d64""",0.2,None,changed

1833,Christina Xu,christina1012@fb.com,"""Rewrite setonclicklistener

Reviewed By: dreamolight

Differential Revision: D18880429

fbshipit-source-id: 31982cc310ac51691b9c635213b8bd567fe33555""",0.7,None,changed

1834,Zilin Zhang,kylinchang@fb.com,"""Add debug event for Auto App Link

Summary: As title, add debug event logging with debugging message for developers

Reviewed By: Oliverccccct

Differential Revision: D18760559

fbshipit-source-id: 7aea6ccc246e86867bc53dc1051bfbba969d382b""",0.7,None,added

1835,Stephy Ma,stephyma@fb.com,"""Revert D18844027: Refactor file downloader

Differential Revision:
D18844027

Original commit changeset: 118e39608764

fbshipit-source-id: 069ee6fec2356472d740df6170f20001a00aa96e""",0.7,None,changed

1836,Christina Xu,christina1012@fb.com,"""Refactor file downloader

Reviewed By: tianqibt

Differential Revision: D18844027

fbshipit-source-id: 118e39608764f5bf96963dd8ddc8459996553a87""",0.7,None,changed

1837,Cecily Jiang,jiangyx@fb.com,"""Add removed address back to param map according to sample rate

Reviewed By: tianqibt, KylinChang

Differential Revision: D18839940

fbshipit-source-id: b76355b98883beabed6de49ddff29950fb51d4cc""",0.7,None,added

1838,Cecily Jiang,jiangyx@fb.com,"""AddressFilterManagerTest

Reviewed By: YOUDAN

Differential Revision: D18842394

fbshipit-source-id: 7e1494a721af0d77433e251c1484503f91260029""",0.7,None,changed

1839,Cecily Jiang,jiangyx@fb.com,"""Remove keys of address from param map

Reviewed By: KylinChang

Differential Revision: D18698261

fbshipit-source-id: b87d7cf0ece81696ebb06172bdaab506a97c83bf""",0.7,None,changed

1840,Cecily Jiang,jiangyx@fb.com,"""Add feature manager for address filtering

Reviewed By: KylinChang

Differential Revision: D18662508

fbshipit-source-id: 7f665fd84f220d81c0af1985542be17f633342a7""",0.7,None,added

1841,Zilin Zhang,kylinchang@fb.com,"""Improve Auto App Link

Reviewed By: Oliverccccct

Differential Revision: D18760262

fbshipit-source-id: 060715e4f84f2ce1ec41ae275dd079d1874dd4cf""",0.7,None,fixed

1842,Lina Jin,lina@fb.com,"""consistent weights key for models

Summary: Make the key name consistent for two models

Reviewed By: KylinChang

Differential Revision: D18836713

fbshipit-source-id: 376bc6643ecbc15ee7af58202f9f49bd0984fa6a""",0.7,None,changed

1843,Christina Xu,christina1012@fb.com,"""SE] delete old model files

Summary: as title

Reviewed By: tianqibt

Differential Revision: D18843164

fbshipit-source-id: a5e613b3c363034c3b5d8a9ba7c57ea50745166e""",0.7,None,removed

1844,Cecily Jiang,jiangyx@fb.com,"""Remove deprecated keys in parameters map

Reviewed By: YOUDAN

Differential Revision: D18604072

fbshipit-source-id: 501720050c9bb070a86958077f7c23d78abb8093""",0.7,None,changed

1845,Cecily Jiang,jiangyx@fb.com,"""Fetch deprecated parameters

Reviewed By: KylinChang

Differential Revision: D18597911

fbshipit-source-id: f191ee37e9ade255c71f634546cfd5a1a36e9beb""",0.7,None,changed

1846,Lina Jin,lina@fb.com,"""generalize prediction results to support different use cases

Summary: as title

Reviewed By: KylinChang

Differential Revision: D18612909

fbshipit-source-id: 86b9005a56d0872974de2a1b62b8f54bbc66119e""",0.7,None,changed

1847,Christina Xu,christina1012@fb.com,"""bump version to 5.12.0

Summary: bump version to 5.12.0

Reviewed By: tianqibt

Differential Revision: D18806059

fbshipit-source-id: b28fe60719ec4c14ea4c512bfad1138f7a439fdf""",0.2,None,changed

1848,Christina Xu,christina1012@fb.com,"""log button text for SE

Summary: log button text for SE

Reviewed By: Oliverccccct

Differential Revision: D18774344

fbshipit-source-id: 54b2973ccff492071696dd010a6f51bd42d93b7c""",0.7,None,changed

1849,Zilin Zhang,kylinchang@fb.com,"""Remove the annotation processor

Summary: As title

Reviewed By: jingping2015

Differential Revision: D18773704

fbshipit-source-id: d609039849af777bd93c348b930cd1075503021c""",0.7,None,changed

1850,Christina Xu,christina1012@fb.com,"""Bump version

Summary: Bump version

Reviewed By: KylinChang

Differential Revision: D18654753

fbshipit-source-id: f3638a81ec81cc6adab33ff040ac6ac503080c7e""",0.2,None,changed

1851,Zilin Zhang,kylinchang@fb.com,"""Add UIThread check support

Reviewed By: Oliverccccct

Differential Revision: D18569316

fbshipit-source-id: 17d1a75a85e2f200063609b073eefa6a6058a807""",0.7,None,added

1852,Zilin Zhang,kylinchang@fb.com,"""Integrate AnnotationProcessor with FB Android SDK

Summary: Integrate AnnotationProcessor with FB Android SDK

Reviewed By: Mxiim

Differential Revision: D18568214

fbshipit-source-id: ebe26a790d700a5040d1e46bfa0a02224ad355fd""",0.7,None,changed

1853,Zilin Zhang,kylinchang@fb.com,"""Improve changelog

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D18633940

fbshipit-source-id: 9e1bb8c907cbaddf36aaf7220823461bbe849d32""",0.7,None,fixed

1854,Cecily Jiang,jiangyx@fb.com,"""Fix rules_uri to return null if there is no rule uri in model

Reviewed By: YOUDAN

Differential Revision: D18647928

fbshipit-source-id: 9255d8a7d361a5cec790b0730c91c5f8e36f3b0f""",0.7,None,fixed

1855,Calvin Mak,cmak@fb.com,"""Add sdk / sdk version to chrome custom tabs request

Summary: Webview requests has sdk request param so we know it's android sdk and the sdk version. We should do the same for CCT

Reviewed By: Mxiim

Differential Revision: D18630749

fbshipit-source-id: 08c2518d942416fb86adaa32b52fae9e42604d92""",0.7,None,added

1856,Joe Susnick,joesusnick@fb.com,"""Create SECURITY.md (#632)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [x] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [x] I've ensured that all existing tests pass and added tests (when/where necessary)
- [x] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [x] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Adding Security policy.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/632

Test Plan: N/A

Reviewed By: Mxiim

Differential Revision: D18604905

Pulled By: joesus

fbshipit-source-id: cf752e9571672246ca973dcb6ccdf0d32ade50f7""",0.7,None,added

1857,Tao Chen,oliverct@fb.com,"""Add demo view to RPSSample

Summary: - Add a auto app link view

Reviewed By: KylinChang

Differential Revision: D18597049

fbshipit-source-id: 3536561ba390d5b2d4ddb3d5033a9f6c3487dd53""",0.7,None,added

1858,Zilin Zhang,kylinchang@fb.com,"""Remove values-fb

Summary:
Remove values-fb and ignore the folder in .gitignore
https://github.com/facebook/facebook-android-sdk/issues/614

Reviewed By: YOUDAN

Differential Revision: D18624257

fbshipit-source-id: e87c1e6e3102aa0b59e9d6de91aa6b401922114d""",0.7,None,changed

1859,Maxim Goretskyy,maximg@fb.com,"""Improve grade build by removing errors [1/n]

Summary: Need to call super when overriding.

Reviewed By: joesus

Differential Revision: D18599292

fbshipit-source-id: 2a99b6c96ee66f130f144915542ea20ae3d8aba9""",0.7,None,fixed

1860,Christina Xu,christina1012@fb.com,"""Lowercase the text

Summary: Lowercase the text

Reviewed By: lia4

Differential Revision: D18604708

fbshipit-source-id: 663d85fb8b7ee903a9bb4874b0f158a7aa46f9d3""",0.7,None,changed

1861,Zilin Zhang,kylinchang@fb.com,"""Catch Security Exception in AccessTokenManager

Summary: As title

Differential Revision: D18589769

fbshipit-source-id: f43f3a1581c8213f2da8d87a71413d0a6be8d17d""",0.7,None,security

1862,Christina Xu,christina1012@fb.com,"""Bump version to 5.11.1

Reviewed By: KylinChang

Differential Revision: D18581754

fbshipit-source-id: 5dd7492ec2c9e0a6bbaa88a47720f81a977be820""",0.2,None,changed

1863,Christina Xu,christina1012@fb.com,"""add dense

Summary: as title

Reviewed By: Oliverccccct

Differential Revision: D18580835

fbshipit-source-id: 20b467980444461269f58d04d3d265c4d930c3db""",0.7,None,added

1864,Christina Xu,christina1012@fb.com,"""remove some data for listener

Summary: remove some data for listener

Reviewed By: tianqibt

Differential Revision: D18576331

fbshipit-source-id: 7cbab898d6f05fb1ce1441646f62186e6e0c412d""",0.7,None,changed

1865,Christina Xu,christina1012@fb.com,"""Bump version 5.11

Summary: Bump version 5.11

Reviewed By: tianqibt

Differential Revision: D18519031

fbshipit-source-id: 9a5a86356671087d00d81a227c0f581310e2fe53""",0.2,None,changed

1866,Zilin Zhang,kylinchang@fb.com,"""Fix travis tests (#628)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/628

As title

Reviewed By: tianqibt

Differential Revision: D18516468

fbshipit-source-id: 1c3105811d66091fa674df7930278f47ed45ea7b""",0.7,None,fixed

1867,Christina Xu,christina1012@fb.com,"""Several improvements

Summary: Several improvements

Reviewed By: KylinChang

Differential Revision: D18500376

fbshipit-source-id: df394c6a9daf3cb2c86cb4bcfd79079ef36e758d""",0.7,None,changed

1868,Christina Xu,christina1012@fb.com,"""remove native code

Summary: build successfully

Differential Revision: D18503430

fbshipit-source-id: ae0c0fa3df818514891122231a67a2300845460a""",0.7,None,changed

1869,Lina Jin,lina@fb.com,"""text vectorization with trim and join

Summary: as title

Reviewed By: YOUDAN

Differential Revision: D18503285

fbshipit-source-id: 0b46b3fbcc1c1baf843ebc701a9909f22a2b74f7""",0.7,None,changed

1870,Zilin Zhang,kylinchang@fb.com,"""Add java implementation for Mobile Runtime

Summary: As title

Differential Revision: D18502916

fbshipit-source-id: 16cdb7a1df8c8d77e9cc591857ab74138eecd18e""",0.7,None,added

1871,Yuxi Jiang,jiangyx@fb.com,"""Return refactor

Reviewed By: YOUDAN

Differential Revision: D18500661

fbshipit-source-id: 81c60e07893589c6588e4d24dad23cde8178e9ca""",0.7,None,changed

1872,Christina Xu,christina1012@fb.com,"""Lowercase app name

Reviewed By: tianqibt

Differential Revision: D18499416

fbshipit-source-id: 541d9dd6ef90406f9e413d14ce03b5375d360228""",0.7,None,changed

1873,Christina Xu,christina1012@fb.com,"""Improve feature extractor and consolidate consts

Reviewed By: dreamolight

Differential Revision: D18454673

fbshipit-source-id: a9e08ff52c217f1a15c00a34febaca5ad56e4453""",0.7,None,fixed

1874,Christina Xu,christina1012@fb.com,"""Only work for English apps

Summary: Only predict for English apps

Reviewed By: dreamolight

Differential Revision: D18435765

fbshipit-source-id: 12c8417c08e4ef65c2064efd456f925266b144fd""",0.7,None,changed

1875,Yuxi Jiang,jiangyx@fb.com,"""Cache model

Reviewed By: YOUDAN

Differential Revision: D18447422

fbshipit-source-id: 34ed2160cf763a14132d5db9a33a9f72342435f6""",0.7,None,changed

1876,Zilin Zhang,kylinchang@fb.com,"""Fix accesstoken NPE

Summary: In AppEventsLoggerImpl, AccessToken.getCurrentAccessToken() may return null and then switch to login thread which sets active access token, it will cause NPE in such a case. We can manually check whether the token is expired instead.

Reviewed By: jingping2015

Differential Revision: D18463709

fbshipit-source-id: 586efc3a705b3edca159d499bc6b7d465301c1ae""",0.7,None,fixed

1877,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: fc57be25232886972f7f5df1069938f8bee45c6f""",0.2,None,changed

1878,Christina Xu,christina1012@fb.com,"""track activity when initialization completed

Summary: track activity when initialization completed

Reviewed By: dreamolight

Differential Revision: D18445697

fbshipit-source-id: 637755fd6abe23c6f36054a6ca842e4d77fd4686""",0.7,None,changed

1879,Lina Jin,lina@fb.com,"""refactor model runtime namespace

Summary:
merge namespace mat and mat1
remove runtime code for the old model

Reviewed By: YOUDAN

Differential Revision: D18447818

fbshipit-source-id: aa57e59856a9a389abff6de8d13d53cddce49421""",0.2,None,changed

1880,Lina Jin,lina@fb.com,"""threshold validation for suggested events

Summary: add threshold validation

Reviewed By: YOUDAN

Differential Revision: D18446970

fbshipit-source-id: cdc0726bfd6ede08a1407b5fa2c1f9b69b3744bc""",0.7,None,added

1881,Christina Xu,christina1012@fb.com,"""fix the duplicate downloading

Summary: as title

Reviewed By: tianqibt

Differential Revision: D18445791

fbshipit-source-id: bb2ddf293c9384be19834da6cc66c82022232e9a""",0.7,None,fixed

1882,Christina Xu,christina1012@fb.com,"""Fix the url fetch as well as initializing weights

Summary: as title

Differential Revision: D18440199

fbshipit-source-id: 9e8a60046f85f19406b2d6bc70ae70d77dd1328a""",0.7,None,fixed

1883,Zilin Zhang,kylinchang@fb.com,"""Add NDK & Cmake to travis build (#622)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/622

As title

Differential Revision: D18430867

fbshipit-source-id: 3c609b7889b09ea9e0124170c455e5562f4a40b1""",0.7,None,added

1884,Christina Xu,christina1012@fb.com,"""add history manager

Summary: add history manager

Reviewed By: dreamolight

Differential Revision: D18417839

fbshipit-source-id: 4a0002423f0405e68fb22ec384066795dbc237f1""",0.7,None,added

1885,Christina Xu,christina1012@fb.com,"""Update text feature

Summary: Update text feature to latest version

Reviewed By: Oliverccccct

Differential Revision: D18417354

fbshipit-source-id: b391c6b5839d5996d2dcc35b45fe1a4d54a48765""",1,None,changed

1886,Christina Xu,christina1012@fb.com,"""Migrate post request for result

Reviewed By: dreamolight

Differential Revision: D18417303

fbshipit-source-id: 9eb7478058be58813b70b3f0982d172a8bfd295c""",0.7,None,changed

1887,Christina Xu,christina1012@fb.com,"""Migrate feature extractor

Reviewed By: dreamolight

Differential Revision: D18417270

fbshipit-source-id: ae823e7f00fd0d7e6a8d2890205ff7e42a98a809""",0.7,None,added

1888,Tao Chen,oliverct@fb.com,"""ignore some build files

Summary: Same as the title

Reviewed By: YOUDAN

Differential Revision: D18435487

fbshipit-source-id: c5abbb60f4d28bf60e8cda67c2bfa0bffbcd379f""",0.7,None,changed

1889,Christina Xu,christina1012@fb.com,"""Download rule file with given uri

Summary: As title

Reviewed By: dreamolight

Differential Revision: D18421735

fbshipit-source-id: 6b0c32a2751c0ea7055bb58146eca90a9cb2cdbe""",0.7,None,changed

1890,Yuxi Jiang,jiangyx@fb.com,"""Add feature manager

Reviewed By: YOUDAN

Differential Revision: D18430955

fbshipit-source-id: b35c87c58f7ec7ad7fb1118a61808e3e31c1d6a5""",0.7,None,added

1891,Zilin Zhang,kylinchang@fb.com,"""Ignore test (#617)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/617

Ignore test

Reviewed By: Oliverccccct

Differential Revision: D18387975

fbshipit-source-id: 37b151ba34eb6496bc1be98583ae4314f4813178""",0.7,None,changed

1892,Christina Xu,christina1012@fb.com,"""Migrate model runtime

Summary: migrate model runtime

Differential Revision: D18417577

fbshipit-source-id: 812d196d0e61a22eae6b35ca322cf72d5a9db31b""",1,None,changed

1893,Christina Xu,christina1012@fb.com,"""Migrate weights parsing

Differential Revision: D18417429

fbshipit-source-id: 34fa23daf25ccaae4aa411bab8466a40813cf6fe""",0.7,None,changed

1894,Christina Xu,christina1012@fb.com,"""Hook up prediction

Summary: as title

Differential Revision: D18417389

fbshipit-source-id: 79dc1e871bc21ac7607a52ca7f400960451a73a5""",0.7,None,changed

1895,Christina Xu,christina1012@fb.com,"""Enable SE when everything is ready

Reviewed By: Oliverccccct

Differential Revision: D18417106

fbshipit-source-id: da81f7fed2c47099fe01ab3a201eba915b492f5f""",0.7,None,changed

1896,Christina Xu,christina1012@fb.com,"""File downloader

Reviewed By: KylinChang, dreamolight

Differential Revision: D18406442

fbshipit-source-id: f80e14bf5d730a65ede909aaa1b7aade4bd83cb3""",0.7,None,changed

1897,Christina Xu,christina1012@fb.com,"""Migrate click listener and view hierarchy

Summary: as title

Reviewed By: KylinChang

Differential Revision: D18355875

fbshipit-source-id: 637b0445fbe79899223bc29c793d06d5ed631346""",0.7,None,changed

1898,Christina Xu,christina1012@fb.com,"""Migrate SuggestedEventsManager and ViewObserver

Summary: as title

Reviewed By: KylinChang

Differential Revision: D18354088

fbshipit-source-id: 015f21deea8f33bdcc42643ad8ff9d8cd3f2d7d5""",0.7,None,changed

1899,Yuxi Jiang,jiangyx@fb.com,"""Fetch setting from server

Reviewed By: YOUDAN

Differential Revision: D18381289

fbshipit-source-id: 4aa11b14a800992ccb4b38e5051c6d4d480f185c""",0.7,None,changed

1900,Tao Chen,oliverct@fb.com,"""Fix Test failed: android_automation_rpssample_release_build

Summary:
Add proguard rule:
    -dontwarn com.google.android.material.**

Reviewed By: KylinChang

Differential Revision: D18322181

fbshipit-source-id: 3932b6b534bbbbf3b139c8a67caa40458a704996""",0.7,None,fixed

1901,Zilin Zhang,kylinchang@fb.com,"""Fix Unit test (#613)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/613

Fix unit test

Reviewed By: jingping2015

Differential Revision: D18221413

fbshipit-source-id: ee087bca4c6a7c3694ecac4f253a96d09152a76b""",0.7,None,fixed

1902,Tao Chen,oliverct@fb.com,"""Add Auto Applink Debug Tool Logic

Summary:
- Generate url from App ID and product id
- Open the generated url

Reviewed By: KylinChang

Differential Revision: D18219617

fbshipit-source-id: 94bf9de9d18e0c6b9345a85272933df2ed5f2e37""",0.7,None,added

1903,Tao Chen,oliverct@fb.com,"""Add Auto Applink Debug Tool View

Summary:
- Add a bottom navigation bar to main activity
- Add a auto app link debug tool fragment

Reviewed By: KylinChang

Differential Revision: D18214465

fbshipit-source-id: 5745751c855178bf601438a492f8825553a70d6c""",0.7,None,added

1904,Tao Chen,oliverct@fb.com,"""Add some value xml for Auto Applink Debug Tool

Summary:
- icon for RPS game tab
 - icon for auto app link debug tool tab
 - some theme colors value
 - some dimens for padding and font size
 - some string value

Reviewed By: KylinChang

Differential Revision: D18216308

fbshipit-source-id: 5100c0bf0cfd88be0c0fd158d901c1913990bab9""",0.7,None,added

1905,Yuxi Jiang,jiangyx@fb.com,"""Add suggested events folder in core under appevents

Reviewed By: KylinChang

Differential Revision: D18050230

fbshipit-source-id: 8c66f02ec8ea57d355bbcb43bd64616950019e74""",0.7,None,added

1906,Jing Ping,jingping@fb.com,"""SDK version bump v(5.2.0) and API to v5.0

Summary: Upgrade API call version

Reviewed By: joesus

Differential Revision: D18197452

fbshipit-source-id: 7752e99fd808aaf826dc0cdd8aaaacf927339660""",0.2,None,changed

1907,Stan Wu,dreamolight@fb.com,"""Add notification options to receive updates from travis-ci

Summary: As title

Reviewed By: tianqibt

Differential Revision: D18112225

fbshipit-source-id: 3289ce13b5294d9c6fb7b0060e12b5fef6e2eb65""",0.7,None,added

1908,Zilin Zhang,kylinchang@fb.com,"""Add comment for Auto App Link

Summary: as title

Reviewed By: Oliverccccct

Differential Revision: D18071040

fbshipit-source-id: 2f1f3eee2ea6e4284c48a5f942700ad53b4b60a9""",0.7,None,added

1909,Zilin Zhang,kylinchang@fb.com,"""Change Auto App Link param name

Summary: Change Auto App Link param name

Reviewed By: Oliverccccct

Differential Revision: D18017962

fbshipit-source-id: 4c303379ed69efe62bc28cc9c702cf9a11f4f5e2""",0.7,None,changed

1910,Jing Ping,jingping@fb.com,"""Fix hash tag in photo share

Summary: As title

Reviewed By: Oliverccccct

Differential Revision: D17988319

fbshipit-source-id: d51d8e0db91ca808ab3e7079bbff27e31e1a5957""",0.7,None,fixed

1911,Yuxi Jiang,jiangyx@fb.com,"""Add test files for aam unit test

Reviewed By: YOUDAN

Differential Revision: D17773924

fbshipit-source-id: 0bc145b7141a5651dfb1f4e59526f001141e5b7b""",0.7,None,added

1912,Zilin Zhang,kylinchang@fb.com,"""AppLinkData implements Parcelable

Summary: AppLinkData implements Parcelable interface and will be put in Intent as a Parcelable

Reviewed By: dreamolight

Differential Revision: D17967231

fbshipit-source-id: 7a4907d5858cf68509c84487784456183920fde8""",0.7,None,changed

1913,Zilin Zhang,kylinchang@fb.com,"""Add Automatic Deep Link handle functions

Summary:
- Add Automatic Deep Link handle functions
- Log events when automatic link is handled successfully

Reviewed By: dreamolight

Differential Revision: D17904586

fbshipit-source-id: 1c89f5f117263dc98bf09e576768afb1a397422b""",0.7,None,added

1914,Wilder Pereira,wilder_roberto@hotmail.com,"""Add gradle syntax highlight (#589)

Summary:
Added syntax highlighting to gradle code snippets to improve the README.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/589

Reviewed By: jingping2015

Differential Revision: D17932266

Pulled By: joesus

fbshipit-source-id: 8478d7887f454119e94368ca73123663a42f34b3""",0.7,None,added

1915,Yuxi Jiang,jiangyx@fb.com,"""Update UserDataStore to use funtion in utility

Reviewed By: YOUDAN

Differential Revision: D17963696

fbshipit-source-id: ee31479ff8e31553096270387ab2dede10aac33f""",0.7,None,changed

1916,Build Service,svcscm@fb.com,"""translation auto-update for i18n/twilight.config.json on master

fbshipit-source-id: 4bce81dd4ef8369d77a486767f46b8376ab005a6""",0.2,None,changed

1917,Yuxi Jiang,jiangyx@fb.com,"""Add two utility function into core

Reviewed By: YOUDAN

Differential Revision: D17934848

fbshipit-source-id: 65df46f04fd0e1f192a991e617535f299bd7666f""",0.7,None,added

1918,surajkamblesk,alphacoderofficial@gmail.com,"""simple markup fixes (#594)

Summary:
Thanks for proposing a pull request!

To help us review the request, please complete the following:

- [ ] sign [contributor license agreement](https://developers.facebook.com/opensource/cla)
- [ ] I've ensured that all existing tests pass and added tests (when/where necessary)
- [ ] I've updated the documentation (when/where necessary) and [Changelog](CHANGELOG.md) (when/where necessary)
- [ ] I've added the proper label to this pull request (e.g. `bug` for bug fixes)

## Pull Request Details

Describe what you accomplished in this pull request (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/594

Test Plan: **Add your test plan here**

Reviewed By: tianqibt

Differential Revision: D17932461

Pulled By: joesus

fbshipit-source-id: 82cf916254b06170103bbceaddc655c5c69d4393""",0.7,None,added

1919,Zilin Zhang,kylinchang@fb.com,"""Add parse functions of protocol data

Summary: Add parse functions of protocol data which is defined in https://developers.facebook.com/docs/applinks/navigation-protocol

Reviewed By: dreamolight

Differential Revision: D17903756

fbshipit-source-id: 1502adb39a20017eb28d26b2e1a0d117c53d106e""",0.7,None,added

1920,Zilin Zhang,kylinchang@fb.com,"""Add annotation support for facebook-applinks

Summary: Add annotation support for facebook-applinks along with simple improvements

Reviewed By: dreamolight

Differential Revision: D17902553

fbshipit-source-id: 464c2fe44bbdffe0d56ba504fca2503f271b315f""",0.7,None,added

1921,Yuxi Jiang,jiangyx@fb.com,"""Separate remove unused rules form updateRules

Reviewed By: tianqibt

Differential Revision: D17882160

fbshipit-source-id: eb37d11194c19a65d674f608e75cfeb20d09b7de""",0.7,None,removed

1922,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: c90f45c68eedee17cd298af4b012f7575c5db3a5""",0.2,None,changed

1923,Nick Shearer,nickshearer@fb.com,"""Fix potential NPE in DeviceRequestsHelper

Summary: Fixes a potential null pointer exception that could occur when displaying the device auth dialog.

Differential Revision: D17853711

fbshipit-source-id: bc449a3165a82504ef22381b5e5b2c5ca8121af8""",0.7,None,fixed

1924,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 629a3920a1b4414543978203ca4eed38e63c8888""",0.2,None,changed

1925,Zilin Zhang,kylinchang@fb.com,"""Bump version to v5.8.0

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D17818406

fbshipit-source-id: e357b6e9f9fc570ff087759db94fc7050715c7b4""",0.2,None,changed

1926,Christina Xu,christina1012@fb.com,"""Several fixes for AAM

Reviewed By: dreamolight

Differential Revision: D17792770

fbshipit-source-id: 03231e5598409b9c7d185d8a9932ebe61d034e4b""",0.7,None,changed

1927,Tianqi Li,tianqibt@fb.com,"""add sub sub feature for feature manager

Summary: The same as D17780216

Reviewed By: KylinChang

Differential Revision: D17797508

fbshipit-source-id: 79506f60f553e7321f1e95c7ac1df20af72df1e0""",0.7,None,added

1928,Yuxi Jiang,jiangyx@fb.com,"""Better naming

Reviewed By: YOUDAN

Differential Revision: D17744318

fbshipit-source-id: 178f08111b5de319a2d4f6fa357dc89d9e77c992""",0.7,None,changed

1929,Yuxi Jiang,jiangyx@fb.com,"""Enable aam only when LAT flag is true (Updated)

Reviewed By: dreamolight

Differential Revision: D17785738

fbshipit-source-id: f5895398e6dd00fc24cf20ce36465ca4f2f7e179""",0.7,None,changed

1930,Zilin Zhang,kylinchang@fb.com,"""Bump version to v5.5.2

Summary: As title

Reviewed By: dreamolight

Differential Revision: D17772577

fbshipit-source-id: 9e575b85bd6415bdb0f3b86a6bcfa895b2d0b302""",0.2,None,changed

1931,Yuxi Jiang,jiangyx@fb.com,"""Fix get sibling indicator not cast into lower case

Differential Revision: D17765627

fbshipit-source-id: c0574faa59f1da6dda8ee1de663f3bd0229a9c53""",0.7,None,fixed

1932,Zilin Zhang,kylinchang@fb.com,"""Fix issue of listing crash report files

Summary:
Github issue: https://github.com/facebook/facebook-android-sdk/issues/590

listFiles may return null if the directory fails security check and we need to check null here:
https://developer.android.com/reference/java/io/File#listFiles()

Differential Revision: D17743813

fbshipit-source-id: 977217e928e02d397eed7cb9fa80a7b51f234f1f""",0.7,None,fixed

1933,Yuxi Jiang,jiangyx@fb.com,"""Fix matching execute logic and move get sibling logic into MetadataMatcher

Reviewed By: YOUDAN

Differential Revision: D17760424

fbshipit-source-id: 12e70cb567d4ddbaa60a68a7cfff5b1fafab5072""",0.7,None,fixed

1934,Yuxi Jiang,jiangyx@fb.com,"""Delete onFocusChangeListener which is not working

Differential Revision: D17754931

fbshipit-source-id: 4651babaec61fc74929ea7eee0b440cab06da271""",0.7,None,removed

1935,Yuxi Jiang,jiangyx@fb.com,"""Fix remove rules in cache

Reviewed By: YOUDAN

Differential Revision: D17753546

fbshipit-source-id: 9375e2f9533b412ae580a0a294f9c1fe6bc8eb3a""",0.7,None,fixed

1936,Yuxi Jiang,jiangyx@fb.com,"""Remove unused rule in cache

Reviewed By: YOUDAN

Differential Revision: D17670844

fbshipit-source-id: 97107408466ac3b5acf409a5616c06f805b13e10""",0.7,None,removed

1937,Yuxi Jiang,jiangyx@fb.com,"""Fetch LAT flag

Reviewed By: YOUDAN

Differential Revision: D17728349

fbshipit-source-id: 7d23ffa3e55fa325bb5c14db187cd483342e26e5""",0.7,None,changed

1938,Yuxi Jiang,jiangyx@fb.com,"""Remove enable rules

Differential Revision: D17696541

fbshipit-source-id: a8cb0abbb27906ab29495db76e74eb668db1f8e7""",0.7,None,changed

1939,Christina Xu,christina1012@fb.com,"""Update GK for AAM

Summary: Update GK for AAM

Reviewed By: dreamolight

Differential Revision: D17700832

fbshipit-source-id: a498c83365e0eb7c569561b93f26ae1d81abf088""",0.7,None,changed

1940,Yuxi Jiang,jiangyx@fb.com,"""Move RestriciveDataManager into appEventsManager and fix a lint

Reviewed By: YOUDAN

Differential Revision: D17675637

fbshipit-source-id: bd781d02a23765da083cb206b59d32ec079defdc""",0.7,None,fixed

1941,Yuxi Jiang,jiangyx@fb.com,"""Add AppevetnsManager under appevents and enable MetadataIndexer

Reviewed By: KylinChang

Differential Revision: D17537502

fbshipit-source-id: 2b7019005cd5173da9df13fa6028d1d5e65f3ed7""",0.7,None,added

1942,Yuxi Jiang,jiangyx@fb.com,"""Delete untouched code in MetadataIndexer

Reviewed By: YOUDAN

Differential Revision: D17670064

fbshipit-source-id: 8b93d371bf533fc18f2973fe9a4af4398a847e42""",0.7,None,removed

1943,Yuxi Jiang,jiangyx@fb.com,"""Add onFocusChangeListener for each EditText View

Reviewed By: YOUDAN

Differential Revision: D17609845

fbshipit-source-id: 08ef540f0531ccf29e7c51c52db0c1c332b888fc""",0.7,None,added

1944,Christina Xu,christina1012@fb.com,"""Update keepnames to keep for IAP

Reviewed By: dreamolight

Differential Revision: D17632097

fbshipit-source-id: b0411102f83c8f17ce7ed0b8de9493a8790b8ca2""",0.7,None,changed

1945,Christina Xu,christina1012@fb.com,"""Swallow exceptions

Differential Revision: D17631434

fbshipit-source-id: fc8c9635561e6493e157201b8bc69583f1b8d985""",0.7,None,changed

1946,Christina Xu,christina1012@fb.com,"""Log suggested event

Summary: as title

Differential Revision: D17588567

fbshipit-source-id: 75b45ca7606364340667a3c1370b241630e4f31f""",0.7,None,changed

1947,Tianqi Li,tianqibt@fb.com,"""move restrictive data manager to a dedicated folder

Summary: As title. This is the first step for self-diagnostic & self-destruction. We need to move files to dedicated folder. So classes can be easily mapped to features.

Reviewed By: YOUDAN, KylinChang

Differential Revision: D17610333

fbshipit-source-id: 07291705a8f67776412065a3e0ef76fbcbe0d489""",0.7,None,changed

1948,Christina Xu,christina1012@fb.com,"""Run js code in coffeeshop

Summary:
Run js code in coffeeshop.

To set up the environment, look at the github: https://github.com/LiquidPlayer/LiquidCore/tree/master/LiquidCoreAndroid#hallo-die-weld-micro-service-tutorial

If you met permission error when installing, you can run
```
npm i -g liquidcore-cli --unsafe-perm=true --allow-root
```

Reviewed By: dreamolight

Differential Revision: D17595785

fbshipit-source-id: 69fa93b94896f06ba42955fef02e4d2964010aae""",0.7,None,changed

1949,Tao Chen,oliverct@fb.com,"""Refactor logEvent() in CodelessLoggingEventListener

Summary: Same as the title.

Reviewed By: YOUDAN

Differential Revision: D17613131

fbshipit-source-id: e736211319398ad8ac7445c46b0f6350e7212b65""",0.7,None,changed

1950,Christina Xu,christina1012@fb.com,"""Add the missing Nullable annotation for access token

Summary: Add the missing Nullable annotation for access token

Reviewed By: tianqibt

Differential Revision: D17612850

fbshipit-source-id: 1d29d9341a0358164755cabdb514d0f6bda2af2a""",0.7,None,added

1951,Tao Chen,oliverct@fb.com,"""Handle adding CodelessLoggingEventListener for ListView

Summary: - Handle setting up CodelessLogging for ListView

Reviewed By: YOUDAN

Differential Revision: D17558734

fbshipit-source-id: 1c0a8f2e4400a909e4dcb28e621b844a891510e6""",0.7,None,changed

1952,Yuxi Jiang,jiangyx@fb.com,"""Fetch rule from server and construct rule

Reviewed By: YOUDAN

Differential Revision: D17594588

fbshipit-source-id: 43723221c05169484b7dd94ea39b1f1b6b2dd594""",0.7,None,changed

1953,Yuxi Jiang,jiangyx@fb.com,"""Add new field to fetch app setting of aam

Reviewed By: YOUDAN

Differential Revision: D17566620

fbshipit-source-id: f72e0dadeccab6b4fae0ce7041209097912700a4""",0.7,None,added

1954,Yuxi Jiang,jiangyx@fb.com,"""Add matchingSiblingIndicators into core

Reviewed By: YOUDAN

Differential Revision: D17552820

fbshipit-source-id: 58096842bc1fa458e5dde3ced8123a632d8d46d4""",0.7,None,added

1955,Yuxi Jiang,jiangyx@fb.com,"""Fix wrong feature name

Reviewed By: tianqibt

Differential Revision: D17553901

fbshipit-source-id: e77f71c3147b622f001dda85c3b0f32a49dcf538""",0.7,None,fixed

1956,Yuxi Jiang,jiangyx@fb.com,"""Add MetadataIndexer into FeatureManager

Reviewed By: KylinChang

Differential Revision: D17509016

fbshipit-source-id: 852208955af09c93c69d2f963696d288ee348d40""",0.7,None,added

1957,Christina Xu,christina1012@fb.com,"""Fix the crash of InAppPurchaseActivityLifecycleTracker

Reviewed By: dreamolight

Differential Revision: D17551783

fbshipit-source-id: 438f47b032bcff71274157ab46be2350f7f8f350""",0.7,None,fixed

1958,Yuxi Jiang,jiangyx@fb.com,"""Change RestrictTo into class level in UserDataStore

Reviewed By: YOUDAN

Differential Revision: D17538354

fbshipit-source-id: 72e8141823de4661bb7bff6598789dbe37940bb2""",0.7,None,changed

1959,Yuxi Jiang,jiangyx@fb.com,"""Format code in InstrumentManager

Reviewed By: dreamolight

Differential Revision: D17534956

fbshipit-source-id: ee80df5d1cb4da4f243e5aa7e3c587dff96fdec2""",0.7,None,changed

1960,Yuxi Jiang,jiangyx@fb.com,"""Change the folder name from Metadata to aam in core

Reviewed By: KylinChang

Differential Revision: D17530451

fbshipit-source-id: 3f9d8a9288b4f1820b48726922b46344765fae6e""",0.7,None,changed

1961,Zilin Zhang,kylinchang@fb.com,"""Fix memory leak in Codeless

Summary:
1. CodelessManager should be called in UIThread and we fetch Codeless feature enabled flag outside the ActivityLifecycleCallback
2. Use weak reference to avoid memory leak of activities

Reviewed By: dreamolight

Differential Revision: D17490885

fbshipit-source-id: 2c95f5f15f20c6f1c77890e46086f127a3d353de""",0.7,None,fixed

1962,Christina Xu,christina1012@fb.com,"""restrict the function to group id and make getClassTypeBitmask public

Summary: [easy] restrict the function to group id and make getClassTypeBitmask public

Differential Revision: D17462986

fbshipit-source-id: 4d56feada95bbcc8cb5fe9e668cffc2721302bee""",0.7,None,changed

1963,Christina Xu,christina1012@fb.com,"""Fix incorrect start tracking

Summary: fix incorrect start tracking

Reviewed By: tianqibt

Differential Revision: D17456978

fbshipit-source-id: c7c26a7a9963f1239fbf523d37527df4e853ff72""",0.7,None,fixed

1964,Yuxi Jiang,jiangyx@fb.com,"""Add remove rule into MetadataRule in core

Summary: Small change based on D17407134

Reviewed By: YOUDAN

Differential Revision: D17460350

fbshipit-source-id: 7c0f9b3fdef3a4b557ce3fcbfa31c6d036d009e8""",0.7,None,added

1965,Yuxi Jiang,jiangyx@fb.com,"""Move files form beta to core

Reviewed By: YOUDAN

Differential Revision: D17407134

fbshipit-source-id: ac849dab1e5072d55184afce4767b8833e2856e9""",0.7,None,changed

1966,Yuxi Jiang,jiangyx@fb.com,"""Add removeRule into UserDataSetter

Reviewed By: YOUDAN

Differential Revision: D17211714

fbshipit-source-id: 41752c3cf200d52662366f432d09babca4375e1c""",0.7,None,added

1967,Yuxi Jiang,jiangyx@fb.com,"""Add dedup into userDataStore

Reviewed By: YOUDAN

Differential Revision: D17210347

fbshipit-source-id: 5598d7b2ae93373848c6fd97e696b63bc7baf86a""",0.7,None,added

1968,Tao Chen,oliverct@fb.com,"""Skip AdapterView when setOnClickListener()

Summary:
Try to fix Exception:
https://pxl.cl/KWsq

Skip AdapterView for release next week

Reviewed By: YOUDAN

Differential Revision: D17375244

fbshipit-source-id: 98241c5745cbf7904d6962e5f4f7d5c7aa7a53ec""",0.7,None,fixed

1969,Christina Xu,christina1012@fb.com,"""Fix the incorrect exception

Reviewed By: jingping2015

Differential Revision: D17378634

fbshipit-source-id: 47a38a90ebe4f98618f673ddb2ea317d7433b149""",0.7,None,fixed

1970,Tao Chen,oliverct@fb.com,"""Slightly Refactor on Codeless Listener

Reviewed By: KylinChang

Differential Revision: D17252114

fbshipit-source-id: ffddc996ce2716f8e239884b9936e94f5ed0a15e""",0.7,None,changed

1971,Christina Xu,christina1012@fb.com,"""Change some simple functions

Reviewed By: dreamolight

Differential Revision: D17321514

fbshipit-source-id: fbe14502ab072ac5e28224dba9eac2f9ac80758b""",0.7,None,changed

1972,joesusnick,joesusnick@gmail.com,"""Updating templates for issues and pull requests. (#579)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)

Updating PR template and issue templates to help pre-empt already answered questions.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/579

Reviewed By: jingping2015

Differential Revision: D17333482

Pulled By: joesus

fbshipit-source-id: a8707704653ac1ea52ba015797fe9ab1a657c5a1""",0.7,None,changed

1973,Christina Xu,christina1012@fb.com,"""Stop using reflection to check if the view clickable

Summary: Stop using reflection to check if the view clickable

Reviewed By: dreamolight

Differential Revision: D17321318

fbshipit-source-id: d4f84c7b7d2ab8e96e6f1e696be968a09a47df28""",0.7,None,changed

1974,Zilin Zhang,kylinchang@fb.com,"""Simple clean up

Summary: Clean up facebook-applinks

Differential Revision: D17252564

fbshipit-source-id: 5db0909ed26fd24e6ded77952e986b2b4af39b9f""",0.7,None,changed

1975,Stan Wu,dreamolight@fb.com,"""Bump Version: 5.5.1

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D17208977

fbshipit-source-id: 909230345fd1d83303cb921045adf82ad0508693""",0.2,None,changed

1976,Zilin Zhang,kylinchang@fb.com,"""Fix NPE in FetchedAppGateKeepersManager

Summary: There is a chance that callback from callbacks.poll() can be null, and it will introduce NPE issue

Reviewed By: dreamolight

Differential Revision: D17186898

fbshipit-source-id: 3f11e924c3485bb5611d11e5b88ecf358e0022be""",0.7,None,fixed

1977,Tao Chen,oliverct@fb.com,"""Refactor CodelessMatcher and ButtonIndexer into singleton class

Reviewed By: YOUDAN

Differential Revision: D17178794

fbshipit-source-id: 097b2e21df85d3d90ef0fd5e515d5dcda2945b3f""",0.7,None,changed

1978,Tao Chen,oliverct@fb.com,"""Replace AccessibilityDelegate with dynamic binding OnClickListener

Reviewed By: YOUDAN

Differential Revision: D17125465

fbshipit-source-id: f20954eb82ba220ee160a753f0701276dbb2acaf""",0.7,None,changed

1979,Zilin Zhang,kylinchang@fb.com,"""Bump Version: 5.5.0

Summary: As title

Reviewed By: dreamolight

Differential Revision: D17145041

fbshipit-source-id: 8f8f7a23a66932401ced39620c5563601c995a33""",0.2,None,changed

1980,Zilin Zhang,kylinchang@fb.com,"""Fix cache directory issue in CrashReport

Summary: FacebookSDK.getCacheDir() may cause lock in some cases and we use FacebookSDK.getApplicationContext().getCacheDir() instead

Reviewed By: dreamolight

Differential Revision: D17144611

fbshipit-source-id: 85542716fe94e034dc7021bc671ef493ecf9d8dd""",0.7,None,fixed

1981,Zilin Zhang,kylinchang@fb.com,"""Force FeatureManager to fetch latest GKs before enabling any feature

Summary: Force FeatureManager to fetch latest GKs before enabling any feature

Reviewed By: dreamolight

Differential Revision: D17115669

fbshipit-source-id: c470741c61714c0983356a924ce9968faae4e163""",0.7,None,added

1982,Paul O'Shannessy,poshannessy@fb.com,"""Adopt Contributor Covenant

Summary:
In order to foster healthy open source communities, we're adopting the
[Contributor Covenant](https://www.contributor-covenant.org/). It has been
built by open source community members and represents a shared understanding of
what is expected from a healthy community.

Reviewed By: josephsavona, danobi, rdzhabarov

Differential Revision: D17104640

fbshipit-source-id: d210000de686c5f0d97d602b50472d5869bc6a49""",0.7,None,changed

1983,Zilin Zhang,kylinchang@fb.com,"""Add Callback for loadAppGateKeepersAsync to provide the ability to wait for the latest GKs

Summary:
1. Add Callback for loadAppGateKeepersAsync to provide the ability to wait for the latest GKs
2. Simple annotations formatting

Reviewed By: dreamolight

Differential Revision: D17102426

fbshipit-source-id: a7c9ae13ace6cfcbe8eadd2a9dbe6bc2da378c15""",0.7,None,added

1984,Christina Xu,christina1012@fb.com,"""Add changelog for 5.1.1

Differential Revision: D17085808

fbshipit-source-id: 971fee12cf311953416596deb274326376860b04""",0.7,None,added

1985,Tyler Fang,tfa@fb.com,"""Attach access token for fetch image request if there's one available

Summary: Attach an access token (if there is one available and active) for fetching user/picture in Image Request.

Reviewed By: jingping2015

Differential Revision: D17048167

fbshipit-source-id: 09d0c839e4b97cdece6c0d9dc6d0ec2bea30e8ea""",0.7,None,changed

1986,Jing Ping,jingping@fb.com,"""Update CHANGELOG.md (#568)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [ ] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [ ] submit against our `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/568

Reviewed By: joesus

Differential Revision: D16927650

Pulled By: jingping2015

fbshipit-source-id: e8f30477d4eae5f64a8a39bc66ca9feeab793386""",0.7,None,changed

1987,Lina Jin,lina@fb.com,"""Report Errors in FacebookException

Summary:
Currently we are report error leveraging on Utility.logd, which also contains the warning info messages.
This diff report hard errors in FacebookException

Reviewed By: KylinChang

Differential Revision: D16911810

fbshipit-source-id: 6f59ac40e100bd733a7e88f557df2e2df6f07746""",0.7,None,changed

1988,Stan Wu,dreamolight@fb.com,"""Turning off new added features by default

Summary: GK for instrument features will be off at beginning, it makes more sense to turn off these features before GK turned on for 100% public

Reviewed By: tianqibt

Differential Revision: D16853218

fbshipit-source-id: 3b247b32e4fa9ff56830d95e6ed885fbe44c393f""",0.7,None,added

1989,Lina Jin,lina@fb.com,"""Enable auto log for error report

Summary: title

Reviewed By: KylinChang

Differential Revision: D16847194

fbshipit-source-id: e64874c8340a93fa70fbd813b79667b12ad8dcd4""",0.7,None,changed

1990,Zilin Zhang,kylinchang@fb.com,"""Fix unit test

Summary: Fix unit test

Differential Revision: D16845685

fbshipit-source-id: 3eb34320eb451831d750005e5dd2b36e31f08b04""",0.7,None,fixed

1991,Lina Jin,lina@fb.com,"""File operations upon sdk initialized

Summary:
- integrate error report upon app initialize
- send error reports to logview

Reviewed By: dreamolight

Differential Revision: D16831577

fbshipit-source-id: 39a7bbe362b697fc901f29b5ba80dcd1c7002c29""",0.7,None,changed

1992,Lina Jin,lina@fb.com,"""Integrate with Error Loggings

Summary: integrate error report data with Utility.logd

Reviewed By: dreamolight

Differential Revision: D16799769

fbshipit-source-id: 898b0ed81954867b3fd0b45221d91da4399f555c""",0.7,None,changed

1993,Zilin Zhang,kylinchang@fb.com,"""SDK version bump v(5.4.0)

Summary: SDK version bump from (5.2.0) to (5.4.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: YOUDAN

Differential Revision: D16839234

fbshipit-source-id: 7ee307e54d2473b378a567a7c13b50f21dcfa525""",0.2,None,changed

1994,Zilin Zhang,kylinchang@fb.com,"""Refactor FetchedAppGateKeepersManager

Summary:
refactor FetchedAppGateKeepersManager

- move loading cache outside of executor
- allows maximum one thread to fetch network request

Reviewed By: dreamolight

Differential Revision: D16834430

fbshipit-source-id: a17c85a34c1904c6c5f9c51aa4a7c23311308e5b""",0.7,None,changed

1995,Zilin Zhang,kylinchang@fb.com,"""refactor sending Crash Reports

Summary: refactor sending Crash Reports

Differential Revision: D16833373

fbshipit-source-id: 9f92245cc769294c998d492dcdbf4a96a2c99c7f""",0.7,None,changed

1996,Stan Wu,dreamolight@fb.com,"""Make sure there is one thread at maximum fetching codeless status

Summary: As title, we shall not fetch again while we're already fetching it.

Differential Revision: D16833142

fbshipit-source-id: 740d66318603c69ccffdd43e0b253d1af76b1b67""",0.7,None,changed

1997,Zilin Zhang,kylinchang@fb.com,"""Add MAX NUM limit for CrashReport

Summary: Add MAX NUM limit for crash report and only send the top 5 most recent crash reports

Reviewed By: tianqibt

Differential Revision: D16801361

fbshipit-source-id: f510c9e48c6266f85ebb96d654856e2564275e18""",0.7,None,added

1998,Lina Jin,lina@fb.com,"""Add ErrorReportData

Summary: Add ErrorReportData as an API for reading and saving local error data.

Reviewed By: KylinChang

Differential Revision: D16797288

fbshipit-source-id: bebf1b7705bfff7f905a159d336e21a778ad03e1""",0.7,None,added

1999,Lina Jin,lina@fb.com,"""Add GK for error report in feature manager

Summary: title

Reviewed By: KylinChang

Differential Revision: D16793353

fbshipit-source-id: 413fe5f89608d66dfad1e4c44cf6f38c8ecfa615""",0.7,None,added

2000,Zilin Zhang,kylinchang@fb.com,"""Add helper functions for sending Instrument reports

Summary:
Add helper functions for sending Instrument reports:
1. Add general sendReports function
2. Add sendCrashReports function for CrashReport

Reviewed By: dreamolight

Differential Revision: D16782282

fbshipit-source-id: ef1d0253ca2ee3699827b0b6fc96556254dbed99""",0.7,None,added

2001,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: c7961a626170b6eeaa9fc0f321535b8acc735c83""",0.2,None,changed

2002,Zilin Zhang,kylinchang@fb.com,"""Add InstrumentManager

Summary: Add InstrumentManager which manages Instrument functionality including CrashReport

Reviewed By: dreamolight

Differential Revision: D16782114

fbshipit-source-id: fa4e8652f519248db03d19bf237d1599a0d96a24""",0.7,None,added

2003,Zilin Zhang,kylinchang@fb.com,"""Add App Version to CrashReport

Summary: Add App Version to provide more information for crash report.

Differential Revision: D16781944

fbshipit-source-id: 88b1e273d38b8a7069be2f7abad27283502b6146""",0.7,None,added

2004,Zilin Zhang,kylinchang@fb.com,"""Add file operations to InstrumentUtility

Summary:
1. Add file operations to InstrumentUtility
2. CrashReportData uses those operations to save/load content

Reviewed By: dreamolight

Differential Revision: D16588197

fbshipit-source-id: 5a1c46c4ba9867f0309b78e5814aa971cb887202""",0.7,None,added

2005,Kanghee Park,khp@fb.com,"""Add setting for testing Infobip integration

Summary: This allows setting the flag to enable Infobip testing on sms sends via setUseInfobipForSms(true) if the app is configured correctly in the developers portal.

Reviewed By: dreamolight

Differential Revision: D16387244

fbshipit-source-id: f1f6560ae41d0f22d1dd3801c1e97e720ae0912c""",0.7,None,added

2006,Zilin Zhang,kylinchang@fb.com,"""Add crashreport folder and move corresponding files to the folder

Summary: Add crashreport folder and move corresponding files to the folder

Reviewed By: dreamolight

Differential Revision: D16753836

fbshipit-source-id: aee417447c4e8ab502b0b6be0a607a095f92c732""",0.7,None,added

2007,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 70a0245c6e599d9198eab3521965876afe9c94e8""",0.2,None,changed

2008,Stan Wu,dreamolight@fb.com,"""GK restrictive data filtering with feature manager

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D16618684

fbshipit-source-id: 9267511a0fc9c8603d6c767e88672519902cd31f""",0.7,None,added

2009,Zilin Zhang,kylinchang@fb.com,"""Add SDK-related helper function

Summary: Add a helper function to check whether a Throwable is SDK-related

Reviewed By: dreamolight

Differential Revision: D16643908

fbshipit-source-id: 62e8a2fd72894cceb69639b0179401a5d65f7606""",0.7,None,added

2010,Zilin Zhang,kylinchang@fb.com,"""Add CrashReportData

Summary: Add CrashReportData, which can convert crash data to GraphRequest and String. It can also handles with saving and clearing crash data.

Reviewed By: dreamolight

Differential Revision: D16514645

fbshipit-source-id: 59788d04c55139d31e4c2294820fcb809f3b9e30""",0.7,None,added

2011,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: d90b5edde0fe80c9682048414ee55cd39be4d2d9""",0.2,None,changed

2012,Jing Ping,jingping@fb.com,"""update v5.2.0 changelog

Summary: update changelog

Reviewed By: dreamolight

Differential Revision: D16700747

fbshipit-source-id: 0554d976728064786b1f50230b1e36f94a346f7b""",0.7,None,changed

2013,Stan Wu,dreamolight@fb.com,"""Refactor codeless events and GK it with feature manager

Summary: As title, decouple codeless from other classes and GK it.

Reviewed By: wi3lau

Differential Revision: D16619472

fbshipit-source-id: 0247a3766e7fce9d5d0fbfc7b16c3b1ee4864447""",0.7,None,changed

2014,Zilin Zhang,kylinchang@fb.com,"""Add CrashHandler

Summary:
1. Create Instrument folder for Instrument Classes
2. Add CrashHandler

Reviewed By: dreamolight

Differential Revision: D16479073

fbshipit-source-id: f86cd1a803e44843ccb91620d6eb4043f18817ec""",0.7,None,added

2015,Zilin Zhang,kylinchang@fb.com,"""Fix broken test

Summary: Previous test class won't initialize UserSettingsManager class and this fix mock the SharedPreference for UserSettingsManager

Reviewed By: tianqibt

Differential Revision: D16677639

fbshipit-source-id: 56e8a579ca54c444b3ceffeb15c1aeb83d36ab2a""",0.7,None,fixed

2016,Stan Wu,dreamolight@fb.com,"""Fix issue that stop sending install events after a failed request

Summary:
`lastPing` will be set when there is no exception from graph request, however, graph request will catch exceptions, so the `lastPing` will be set no matter the request succeeded or not, which is not ideal since there is chance that network is unavailable or graph API breaks.

So we should check whether install event has been successfully sent before set the `lastPing`.

Reviewed By: tianqibt

Differential Revision: D16609854

fbshipit-source-id: bf7b33c2cd8790c9207a0944334d4ce836891db5""",0.7,None,fixed

2017,Zilin Zhang,kylinchang@fb.com,"""Add feature enums for Instrument&CrashReport to FeatureManager

Summary: Add feature enums for Instrument&CrashReport to FeatureManager

Reviewed By: YOUDAN

Differential Revision: D16632634

fbshipit-source-id: c46086574bb7fb9d90a69c4487cc482b8ba3fe5e""",0.7,None,added

2018,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9dfb0d74ab87b014d457dbd0541db235bfa32a44""",0.2,None,changed

2019,Stan Wu,dreamolight@fb.com,"""Rename names of GK keys for FeatureManager and disable RestrictiveDataFiltering by default

Summary: As title

Reviewed By: tianqibt

Differential Revision: D16611596

fbshipit-source-id: 6e2e9e93a0dea5d611a40983a8fcbfcaefb6a874""",0.7,None,changed

2020,Matteo Innocenti,math.inno@gmail.com,"""Fixed typos on comments

Summary: Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/565

Reviewed By: joesus

Differential Revision: D16555227

Pulled By: jingping2015

fbshipit-source-id: 460dee8e0007f2ad2581ae5f9a173c25f048f64f""",0.7,None,fixed

2021,Kanghee Park,khp@fb.com,"""Update pressed color for sdk buttons

Summary: Update to match iOS

Reviewed By: ct2mak

Differential Revision: D16573329

fbshipit-source-id: 72454863f5ca81eb5f80c9d2ced96e1f118f151c""",0.7,None,changed

2022,Jing Ping,jingping@fb.com,"""SDK version bump v(5.2.0)

Summary: SDK version bump from (5.1.1) to (5.2.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: dreamolight

Differential Revision: D16544801

fbshipit-source-id: 359810ae982d394ca55271908ff936922bc86145""",0.2,None,changed

2023,Stan Wu,dreamolight@fb.com,"""Add FeatureManager to control enable status of features

Summary: As title

Reviewed By: jingping2015

Differential Revision: D16374020

fbshipit-source-id: 51ec8da0abcb6804b2184646f438768e36e05c09""",0.7,None,added

2024,Kanghee Park,khp@fb.com,"""Don't show resend SMS button if SMS is disabled in fallback screen

Summary:
- Change from `enableInitialSmsButton` to `enableSms`
  - Before, the SMS button on initial phone number input screen was hidden
  - Now, both the button on the initial screen and fallback screen are hidden

Differential Revision: D16358958

fbshipit-source-id: b8ab9565a84ecb1d187bdd414dbd08b8fcae6264""",0.7,None,changed

2025,Zilin Zhang,kylinchang@fb.com,"""Remove unused argument

Summary: RestrictiveDataManager doesn't use paramVal now and we can remove it.

Reviewed By: YOUDAN

Differential Revision: D16364725

fbshipit-source-id: e41779c41e5f791301035bd07defa8fa29afa5fb""",0.7,None,removed

2026,Zilin Zhang,kylinchang@fb.com,"""Add unit test for RestrictiveDataManager

Summary:
Add unit test for RestrictiveDataManager:
1. test rules update
2. test processEvents
3. test processParameters

Reviewed By: tianqibt

Differential Revision: D16353883

fbshipit-source-id: b25ee8f0bac19c4d865b842851b10d96c9cc3a51""",0.7,None,added

2027,Zilin Zhang,kylinchang@fb.com,"""Move RestrictiveDataManager to internal folder

Summary: Move RestrictiveDataManager to internal folder along with code improvements

Reviewed By: tianqibt, YOUDAN

Differential Revision: D16316684

fbshipit-source-id: d1f25b7ddbd97e4d6aee264433402ad5aab7fd94""",0.7,None,changed

2028,Yuxi Jiang,jiangyx@fb.com,"""Move GK names

Summary: Put GK names  `APP_EVENTS_IF_AUTO_LOG_SUBS` and  `APP_EVENTS_KILLSWITCH` into corresponding feature modules.

Reviewed By: KylinChang, dreamolight

Differential Revision: D16274542

fbshipit-source-id: 9df585737b5bf6647109b377ee3b58863cdc5f97""",0.7,None,added

2029,Kanghee Park,khp@fb.com,"""Update button colors and styles

Summary:
SDK currently uses old colors and icons

updates:
- Update the fb blue color to the new one
- Remove focused and selected states for buttons since they're unspecified by design guidelines (for now)
- All buttons now have a standard pattern of enabled - pressed - disabled
- Removed png assets hopefully saving some space
- All buttons now use svg path to render the icon (login button was already doing that, share button now does too)
- Remove the ""silver"" style since it's old and not part of the new approved button specs

Reviewed By: CFFChi

Differential Revision: D16209520

fbshipit-source-id: 3234350f47bcfb062592224fb60a239debfc5906""",0.7,None,changed

2030,Stan Wu,dreamolight@fb.com,"""Refactor RestrictiveDataManager to be more independent

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D16233536

fbshipit-source-id: c20d056054f17e9fa68674e50c113e3919b329e9""",0.7,None,changed

2031,Adrian CreÈ›u,numedecod@gmail.com,"""Update proguard-rules.pro (#564)

Summary:
When using minification of the Android app, the In-App Billing Service gets obfuscated, resulting in runtime internal crashes.
This patch keeps the affected method names used by reflective calls.

Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [X] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [X] submit against our `master`.
- [X] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/564

Reviewed By: jingping2015

Differential Revision: D16277594

Pulled By: dreamolight

fbshipit-source-id: c83ae1b0362c3c1522ce732ee64bae5a37870153""",0.7,None,changed

2032,Kanghee Park,khp@fb.com,"""remove voice call option

Summary: We are deprecating the feature and will remove it from the UI in the next release.

Reviewed By: abeatte

Differential Revision: D16272501

fbshipit-source-id: 6ce1455545fabd2f4a1c0cf69fbb5da0e053fbd6""",0.7,None,added

2033,Zilin Zhang,kylinchang@fb.com,"""test for publish install graph request parameters

Summary: test for publish install graph request parameters

Reviewed By: tianqibt

Differential Revision: D16244125

fbshipit-source-id: b3e70a4c0056a6751617e826ec0002f9d3d89a13""",0.7,None,changed

2034,Christina Xu,christina1012@fb.com,"""Remove restrictive data rule

Summary: Remove restrictive data rule

Reviewed By: dreamolight

Differential Revision: D16215215

fbshipit-source-id: ea7d5d41c1e8685cbb29d5e98e662b3ff1b96c4c""",0.7,None,changed

2035,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: de5232f453da26fb2f593de06b3ab37cafa90f9a""",0.2,None,changed

2036,Christina Xu,christina1012@fb.com,"""Make the function synchronized and catch the error for updating rules or geting match type

Reviewed By: dreamolight

Differential Revision: D16081284

fbshipit-source-id: 3da111f68e11284e279345b0d4002c09c385f756""",0.7,None,changed

2037,Christina Xu,christina1012@fb.com,"""SDK version bump v(5.1.1)

Summary: SDK version bump from (5.1.0) to (5.1.1). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: tianqibt

Differential Revision: D15967983

fbshipit-source-id: dbefd48c21c4c748978a7004dee2dfb4b8feb89c""",0.2,None,changed

2038,Christina Xu,christina1012@fb.com,"""Fix that the rule/filter is null in some edge cases

Reviewed By: dreamolight

Differential Revision: D16070014

fbshipit-source-id: 080cbb964751d38f7f64c66a6f9e3a6829622119""",0.7,None,fixed

2039,Christina Xu,christina1012@fb.com,"""Update changelog for 5.0

Summary: Update changelog for 5.0

Reviewed By: wi3lau

Differential Revision: D16017194

fbshipit-source-id: b2a635e11c9e2a1afb8f574b5218a2eeb770ca9e""",0.7,None,changed

2040,Jing Ping,jingping@fb.com,"""add Signature check for content provider

Summary: validate content provider  is come from facebook App

Reviewed By: KylinChang

Differential Revision: D15951666

fbshipit-source-id: 0d257bddde3eb8b173a67e3f4e61a6a119f23832""",0.7,None,added

2041,Christina Xu,christina1012@fb.com,"""Make the exception warning rather than exception

Reviewed By: dreamolight

Differential Revision: D15973754

fbshipit-source-id: 0a8769a6f4dfaefd195005e75f85182a17c5b14d""",0.7,None,changed

2042,Christina Xu,christina1012@fb.com,"""Fix when the string is empty

Summary: Fix when the string is empty

Reviewed By: dreamolight

Differential Revision: D15967690

fbshipit-source-id: 410920084423c81ae5ff315c5a56901be78a5997""",0.7,None,fixed

2043,Christina Xu,christina1012@fb.com,"""Update changelog

Summary: Update changelog

Differential Revision: D15950094

fbshipit-source-id: 6200149eea92ac0b00d9a4ce9a2adfb544820dfc""",0.7,None,changed

2044,Christina Xu,christina1012@fb.com,"""SDK version bump v(5.1.0)

Summary: SDK version bump from (5.0.3) to (5.1.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: tianqibt

Differential Revision: D15949500

fbshipit-source-id: 08c00a6b6ee8455a5b4bf8e0b0b2655f509eaa5e""",0.2,None,changed

2045,Pierrick CAEN,pierrick@yellw.co,"""ViewIndexer leaked the calling activity by referencing it in a TimerTask (#554)

Summary:
Reference has been moved into TimerTask#run in order to not leak the calling Activity.

Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/554

Reviewed By: dreamolight

Differential Revision: D15922716

Pulled By: jingping2015

fbshipit-source-id: e445c478401ee937c92d13cf95093b1f356962f2""",0.7,None,changed

2046,Christina Xu,christina1012@fb.com,"""Fix the incorrect logic for GK

Summary: Fix the incorrect logic for GK

Reviewed By: wi3lau

Differential Revision: D15927615

fbshipit-source-id: c2e7ef9b1a682c459fa3e48f928753740de6275a""",0.7,None,fixed

2047,Calvin Mak,cmak@fb.com,"""Fix test LoginManagerTest

Summary: It seems like this changed at some point so do the mock properly so that there are no null pointers

Reviewed By: jingping2015

Differential Revision: D15869944

fbshipit-source-id: b1f5224b2cca706bb5e73efef1a7159cbfaf2f42""",0.7,None,fixed

2048,Jing Ping,jingping@fb.com,"""Update Android SDKL size

Summary: use  sh internal/scripts/sdk_size_test.sh to update android sdk Size.

Reviewed By: codytwinton

Differential Revision: D15560808

fbshipit-source-id: 8d6f5764cb10fee303e9b91959df4dafff26baa0""",0.7,None,changed

2049,Stan Wu,dreamolight@fb.com,"""SDK version bump v(5.0.3)

Summary: SDK version bump from (5.0.2) to (5.0.3). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: joesus

Differential Revision: D15822170

fbshipit-source-id: e2d212c1a57be30586eee4d4fd63fafdd3696e49""",0.2,None,changed

2050,Stan Wu,dreamolight@fb.com,"""Skip Google Play Service check for google ad service connection

Summary: Some devices from certain manufactures (e.g. amazon fire, BlackBerry) or countries (e.g. China) don't come with play services. But they might still have google ads services in the OS, so remove place services check for that.

Reviewed By: YOUDAN

Differential Revision: D15821864

fbshipit-source-id: aa3209b0c3cf9b43c43f5443fb10431c507131be""",0.7,None,changed

2051,Christina Xu,christina1012@fb.com,"""Merge some functions for subs and inapp

Reviewed By: codytwinton

Differential Revision: D15753285

fbshipit-source-id: e715e4cf6ee9860c376cb2d6755e9305199f4455""",0.2,None,changed

2052,Greg McGary,gkm@fb.com,"""Bump API levels 14 & 15 (ICS) up to 16 (Jelly Bean)

Summary:
Google has removed ICS support from Play Services and from Android NDKs after r17.

In order to pave the way for NDK upgrades beyond r17, we are nudging all apps to bump minSdkVersion to 16.

This diff will land as soon as you accept it, via
If there is no response before May 15, we will go ahead and land it.

Reviewed By: schwink

Differential Revision: D15102725

fbshipit-source-id: 2490180ae074cfd91583ffc6415566eaebdd3223""",0.2,None,removed

2053,Christina Xu,christina1012@fb.com,"""more cleanup on error code

Summary: as title

Reviewed By: tianqibt

Differential Revision: D15747755

fbshipit-source-id: c369dcb53037bd7116d5e9a25421d8e421350037""",0.7,None,changed

2054,Christina Xu,christina1012@fb.com,"""remove unused function

Summary: remove unused function

Reviewed By: tianqibt

Differential Revision: D15726834

fbshipit-source-id: d592799016c77372b470781d01582ec57c65a36c""",0.7,None,removed

2055,Chris Lewis,cwlewis@fb.com,"""Add and Improve unit test functions for UserSettingsManagerTest

Summary: I added unit tests for all flags and logIfSDKSettingsChanged in UserSettingsManager.java using PowerMock

Reviewed By: jingping2015

Differential Revision: D15603840

fbshipit-source-id: 1ed0e9e1dd2971f5bd461f217ceb4d5bff4466c6""",0.7,None,added

2056,Christina Xu,christina1012@fb.com,"""remove error code for subscription events

Summary: remove error code for subscription events

Reviewed By: wi3lau

Differential Revision: D15724153

fbshipit-source-id: ed28034ca91f944b2a47232c0688d162a8d64cbd""",0.7,None,changed

2057,Christina Xu,christina1012@fb.com,"""Remove post subscription events in auto-logging

Summary: Remove post subscription events in auto-logging

Reviewed By: wi3lau

Differential Revision: D15723666

fbshipit-source-id: dbc031bbeb74367c9c55a52882983363c1abbdb2""",0.7,None,changed

2058,Christina Xu,christina1012@fb.com,"""change the class name to a more general one

Summary: change the class name to a more general one

Reviewed By: tianqibt

Differential Revision: D15723209

fbshipit-source-id: 857d2015cee7988f2fe36bd361c50bc9512ffaff""",0.7,None,changed

2059,Christina Xu,christina1012@fb.com,"""SDK version bump v(5.0.2)

Summary: SDK version bump from (5.0.1) to (5.0.2). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: dreamolight

Differential Revision: D15721664

fbshipit-source-id: 15f9f1e5cce955c62297425a588bce3f0e2d597f""",0.2,None,changed

2060,Christina Xu,christina1012@fb.com,"""Fix iap issue

Summary: as title

Reviewed By: dreamolight

Differential Revision: D15719742

fbshipit-source-id: a1030f31f69f9eab632b9ecbfbf88666f5442b6e""",0.7,None,fixed

2061,Christina Xu,christina1012@fb.com,"""filter deprecated event

Summary: as title

Reviewed By: dreamolight

Differential Revision: D15703496

fbshipit-source-id: 2cc4984759d002399deb2f6ec477d432e2000a05""",0.7,None,changed

2062,Jing Ping,jingping@fb.com,"""Throw error for AttributionIdentifiers::getAttributionIdentifiers called in main thread

Reviewed By: dreamolight

Differential Revision: D15327522

fbshipit-source-id: 459852c4e4cbb15775fad18d607c3b17fcbc5811""",0.7,None,changed

2063,Jing Ping,jingping@fb.com,"""Update version in android sdk readme

Summary: As title

Reviewed By: stoyan

Differential Revision: D15606085

fbshipit-source-id: ce209bd1dea232d6c2af663595ae9b0f0ec613a0""",0.7,None,changed

2064,Christina Xu,christina1012@fb.com,"""Fetch restrictive params from server

Summary: as title

Reviewed By: dreamolight

Differential Revision: D15561020

fbshipit-source-id: 53c415cd9e9306dd31b1e824a97dca4cc9c85dc6""",0.7,None,changed

2065,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 1839a120ed8e52703fabd7415fb915a8703301c2""",0.2,None,changed

2066,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: f0a9492e6ae094db64554e86c380f15ad57ddba0""",0.2,None,changed

2067,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 97348586ef293641a4ccf0acba532f0646c6632c""",0.2,None,changed

2068,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: e0fd9eb44c1db157bd9e485e526fa8101ad7d763""",0.2,None,changed

2069,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: cac77eba62a4b2a86eaf382a3797bcb8faeb581c""",0.2,None,changed

2070,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 4397d907f3ee804be0532ccd0308734ce62da01d""",0.2,None,changed

2071,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 2a585ffe120a68e4adb488e3a99be44a16febd92""",0.2,None,changed

2072,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a949a6651ef586b972efd012202d5d6357c7a254""",0.2,None,changed

2073,Venkata Bharath Gondi,gvbharath@fb.com,"""add include_native_variations flag to strings.xml

Summary:
we do not want to include native variations (eg: viewer gender) for translations of androidsdk strings.
so adding the attribute ""include_native_translations"" to resources element in strings.xml.
this way these strings could be shared by different apps (eg: portal) supporting native variations and prevents the other apps from accidentally committing variated translations.

Reviewed By: codytwinton

Differential Revision: D15487871

fbshipit-source-id: 6cd52c55967b44390393ac0ac845aa61b0a40397""",0.7,None,added

2074,Jason Cooke,jason-cooke@users.noreply.github.com,"""docs: fix typo (#563)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/563

Reviewed By: joesus

Differential Revision: D15527500

Pulled By: jingping2015

fbshipit-source-id: de7ebe76854a8579a0ced4cfb4299ab0e795675e""",0.7,None,fixed

2075,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e19e7b88f1bfffe8e040ca21cf3e62d8aea4daa0""",0.2,None,changed

2076,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 1fda20a0f99415622e886b51bc64dfeb7dd961b3""",0.2,None,changed

2077,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4e82b4cb3f01319d407d42bc62551d93737170f9""",0.2,None,changed

2078,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 1b37bbff23f8e18dfe0d3a9206ac955b8c776149""",0.2,None,changed

2079,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 96c28768dbe4475dad1e578727602d792dbfe1c0""",0.2,None,changed

2080,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: bb082a7a232f60173533ba8e830b735d3c7eccb9""",0.2,None,changed

2081,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: de8ae3823f2542ae9c27cb4de54de10b70e7ebc6""",0.2,None,changed

2082,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: de673605e7f1ce94d3ae13550bb9e840d31943f9""",0.2,None,changed

2083,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 5f5368f0484a33b741266a2a03b918f8dd1c4ca7""",0.2,None,changed

2084,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 78d14c8ecdc7cde810fadc86706bcac379a696c6""",0.2,None,changed

2085,Christina Xu,christina1012@fb.com,"""Fix the incorrect json parsing

Summary: as title

Reviewed By: tianqibt

Differential Revision: D15529021

fbshipit-source-id: 222ecbd97f72e2596c5b3306791824cb038ad628""",0.7,None,fixed

2086,Christina Xu,christina1012@fb.com,"""fix typo for the function

Summary: fix typo for the function

Reviewed By: wi3lau

Differential Revision: D15528139

fbshipit-source-id: cdfe8e3e3739dfbffe05071ed739a60906e7d59b""",0.7,None,fixed

2087,Christina Xu,christina1012@fb.com,"""Update the app event with processed parameters

Summary: reserved

Reviewed By: jingping2015

Differential Revision: D15462879

fbshipit-source-id: 47badd1e125522cafaec82c99fa2c1643beed4d4""",0.7,None,changed

2088,Christina Xu,christina1012@fb.com,"""Apply matching logic

Differential Revision: D15462010

fbshipit-source-id: 1eece0d5ca55752c6852c7f8876084792c55f3eb""",0.7,None,changed

2089,Stan Wu,dreamolight@fb.com,"""Generate anon_id earlier to reduce the chance of getting overridden

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D15511924

fbshipit-source-id: 69f6bbabec663dd40410d7e0060521a20afd60cf""",0.7,None,changed

2090,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c8d291ac15bb3b32418c4844ad715351509454ad""",0.2,None,changed

2091,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: cc91f59cfd54bc0a4042a292857686860e888e64""",0.2,None,changed

2092,Christina Xu,christina1012@fb.com,"""Load restrictive rules from server

Summary: reserved

Reviewed By: wi3lau

Differential Revision: D15458926

fbshipit-source-id: deee09a9c254738eebf512d1f28e3d9765209df9""",0.7,None,changed

2093,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 0c42b20b9d6c3830a674cc8b3c1e8ad7e1e18e2f""",0.2,None,changed

2094,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b2661c3d8880cd172c83b50f7e208812c93cbc41""",0.2,None,changed

2095,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4e5ac6b437426a0f483bc8c12dd417d0aef7ae61""",0.2,None,changed

2096,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9641b9ccd2292508c1cf74725d862ce26a48b73d""",0.2,None,changed

2097,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e3f6cfb935a0cdcbac96e8c47c328c75deceadfd""",0.2,None,changed

2098,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 58c6444d6fb8346f6c8f1c106e782201655b29b4""",0.2,None,changed

2099,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e5ddfdc32c7d3233a40270dd10f13211998a5aec""",0.2,None,changed

2100,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 95e1fd6aa798b82d3176e6f61319d1008b45488b""",0.2,None,changed

2101,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4342b686bd144ae6fa2ec8856cbb359f1afb89e7""",0.2,None,changed

2102,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 7c2d34050e4c59cdeae2b23c267bb93c9e0cc21f""",0.2,None,changed

2103,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e91273ec94f576c0a8bf979b937672b3cc9d6ab3""",0.2,None,changed

2104,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 4f992a24936e30c107e855c293c646344076bacd""",0.2,None,changed

2105,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: d84a70c4e7e58ec1ba23d8e7d4e516b68ba1e683""",0.2,None,changed

2106,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0011e700ff7ef5fa83df390c2a85160f7c5185d7""",0.2,None,changed

2107,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 41530d1e6b390cf7cffb0f3ceff8a8d7aac8046c""",0.2,None,changed

2108,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: caeb9b071cfbc32a723cbf2dd0932dd986b74182""",0.2,None,changed

2109,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 79bc2e8977306cf98a4e252f919574650afa5cc1""",0.2,None,changed

2110,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 95a788bb58b2375f944ca29d12b8b34c8711b202""",0.2,None,changed

2111,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 688753e6a4ec5a6d454555f873917609bacce058""",0.2,None,changed

2112,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 5bc2d27b6f5bff220d489ad5a3ec254828e1c6cc""",0.2,None,changed

2113,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: a626ff0f537ab96782a685987f3c3ae0205956fc""",0.2,None,changed

2114,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 1e9e66bb51811bb80c1d45975d74c0b4f63f6833""",0.2,None,changed

2115,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e4ce234801d001f6e72a61feb45dfb544aa0749b""",0.2,None,changed

2116,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 8b9f9a92ac98669c03fe36394696c5b76b64e413""",0.2,None,changed

2117,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 70f2076eaa72ac7d48aa664ea8d660c6a8af3ab3""",0.2,None,changed

2118,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: eb324dc2f8fda54f5a501c42ae0eecf5c186003f""",0.2,None,changed

2119,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 862fb24e2022bddd96d9c9630bc198b0e205bf87""",0.2,None,changed

2120,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: af33021d9bc4cd5a87b23f42f8a612d37344bf35""",0.2,None,changed

2121,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4d0932eeafdb92296364e8874b3910ac92051541""",0.2,None,changed

2122,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 20d79adc85e343b6d4deff624888f0c4ab68a3db""",0.2,None,changed

2123,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 812b014f9d9db4a4b4bf95b8818832f6aaf3b24d""",0.2,None,changed

2124,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 3cd3cbc684773f47ecd89b6844aca7829b51d2d6""",0.2,None,changed

2125,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 902f41e32edd1ae2acb3a77575f926764e86d5bc""",0.2,None,changed

2126,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 71b60b5a77390ecf8fbf1958cf4661c10989c2b1""",0.2,None,changed

2127,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 985790a66504911d76833a4be23a7c34bedcf540""",0.2,None,changed

2128,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b27761e7e61c2ea8f1d6987de733637ed4e6badf""",0.2,None,changed

2129,Art Beatte,abeatte@fb.com,"""Commits changes copied over from hackbook

Summary: When building the SDK apps with gradle it will copy any changes from hb4a and accountkit into loginSample to keep them up to date. This must have been forgotten when changes to SMS stuff was done.

Reviewed By: ct2mak

Differential Revision: D15494492

fbshipit-source-id: e118ccf9e96dd7f13e5fe0c8477d73a032a5d8e3""",0.7,None,changed

2130,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 93d29f2543f9796fe22aae3e747a76f244f12dbe""",0.2,None,changed

2131,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 6a2b0e31cadc2a03e7f3cacf6d3e7f0ae345a090""",0.2,None,changed

2132,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4bf0161c7a1cc88afa11421e0a1665426d048b9c""",0.2,None,changed

2133,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 144b369f19bac7deaa010313d81feeb6c57a6fcb""",0.2,None,changed

2134,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 80311764327ecc0912abeba0fcbc41af360d4b79""",0.2,None,changed

2135,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 8a9e12e8076a66cb382f408d620bf26606e69cee""",0.2,None,changed

2136,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 44ad511d6e20311803a92fca4a48fd7554bbc9bd""",0.2,None,changed

2137,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: c233764c4e09b59d84cdd273caeb326635599b7d""",0.2,None,changed

2138,Art Beatte,abeatte@fb.com,"""Fixes some failing Android Tests

Summary:
[android sdk] Fixes some failing Android Tests

android tests (ran through the IDE) are apparently failing. This will fix some of them (the understandably broken ones).

Differential Revision: D15482314

fbshipit-source-id: 99c26669f29fc40d1e18c832924c7347307cefaf""",0.7,None,fixed

2139,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: bab925e7116e8d4ec1593fb54cb2f9fe5222e36a""",0.2,None,changed

2140,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 47f87a8389fb7eb1854ea3000b6e42e23df1fe1b""",0.2,None,changed

2141,Art Beatte,abeatte@fb.com,"""Fixes lint errors and cleans up code

Summary: [android sdk] Fixes lint errors and cleans up code

Reviewed By: khp

Differential Revision: D15451041

fbshipit-source-id: 2a788dc32a677f9a18886cca6a30d4ca351b8de8""",0.7,None,changed

2142,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: b3715a25c1265464acc2f5fd9e423356970e19bf""",0.2,None,changed

2143,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 063ba9f6b27b0854f113d1bb7bf1d897b405909b""",0.2,None,changed

2144,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: f04f896483eec6a1ddeed50348b82a45c91fd2a2""",0.2,None,changed

2145,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 362a946e024d48adc2830660099b3f375b9689fb""",0.2,None,changed

2146,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 80bde4387c71688bf4f14892944b8acaab239038""",0.2,None,changed

2147,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 27d4ee5090c1350b99ee87bc28a46550439d6e0f""",0.2,None,changed

2148,Jing Ping,jingping@fb.com,"""Update .travis.yml (#561)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/561

Reviewed By: stoyan

Differential Revision: D15446847

Pulled By: jingping2015

fbshipit-source-id: 70e984096dadaf774f9a871df3360c01a3f0f103""",0.2,None,changed

2149,Art Beatte,abeatte@fb.com,"""Fixes bug with SDK Initialize on broadcast

Summary: [android sdk] Fixes bug with SDK Initialize on broadcast

Reviewed By: ct2mak

Differential Revision: D15450566

fbshipit-source-id: 7ec5a7f8f55a658959a5ac7143bd8577c57a2a74""",0.7,None,fixed

2150,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 774b385b413b10beb632036fe61502a15acfe616""",0.2,None,changed

2151,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: d6c1ff787ea2e182e54f5983b841442e411641f6""",0.2,None,changed

2152,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 1d4993e36561a889a9e448633f7585f2bd6306e1""",0.2,None,changed

2153,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0b4ee5df28a279535ee101613a47104c412b9aeb""",0.2,None,changed

2154,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 1e672b3b3d847673ede61715df638f6488ce20cc""",0.2,None,changed

2155,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 09e4c3653d8090af750acf05ad88ede082b4ef09""",0.2,None,changed

2156,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: b12ad2e1d4fab3d3144b34f986a16400ca907f50""",0.2,None,changed

2157,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a1f7a9c5f785efa8e1969447b954e96cee7f5ab9""",0.2,None,changed

2158,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 7a862ed346d08da9d7b1126e02f206d992325502""",0.2,None,changed

2159,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: cd146fadbbfb47ecf95cfc071574e292f2b1c79f""",0.2,None,changed

2160,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 271e541639bb61f0dc91824bb7a30b819bcadde7""",0.2,None,changed

2161,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: dea3553d0c298209f9ed838276353f8668581384""",0.2,None,changed

2162,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: ab7d29e2d995e85bf96f13adb35ce4bb2b9690a8""",0.2,None,changed

2163,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: c51e740c3388abe5b843608c0768fee5a5c33b4e""",0.2,None,changed

2164,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4eac34da706714e4fc97383040163e4bd1eb93f6""",0.2,None,changed

2165,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: ac1de45866454ed5be9c8253b045aa8f20b8601c""",0.2,None,changed

2166,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 56e72149b14e8314a3fe2ff9f712c5c900a49c61""",0.2,None,changed

2167,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b8532f5a116a8fedc28628a9bee839537982444b""",0.2,None,changed

2168,Jing Ping,jingping@fb.com,"""Add 5.0.1 changelog link (#560)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/560

Reviewed By: codytwinton

Differential Revision: D15400704

Pulled By: jingping2015

fbshipit-source-id: 144d1097424e8366093c296073af8d7bb1112cd7""",0.7,None,added

2169,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: db8e757ca25499ee8559a860e5fb197f562bb45a""",0.2,None,changed

2170,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 81469d3c2a54d4a88084676a860f004f934dfef3""",0.2,None,changed

2171,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: be8de28fabb682c54f93d4f4fc342fdee2033404""",0.2,None,changed

2172,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 70ca904034fff3e78b5c26b6bf086fd0607ad296""",0.2,None,changed

2173,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e93e1a7fd833a5a88946fcb2e0f872ed23beb4f0""",0.2,None,changed

2174,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 773a148ec072d33e2dc04648b77119fef44db3b4""",0.2,None,changed

2175,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 2719c064474f6ae137e10d1c9baf203e412bdf84""",0.2,None,changed

2176,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 7886b61059f19dbc747e4f1944552801c3a9ac8c""",0.2,None,changed

2177,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: a3a79289e929dafc11bf0d03f215cf73c20d7e06""",0.2,None,changed

2178,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 25dee8fb0cfd44051bfadbe2fe0ee384e7ff0e1b""",0.2,None,changed

2179,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c00ca555d624fd1e5ee5a34094bb1485dd2085eb""",0.2,None,changed

2180,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 41d415b7ce9fc2af7ed167b1c0e8420d05ce2d76""",0.2,None,changed

2181,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 48f7007ce7ddcf8464099069620d1f91e1bae943""",0.2,None,changed

2182,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 42ac87dbfe513cd1d2c4a561efedd49517c5fe39""",0.2,None,changed

2183,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: aabb725885a125756cad7c635f75c085f84512b0""",0.2,None,changed

2184,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 189e462cf0f08210be796421295730a4d3a92e65""",0.2,None,changed

2185,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 281e2901d216b019a88cce494764cfb2eacfca47""",0.2,None,changed

2186,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: f32e11d4b67e13529cadd4c6a44d4c22aaded0d8""",0.2,None,changed

2187,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: e79855851a136d897e7f8e4628f667c9f3b76d64""",0.2,None,changed

2188,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 27f36dde8bc80b169ad32e5ae377ac5f2701300a""",0.2,None,changed

2189,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 32ecc01c1fa507dc8e1a4c638db3288e87efc866""",0.2,None,changed

2190,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: efa41a2df642a55439cdc328f373788df17ab29c""",0.2,None,changed

2191,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: a4a1659e2c6c6e2f92f13ecfcdccd6f5733461d7""",0.2,None,changed

2192,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: d21f610f9bd762d0dbefccd0b5580dd9bbafc681""",0.2,None,changed

2193,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: a42fdaf62a6b093fec2c903d26990715d2b98c9b""",0.2,None,changed

2194,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: e800dda284f41a003c1521419700e37734a852a1""",0.2,None,changed

2195,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 74d329da08222418b093fe559afdc611f94e7140""",0.2,None,changed

2196,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: c39617e296fbfb14881b76882a50182b39957d60""",0.2,None,changed

2197,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 3b7d97aeb1bec368e53935be93b255319a73040d""",0.2,None,changed

2198,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 5dba1df9c569255b9ada0c33455778d89260df36""",0.2,None,changed

2199,Anusha Ghanta,anushaghanta@fb.com,"""Remove 'Share to Facebook' from RPSSample app and cleaning up the OG shares

Summary: OG shares are deprecated, so replacing the og content with photoShare content and  'share to facebook' doesn't make sense now. Hence removing it.

Differential Revision: D15221917

fbshipit-source-id: b2c805753c1843336d60402bae88b0f58f9d02b3""",0.7,None,changed

2200,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 44ff3ad3aeecdde57bfea9676cbec7ab2b1f2115""",0.2,None,changed

2201,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a9ccf925137ec9482591ce69fc3c678e22964abe""",0.2,None,changed

2202,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: f193e48e117861bea4873c7f9d15f35ab1a2fe12""",0.2,None,changed

2203,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: ed1bd727359e78e04c6c610e9e4d2fd333df62bf""",0.2,None,changed

2204,Stan Wu,dreamolight@fb.com,"""Update changelog for Android SDK 5.0.1

Summary: As title

Differential Revision: D15390369

fbshipit-source-id: 759ffd472d91323dcea578750f0b00d0d58c7e88""",0.7,None,changed

2205,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 7973e28724e9a33307d866694fa808ba9dea2807""",0.2,None,changed

2206,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 1e9ae559db898c4516c93724efaad1ec5c6a1984""",0.2,None,changed

2207,Stan Wu,dreamolight@fb.com,"""SDK version bump v(5.0.1)

Summary: SDK version bump from (5.0.0) to (5.0.1). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: YOUDAN

Differential Revision: D15389741

fbshipit-source-id: 7768db2c86e833946c5e6de832140ec5378e4e8e""",0.2,None,changed

2208,Christina Xu,christina1012@fb.com,"""Minor updates

Reviewed By: dreamolight

Differential Revision: D15381910

fbshipit-source-id: 95f115fd3219f06b630e31cbec2158f3e7b62e4a""",0.7,None,changed

2209,Christina Xu,christina1012@fb.com,"""Add some extra parameters

Reviewed By: wi3lau

Differential Revision: D15379107

fbshipit-source-id: 361d582be2ce1fc898b93b9737960e9a138c0c6d""",0.7,None,added

2210,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 0c74601a716eb55d9d792def1d4b9ac2f95c3a79""",0.2,None,changed

2211,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 61990ecee90ae427a5a869167cb2f1aa13449904""",0.2,None,changed

2212,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 542c5943d6a17d26fd68569d6c26071375615f23""",0.2,None,changed

2213,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 71638adacd05b0f7cc7ef0712ba68a5897682257""",0.2,None,changed

2214,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 78b890fbf012ce207601b34096384f0548051a69""",0.2,None,changed

2215,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b43039445a4294b5ebf615d9c6096c5c7aa9309e""",0.2,None,changed

2216,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 1d7e29e4e06f9db182ad74da072ef09aaeb49058""",0.2,None,changed

2217,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 97f480cd53354db0a5df02b82f66eb544ec6515e""",0.2,None,changed

2218,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c84ff07cdbaf20389eabec63cbfb5d1f549b7685""",0.2,None,changed

2219,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: ee9a0eeeeb0988ad4daaf4e929f92b4e7401f59f""",0.2,None,changed

2220,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c31936a0b562fb504e4cae319fe23e1577b455b1""",0.2,None,changed

2221,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 38b673965999b18fcd061eea09ade5d859c946ba""",0.2,None,changed

2222,Christina Xu,christina1012@fb.com,"""Some improvements for InAppPurchaseEventManager

Reviewed By: wi3lau

Differential Revision: D15364408

fbshipit-source-id: 61fd10b30166c8164ba985f61ef8b05f23f16ff6""",0.7,None,changed

2223,Christina Xu,christina1012@fb.com,"""Fix the release date for Android SDK 5.0

Summary: Fix the release date for Android SDK 5.0

Reviewed By: wi3lau

Differential Revision: D15364137

fbshipit-source-id: 65359cafb2cbe6da576c5b88dc0287f4fd3778fd""",0.7,None,fixed

2224,Stan Wu,dreamolight@fb.com,"""Add campaign tracking support for AN

Summary: As title.

Differential Revision: D15191649

fbshipit-source-id: c7b16e6d954d845a24048f96a31b8bfe23fd8028""",0.7,None,added

2225,Zilin Zhang,kylinchang@fb.com,"""Fix broken tests (#559)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/559

Travis is broken for ""java.lang.NoClassDefFoundError: Could not initialize class android.os.AsyncTask"", that's an Android 4 issue and we enforce sdk 21 to fix that

Reviewed By: jingping2015

Differential Revision: D15357372

fbshipit-source-id: 51581b4f00e39599eb774203094e6c5c4fe4a702""",0.7,None,fixed

2226,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 75c6f06e6d302fdfd4b3649ad6104abe1539214f""",0.2,None,changed

2227,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 558aeed4f6553794002ca09a64fb2d746155bb36""",0.2,None,changed

2228,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 072d6e265a07da47c87b6d139b946d8116d614a0""",0.2,None,changed

2229,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a1c491a7bbd43fa71237abc90eb7f7e6be655d82""",0.2,None,changed

2230,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 39872ee273911ef246c3f668f0b15623e4e92ed6""",0.2,None,changed

2231,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: f34d3fca1f0b40da345743d3a342772765c56a9b""",0.2,None,changed

2232,Zilin Zhang,kylinchang@fb.com,"""Fix flaky tests and add logAndSendAppEvent test

Summary:
1. revert previous flaky tests
2. add unit test for logAndSendAppEvent

Reviewed By: codytwinton

Differential Revision: D15333604

fbshipit-source-id: 4aeb2268138ba641c03cae911e128e8dabb71e6e""",0.7,None,fixed

2233,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: f46b90d859b68f90f787baf594d9494b05ad9e2d""",0.2,None,changed

2234,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 02c64da3126a6b3ae5be356645eaa20473dbc876""",0.2,None,changed

2235,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 2e8d569482a469be657ef6479425a8926357c70f""",0.2,None,changed

2236,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b996b80c1aa76b457da1c77b5331968e8dc40706""",0.2,None,changed

2237,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 191b97427e2c49d1a1fc919bd2eb351ebc38091b""",0.2,None,changed

2238,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0371c7038e6a697c0d05fa40b4e7c7e65447c818""",0.2,None,changed

2239,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 3fe7a6ebc94889d356251fa16db8ab2098b4401c""",0.2,None,changed

2240,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 398ef830a04058ee658de738e34382154adc9a93""",0.2,None,changed

2241,Zilin Zhang,kylinchang@fb.com,"""Add KillSwitch unit tests

Summary: Add unit tests for KillSwitch

Reviewed By: tianqibt

Differential Revision: D15316202

fbshipit-source-id: 40470ec232195b49890c282b927d5216e3d32ea3""",0.7,None,added

2242,Zilin Zhang,kylinchang@fb.com,"""Improve tests and Add auto tracking tests

Summary:
1. rename setUp to setup  and improve GraphRequestTest
2. remove unnecessary thread.sleep in FileLruCacheTest, which can saves 2 seconds in unit tests
3. Add auto tracking tests

Reviewed By: tianqibt

Differential Revision: D15315827

fbshipit-source-id: 35deca7c7d20802a7dab3467dcbf028592a6fec7""",0.7,None,fixed

2243,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 2ba1a221dee6ccf2f634855e9657a0de0d1bebc4""",0.2,None,changed

2244,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 291ac759af2657700d514a13fa3818818ca776b4""",0.2,None,changed

2245,Christina Xu,christina1012@fb.com,"""Revert the incorrect changelog

Summary: Revert the incorrect changelog

Differential Revision: D15281662

fbshipit-source-id: fa70da4ca9300dbf243632e34a1d955bc1b8a98e""",0.7,None,changed

2246,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 6fa8bb15d8882ca4ed4f21c1b0d937ca65104119""",0.2,None,changed

2247,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 4305a55b1590567af1f3cc804b6af03f02b49061""",0.2,None,changed

2248,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 006efb9c6ef1290db8caae70da38c5e6e97dc33d""",0.2,None,changed

2249,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9ece0fc7e326e955af4fccdf2196b984d4b56872""",0.2,None,changed

2250,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 9cda89faa4f8e60d6f6ccc10e096720ca9abc631""",0.2,None,changed

2251,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0632772811dd3482146e15ee915d2f2bd36f06dd""",0.2,None,changed

2252,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 540a8dc8bed44dfa821d1ed9277f5d9e3a0bf794""",0.2,None,changed

2253,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 4f6bd9698802489e5792dac29c3d0333effbe645""",0.2,None,changed

2254,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 7cc0a224e45c84ade3fee0081e19f2afdc0cedf4""",0.2,None,changed

2255,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 6ce02f29fed865554019c309edd177b23b01a07f""",0.2,None,changed

2256,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 4d919617210db350dfc1bcc89f8047df8c9e39eb""",0.2,None,changed

2257,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 400f2b41f32179fe270159250ce2d6a908a28c23""",0.2,None,changed

2258,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: fe81cf97f03f4d8df8687653f65095da248a7651""",0.2,None,changed

2259,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: a3de42a51293b2eb45334dcad7258dcbea3e1f9d""",0.2,None,changed

2260,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 60c52f764be043eee307b925ec451a2c68ffbc4b""",0.2,None,changed

2261,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 802fad42148dacf4f3e5b672e5c864243847c998""",0.2,None,changed

2262,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 03f797c0c1d0a68b55d70465ca356d83cd35d0e9""",0.2,None,changed

2263,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 5c2aba7aec4248309ed27bd5244e6d87e674f298""",0.2,None,changed

2264,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: c717d1ae54a544be1b250dc745d8d1764fa5d2e0""",0.2,None,changed

2265,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 6bc61e1b33303f6c5e0845d5d4f3a9d95ea4ce11""",0.2,None,changed

2266,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 3d0abe3aa945cebe904e079d1041eb808cfbdd45""",0.2,None,changed

2267,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 78a7808cdf8950fc0a5d7965b353e73b3edfb16b""",0.2,None,changed

2268,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 264f8e1431ca91adbe0b1592e7ad24bdd99ad951""",0.2,None,changed

2269,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 41ac7996238162bc60661445dfcb1b20a463e846""",0.2,None,changed

2270,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 5c8b16955c615a6794d5fd61810ed6a19903e4fd""",0.2,None,changed

2271,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 0d8711953397610450360ef34df662736798f131""",0.2,None,changed

2272,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: bf96c1ff35b13fb6a758840c56887f7f54cece5a""",0.2,None,changed

2273,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 9bccc3fc72b2f03d58ccdcfdc9219092020f495e""",0.2,None,changed

2274,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: d17997be8340c6ce23dbc771fcbca6fb92d2d221""",0.2,None,changed

2275,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 3ef8a5b6f6160e26848fef08d4e73a8d223e287f""",0.2,None,changed

2276,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: dd8d7fd84342ab25950c665ed901275204c10357""",0.2,None,changed

2277,Stan Wu,dreamolight@fb.com,"""Fix crash that when Google Play service is unavailable

Summary: Binding to Google Play services succeeded without presence of Google Play Services, which led to the crash. So I added an extra Google Play Services availability checking.

Reviewed By: YOUDAN, KylinChang

Differential Revision: D15297659

fbshipit-source-id: 27261da160cffb1674ee5f38980f48c0fca07ad8""",0.7,None,fixed

2278,Zilin Zhang,kylinchang@fb.com,"""Add unit tests for UserDataStore

Summary:
1. Add MockSharedPreference class to mock default shared preference
2. Add unit tests for UserDataStore

Reviewed By: tianqibt

Differential Revision: D15288172

fbshipit-source-id: 66681aed1c3a2a622a1efc3b092f91b8180a5601""",0.7,None,added

2279,Zilin Zhang,kylinchang@fb.com,"""remove unused import and variables

Summary: SDK cleanup: remove unused import and variables.

Reviewed By: tianqibt, YOUDAN

Differential Revision: D15282826

fbshipit-source-id: c46c446e7137da8d9055ca79a0a88cfd69f6ccd6""",0.7,None,removed

2280,Kanghee Park,khp@fb.com,"""Don't do check for autofill when using CCT

Summary: Using Chrome Custom Tab is strictly better than using a webview for login so ignore checks for autofill compatibility.

Reviewed By: ct2mak

Differential Revision: D15280474

fbshipit-source-id: 1e5fc0f2d4c8168b86250acc5044a39cf7bf0f10""",0.7,None,changed

2281,Calvin Mak,cmak@fb.com,"""Remove GK check gdpv4_chrome_custom_tabs_enabled in SDK

Summary: This has been public since 2016. Let's remove this check from android SDK because it's a potential dropoff for people

Reviewed By: khp

Differential Revision: D15271568

fbshipit-source-id: ea3cfb97ab314d7f54fa06b2ab934cf792d7ed33""",0.7,None,changed

2282,Zilin Zhang,kylinchang@fb.com,"""Add tests for InternalAppEventsLogger and autolog flag tests

Summary: Add tests for InternalAppEventsLogger and autolog flag tests

Reviewed By: tianqibt

Differential Revision: D15245447

fbshipit-source-id: 0bc055dbdbc3fce2d443c818cdaa06bc16befdc8""",1,None,added

2283,Joe Susnick,joesusnick@fb.com,"""Update AndroidSDK Readme

Summary: Updates the readme to point to master as there is no longer a dev branch.

Reviewed By: jingping2015

Differential Revision: D15189581

fbshipit-source-id: 99a625c62cde2b122853b3d6ecb21b02b7000702""",0.7,None,changed

2284,Zilin Zhang,kylinchang@fb.com,"""Fix codeless test

Summary: Enforce CodelessTestBase to abstract class to fix the test

Reviewed By: YOUDAN

Differential Revision: D15231492

fbshipit-source-id: cf2aca091f5e09f54934a1d27933f2008bf1dcbe""",0.7,None,fixed

2285,Jing Ping,jingping@fb.com,"""Update CHANGELOG.md (#558)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/558

Reviewed By: codytwinton

Differential Revision: D15219325

Pulled By: jingping2015

fbshipit-source-id: d5b9f012bdcdb1407256d87ee30db59b2b213f19""",0.7,None,changed

2286,Zilin Zhang,kylinchang@fb.com,"""Refactor App Events related logger tests

Summary:
1. Currently AppEventsLoggerImpl is the implementation of logging app events and both AppEventsLogger and InternalAppEventsLogger depend on it. Therefore, to make logger tests better and well designed, we test the implementation of AppEventsLoggerImpl and test whether AppEventsLogger and InternalAppEventsLogger call the corresponding logging function of  AppEventsLoggerImpl. Besides, We will also add unit tests for AppEventsLogger and InternalAppEventsLogger's specific functions.

2. Reduce redundant import and redundant mock to make code and tests cleaner

Reviewed By: tianqibt

Differential Revision: D15226130

fbshipit-source-id: 056adc7fb2a0b9d376bd6b98163692d6db32f1be""",0.7,None,changed

2287,Zilin Zhang,kylinchang@fb.com,"""Move and improve unit tests

Summary: Move codeless unit tests and improve the tests

Reviewed By: YOUDAN

Differential Revision: D15205474

fbshipit-source-id: ce067e177c085039d5c85b152f80160e3fd6dc05""",0.7,None,fixed

2288,Wei Liu (Signals),weiliu@fb.com,"""Fix donate event const name

Summary: Fix

Reviewed By: YOUDAN

Differential Revision: D15190445

fbshipit-source-id: 5c7a3629ff7e9cf8a8e4df71b0d7a82ab0e01b7d""",0.7,None,fixed

2289,Stan Wu,dreamolight@fb.com,"""Fully initialize SDK when set AutoInitEnabled to true

Summary: This can save an extra call to `fullyInitialize`.

Reviewed By: wi3lau

Differential Revision: D15178951

fbshipit-source-id: 5c038467724c07c070e82955098f2a195a246f67""",0.7,None,changed

2290,Christian Becker,christian.becker.1987@gmail.com,"""Remove android:supportsRtl=""true"" from facebook-core (#555)

Summary:
Each app that depends on this library should choose for themselves if they support right-to-left or not. I don't want a library to set this automatically without me knowing it by checking the merged manifest.

Relates to #539
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/555

Reviewed By: codytwinton

Differential Revision: D15124094

Pulled By: jingping2015

fbshipit-source-id: 41aec23488ec158a10a0f80d5096ac730760e1b1""",0.2,None,changed

2291,Jing Ping,jingping@fb.com,"""Upgrade Android SDK to graph API v3.3

Summary: API version bump

Reviewed By: codytwinton

Differential Revision: D15150032

fbshipit-source-id: 2d402cd331f82932eb3ad7ea0e319e77c8f2d20e""",0.2,None,changed

2292,Jing Ping,jingping@fb.com,"""SDK version bump v(5.0.0)

Summary: SDK version bump from (4.42.0) to (5.0.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: codytwinton

Differential Revision: D15149942

fbshipit-source-id: ea459c80b6bca932b106054040bb6bba12725fe7""",0.2,None,changed

2293,Zilin Zhang,kylinchang@fb.com,"""Fix unit test (#556)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/556

Related diff: D15141663
Failing test: testLogPurchase, https://travis-ci.org/facebook/facebook-android-sdk/builds/526270801?utm_source=github_status&utm_medium=notification

Enforce gatekeeper to return false to fix the unit test, pass the tests in travis: https://travis-ci.org/facebook/facebook-android-sdk/jobs/526285966

Reviewed By: jingping2015

Differential Revision: D15145498

fbshipit-source-id: de2089a2107989e2fff5fc936a1b5c0b5690583e""",0.7,None,fixed

2294,Zilin Zhang,kylinchang@fb.com,"""Add killswitch GK in android sdk

Summary: Add killswitch GK in android sdk

Reviewed By: codytwinton

Differential Revision: D15141663

fbshipit-source-id: 7c90cd8718769b640aece449ec309e694e561ffa""",0.7,None,added

2295,Stan Wu,dreamolight@fb.com,"""Reduce fb_sdk_initialize events

Summary: Only send this event when SDK components changed.

Reviewed By: codytwinton

Differential Revision: D15133439

fbshipit-source-id: 8720049748b7149c4ff4d4bcb9a3789886d2dcf6""",0.7,None,changed

2296,Stan Wu,dreamolight@fb.com,"""Log event when SDK settings changed

Summary: As title, we want to understand how apps use those flags.

Reviewed By: YOUDAN

Differential Revision: D15095974

fbshipit-source-id: 60f9d3ba98f9956c81e2436520a434127f11478e""",0.7,None,changed

2297,Christina Xu,christina1012@fb.com,"""Increase heartbeat frequency

Reviewed By: dreamolight

Differential Revision: D15130309

fbshipit-source-id: b4ce940c65df45946d6029efc341381c41541954""",0.7,None,changed

2298,Stan Wu,dreamolight@fb.com,"""Refactor UserSettingsManager

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D15090651

fbshipit-source-id: 83be620ce782e2060e68793929f7ae34d248cb62""",0.7,None,changed

2299,Greg McGary,gkm@fb.com,"""Bump API levels 14 & 15 (ICS) up to 16 (Jelly Bean)

Summary:
Google has removed ICS support from Play Services and from Android NDKs after r17.

In order to pave the way for NDK upgrades beyond r17, we are nudging all apps to bump minSdkVersion to 16.

This diff will land as soon as you accept it, via
If there is no response before May 15, we will go ahead and land it.

Differential Revision: D15102701

fbshipit-source-id: f0d922c5b909a21dcb663d4fc3043ede28bcc709""",0.2,None,removed

2300,Christina Xu,christina1012@fb.com,"""Add GK for Subscribe auto-logging

Summary: as title

Reviewed By: KylinChang, dreamolight

Differential Revision: D15069477

fbshipit-source-id: 3eb2c7e875cda618dc700dc839c3080f86446b38""",0.7,None,added

2301,Stan Wu,dreamolight@fb.com,"""Hash strings for codeless setup

Summary: Hash text, hint, description and tag when upload view tree for codeless setup.

Reviewed By: YOUDAN

Differential Revision: D14994886

fbshipit-source-id: fc9edf493e4c8ba81f9c79e39234de2c2db12ac9""",0.7,None,changed

2302,Calvin Mak,cmak@fb.com,"""Default expire permissions to null if old token / SDK

Summary: For old tokens / SDK, they will not contain the expire permissions key (optional field). Let's default this to null when reading so users remain logged in

Reviewed By: khp

Differential Revision: D14936416

fbshipit-source-id: ce06c4eca37fd26e1d2b01ef25fffa1e5bf39af7""",0.7,None,changed

2303,Christina Xu,christina1012@fb.com,"""Remove unused code

Reviewed By: dreamolight

Differential Revision: D14908813

fbshipit-source-id: d7a9053b6bfa1fe61d956664607daeaa8d52b902""",0.7,None,removed

2304,Stan Wu,dreamolight@fb.com,"""Fail GraphRequest when SDK is not fully initialized

Summary: As title

Reviewed By: codytwinton

Differential Revision: D14910627

fbshipit-source-id: 9dc41ba25ac94f9ede3db00deb1a596ef9ce13ac""",0.7,None,changed

2305,Christina Xu,christina1012@fb.com,"""Update Manager and FacebookSDK

Reviewed By: wi3lau

Differential Revision: D14905857

fbshipit-source-id: b4ce0adbb389c296ee97a5e3085c516295f74df6""",0.7,None,changed

2306,Stan Wu,dreamolight@fb.com,"""Add sdkFullyInitialized flag to corporate with AutoInitEnabled flag

Summary: As title

Reviewed By: wi3lau

Differential Revision: D14886158

fbshipit-source-id: de7027cd5e1b6b061c4bf03d983ae9a07a47093e""",0.7,None,added

2307,Christina Xu,christina1012@fb.com,"""Fix incorrect change in SessionLogger

Summary: Fix incorrect change in SessionLogger

Reviewed By: wi3lau

Differential Revision: D14813884

fbshipit-source-id: e04e0410cd800a090cfba098cc7fc49bac3b4974""",0.7,None,fixed

2308,Stan Wu,dreamolight@fb.com,"""Create flag to control auto initailization of SDK

Summary: As title

Reviewed By: wi3lau, codytwinton

Differential Revision: D14885788

fbshipit-source-id: dfc7663ab8f164ffffe6a12a208159e4dffd693b""",0.7,None,changed

2309,Christina Xu,christina1012@fb.com,"""Keep the function for logSdkEvent for account kit

Summary: Keep the function for logSdkEvent for account kit, revert the change in D14672378 for account kit

Reviewed By: wi3lau

Differential Revision: D14897447

fbshipit-source-id: c93497e53e84d48a101746905a9ee8ddaa1b58fc""",0.7,None,changed

2310,Christina Xu,christina1012@fb.com,"""SDK change: Log subscribe and starttrail rather than purchase

Summary: SDK change: Log subscribe and starttrail rather than purchase

Reviewed By: dreamolight

Differential Revision: D14835849

fbshipit-source-id: fc6ce0829f7b813307544e5d6a4e27b22a90d97d""",0.7,None,changed

2311,Art Beatte,abeatte@fb.com,"""Optimizes requesting for login scopes.

Summary: [android sdk] Optimizes requesting for login scopes.

Reviewed By: dreamolight

Differential Revision: D14882687

fbshipit-source-id: fe666d369f0ea9c89b13fa1575c2d6e76cc80873""",0.7,None,changed

2312,Christina Xu,christina1012@fb.com,"""respect flag for time spent event

Summary: respect flag for time spent event

Reviewed By: codytwinton

Differential Revision: D14836023

fbshipit-source-id: 4b1f9fa7d526d8d76001529b391b69135955978d""",0.7,None,changed

2313,Art Beatte,abeatte@fb.com,"""Allows requesting Business And Consumer scopes in a single call.

Summary: [android sdk] Allows requesting Business And Consumer scopes in a single call.

Reviewed By: codytwinton

Differential Revision: D14839876

fbshipit-source-id: ed133a68ad024e76e5b7aaaf6567892077311185""",0.7,None,changed

2314,Jing Ping,jingping@fb.com,"""Update CHANGELOG.md (#552)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/552

Reviewed By: codytwinton

Differential Revision: D14812678

Pulled By: jingping2015

fbshipit-source-id: a18cc02e401eec5550fded3dc53f467fdba66732""",0.7,None,changed

2315,Stan Wu,dreamolight@fb.com,"""SDK version bump v(4.42.0)

Summary: SDK version bump from (4.41.0) to (4.42.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: jingping2015

Differential Revision: D14791442

fbshipit-source-id: 3c945eb9f2d1ffd587b31c5c9ca5286fb46a95e2""",0.2,None,changed

2316,Christina Xu,christina1012@fb.com,"""replace logSdkEvent by logEventImplicitly

Reviewed By: dreamolight

Differential Revision: D14672378

fbshipit-source-id: 449608442aec24968e351a36b5cfd1c9cb3de9e0""",0.7,None,changed

2317,Zilin Zhang,kylinchang@fb.com,"""Log warnings if App Event flags are not set in manifest

Summary: Log warnings if App Event flags are not set in manifest

Reviewed By: dreamolight

Differential Revision: D14622155

fbshipit-source-id: 363d74ac30f9f58d2a29cfaa0e922511dc2384fb""",0.7,None,changed

2318,Christina Xu,christina1012@fb.com,"""Store into userdatastore

Summary: Store into userdatastore

Reviewed By: codytwinton

Differential Revision: D14693060

fbshipit-source-id: 10ffe7dc6bdc8eefedbaa26fc98b78c405e5ba04""",0.7,None,changed

2319,Zilin Zhang,kylinchang@fb.com,"""Fix broken test (#551)

Summary:
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/551

assertEquals doesn't work for Bundle class, use TestUtils.assertEqualContentsWithoutOrder instead

Differential Revision: D14767730

fbshipit-source-id: c8f3a4048744ceb944a697708517f690642961a5""",0.7,None,fixed

2320,Jing Ping,jingping@fb.com,"""Fix buck build for tests apps

Summary: These 4 apps build in boiler-room start to failing, try to fix them in local .

Reviewed By: codytwinton

Differential Revision: D14726900

fbshipit-source-id: 4a7aad572d2c70b77d3053400303708f4b80d3f7""",0.7,None,fixed

2321,Zilin Zhang,kylinchang@fb.com,"""Fix broken tests

Summary: Add custom BundleMatcher to fix the equal problem of Bundle object.

Reviewed By: dreamolight

Differential Revision: D14742727

fbshipit-source-id: fdaa67c7a9253d1247d601d07368ee5914ed1582""",0.7,None,fixed

2322,Zilin Zhang,kylinchang@fb.com,"""Fix broken test

Summary: Fix broken test

Reviewed By: dreamolight

Differential Revision: D14714815

fbshipit-source-id: 06d9e4d386faf48457ace989e26fdad547c43389""",0.7,None,fixed

2323,Zilin Zhang,kylinchang@fb.com,"""Add unit tests to AppEventsLoggerTest

Summary:
Add unit tests:
1. publish install
2. request for custom audience third-party id

Differential Revision: D14699710

fbshipit-source-id: dc7b0805ed1d3bea0b08372ff1d3af596a2e97c1""",0.7,None,added

2324,Zilin Zhang,kylinchang@fb.com,"""Add unit tests to AppEventsLoggerTest

Summary:
Add unit tests:
1. flush behavior
2. push notification open
3. product item

Differential Revision: D14699158

fbshipit-source-id: 6272bc2dd39239e3f334a8281f6e663639d25e83""",0.7,None,added

2325,Stan Wu,dreamolight@fb.com,"""Add _inBackground for app events to indicate whether the events were logged when app in background mode

Summary: As title

Reviewed By: YOUDAN

Differential Revision: D14576408

fbshipit-source-id: eb6b69455e45001666bd01f5b03d68b4b1bbadda""",0.7,None,added

2326,Christina Xu,christina1012@fb.com,"""FacebookSDKJSInterface

Reviewed By: codytwinton

Differential Revision: D14671488

fbshipit-source-id: 239dd99209e5034ce7988fa0116da32f4ba05bb4""",0.7,None,changed

2327,Christina Xu,christina1012@fb.com,"""BoltsMeasurementEventListener

Reviewed By: wi3lau

Differential Revision: D14658113

fbshipit-source-id: 7bd19d66759fb88c70f50ed7409f6831e87e5e4b""",0.7,None,changed

2328,Christina Xu,christina1012@fb.com,"""Enforce to respect the flag for implicit events

Summary: reserved

Reviewed By: codytwinton, KylinChang

Differential Revision: D14657660

fbshipit-source-id: 87b05f43b385763a462289dfff4d373546c2cd8c""",0.7,None,changed

2329,Christina Xu,christina1012@fb.com,"""More refactor for AppEventsLogger

Reviewed By: dreamolight

Differential Revision: D14627031

fbshipit-source-id: ee08d8527c009e3f9131f1244533cb82fbc3c26b""",0.7,None,changed

2330,Christina Xu,christina1012@fb.com,"""Refactor AppEventsLogger

Reviewed By: dreamolight

Differential Revision: D14430988

fbshipit-source-id: f92f691881302c09b5854d9d9c310a9a206683e3""",0.7,None,changed

2331,Xiaoyun Liu,xiaoyunliu@fb.com,"""Implement expiredPermissions for AccessToken

Summary:
- Implement expiredPermissions for AccessToken
- Update unit test accordingly

Reviewed By: khp

Differential Revision: D14553331

fbshipit-source-id: 261744f65235d8cc41046aee7d6c5e3372cd6140""",0.7,None,changed

2332,faffas,rmei.north@gmail.com,"""Updated README - removed repeated word (#549)

Summary:
""Learn more about about"" -> ""Learn more about""

Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [ ] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [ ] submit against our `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/549

Reviewed By: joesus

Differential Revision: D14526776

Pulled By: codytwinton

fbshipit-source-id: fb72b0c25b311604accbc962f0597d08fc6a7c36""",0.7,None,removed

2333,Zilin Zhang,kylinchang@fb.com,"""Add unit tests to AppEventsLoggerTest

Summary:
1. Better naming and move mockEvent to before function
2. Add unit tests for testActivateApp, testSetPushNotificationsRegistrationId, testLogPushNotificationOpen

Reviewed By: YOUDAN

Differential Revision: D14511822

fbshipit-source-id: abb580cf8571c2697f2afcf75017be766ad936a5""",0.7,None,added

2334,Zilin Zhang,kylinchang@fb.com,"""Add Logevent unit tests to AppEventsLoggerTest

Summary: add unit tests for different logging functions

Reviewed By: YOUDAN

Differential Revision: D14497233

fbshipit-source-id: 315aefd3209dcd574a43aa8c713c42d6778dda01""",0.7,None,added

2335,Fernando GonzÃ¡lez,fernando.gonzalez.upiicsa@gmail.com,"""Create setters for loginText and logoutText to make LoginButton more customizable (#543)

Summary:
I've found myself in situations where I have to take login/logout texts from an external source. Even though Facebook provides a lot of translations in project resources and also allow us to set these texts via xml attributes, I haven't found a solution for setting these texts programmatically.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/543

Reviewed By: codytwinton

Differential Revision: D14408595

Pulled By: jingping2015

fbshipit-source-id: c640f0cb7f1c7fe2add8e8f2c0df775d9eefd44a""",0.7,None,changed

2336,Zilin Zhang,kylinchang@fb.com,"""Add AppEventsLoggerTest

Summary:
1. Add a simple serial executor which will can be used to mock multithread executor and make Runnable execute in serial way
2. Remove AnalytisUserIDTest which is deprecated
3. Add AppEventsLoggerTest, which tests analytics user id

Reviewed By: jingping2015, dreamolight

Differential Revision: D14340044

fbshipit-source-id: 48db11027340a972cfd89b7d0a4981020a98d3ad""",0.7,None,added

2337,Zilin Zhang,kylinchang@fb.com,"""Improve GraphRequestTest

Summary:
1. Improve assertions
2. Add testCallback

Reviewed By: codytwinton

Differential Revision: D14362869

fbshipit-source-id: 22f790cc28ca992f9743fcc277094b7d4c4c602b""",0.7,None,fixed

2338,Christina Xu,christina1012@fb.com,"""Create facebook-beta kit

Reviewed By: codytwinton

Differential Revision: D14291681

fbshipit-source-id: d51d822a53be1c84c7952dc8e0b9a730926fc1f5""",0.7,None,changed

2339,Jing Ping,jingping@fb.com,"""Fix the add tag message

Summary: Fix the tag msg

Reviewed By: Kilenaitor

Differential Revision: D14380661

fbshipit-source-id: f0502256976e532880ff3d636ba49acb3052c560""",0.7,None,fixed

2340,Zilin Zhang,kylinchang@fb.com,"""Add changelog of deprecated FacebookUninstallTracker

Summary: Add changelog of deprecated FacebookUninstallTracker, which will be removed in the next release

Reviewed By: jingping2015

Differential Revision: D14388340

fbshipit-source-id: 0249511170152374b47e747accfeeea4f82aee49""",0.7,None,added

2341,Zilin Zhang,kylinchang@fb.com,"""Remove deprecated Uninstall class

Summary: Remove deprecated FacebookUninstallTracker, can use AppEventsLogger.setPushNotificationsRegistrationId instead to send the device token

Reviewed By: wi3lau

Differential Revision: D14380461

fbshipit-source-id: 29f400a75a6b0382f404add431d50c0b2fb4edff""",0.7,None,changed

2342,Jing Ping,jingping@fb.com,"""SDK version bump v(4.41.0)

Summary: SDK version bump from (4.40.0) to (4.41.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/release.sh bump-version

Reviewed By: YOUDAN

Differential Revision: D14373255

fbshipit-source-id: 0d401f656a916f3e39d34ddfed844a46bb22d494""",0.2,None,changed

2343,Jing Ping,jingping@fb.com,"""Revert D14283181

Summary:
Revert D14283181
After talk with Cody, Let's release marketing kit internal rather than do it in travis job

Reviewed By: dreamolight

Differential Revision: D14368049

fbshipit-source-id: 62aaba9da1fa8735d6447b1ccf0feae28c12c860""",0.7,None,changed

2344,Christina Xu,christina1012@fb.com,"""Revert change from dob to db

Summary: Revert change from dob to db

Reviewed By: wi3lau, KylinChang

Differential Revision: D14370514

fbshipit-source-id: 8390ae11e52e15f955f282b15861581a992b8680""",0.7,None,changed

2345,Zilin Zhang,kylinchang@fb.com,"""easy: clean up unuserd import and private variables

Summary: clean up unuserd import and private variables

Differential Revision: D14340173

fbshipit-source-id: fd70a399205b62656674270e72256cc66022cb7b""",0.7,None,changed

2346,Rick Ratmansky,rratmansky@fb.com,"""Fixing robolectric tests by not skipping androidx instrumentation

Summary:
androidx files were not being instrumented properly which meant we would have exceptions thrown by powermock

Robolectric Instrumentation config was changed by hand, the remainder is a codemod using abgs + xargs + sed

Differential Revision: D14323745

fbshipit-source-id: 56aa97dad5d7197f4eb0ba1fdd80b1583bcad6ac""",0.7,None,changed

2347,Christina Xu,christina1012@fb.com,"""Remove lock, use concurrentMap instead

Summary: Remove lock, use concurrentMap instead

Reviewed By: jingping2015

Differential Revision: D14248663

fbshipit-source-id: aaa70730e11eca6aa6d8773e2e11fc58f1ee7783""",0.7,None,changed

2348,Christina Xu,christina1012@fb.com,"""Remove redundant const

Differential Revision: D14306823

fbshipit-source-id: 1e21132df44b02f8bfac0e6a7cf69c5581aa15b4""",0.7,None,changed

2349,Jing Ping,jingping@fb.com,"""Add marketing kit build

Summary:
Currently I comment out the travis release for marketing kit https://github.com/facebook/facebook-android-sdk/blob/15a97e358b01233837462d7a366de595129cbf64/.travis/release.sh#L80
Since it is not open source. and gradle will build it first before upload to staging. so I change the gradle grab the build from marketing/build folder, which means we also need to open source the facebook/marketing/build

Actually I am not sure if this is a proper way to do this, need some comment. Thanks

Reviewed By: YOUDAN

Differential Revision: D14283181

fbshipit-source-id: b7bf7e98ae124ef4ea90af136cbf3a146033c3c0""",0.7,None,added

2350,Christina Xu,christina1012@fb.com,"""Fix the incorrect const for db

Summary: Fix the incorrect const for db

Reviewed By: wi3lau

Differential Revision: D14287603

fbshipit-source-id: afdc00e5d1b648ccc76663b215ff94b1da2377a6""",0.7,None,fixed

2351,Christina Xu,christina1012@fb.com,"""Improvement for UserDataStore

Reviewed By: KylinChang

Differential Revision: D14245841

fbshipit-source-id: 3385d404d31efe2f57f654fc12d7fa2f3baf01de""",0.7,None,changed

2352,Christina Xu,christina1012@fb.com,"""Use the correct field for normalization

Reviewed By: KylinChang

Differential Revision: D14285117

fbshipit-source-id: 7878bd70394807809ab0cca4e1d53c1cded60ae3""",0.7,None,changed

2353,Christina Xu,christina1012@fb.com,"""Improve the normalisation for user data

Summary: Improve the normalisation for user data

Reviewed By: wi3lau

Differential Revision: D14251118

fbshipit-source-id: f331fde98728da82f68df51648f2ef283499f1a2""",0.7,None,fixed

2354,Cody Winton,codytwinton@fb.com,"""Resolve Issue with String Format

Summary:
Should fix a problem where `String.format` crashes with:

```
Fatal Exception: java.lang.NullPointerException
Attempt to get length of null array
```

For more context, view the [bug report](https://developers.internmc.facebook.com/bugs/406495719925086/)

Reviewed By: KylinChang

Differential Revision: D14219986

fbshipit-source-id: 7d2a4ec0720deb48661fabcbcb39d861ff5b70a7""",0.7,None,fixed

2355,Jing Ping,jingping@fb.com,"""Add auto release in travis CI (#548)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [ ] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [ ] submit against our `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/548

Reviewed By: codytwinton

Differential Revision: D14188237

Pulled By: jingping2015

fbshipit-source-id: 361be1dc17583289669358779845b206650631d3""",0.7,None,added

2356,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: cdf9636806bb969cbb330f23f9f5dbafbe49d538""",0.2,None,changed

2357,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_core_ui.config.json on master

fbshipit-source-id: 1f46b769a42c9f609ba6cc06ddba49cf04e9b31e""",0.2,None,changed

2358,Phobetor,phobetor@users.noreply.github.com,"""Silently catch exceptions from invalid enum values (#544)

Summary:
Your current SDK crashes all the time for real users:
```
java.lang.IllegalArgumentException:
   at java.lang.Enum.valueOf (Enum.java:257)
   at com.facebook.appevents.codeless.internal.EventBinding$MappingMethod.valueOf (EventBinding.java:154)
 at com.facebook.appevents.codeless.internal.EventBinding.getInstanceFromJson (EventBinding.java:82)
  at com.facebook.appevents.codeless.internal.EventBinding.parseArray (EventBinding.java:69)
  at com.facebook.appevents.codeless.CodelessMatcher$ViewMatcher.run (CodelessMatcher.java:224)
  at android.os.Handler.handleCallback (Handler.java:789)
  at android.os.Handler.dispatchMessage (Handler.java:98)
  at android.os.Looper.loop (Looper.java:164)
  at android.app.ActivityThread.main (ActivityThread.java:6944)
  at java.lang.reflect.Method.invoke (Native Method)
  at com.android.internal.os.Zygote$MethodAndArgsCaller.run (Zygote.java:327)
  at com.android.internal.os.ZygoteInit.main (ZygoteInit.java:1374)
```

There already is a bug report for this but it has not been worked on yet because it is stuck in ""need more info"" state:
https://developers.facebook.com/support/bugs/278547559523105/

Looks like this comes from invalid/unexpected values delivered by your codeless configuration JSON data.

What this change does
--
This change fixes the uncaught exceptions by catching them to avoid the resulting crashes. Imho this should be done anyway for incoming data processing and should have been done from the start of this feature.

What this change doesn't do
--
The unexpected values in the configuration data have to be handled somehow of course but this is out of the scope of this fix.

Misc
--
To whom it may concern: your pull request template seems to be out of date. It tells me to issue my pull request against your `:dev` branch but there is no such branch.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/544

Reviewed By: wi3lau

Differential Revision: D13948378

Pulled By: jingping2015

fbshipit-source-id: 2bbe6fd40dad62360f0eec3f27e00d46b284c580""",0.7,None,fixed

2359,Christian Becker,christian.becker.1987@gmail.com,"""Remove android:supportsRtl=""true"" from facebook-common (#539)

Summary:
Each app that depends on this library should choose for themselves if they support right-to-left or not. I don't want a library to set this automatically without me knowing it by checking the merged manifest.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/539

Reviewed By: stoyan

Differential Revision: D13605425

Pulled By: jingping2015

fbshipit-source-id: 0538d82ccbef2ea44e29b2bb1b896319d8f674bb""",0.2,None,changed

2360,Jing Ping,jingping@fb.com,"""Update PULL_REQUEST_TEMPLATE (#545)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [ ] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [ ] submit against our `:dev` branch, not `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/545

Reviewed By: stoyan

Differential Revision: D13578691

Pulled By: jingping2015

fbshipit-source-id: ef8a3cbb059e10a8b688a191313fffe2dccf0214""",0.7,None,changed

2361,Build Service,svcscm@fb.com,"""translation auto-update for i18n/bishop.config.json on master

fbshipit-source-id: 334e18244cf8546846f2a1fb0f59a226a4f55b80""",0.2,None,changed

2362,Cody Winton,codytwinton@fb.com,"""Added CHANGELOG

Summary: Context: [Workplace Post](https://fb.workplace.com/groups/763572920357992/permalink/2304321386283130/)

Reviewed By: jingping2015

Differential Revision: D13871432

fbshipit-source-id: b54336168f7c49bfb7c92f53a9842cb02fba4ec3""",0.7,None,added

2363,Christina Xu,christina1012@fb.com,"""Remove unused fields

Summary: Remove unused fields

Reviewed By: KylinChang

Differential Revision: D13829589

fbshipit-source-id: 16f54452d48cb201097afa35e5a11b2d8b61cad1""",0.7,None,removed

2364,Tao Ge,taoge@fb.com,"""prevent null pointer exception in SourceApplicationInfo

Summary:
apparently openIntent can be null and lead to crash.
putting in null check

Reviewed By: codytwinton

Differential Revision: D13815411

fbshipit-source-id: 1bf409695b11989d5f2b10a53297054d007c94d6""",0.7,None,changed

2365,Taiki Yamaguchi,taiki@fb.com,"""Add new catalog product optional field parameter name constant

Summary: Smart Pixel and Smart AppEvent now supports ""category"" optional field. Adding a corresponding new constant to the SDK.

Reviewed By: codytwinton

Differential Revision: D13816308

fbshipit-source-id: a5a19ac19d4bcfa38b7e526758abf5761bd10e3f""",0.7,None,added

2366,Christina Xu,christina1012@fb.com,"""Add Login activity to coffeeshop

Summary: Add Login activity to coffeeshop, easier for future test

Reviewed By: KylinChang

Differential Revision: D13811278

fbshipit-source-id: 603960e6ca86b2ad8225c34350744331ec85176f""",0.7,None,added

2367,Tao Ge,taoge@fb.com,"""fix nullpointer exception in UserSettingsManager

Summary:
crash reported when response is null
setting it to the fallback value instead of crashing out

Reviewed By: YOUDAN, KylinChang

Differential Revision: D13815342

fbshipit-source-id: 6f58911ab38b7a9c38a614eb10a3f1bda069c4cd""",0.7,None,fixed

2368,Build Service,svcscm@fb.com,"""translation auto-update for i18n/portal_login.config.json on master

fbshipit-source-id: 7b12c79c4b9b4903bc2fdbc907087f0d65074e33""",0.2,None,changed

2369,Christina Xu,christina1012@fb.com,"""Some minor changes for ViewIndexer

Summary: Some minor changes for ViewIndexer

Differential Revision: D13811526

fbshipit-source-id: 755ae047086b6f6fb3f3db74240756eb75ea746a""",0.7,None,changed

2370,Christina Xu,christina1012@fb.com,"""Update to the correct key name

Summary: Update to the correct key name

Reviewed By: KylinChang

Differential Revision: D13787186

fbshipit-source-id: bec156fbb257d7c337f9a9f1f1a08b22d1d3203e""",0.7,None,changed

2371,Jing Ping,jingping@fb.com,"""Remove deprecated fields for page search

Summary:
`workflows` field deprecated since v3.2 https://fburl.com/kj1lt5xd
So we get error when we fetch the page information.
This diff I just remove this fields in test app, since this fields should also be available for older version like v3.1.

But in feature we should remove this filed from https://fburl.com/1drg4t5c and we need a way to keep this enum fields are updated with different version.

Reviewed By: codytwinton

Differential Revision: D13772080

fbshipit-source-id: 6f05119ea12f39841f76d8d8f2818c26f7a9dad6""",0.7,None,added

2372,Christina Xu,christina1012@fb.com,"""Some minor changes for ViewHierarchy

Summary: Some minor changes for ViewHierarchy

Reviewed By: dreamolight

Differential Revision: D13738301

fbshipit-source-id: 6d64eb61c1d5ee11084961801ee0b89b1fabf5b6""",0.7,None,changed

2373,Christina Xu,christina1012@fb.com,"""Use equals for string comparison per Java standard

Summary: Use equals for string comparison per Java standard

Differential Revision: D13725802

fbshipit-source-id: a847a267266a1edaa0c06b1e7d22dae133d5a00a""",0.7,None,changed

2374,Christina Xu,christina1012@fb.com,"""Attach if is_text_sensitive for codeless so we can blur image in server

Summary: Attach if is_text_sensitive for codeless so we can blur image in server

Differential Revision: D13726152

fbshipit-source-id: 2261a04997690f31769c18c431aae01e8e389418""",0.7,None,changed

2375,Christina Xu,christina1012@fb.com,"""Remove redundant code in ViewIndexer

Summary: [SDK cleanup] Remove redundant code in ViewIndexer

Reviewed By: KylinChang

Differential Revision: D13722398

fbshipit-source-id: 444cc33094bdc07446101796e602f1ace106a950""",0.7,None,changed

2376,Stan Wu,dreamolight@fb.com,"""Deprecate FacebookUninstallTracker as AppEventsLogger provided the function to submit push token

Summary: As title

Reviewed By: KylinChang

Differential Revision: D13721957

fbshipit-source-id: e1ab1c5533c5e63cd2f46e354a6d0cf16c50d934""",0.7,None,changed

2377,Theodor-Cosmin Didii,theodordidii@fb.com,"""Fix AN documentation

Summary: We update the public API folder so we need to update the path for the documentation.

Differential Revision: D13700405

fbshipit-source-id: 7666c2f5d228b4b65280ab24d8ba598604954fd3""",0.7,None,fixed

2378,Christina Xu,christina1012@fb.com,"""Remove redundant code

Summary: Remove redundant code

Reviewed By: codytwinton

Differential Revision: D13665036

fbshipit-source-id: 0cb8f0481a25b672a22919ebf2480c4ad89523de""",0.7,None,changed

2379,Christina Xu,christina1012@fb.com,"""Remove unused import in AutomaticAnalyticsLogger

Summary: [SDK cleanup] Remove unused import in AutomaticAnalyticsLogger

Reviewed By: KylinChang

Differential Revision: D13705370

fbshipit-source-id: 2d45bb1b8956eca3c43f71309d209c3d79f0bf1e""",0.7,None,removed

2380,Stan Wu,dreamolight@fb.com,"""Check whether codeless setup is enabled for the device when shaking

Summary: As title, this is to fix the issue that codeless setup won't work on the first launch of the app.

Differential Revision: D13702060

fbshipit-source-id: 492f9b9936cb2158d85645cc6693e6df33aa692f""",0.7,None,fixed

2381,Jing Ping,jingping@fb.com,"""Update deploy.sh (#546)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [ ] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [ ] submit against our `:dev` branch, not `master`.
- [ ] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/546

Reviewed By: codytwinton

Differential Revision: D13686982

Pulled By: jingping2015

fbshipit-source-id: 266e277ea160d22102b589108b5666f76f80e736""",0.7,None,changed

2382,Jing Ping,jingping@fb.com,"""SDK version bump v(4.40.0)

Summary: SDK version bump from (4.39.0) to (4.40.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/cut_branch_android.sh

Reviewed By: dreamolight

Differential Revision: D13682467

fbshipit-source-id: 1f17092d097820f5afb89d45fa6400d6aa9c8902""",0.2,None,changed

2383,Christina Xu,christina1012@fb.com,"""Check if allow getting advertiserid before fetching id

Summary: Check if allow getting advertiserid before fetching id

Reviewed By: wi3lau, dreamolight

Differential Revision: D13665611

fbshipit-source-id: 77306270f19b85ccfdc2c8944abca2d2da668125""",0.7,None,changed

2384,Christina Xu,christina1012@fb.com,"""Fetch codeless flag with separate request

Summary: Fetch codeless flag with separate request

Reviewed By: KylinChang

Differential Revision: D13662607

fbshipit-source-id: 1411a9f1eec32adcd313718f2249152eccb08024""",0.7,None,changed

2385,Christina Xu,christina1012@fb.com,"""Create UserSettingsManager

Summary: autolog and advertiserid flags

Reviewed By: KylinChang

Differential Revision: D13662573

fbshipit-source-id: 6b79ba06ce5126ba5ed4dfd08c5076e905dbcc64""",0.7,None,changed

2386,Stan Wu,dreamolight@fb.com,"""Send fb_mobile_obtain_push_token event when function for updateing push token get called

Summary: iOS SDK has done so already, make this change to be consistent to iOS.

Reviewed By: KylinChang

Differential Revision: D13662600

fbshipit-source-id: c81f8e57df35228a29fd997ab5203ebdb1d2ef34""",0.7,None,changed

2387,Christina Xu,christina1012@fb.com,"""Remove advertiserid when fetch gks

Summary: Remove advertiserid when fetch gks

Reviewed By: KylinChang, dreamolight

Differential Revision: D13642089

fbshipit-source-id: bcfd4a605de664001983b4b669ecd2766b9e0dd3""",0.7,None,changed

2388,Christina Xu,christina1012@fb.com,"""Not fetch GK when advertiser id is unavailable

Summary: Not fetch GK when advertiser id is unavailable

Reviewed By: jingping2015

Differential Revision: D13640754

fbshipit-source-id: 8c9733549f1180c6be476924615563f66a098dab""",0.7,None,changed

2389,Jing Ping,jingping@fb.com,"""Update .travis.yml (#542)

Summary:
deploy to maven

Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `:dev` branch, not `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/542

Reviewed By: codytwinton

Differential Revision: D13571878

Pulled By: jingping2015

fbshipit-source-id: aff6907bedcdc13db4b8fa9535115729d0611c92""",0.2,None,changed

2390,Kanghee Park,khp@fb.com,"""Clean up RECEIVE_SMS permissions and SMS Manager API

Summary:
We removed RECEIVE_SMS from accountkitsdk (D13489020), let's clean up the toggles in sample apps that toggle usage of this permission as well.

Also enable code path that uses SMS Manager to generate nonce instead of using app's hash on Android O and above for the SMS Retreiver API.

Reviewed By: ct2mak

Differential Revision: D13583368

fbshipit-source-id: f78fbd9d39dab9c488f04cb7df795e787274c7f8""",0.7,None,removed

2391,Stan Wu,dreamolight@fb.com,"""Fix locale insensitive fields for event bindings

Summary:
Method and action type of event bindings should be locale insensitive.

https://docs.oracle.com/javase/7/docs/api/java/lang/String.html#toUpperCase

Differential Revision: D13510132

fbshipit-source-id: e9760649085373b925d9e56e0c3daa6ca7879acc""",0.7,None,fixed

2392,Calvin Mak,cmak@fb.com,"""Allow old access tokens to not return null

Summary: We are throwing an exception here because we don't have data_access_expiration_time so users get logged out. Let's keep them logged in and just have a infinite time for now

Differential Revision: D13407742

fbshipit-source-id: f45afafb76169fffd766f96dd2a8836d5654a2f7""",0.7,None,changed

2393,Jing Ping,jingping@fb.com,"""Fix the android sdk open source requirement

Summary:
Android sdk fail the open source requirement since
* Don't have Code of Conduct File -- add it in this diff
* Files miss Copyright Headers : P60210842ï¼Œ -- added all miss Copyright Headers, except
    * CONTRIBUTING.mdown:
     * README.mdown:
     * samples/FBLoginSample/CONTRIBUTING.mdown:
     * samples/FBLoginSample/README.mdown:
     * samples/RPSSample/src/com/android/vending/billing/IInAppBillingService.aidl:

The first four are readme and contributing file, should be fine ? Christian Delahousse
The last are copy from google code, it should be a exception

Reviewed By: cdelahousse

Differential Revision: D13405784

fbshipit-source-id: 598d64f8157bdecde52f3ac90479b1bfe5f3ccaa""",0.7,None,fixed

2394,Stan Wu,dreamolight@fb.com,"""Add null check for bitmap and count check for spinner

Summary: As title

Reviewed By: KylinChang

Differential Revision: D13366376

fbshipit-source-id: 8e706236de903a3a669c4916939be539df037791""",0.7,None,added

2395,Stan Wu,dreamolight@fb.com,"""Add a flag to control whether advertiserID could be collected

Summary: As title

Reviewed By: wi3lau, KylinChang

Differential Revision: D13274072

fbshipit-source-id: cd6baf1ef985cf970dcccd71475b2005af9ea8ab""",0.7,None,added

2396,Stan Wu,dreamolight@fb.com,"""Return null AttributionIdentifiers when limitTracking is enabled or AutoLogAppEvents is disabled

Summary: As title

Reviewed By: jingping2015, KylinChang

Differential Revision: D13213876

fbshipit-source-id: 3299468068df322857dd101b77db305b83560882""",0.7,None,changed

2397,Jing Ping,jingping@fb.com,"""SDK version bump v(4.39.0)

Summary: SDK version bump from (4.38.1) to (4.39.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/cut_branch_android.sh

Reviewed By: dreamolight

Differential Revision: D13240380

fbshipit-source-id: 38db2188324dea8f86f30b1bd6739a03898c8e4b""",0.2,None,changed

2398,PrzemysÅ‚aw Bis,przemyslawbis@fb.com,"""Skip the auth dialog if the activity is finishing

Summary: Otherwise NPE or IllegalStateException (showing the dialog after calling onSaveInstanceState) can be thrown.

Reviewed By: howardlu0106, khp

Differential Revision: D13236668

fbshipit-source-id: 892eea19afc2ae6a3151ef7912c16bfa28bc89b9""",0.7,None,changed

2399,Zilin Zhang,kylinchang@fb.com,"""fetch gk values in fixed one hour like fetching app settings

Summary:
1. add timestamp in GK load function and do nothing if the timestamp is valid.
2. call GK load function in getGateKeeperForKey function
3. set timestamp valid interval as one hour

Reviewed By: codytwinton

Differential Revision: D13128690

fbshipit-source-id: 71d3e8b27f1ef5071e74c2226f522690300e49f2""",0.7,None,fixed

2400,Jing Ping,jingping@fb.com,"""2. buck build PlacesGraphSample

Summary: Want to get this test app to be able to buck build and have continues builds in boiler room/build page for QA team, this diff make it can be run buck locally

Reviewed By: codytwinton

Differential Revision: D13129626

fbshipit-source-id: 89fba1d135168ef12ef866ee2dc34ce54c449633""",0.7,None,changed

2401,Jing Ping,jingping@fb.com,"""1. buck build RPSSample

Summary: Want to get this test app to be able to buck build and have continues builds in boiler room/build page for QA team, this diff make it can be run buck locally

Reviewed By: codytwinton

Differential Revision: D13125127

fbshipit-source-id: 9f4f91c9b5a07364d0b3a670e698721c63a0efef""",0.7,None,changed

2402,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 131a1a2117dce81e43800fb1a9603ff51c05e81f""",0.2,None,changed

2403,Christina Xu,christina1012@fb.com,"""Remove GK for purchase auto-logging

Summary: Remove GK for purchase auto-logging

Reviewed By: wi3lau

Differential Revision: D13049522

fbshipit-source-id: 7b1d0949e435b50304c01265e5260bb88fa1b31d""",0.7,None,changed

2404,Zilin Zhang,kylinchang@fb.com,"""support firing events from react native button

Summary: support firing events from react native button

Reviewed By: codytwinton

Differential Revision: D13035536

fbshipit-source-id: de241b8b1e51d8b71bedfb2810e6e6f4b9d88971""",0.7,None,changed

2405,Jing Ping,jingping@fb.com,"""Update .travis.yml (#540)

Summary:
Thanks for proposing a pull request.

To help us review the request, please complete the following:
- [x] sign contributor license agreement: https://developers.facebook.com/opensource/cla
- [x] submit against our `:dev` branch, not `master`.
- [x] describe the change (for example, what happens before the change, and after the change)
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/540

Reviewed By: stoyan

Differential Revision: D13038348

Pulled By: jingping2015

fbshipit-source-id: 46b8bd7d8d2896182aee35f5cbb23daa56e3be7e""",0.2,None,changed

2406,Jing Ping,jingping@fb.com,"""Fix the error when build in travis CI

Summary:
Context about this diff:
I tried to enable travis CI for android sdk, get error when run `./gradlew assemble`
 https://travis-ci.org/facebook/facebook-android-sdk/builds/454252142?utm_source=github_status&utm_medium=notification

Since in open source, marketing-api is not available and LoginSample need accountkit resource which is also not available in github.

Reviewed By: stoyan

Differential Revision: D13036047

fbshipit-source-id: 6b1e46fbdef7c88895eaf11b19d26c66974169ad""",0.7,None,fixed

2407,xiawanli,xiawanli2008@gmail.com,"""Fix bug:sdkInitialize method set availableVersions not null,but empty then facebook app cannot be launched. (#538)

Summary:
When facebook app is not alive, sdk cannot fetch ProtocolVersions from faceboook app using ContentProvider. (Because many Chinese smart phone disallow application started by other app.)

So when launching sharing app, then lanunch the facebook app, shaing app cannot start facebook app when sharing at the first time.

This is becasue FacebookSdk.sdkInitialize method makes availableVersions not null, but empty. So I add this to fix this bug.
Pull Request resolved: https://github.com/facebook/facebook-android-sdk/pull/538

Reviewed By: stoyan

Differential Revision: D13014356

Pulled By: jingping2015

fbshipit-source-id: af7de04e4837bd6c2ef2ece77e8a2124a0b9eadc""",0.7,None,fixed

2408,Zilin Zhang,kylinchang@fb.com,"""support RN touchable components in android

Summary:
support RN touchable components in android
In React Native, RCTRootView use TouchTargetHelper to find target view of touch event and dispatch touch events. In this diff, we use reflection to get helper function of TouchTargetHelper and borrow the idea of how it detects target views.

Reviewed By: codytwinton

Differential Revision: D13007736

fbshipit-source-id: 7f62787c4256b942021c01e83bc2257ea3bcd0f8""",0.7,None,changed

2409,Adam Liu,adamliu84@fb.com,"""Singular ViewIndexer

Summary:
Singular call on ViewIndexer
See D12921797

Reviewed By: codytwinton

Differential Revision: D12921796

fbshipit-source-id: f62f93420665354b05b5a6803d20e580ee4bd827""",0.7,None,changed

2410,Stan Wu,dreamolight@fb.com,"""Update target API level of androidsdk to 26 as Google required

Summary:
As title.

> Google Play will require that new apps target at least Android 8.0 (API level 26) from August 1, 2018, and that app updates target Android 8.0 from November 1, 2018.

https://developer.android.com/distribute/best-practices/develop/target-sdk

Reviewed By: KylinChang

Differential Revision: D12954641

fbshipit-source-id: 703e8f1bc7bcdc4bf2e4172f0d9e68f5ab9141a1""",0.7,None,changed

2411,Jing Ping,jingping@fb.com,"""SDK version bump v(4.38.1)

Summary: SDK version bump from (4.38.1) to (4.38.1). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/cut_branch_android.sh

Reviewed By: dreamolight

Differential Revision: D12854004

fbshipit-source-id: c169a357883049c120ebd185330c12de1f8477b2""",0.2,None,changed

2412,Stan Wu,dreamolight@fb.com,"""Fix the dead lock while getting advertiserID

Summary:
Both FetchedAppSettingsManager and GateKeepersManager will fetch advertiserID when app starts, which caused the deadlock. This will fix the issue.

Will make ` AttributionIdentifiers.getAttributionIdentifiers(context);` more flexible in the future, it shouldn't cause deadlock.

Reviewed By: jingping2015

Differential Revision: D12849640

fbshipit-source-id: 0abdd1e822067388eb65d1f7af9484c453c01019""",0.7,None,fixed

2413,Stan Wu,dreamolight@fb.com,"""Remove marketingkit check when fetch app settings

Summary: As we've migrated codeless setup into CoreKit, there is no need to check existence of MarketingKit.

Reviewed By: wi3lau

Differential Revision: D12843282

fbshipit-source-id: 5845caf89043fecfc4ecaeea91b09a4af6980c89""",0.7,None,changed

2414,Taiki Yamaguchi,taiki@fb.com,"""Renaming product deep link parameter names

Summary: I added new parameters for dynamic product deep links in my previous diff but the names can be confused with the app's meta data. In this diff, I renamed parameters to better clarify that these are for dynamic product applinks, not the app itself.

Reviewed By: wi3lau

Differential Revision: D12817263

fbshipit-source-id: aadf8a3c769a06ad8b151ede244c99d53af09657""",0.7,None,added

2415,Zilin Zhang,kylinchang@fb.com,"""attach RCTListener to RCTButton

Summary: attach RCTListener to RCTButton

Reviewed By: codytwinton

Differential Revision: D10866957

fbshipit-source-id: efc0a741129bf6f017fd2f8e153fcb5578cd659f""",0.7,None,changed

2416,Adam Liu,adamliu84@fb.com,"""setIsUnityInit function on Android

Summary:
Adding setIsUnityInit on Android to trigger FB Unity SDK is init and request for Codeless Unity Logger mapping config.
Unity implementation @ D10465111

//Related past diff: D10215680//

 ---

**InternalSettings.isUnityApp seem to be broken!**

Reviewed By: codytwinton

Differential Revision: D10464797

fbshipit-source-id: 7deb10e3086b81517c6276cd192de1a3b3a9f430""",0.7,None,fixed

2417,Stan Wu,dreamolight@fb.com,"""Fix gradle build for androidsdk

Summary: jcenter() should be listed at the last place in repositories

Reviewed By: jingping2015

Differential Revision: D10863524

fbshipit-source-id: 67981eaf5633d3a370f9af2c4658385efeb5f3f9""",0.7,None,fixed

2418,Tobias Lindskog,tobiasl@fb.com,"""Let DeviceAuthDialog pass extra data back to LoginManager

Summary: Add an extra data field to the result intent that can be used by custom DeviceAuthDialogs for passing data back to the LoginManager.

Reviewed By: khp

Differential Revision: D10492218

fbshipit-source-id: c3a24c99438c5125da8211cc53bc82324f921070""",0.7,None,added

2419,Jing Ping,jingping@fb.com,"""Bump API version for android sdk

Summary: as title

Reviewed By: codytwinton, dreamolight

Differential Revision: D10511791

fbshipit-source-id: 164925a8e3e4be4b88040d2b7c623fd1162b0c69""",0.2,None,changed

2420,Taiki Yamaguchi,taiki@fb.com,"""Add optional parameters for product catalog update event

Summary: Smart Pixel now supports product item optional fields and we want to expand this to Smart AppEvent, too. This diff adds new external event parameters to be used to specify the optional fields in a bundle.

Reviewed By: wi3lau

Differential Revision: D10420719

fbshipit-source-id: 7f1adfb4aff5458c1ec54757ba13ef8b0ac78cde""",0.7,None,added

2421,Yujing Wang,yujingwang@fb.com,"""only submit icon with 44*44 to server

Summary:
It will hurt performance if we always submit large images to server.
With this diff only the image is smaller than 44*44 we'll send it to server.

Reviewed By: dreamolight

Differential Revision: D10500076

fbshipit-source-id: ec231652cf8d824634af020e0c74322d0ed94a69""",0.7,None,changed

2422,Yujing Wang,yujingwang@fb.com,"""call app_indexing api when activity changes

Summary:
we used to call button_indexing api when acitivy changes, to send all clickable components metainfo to server.
With this diff, we use app_indexing api to send the tree (including classtypebitmask, childviews along with component dimension, appearance ) to server.

Reviewed By: KylinChang

Differential Revision: D10178161

fbshipit-source-id: 861b5001e4161208eef3f0aa047ef6282655fa2a""",0.7,None,changed

2423,Zilin Zhang,kylinchang@fb.com,"""add appID argument in getGateKeeperForKey

Summary: add appID argument in getGateKeeperForKey

Reviewed By: codytwinton

Differential Revision: D10472622

fbshipit-source-id: 7b9b0a1c0500bc84bf63272a597281e145ca7e41""",0.7,None,added

2424,Stan Wu,dreamolight@fb.com,"""Migrate codeless setup from marketing kit to core kit

Summary: As title

Reviewed By: codytwinton

Differential Revision: D10456926

fbshipit-source-id: 3a64a399eea038e54fe0c591619aeef6cf4d8b08""",0.7,None,changed

2425,Sachin Shah,shahsachin@fb.com,"""Expose layout customization for login fragment

Reviewed By: khp

Differential Revision: D10440713

fbshipit-source-id: 5ea91d34d9953e516bd27fa9010a50e377d4ef76""",0.7,None,changed

2426,Sachin Shah,shahsachin@fb.com,"""Make network dependant calls non-synchronized

Summary:
Network calls can take very long if network is not available
and network timeout is long. Once synchronized method call holds the
lock for too long, then the other synchronized call will be blocked
until that lock is released. As far as we are protecting the data
from multiple threads, synchronization as method level is not needed.

Reviewed By: khp

Differential Revision: D10437143

fbshipit-source-id: c254e8159ff1b05897485d3be32ac2c8673a128b""",0.7,None,changed

2427,Christina Xu,christina1012@fb.com,"""Log as Subscribe when passing GK

Summary: Log as Subscribe when passing GK

Reviewed By: KylinChang

Differential Revision: D10431101

fbshipit-source-id: 017ee37e460e2806e9d016968430206078f532ee""",0.7,None,changed

2428,Zilin Zhang,kylinchang@fb.com,"""change getGateKeeperForKey

Summary: change getGateKeeperForKey

Differential Revision: D10420812

fbshipit-source-id: 5a6a0cec14c97a0d82d8f12f4770a65fdc22c1c0""",0.7,None,changed

2429,Jing Ping,jingping@fb.com,"""SDK version bump v(4.38.0)

Summary: SDK version bump from (4.37.0) to (4.38.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/cut_branch_android.sh

Reviewed By: codytwinton

Differential Revision: D10414215

fbshipit-source-id: f67b5b4d923642dfeebed3d8778d7f7bd1d6a47f""",0.2,None,changed

2430,Zilin Zhang,kylinchang@fb.com,"""refractor FetchedAppGateKeepersManager parsing

Summary: refractor FetchedAppGateKeepersManager parsing

Differential Revision: D10412722

fbshipit-source-id: 5bab4790a986224adf7a0b0be318c9ef17acdea8""",0.7,None,changed

2431,Zilin Zhang,kylinchang@fb.com,"""improve FacebookUninstallTracker

Summary: improve FacebookUninstallTracker, set post request to skip client token

Reviewed By: wi3lau

Differential Revision: D10390604

fbshipit-source-id: 271805e3df0f896dd365958f39f472261787b430""",0.7,None,fixed

2432,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: f5b9a06007902345f1ec2c4b4c16285a636ba974""",0.2,None,changed

2433,Calvin Mak,cmak@fb.com,"""Have function in sdk for calling in data renewal

Summary: The developers can call LoginManager::renewDataAccess to renew their access for that user. They can either pass in the fragment or the activity as param

Reviewed By: khp

Differential Revision: D10282650

fbshipit-source-id: 8fb6bebf1fc6d927a4021d55124fc93e53776238""",0.7,None,changed

2434,Cody Winton,codytwinton@fb.com,"""Resolved MIME Boundary Creation for Android 7 and below

Summary:
Base64 encoding is unavailable for Android 7 and below.

This resolves the issue.

Reference: http://hc.apache.org/httpcomponents-client-ga/httpmime/xref/org/apache/http/entity/mime/MultipartEntity.html

Reviewed By: jingping2015

Differential Revision: D10281620

fbshipit-source-id: b805c62f976a1a4fd32c51109533d32a0e4cea5c""",0.7,None,changed

2435,Zilin Zhang,kylinchang@fb.com,"""move uninstall tracker from marketingkit to corekit

Summary: move uninstall tracker from marketingkit to corekit

Reviewed By: wi3lau

Differential Revision: D10255057

fbshipit-source-id: 23b558e1612c6eff3bde19b510d68da66a1e366e""",0.7,None,changed

2436,Cody Winton,codytwinton@fb.com,"""Resolve Static Multipart Boundary Value

Summary: This change enables using auto generated strings for multipart form boundaries, ensuring uniqueness.

Reviewed By: dreamolight

Differential Revision: D10246943

fbshipit-source-id: 5f1baceaadecf05b3dc3c80965203607ab87a085""",0.7,None,changed

2437,Wei Liu,weiliu@fb.com,"""Delegate event matching to unity sdk

Summary:
Codeless event matching should be handled in Unity SDK due to the special tree hierarchy in Unity apps. This diff does 2 things:
1. Send event mappin to Unity on parsing the app settings.
2. Skip event matching for unity apps.

Differential Revision: D10215680

fbshipit-source-id: 28b2128619aa220cd5cf178d7024464d5e126bd3""",0.7,None,changed

2438,Wei Liu,weiliu@fb.com,"""Call Unity SDK to crawl view hierarchy for Unit y apps

Summary: Check if the app is unity, if true, call CaptureViewHierachy function in Unity SDK to crawl view tree and send to server.

Differential Revision: D10191793

fbshipit-source-id: 1efe083fb9105531e9c58df87fd05e0775dee09e""",0.7,None,changed

2439,Zilin Zhang,kylinchang@fb.com,"""Seperate GK and App Settings

Summary: seperate GK and App settings, delete fetchedappgatekeepers

Reviewed By: codytwinton

Differential Revision: D10158776

fbshipit-source-id: 59a69762fb7a286a93cc28737fdc004541d6893f""",0.7,None,removed

2440,Wei Liu,weiliu@fb.com,"""Add a function to check if the app is Unity app

Summary: Unity SDK sets the user agent with Unity.x.x.x suffix. Add a function to compare the user agent suffix to check if the app is unity.

Differential Revision: D10190794

fbshipit-source-id: a57d1cdb0e1c357083711893213b2c49d6e8fd89""",0.7,None,added

2441,Wei Liu,weiliu@fb.com,"""Add a helper class to call unity function from Android

Summary: Call UnityPlayer.UnitySendMessage via Java reflection.

Reviewed By: codytwinton

Differential Revision: D10161286

fbshipit-source-id: 27fbc4c66da18fa2b41739bdc854cf40079ebadf""",0.7,None,added

2442,Calvin Mak,cmak@fb.com,"""Use data_access_expiration_time

Summary: We are passing it back from server (D10088434) so might as well pass it into the AccessToken class

Differential Revision: D10094409

fbshipit-source-id: 8037a21acf7714050824ffa80fdeb92228e62c85""",0.7,None,changed

2443,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: 35205185cc92c02b1785ca7e4e6014f4fec667c1""",0.2,None,changed

2444,Build Service,svcscm@fb.com,"""translation auto-update for i18n/androidsdk.config.json on master

fbshipit-source-id: b868ff965411f4b014479d70be9dbcfd6bc45790""",0.2,None,changed

2445,Zilin Zhang,kylinchang@fb.com,"""add query function for mobilesdk edge

Summary: in Android SDK, add query function for mobilesdk edge. I will add parse function and fields in another diff.

Reviewed By: codytwinton

Differential Revision: D10013429

fbshipit-source-id: e1ef9a9080fe6d7722ceb32d3a8fd5457027ab41""",0.7,None,added

2446,Calvin Mak,cmak@fb.com,"""Use the expires_in field to pass into access token class

Summary: For some reason, we aren't doing this so client thinks it is an infinite token. We should return the correct time. I really don't like expires_in, and feel expiration_time is better so we don't need to do the logic shift twice, and just return the raw field

Reviewed By: jingping2015

Differential Revision: D10045942

fbshipit-source-id: a730b8b139c03a28b6a4cc11f32b05567793b1a2""",0.7,None,changed

2447,Stan Wu,dreamolight@fb.com,"""Reduce payload of GraphAPI requests for App Events

Summary: Uploading app events in JSON string instead of string file could benefit from GZIPOutputStream, which reduces the whole payload by 40% ~ 46% depends on how many events are being uploaded in single request.

Reviewed By: jingping2015

Differential Revision: D10048911

fbshipit-source-id: e7119d6d353c5cdc9970701ee7bae4a0dac5096e""",0.7,None,changed

2448,Zilin Zhang,kylinchang@fb.com,"""update AppEventsLogger.setUserData in Android SDK

Summary: improve UserDataStore & AppEventsLogger setUserData API

Reviewed By: codytwinton

Differential Revision: D9995722

fbshipit-source-id: 2474c200e3b8cefc0a85fa82b3b4e9cef6be30d9""",0.7,None,changed

2449,Sachin Shah,shahsachin@fb.com,"""Change visibility of onCancel() to protected

Summary: Sometimes subclass want to trigger onCancel() based on a different condition than what's handled in this class.

Reviewed By: khp

Differential Revision: D9982773

fbshipit-source-id: a238e45099e7dbd8231b735209492c0642a42d48""",0.7,None,changed

2450,Calvin Mak,cmak@fb.com,"""Fix expires time

Summary: We should be multiplying by 1000 to convert from s to ms. Use Utility.getBundleLongAsDate helper

Reviewed By: khp

Differential Revision: D10001610

fbshipit-source-id: 33c764fc6710d8a8aeb3fe155d20ff0211f18938""",0.7,None,fixed

2451,Kanghee Park,khp@fb.com,"""Add functionality in sdk to add 'target_user_id' to device request login Graph endpoint

Summary:
This adds the functionality to add `target_user_id` to send to the device request endpoint. That will allow the device request to only show up and be claimed by the specified user.

Add a new testcase in hb4a to test as well.

Reviewed By: codytwinton

Differential Revision: D9984222

fbshipit-source-id: 345f2858c2c701d8c0a60a097587a4737ceedba5""",0.7,None,added

2452,Calvin Mak,cmak@fb.com,"""Pass the data_access_expiration_time from express login

Summary: D9889518 was passing it to the SDK anyways so that it could compile, so might as well pass it through to access token class

Reviewed By: hillbrad

Differential Revision: D9890268

fbshipit-source-id: b3b9f3ffb988435d73918ab938f3a625f0b8cd70""",0.7,None,changed

2453,Calvin Mak,cmak@fb.com,"""Pass the data_access_expiration_time through token login android

Summary: We have the native login via fb4a (proxy auth). We should pass data_access_expiration_time when doing get token login in fb4a

Reviewed By: hillbrad

Differential Revision: D9889518

fbshipit-source-id: cb1c3886a0d5e2a8b94be26eaa4a82a91dc3c47c""",0.7,None,changed

2454,Calvin Mak,cmak@fb.com,"""Add data_access_expiration_time to AccessToken in Android SDK

Summary:
We want to give the developer the ability to query the data access expiration time and if data access has expired from the SDK. The login dialog returns the field as well as the refresh token endpoint.

The native dialog login will be done in a future diff, but is not blocking here

Reviewed By: abeatte

Differential Revision: D9871656

fbshipit-source-id: 1c8c419f4172b3c02ce258c39d415ee9bc07f0aa""",0.7,None,added

2455,Jing Ping,jingping@fb.com,"""fbshipit-source-id: 9bdebfa72677128b2e72eea105e7b072e6bc948f""",0.7,None,changed

2456,Jing Ping,jingping@fb.com,"""add fb-only for loginkit

Summary:
as title

loginkit should not be open source

Reviewed By: stoyan

Differential Revision: D9976598

fbshipit-source-id: a862cfdf99f4a5a1566e1c59bed7bed577cab46d""",0.7,None,added

2457,Vignesh Iyer,vigneshbiyer@fb.com,"""Modified Progress Bar to a View so that any type of spinner can be used

Summary:
Modified the Progress Bar to a View so that any type of spinner, such as the
AigActivityIndicator can be used when using/extending the DeviceAuthDialog class.

Reviewed By: khp

Differential Revision: D9947988

fbshipit-source-id: 4fad17926855e9075d55e061b91e3d2077842892""",0.7,None,changed

2458,Jing Ping,jingping@fb.com,"""SDK version bump v(4.37.0)

Summary: SDK version bump from (4.36.1) to (4.37.0). Automatically generated by running fbandroid/first-party/java/androidsdk/internal/scripts/cut_branch_android.sh

Reviewed By: codytwinton

Differential Revision: D9947409

fbshipit-source-id: 332264011f65c1cd1a146eba4f783c81bbaf241b""",0.2,None,changed

2459,Stan Wu,dreamolight@fb.com,"""Add codelessSetupEnabled in FetchedAppSettings

Summary: This diff is made to correspond with D9925162

Differential Revision: D9928505

fbshipit-source-id: fb33f060efd6ce56dee7e1f1d5a5900d8020c430""",0.7,None,added

2460,Jing Ping,jingping@fb.com,"""fbshipit-source-id: af19f07623d05560ebdf43555aa88799f7baaace""",0.7,None,changed

2461,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.36.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2462,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.36.1""",0.7,None,changed

2463,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.36

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2464,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.36""",0.7,None,changed

2465,Kanghee Park,kanghee.p@gmail.com,"""Merge pull request #534 from sangpan/improve_SetCurrentAccessToken

null currentAccessToken if token is expired when calling setCurrentAccessToken.""",0.2,None,changed

2466,Kanghee Park,kanghee.p@gmail.com,"""Merge pull request #533 from Omrankabalan/patch-1

Fixed typo in documentation""",0.2,None,fixed

2467,Kanghee Park,kanghee.p@gmail.com,"""Merge branch 'dev' into patch-1""",0.2,None,changed

2468,sangpan,sangpan@paran.com,"""setCurrentAccessToken changed.
check argument token expiration.""",0.7,None,changed

2469,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.35

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2470,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.35""",0.7,None,changed

2471,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.35

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2472,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.35""",0.7,None,changed

2473,Omrankabalan,omrankabalan@gmail.com,"""Fix typo in documentation""",0.7,None,fixed

2474,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.34

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2475,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.34""",0.7,None,changed

2476,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.34

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2477,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.34""",0.7,None,changed

2478,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.33

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2479,Jing Ping,jingping@fb.com,"""Facebook Android SDK 4.33""",0.7,None,changed

2480,Jing Ping,jingping@fb.com,"""Merge pull request #528 from WilderPereira/patch-1

Improve readme readability by exporting links""",0.2,None,fixed

2481,Wilder Pereira,wilder_roberto@hotmail.com,"""Improve readme readability by exporting links

Replaced the urls with links to in order to make it less less verbose.""",0.7,None,fixed

2482,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.32""",0.7,None,changed

2483,Tao Ge,taoge@fb.com,"""Facebook Android SDK 4.32

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2484,Tao Ge,taoyge@gmail.com,"""Merge pull request #524 from sm1th/sm1th-fbloginsample-patch

FBLoginSample markdown patch""",0.2,None,changed

2485,Joshua Smith,joshua01smith@gmail.com,"""Fix link to CONTRIBUTING.mdown in README.mdown""",0.7,None,fixed

2486,Joshua Smith,joshua01smith@gmail.com,"""Fix formatting, typo of CONTRIBUTING.mdown""",0.7,None,fixed

2487,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.31

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2488,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.31""",0.7,None,changed

2489,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.30""",0.7,None,changed

2490,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.30""",0.7,None,changed

2491,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.30

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2492,Art Beatte IV,2646229+abeatte@users.noreply.github.com,"""Merge pull request #521 from winedigger/patch-2

replace compile with implementation""",0.2,None,changed

2493,winedigger,33073204+winedigger@users.noreply.github.com,"""replace compile with implementation

After the Gradle 3.0, compile is now deprecated and no longer used.
It should be replaced with implementation 
cf: https://docs.gradle.org/current/userguide/java_library_plugin.html#sec:java_library_separation""",0.7,None,changed

2494,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.29

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2495,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.29""",0.7,None,changed

2496,Art Beatte IV,2646229+abeatte@users.noreply.github.com,"""Merge pull request #518 from the-felipeal/FIXED_dev

Change Login SDK to support Android Autofill""",0.2,None,changed

2497,Felipe Leme,felipeal@google.com,"""Change Login SDK to support Android Autofill.

Android Autofill, a new feature released on Android Oreo, was not working
for 3 reasons:

1.WebView was created with the application context.
2.Chrome Custom Tabs do not support Autofill yet.
3.An Android bug that disables autofill when a dialog is resized.

This change fixes these 3 issues by:

1.Passing the activity context to the Webview.
2.Changing the custom tabs logic to disallow it if the device is running
  on Android Oreo and the user enabled Autofill.
3.Working around the Android bug by updating the dialog window params
  with the window params associated with the activity that launched it.""",0.7,None,changed

2498,Art Beatte IV,abeatte@gmail.com,"""Merge pull request #503 from manixate/dev

Convert int to string to remove wrong argument warning""",0.7,None,changed

2499,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.28""",0.7,None,changed

2500,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.28""",0.7,None,changed

2501,ruoyipu,33233694+ruoyipu@users.noreply.github.com,"""Merge pull request #511 from minas90/patch-1

Fix dependency versioning""",0.2,None,fixed

2502,minas90,minas90@gmail.com,"""Fix dependency versioning ( add missing .0 )""",0.7,None,fixed

2503,Art Beatte IV,abeatte@gmail.com,"""Merge pull request #510 from yuyakaido/dev

Fixed version number in README (4.27 -> 4.27.0)""",0.2,None,fixed

2504,yuyakaido,yuyakaido@gmail.com,"""Fixed version number in README (4.27 -> 4.27.0)""",0.7,None,fixed

2505,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.27

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2506,Art Beatte IV,abeatte@fb.com,"""Facebook Android SDK 4.27""",0.7,None,changed

2507,Art Beatte IV,abeatte@gmail.com,"""Merge pull request #505 from edenman/dev

Don't crash if REQUEST_KEY bundle is null""",0.2,None,changed

2508,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.26

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2509,Pouya Larjani,plj@fb.com,"""Facebook Android SDK 4.26""",0.7,None,changed

2510,Eric Denman,edenman@gmail.com,"""Don't crash if REQUEST_KEY bundle is null""",0.7,None,changed

2511,Pouya Larjani,plj@fb.com,"""Merge pull request #504 from edenman/dev

Security issue: actually validate that the package name matches the current app""",0.2,None,security

2512,Eric Denman,edenman@gmail.com,"""Security issue: actually validate that the package name matches""",1,None,security

2513,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.25

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2514,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.25""",0.7,None,changed

2515,David Emmel,demmel@fb.com,"""Facebook Android SDK 4.24

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2516,David Emmel,demmel@fb.com,"""Facebook Android SDK 4.24""",0.7,None,changed

2517,Muhammad Azeem,muhammad.azeem@mastercard.com,"""Convert int to string to remove wrong argument warning""",1,None,changed

2518,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.23

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2519,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.23""",0.7,None,changed

2520,John Anderson,johnanderson@fb.com,"""Facebook Android SDK 4.22.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2521,John Anderson,johnanderson@fb.com,"""Facebook Android SDK 4.22.1""",0.7,None,changed

2522,dzhuowen,dzhuowen@fb.com,"""Merge pull request #501 from SUPERCILEX/patch-2

Fix null pointer for tests""",0.2,None,fixed

2523,Alex Saveau,saveau.alexandre@gmail.com,"""Fix null pointer for tests""",1,None,fixed

2524,dzhuowen,dzhuowen@fb.com,"""Merge pull request #499 from molind/dev

Updated com.android.support to the latest version""",0.7,None,changed

2525,John Anderson,zaren678@gmail.com,"""Merge pull request #498 from tmtrademarked/add_unregister

Add support for unregistering a login callback""",0.7,None,added

2526,Tom Wilson,tom.wilson@blueapron.com,"""Fixing spacing per feedback""",1,None,changed

2527,Tom Wilson,tom.wilson@blueapron.com,"""Fixing spacing per feedback""",1,None,changed

2528,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.22

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2529,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.22""",0.7,None,changed

2530,Fran Sanchez Garcia,fsanchez@fb.com,"""Facebook Android SDK 4.21.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2531,Fran Sanchez Garcia,fsanchez@fb.com,"""Facebook Android SDK 4.21.1""",0.7,None,changed

2532,ioanao,ioanao@fb.com,"""Facebook Android SDK 4.21

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2533,ioanao,ioanao@fb.com,"""Facebook Android SDK 4.21""",0.7,None,changed

2534,Evgen Bodunov,molind@gmail.com,"""Updated com.android.support to the latest version

com.android.support version should be 25.3.1""",0.7,None,changed

2535,Tom Wilson,tom.wilson@blueapron.com,"""Update whitespace""",1,None,changed

2536,Tom Wilson,tom.wilson@blueapron.com,"""Add support for unregistering a login callback

This PR adds an API to allow a caller to unregister their callback. This is essential in order to avoid memory leaks if the callback is retained.""",1,None,added

2537,Tom Wilson,tom.wilson@blueapron.com,"""Add support for unregistering a login callback

This PR adds an API to allow a caller to unregister their callback. This is essential in order to avoid memory leaks if the callback is retained.""",1,None,added

2538,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.20

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2539,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.20""",0.7,None,changed

2540,Zhuowen Deng,dzhuowen@fb.com,"""recover BUCK""",0.7,None,changed

2541,Zhuowen Deng,dzhuowen@fb.com,"""update BUCK""",0.7,None,changed

2542,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.19

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2543,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.19""",0.7,None,changed

2544,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.18

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2545,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.18""",0.7,None,changed

2546,David Emmel,demmel@fb.com,"""Facebook Android SDK 4.17

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2547,David Emmel,demmel@fb.com,"""Facebook Android SDK 4.17""",0.7,None,changed

2548,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.16.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2549,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.16.1""",0.7,None,changed

2550,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.16

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2551,Ethan Goldman-Kirst,ethangk@fb.com,"""Facebook Android SDK 4.16""",0.7,None,changed

2552,Ming Li,mingfli@fb.com,"""Merge pull request #477 from friederbluemle/update-project-dev

Update Gradle wrapper (dev branch)""",0.2,None,changed

2553,Ming Li,mingfli@fb.com,"""Merge pull request #483 from tuenti/prevent_from_dead_object_exception

Prevent the app from crash if a DeadObjectException happens in the ContentProvider""",0.2,None,changed

2554,Ming Li,mingfli@fb.com,"""Merge pull request #482 from antonzy/patch-1

Fixed GraphRequest to pass photo caption""",0.2,None,fixed

2555,Frieder Bluemle,frieder.bluemle@gmail.com,"""Update Gradle wrapper to 2.14.1""",0.7,None,changed

2556,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.15

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2557,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.15""",0.7,None,changed

2558,Guillermo Merino,gmerinojimenez@gmail.com,"""resolveContentProvider will thrown a RuntimeException if a DeadObjectException happens in the provider.""",0.7,None,changed

2559,Ming Li,mingfli@fb.com,"""Merge pull request #470 from mikelambert/dev

Fix request parsing to handle any passed-in request parameters""",0.2,None,fixed

2560,Mike Lambert,mlambert@gmail.com,"""Convert our result back to a relative URL, as expected by the calling code.""",0.7,None,changed

2561,Mike Lambert,mlambert@gmail.com,"""Generate full URLs, so that we can use Uri.parse without triggering on ':' at random points in the string for dependent requests.""",0.7,None,changed

2562,Anton Zagrebelny,antonzy90@gmail.com,"""Fixed GraphRequest to pass photo caption

Caption is not passed when photoUri is of ""content://"" scheme""",0.7,None,fixed

2563,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.14.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2564,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.14.1""",0.7,None,changed

2565,Ming Li,mingfli@fb.com,"""Merge pull request #481 from jacyzon/switchUserSample_unregister_brocast_receiver

SwitchUserSample: unregister broadcast receiver on destroy""",0.2,None,changed

2566,Yi Zhang Chen,jz@jacyzon.com,"""SwitchUserSample: unregister broadcast receiver on destroy""",0.7,None,changed

2567,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.14

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2568,Zhuowen Deng,dzhuowen@fb.com,"""Facebook Android SDK 4.14""",0.7,None,changed

2569,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.13.2

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2570,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.13.2""",0.7,None,changed

2571,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.13.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2572,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.13.1""",0.7,None,changed

2573,Ming Li,mingfli@fb.com,"""Merge pull request #476 from tyvsmith/dev

Fix Fake ID exploit""",0.2,None,fixed

2574,Ty Smith,tys@uber.com,"""Fix Fake ID exploit""",0.7,None,fixed

2575,Mike Lambert,mlambert@gmail.com,"""Fix request parsing to handle any passed-in request parameters
On iOS, this works:
GraphRequest(""/me?fields=id"")

On Android, it does not, and the resulting URL looks like:
""/me?fields=id?access_token=X&other=params&included=here"" (notice the two ""?"" chars)

This causes a very strange problem when react-native-fbsdk assumes they perform identically, as seen here:
facebook/react-native-fbsdk#105

This should fix the issue and bring feature parity between iOS and Android.""",0.7,None,fixed

2576,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.12.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2577,Andy Crampton,crampton@fb.com,"""Facebook Android SDK 4.12.1""",0.7,None,changed

2578,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.12

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2579,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.12""",0.7,None,changed

2580,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.11

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2581,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.11""",0.7,None,changed

2582,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.10.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2583,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.10.1""",0.7,None,changed

2584,Ming Li,mingfli@fb.com,"""Merge pull request #459 from passy/patch-2

Fix typo in dependencies comment""",0.2,None,fixed

2585,Pascal Hartig,phartig@rdrei.net,"""Fix typo in dependencies comment""",0.2,None,fixed

2586,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.10

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2587,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.10""",0.7,None,changed

2588,Sean Wiese,thewec@hotmail.com,"""Merge pull request #458 from ChristianBecker/cb/no_multidex

Remove multiDexEnabled flag""",0.2,None,changed

2589,Ming Li,mingfli@fb.com,"""Merge pull request #455 from andrey-starodubtsev/strict_mode_warnings

- fixed: relatively rare StrictMode warnings about forgotten close() for streams""",0.2,None,fixed

2590,Ming Li,mingfli@fb.com,"""Merge pull request #456 from andrey-starodubtsev/logger_data_race

data race for AppEventsLogger.stateMap fixed""",0.2,None,fixed

2591,Christian Becker,christian.becker@qnips.com,"""Remove multiDexEnabled flag""",1,None,changed

2592,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.9

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2593,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.9""",0.7,None,changed

2594,Andrey Starodubtsev,andrey.starodubtsev@gmail.com,"""rolled back changes for output streams""",1,None,changed

2595,Sean Wiese,thewec@hotmail.com,"""Merge pull request #452 from uwemaurer/uwemaurer-patch-1

call the callback in sdkInitialize""",0.2,None,changed

2596,Ming Li,mingfli@fb.com,"""Merge pull request #454 from andrey-starodubtsev/dev

NPE if File.listFiles() returns null""",0.2,None,changed

2597,Andrey Starodubtsev,andrey.starodubtsev@gmail.com,"""data race for AppEventsLogger.stateMap fixed

fix for relatively rare crashes like this:
com.facebook.AppEventsLogger(  706): Caught unexpected exception while flushing: java.lang.NullPointerException
java.lang.NullPointerException
  at java.util.concurrent.ConcurrentHashMap.put(ConcurrentHashMap.java:891)
  at com.facebook.internal.Utility.queryAppSettings(Utility.java:364)
  at com.facebook.AppEventsLogger$3.run(AppEventsLogger.java:623)
  at java.util.Timer$TimerImpl.run(Timer.java:284)""",0.7,None,fixed

2598,Andrey Starodubtsev,andrey.starodubtsev@gmail.com,"""- fixed: relatively rare StrictMode warnings about forgotten close() for
  streams""",0.7,None,fixed

2599,Andrey Starodubtsev,andrey.starodubtsev@gmail.com,"""Merge remote-tracking branch 'fb/dev' into dev""",0.7,None,changed

2600,Andrey Starodubtsev,andrey.starodubtsev@gmail.com,"""- fixed: NPE if File.listFiles returns null, see bc17a04007ed19a340cfb2753c07f927e514b5ad for similar changes""",1,None,fixed

2601,Uwe Maurer,uwe@apptornado.com,"""call the callback on sdkInitialize""",0.7,None,changed

2602,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8.2

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2603,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8.2""",0.7,None,changed

2604,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2605,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8.1""",0.7,None,changed

2606,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2607,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.8""",0.7,None,changed

2608,Sean Wiese,thewec@hotmail.com,"""Merge pull request #451 from CristianOliveiraDaRosa/dev

Adding Tests for ShareContentValidation""",0.2,None,changed

2609,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""Reverting ShareContentValidation.java to 07e4a98 revision""",0.7,None,changed

2610,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""fix: changed mock for Validate.class""",0.7,None,fixed

2611,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""Changing test for SharePhotoContent and ShareVideoContent
   - Mocking void Validate hasContentProvider.
   - Reverting changes of Validate.class to 07e4a98 revision.
   - Reverting changes on ShareContentValidation""",0.7,None,changed

2612,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""Code cleaning.
  - Removing not necessary Exceptions
  - Formatting code to respect 100 cols""",0.7,None,changed

2613,Sean Wiese,thewec@hotmail.com,"""Merge pull request #448 from strid3r/fix/webdialog_theme

Have all web dialogs use custom set theme instead of default theme.""",0.7,None,fixed

2614,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""Removing TODO""",0.7,None,changed

2615,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""Adding tests for Video/Photo/Graph content""",0.7,None,changed

2616,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""test: Adding tests for ShareContentValidation.class""",0.7,None,changed

2617,Cristian Oliveira da Rosa,contato@cristianoliveira.com.br,"""refact: changing variable names to follow java convention""",1,None,changed

2618,Dmitry Stankov,dstankov@ea.com,"""Always pick up a WebDialog theme set as meta-data in manifest, not only during login process.""",0.7,None,changed

2619,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #447 from vinceis1337/dev

Add null check on attributionIdentifiers to prevent null pointer exceptions""",0.7,None,added

2620,Vincent Liao,vliao@rmn.com,"""Throw FacebookException if attributionIdentifiers is null when it is needed, and protect against null if it is optional""",0.7,None,changed

2621,Sean Wiese,thewec@hotmail.com,"""Add missing travis ci components

When target sdk was changed to v23 travis ci components were not updated.""",0.7,None,added

2622,Sean Wiese,thewec@hotmail.com,"""Merge pull request #446 from swiese/dev

Add missing android api 23 travis ci components""",0.7,None,added

2623,Sean Wiese,thewec@hotmail.com,"""Add missing travis ci components

When target sdk was changed to v23 travis ci components were not updated.""",0.7,None,added

2624,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.7

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2625,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.7""",0.7,None,changed

2626,Sean Wiese,thewec@hotmail.com,"""Merge pull request #445 from nodrock/dev

Fix npe for enums in GameRequestContent""",0.2,None,fixed

2627,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-minor fix""",1,None,fixed

2628,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-changed enums from parcelable to serializable""",1,None,changed

2629,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-added setRecipients() method to GameRequestContent.Builder (replaces setTo() to match IOS API)
-proper handling of empty lists in parcelable GameRequestContent (createStringArrayList() instead of readStringList())
-fixed usage of toLowerCase on enums""",0.7,None,changed

2630,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-fixed parcelable issue with null enums""",1,None,changed

2631,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.6

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2632,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.6""",0.7,None,changed

2633,Sean Wiese,thewec@hotmail.com,"""Merge pull request #441 from vinceis1337/dev

Fix getAndroidIdViaReflection to return identifiers instead of always null.""",0.2,None,fixed

2634,Vincent Liao,vliao@rmn.com,"""Actually return identifiers so method actually works.""",0.7,None,changed

2635,Sean Wiese,thewec@hotmail.com,"""Merge pull request #438 from nodrock/dev

-fixed bug in rewriting applicationId with old value""",0.7,None,fixed

2636,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-fixed bug in rewriting applicationId with old value
-fixed some texts""",1,None,fixed

2637,Sean Wiese,thewec@hotmail.com,"""Merge pull request #436 from nodrock/dev

-added missing CREATOR to parcelable class AppInviteContent""",0.7,None,changed

2638,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-added missing CREATOR to parcelable class AppInviteContent""",1,None,changed

2639,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.5""",0.7,None,changed

2640,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.5

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2641,Sean Wiese,thewec@hotmail.com,"""Merge pull request #435 from nodrock/dev

Support applicationId prefixed with ""fb""""",0.2,None,changed

2642,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-modified test to reflect changes in getting FacebookSdk.APPLICATION_ID_PROPERTY from bundle as String""",0.7,None,changed

2643,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-removed parsing applicationId as 32bit integer""",1,None,changed

2644,JaÌn HorvaÌth,jan.horvath.svk@gmail.com,"""-support applicationId prefixed with ""fb"" to prevent issues with overflow of applicationId in Android manifest file""",0.7,None,changed

2645,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.4

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2646,Ming Li,mingfli@fb.com,"""Facebook Android SDK 4.4""",0.7,None,changed

2647,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.3

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2648,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.3""",0.7,None,changed

2649,Sean Wiese,thewec@hotmail.com,"""Merge pull request #431 from sromku/dev

Clean pending request after login execution""",0.7,None,changed

2650,Roman Kushnarenko,roman@everything.me,"""Clean pending request after login execution""",1,None,changed

2651,Sean Wiese,thewec@hotmail.com,"""Merge pull request #430 from segoh/bugfix/loginmanager-appeventslogger-leak

Fix memory leak in LoginManager / AppEventsLogger""",0.2,None,fixed

2652,Sebastian Gutsfeld,sebastian.gutsfeld@gmail.com,"""Fix memory leak in LoginManager and AppEventsLogger

LoginManager's context and loginLogger both hold a reference to the
activity starting the login. This activity is leaked if the login process
is canceled. It is also leaked if finishLogin() is never called, e.g. when
the device's configuration/orientation is changed. finishLogin() only nulls
out context and loginLogger in case of a successful login.

This commit updates LoginManager and AppEventsLogger, so that it is not
required anymore to hold a reference to the activity starting the login.""",0.7,None,fixed

2653,Ming Li,mingfli@fb.com,"""Merge pull request #426 from prince-gill/sdk_project_config

[buck] Add project_config to sdk module""",0.2,None,added

2654,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.2

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2655,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.2""",0.7,None,changed

2656,Prince Gill,prince.gill@uwaterloo.ca,"""[buck] Add project_config to sdk module

Summary:
Added project_config to sdk so that IntelliJ indexes classes in the sdk.
Makes it easier to use the sdk module in IntelliJ - especially when using auto imports.
Removed facebook/libs symlink since it breaks buck project.

Test Plan:
Open project in IntelliJ
Verify sdk module does not appear in project structure
--
buck project
Verify sdk module appears in IntelliJ
--
gradle test""",0.7,None,added

2657,Ming Li,mingfli@fb.com,"""Merge pull request #425 from prince-gill/fix_buck_build

Fix buck build""",0.2,None,fixed

2658,Prince Gill,prince.gill@uwaterloo.ca,"""Fix buck build

Summary:
Fix bolts jar filename in libs/ and update to Java 1.7.

Test Plan:
buck build sdk

Blame Revision: D1512256
Blame Commit: d075400""",0.7,None,fixed

2659,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #419 from andaag/dev

unwrap multiple levels of ContextWrapper""",0.2,None,changed

2660,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1.2

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2661,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1.2""",0.7,None,changed

2662,Anders Aagaard,aagaande@gmail.com,"""unwrap multiple levels of ContextWrapper""",0.7,None,changed

2663,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2664,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1.1""",0.7,None,changed

2665,Sean Wiese,swiese@fb.com,"""Update README - Fixing rendering of https://developers.facebook.com/apps/<app_id>/settings/advanced link""",1,None,changed

2666,Sean Wiese,swiese@fb.com,"""Update to README.md - Updating link for sdk terms and adding travis ci status.""",1,None,changed

2667,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1""",0.7,None,changed

2668,Sean Wiese,swiese@fb.com,"""Facebook Android SDK 4.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2669,Ming Li,mingfli@fb.com,"""Merge pull request #415 from keerthikorrapati/dev

fix leak with webview""",0.2,None,fixed

2670,keerthi,keerthi.korrapati@gmail.com,"""fix leak with webview""",1,None,fixed

2671,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #413 from championswimmer/patch-2

correct the login class name in the log line""",0.2,None,changed

2672,Arnav Gupta,dev@championswimmer.in,"""correct the login class name in the log line

Also, remind user to add the class to manifest.
This error can make developers run in loops for hours without realising which class name they have forgotten to add in their manifest.""",1,None,added

2673,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.0.1

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2674,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.0.1""",0.7,None,changed

2675,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.0

Summary:
    see https://developers.facebook.com/docs/android/change-log-4.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2676,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 4.0""",0.7,None,changed

2677,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.23.1

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2678,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.23.1""",0.7,None,changed

2679,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.23

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2680,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.23""",0.7,None,changed

2681,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #408 from subeeshb/dev

Fixed missing opening brace in FacebookDialog page link""",0.7,None,fixed

2682,subeeshb,subeeshb@gmail.com,"""Fixed missing opening brace in FacebookDialog page link""",1,None,fixed

2683,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.22

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2684,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.22""",0.7,None,changed

2685,Ming Li,mingfli@fb.com,"""Merge branch 'vshivam-master' into dev""",0.2,None,changed

2686,Ming Li,mingfli@fb.com,"""Merge branch 'master' of https://github.com/vshivam/facebook-android-sdk into vshivam-master

Conflicts:
	README.mdown""",0.2,None,changed

2687,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #407 from vivekkiran/master

Upgraded Gradle to 2.2.1 and Android Gradle Plugin to 1.0.0""",0.2,None,changed

2688,Vivek Kiran,vivek.kiran@outlook.com,"""Update build.gradle""",0.7,None,changed

2689,Vivek Kiran,vivek.kiran@outlook.com,"""Fixed Broken Link

Fixed Broken Link""",0.7,None,fixed

2690,Vivek Kiran,vivek.kiran@outlook.com,"""Upgraded Gradle to 2.2.1 and Android Gradle Plugin to 1.0.0""",0.7,None,changed

2691,Shivam Verma,shivam.bitsgoa@gmail.com,"""Updated README.mdown

Fixed broken link for Android Tutorials and Docs.""",0.7,None,fixed

2692,Gokhan Caglar,gokhanc@fb.com,"""release""",0.7,None,changed

2693,Gokhan Caglar,gokhanc@fb.com,"""Fixing version.""",0.7,None,changed

2694,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.21.1

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2695,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.21.1""",0.7,None,changed

2696,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.21

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2697,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.21""",0.7,None,changed

2698,Ming Li,mingfli@fb.com,"""Merge pull request #402 from CristianOliveiraDaRosa/dev

Add missed import android.content.ContextWrapper""",0.2,None,added

2699,Cristian Oliveira,contato@cristianoliveira.com.br,"""Add missing import android.content.ContextWrapper""",1,None,added

2700,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #401 from stevenle/dev

Support ContextWrapper objs with LoginButton.""",0.2,None,changed

2701,Steven Le,stevenle08@gmail.com,"""Support ContextWrapper objs with LoginButton.

This particular change enables support for Mortar-based apps, which
render views using a context wrapper.""",0.7,None,changed

2702,Ming Li,mingfli@fb.com,"""Merge pull request #399 from srea/dev

Dead code elimination FacebookDialog.java""",0.7,None,changed

2703,Yuki Tamazawa,yuki@tamazawa.net,"""Dead code elimination FacebookDialog.java

I wish that I could be of help to you, but... :put_litter_in_its_place:""",0.7,None,changed

2704,Ming Li,mingfli@fb.com,"""Merge pull request #395 from cloudrick/Rick's-local

Fix resource leak issue for cursors.""",0.2,None,fixed

2705,Karthik Subramanyam,karthiks@fb.com,"""Facebook Android SDK 3.20

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2706,Karthik Subramanyam,karthiks@fb.com,"""Facebook Android SDK 3.20""",0.7,None,changed

2707,Karthik Subramanyam,karthiks@fb.com,"""Facebook Android SDK 3.20""",0.7,None,changed

2708,Karthik Subramanyam,karthiks@fb.com,"""Facebook Android SDK 3.20

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2709,Wei-Sheng Yang,yang.rick@gmail.com,"""Rework of previous fixing.

Rework of previous fixing.""",0.7,None,changed

2710,Wei-Sheng Yang,yang.rick@gmail.com,"""Fix resource leak issue of cursor

Unclose cursor exists.""",1,None,fixed

2711,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #393 from almozavr/patch-2

Add maven central to main library""",0.2,None,added

2712,Aleksey Malevaniy,almozavr@gmail.com,"""Add maven central to main library

See #383 for details.""",0.7,None,added

2713,Gokhan Caglar,gcaglar@gmail.com,"""Merge pull request #391 from CristianOliveiraDaRosa/dev

Android 2.1 - Fixed NullpointerException when request timeout while downl...""",0.2,None,fixed

2714,Cristian Oliveira,contato@cristianoliveira.com.br,"""Android 2.1 - Fixed NullpointerException when request timeout while downloading an image.""",0.7,None,fixed

2715,Cristian Oliveira,contato@cristianoliveira.com.br,"""Android 2.1 - Fixed NullpointerException when request timeout while downloading an image.""",0.7,None,fixed

2716,Cristian Oliveira,contato@cristianoliveira.com.br,"""Android 2.1 - Fixed NullpointerException when request timeout while dowloading image.""",0.7,None,fixed

2717,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.19.1

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2718,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.19.1""",0.7,None,changed

2719,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.19.1

Summary:
    see https://developers.facebook.com/android/change-log-3.x/

Upgrading:
    https://developers.facebook.com/docs/android/upgrading/""",0.7,None,changed

2720,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.19.1""",0.7,None,changed

2721,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.19

Summary: Facebook Android SDK 3.19 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: gokhanc, chrisp, gen, toddkrabach

Reviewed By: toddkrabach

Subscribers: subodh, dmmiller

Differential Revision: https://phabricator.fb.com/D1592127""",0.7,None,changed

2722,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.18.1

Summary: Facebook Android SDK 3.18.1 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang, gokhanc, gen

Reviewed By: gen

Subscribers: dmmiller

Differential Revision: https://phabricator.fb.com/D1578814""",0.7,None,changed

2723,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.18

Summary: Facebook Android SDK 3.18 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: jacl, karthiks, clang

Reviewed By: clang

Subscribers: dmmiller

Differential Revision: https://phabricator.fb.com/D1535048""",0.7,None,changed

2724,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.17.2

Summary: Facebook Android SDK 3.17.2 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: gen, jacl, clang, mingfli

Reviewed By: mingfli

Subscribers: dmmiller

Differential Revision: https://phabricator.fb.com/D1512256""",0.7,None,changed

2725,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.17.1

Summary: Facebook Android SDK 3.17.1 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: jacl, clang, dmmiller, mingfli

Reviewed By: mingfli

Subscribers: dmmiller

Differential Revision: https://phabricator.fb.com/D1484992""",0.7,None,changed

2726,Gokhan Caglar,gokhanc@fb.com,"""Facebook Android SDK 3.17.0

Summary: Facebook Android SDK 3.17 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: jacl, clang, dmmiller, mingfli

Reviewed By: mingfli

Subscribers: davidrecordon, subodh, calvin, kvudata, coneko, jacko, natthu, agallagher, simons, sdwilsh, dmmiller, dominik

Differential Revision: https://phabricator.fb.com/D1484148""",0.7,None,changed

2727,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.16.0

Summary: Facebook Android SDK 3.16 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang, dmmiller

Reviewed By: dmmiller

Subscribers: subodh, calvin, kvudata, owenc, coneko, royw, jacko, natthu, agallagher, simons, sdwilsh, dmmiller, dominik

Differential Revision: https://phabricator.fb.com/D1444870""",0.7,None,changed

2728,Dave Miller,dmmiller@fb.com,"""Facebook Android SDK 3.15.0

Summary: Facebook Android SDK 3.15.0 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang

Reviewed By: clang

Subscribers: platform-diffs@lists, dmmiller

Differential Revision: https://phabricator.fb.com/D1380454""",0.7,None,changed

2729,Dave Miller,dmmiller@fb.com,"""Facebook Android SDK 3.14.1

Summary: Facebook Android SDK 3.14.1 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang

Reviewed By: clang

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D1324593""",0.7,None,changed

2730,Dave Miller,dmmiller@fb.com,"""Facebook Android SDK 3.14

Summary: Facebook Android SDK 3.14 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang

Reviewed By: clang

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D1303950""",0.7,None,changed

2731,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.8

Summary: Facebook Android SDK 3.8 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: mingfli

Reviewed By: mingfli

CC: subodh

Differential Revision: https://phabricator.fb.com/D1237186""",0.7,None,changed

2732,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.7

Summary: Facebook Android SDK 3.7 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: Built ZIP

Reviewers: clang

Reviewed By: clang

CC: glen, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D1183743""",0.7,None,changed

2733,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.6.0

Summary:
Modified
+ AppEventsLogger is now out of Beta, setLimitEventUsage is deprecated and moved to Settings as setLimitEventAndDataUsage

Added
+ Added setSelection methods on FriendPickerFragment to allow pre-selection of friends.
+ Added example use of setSelection API in Friend Picker Sample
+ Added support for Gradle.

Fixed
+ Fixed bug in WebDialogs where the dialog would not display properly for large displays with soft keyboards
+ Fixed bug where the callback for NewPermissionsRequest was not called
+ Fixed bug in AuthorizationClient where it can hang on orientation changes

Test Plan: Tested on emulator

Reviewers: clang

Reviewed By: clang

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D1089971""",0.7,None,added

2734,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.5.2 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Summary: Facebook Android SDK 3.5.2 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: - Built ZIP

Reviewers: mingfli

Reviewed By: mingfli

CC:

Differential Revision:""",0.7,None,changed

2735,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.5.1 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Summary: Facebook Android SDK 3.5.1 (see https://developers.facebook.com/docs/android/change-log-3.x/)

Test Plan: - Built ZIP

Reviewers: mingfli

Reviewed By: mingfli

CC: subodh, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D986742""",0.7,None,changed

2736,Chris Lang,clang@fb.com,"""Facebook Android SDK 3.5 (see https://developers.facebook.com/android/change-log-3.x/)

Summary: Facebook Android SDK 3.5

Test Plan: - Release testing

Reviewers: mingfli

Reviewed By: mingfli

CC: platform-diffs@lists, subodh, dreiss

Differential Revision: https://phabricator.fb.com/D935263""",0.7,None,changed

2737,Ming Li,mingfli@fb.com,"""Facebook Android SDK 3.0.2 (see https://developers.facebook.com/android/change-log-3.x)

Summary:
    - Updating project structure to work with ADT v22.

Test Plan: Release testing

Reviewers: clang

Reviewed By: clang

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D874918""",0.7,None,changed

2738,Michael Marucheck,mmarucheck@fb.com,"""Facebook SDK 3.0.1 for Android (see https://developers.facebook.com/android/change-log-3.x)

Summary:
- A number of bug fixes from the Facebook SDK 3.0 Release
- Additional overloads for publishInstall
- Addition of InsightsLogger and ability to log conversion pixels and purchase events

Test Plan: Release testing

Reviewers: gregschechte

Reviewed By: gregschechte""",0.7,None,fixed

2739,Michael Marucheck,mmarucheck@fb.com,"""Updating version string to 3.0

Summary: See title

Test Plan: - test pass

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D657738""",0.7,None,changed

2740,Ming Li,mingfli@fb.com,"""Replacing square image with a better color.

Summary: Color match square image with portrait.

Test Plan: tested on profile picture sample.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: ekoneil

Differential Revision: https://phabricator.fb.com/D657590

Task ID: 1783083""",0.7,None,changed

2741,Chris Lang,clang@fb.com,"""[android-sdk] Don't give focus to search box immediately when PlacePickerFragment shown; naming issues in SessionLoginSample

Summary:
Previously, the search box (if displayed) in PlacePickerFragment would get focus as soon as the picker was shown, bringing
up the keyboard on many devices and making it difficult to scroll the list of results. Changing to keep it from getting
focus until the user touches it so the entire area is used for displaying results.

SessionLoginSample had a poorly-named MainActivity and referred to the since-renamed LoginFragment in its UI.

Test Plan:
- Ran PlacePickerSample, did not see the keyboard until I pressed in the search box
- Ran SessionLoginSample, verified rewording in UI

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D656709

Task ID: 1956968, 1957867""",0.7,None,changed

2742,Chris Lang,clang@fb.com,"""[android-sdk] Rather than throw if an auth request comes in when one is pending, report the error via the callback and leave state unchanged.

Summary:
Previously, we would throw if an open()-ish call came into a Session while another request was pending. App UI may allow
this to happen (for instance, a user clicking rapidly on a login button that doesn't disable itself while a request is
pending), a cleaner solution would be to handle the new request as if it was a failed reauth and call the state-change
handler, leaving the state unchanged but providing an Exception so developers can handle/log.

Test Plan:
- Ran SessionLoginSample, clicked rapidly on Login button in UserSettingsFragment UI, did not see crash (but did see
Exception being reported via postStateChange)
- Added unit test, ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D656843

Task ID: 1957947""",0.7,None,added

2743,Ming Li,mingfli@fb.com,"""Adding an audience to publish permission requests

Summary: Add an audience rather than using the default, also fixing some warnings in Eclipse.

Test Plan: tested Scrumptious in emulator.

Reviewers: mmarucheck, clang

Reviewed By: clang

CC: msdkexp@, gregschechte

Differential Revision: https://phabricator.fb.com/D656726

Task ID: 1957997""",0.7,None,added

2744,Ming Li,mingfli@fb.com,"""Fixing erroneous call to uiHelper in SelectionFragment.

Summary: Fixing the call to be the right method to uiHelper, also adding a check in init() to see if the session is already open, and making the me request there as well (since if it's already open then there won't be a transition).

Test Plan: tested on emulator, ran unit tests.

Reviewers: clang, mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D656165

Task ID: 1955361""",0.7,None,changed

2745,Chris Lang,clang@fb.com,"""[android-sdk] Refactor auth code, move reauth validation out of Session.

Summary:
Reauthorization validation has been moved out of Session and is only performed now for non-legacy requests,
via LoginActivity.

Authorization client code has been consolidated into an AuthorizationClient class and moved out of Session and LoginActivity.

Test Plan:
- Added authorization unit tests
- Ran all unit tests
- Ran BooleanOG and Scrumptious with code changes to exercise all auth flavors
 - Display UI, rotate device, cancel
 - Display UI, rotate device, accept
 - Log out, repeat
 - Perform permission upgrade, repeat above steps with reauth UI

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D655300

Task ID: 1951043""",0.7,None,changed

2746,Chris Lang,clang@fb.com,"""[android-sdk] Localize new strings in SDK

Summary: Added Spanish/Hebrew localizations of new SDK strings.

Test Plan: Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D655331

Task ID: 1944544""",0.7,None,added

2747,Ming Li,mingfli@fb.com,"""Fixing test issue.

Summary: Fixing unit tests to match string in exception thrown.

Test Plan: ran unit tests.

Reviewers: mmarucheck, clang

Reviewed By: clang

Differential Revision: https://phabricator.fb.com/D655722

Task ID: 1939738""",0.7,None,changed

2748,Michael Marucheck,mmarucheck@fb.com,"""Fixing selected IntelliJ lint warnings.

Summary:
Went through all the IntelliJ lint warnings and picked off any that looked
like it could possibly have an impact on correctness.

Test Plan: - Unit tests, including one added for double conversion.

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D655507

Task ID: 1954931""",0.7,None,added

2749,Ming Li,mingfli@fb.com,"""Updating Scrumptious to simplify session handling.

Summary: Simplify state change handling in Scrumptious to be more decoupled.

Test Plan: Ran on emulator and ensured that session state changes behaves as expected.

Reviewers: mmarucheck, clang

Reviewed By: clang

CC: caabernathy

Differential Revision: https://phabricator.fb.com/D655382

Task ID: 1954737""",0.7,None,changed

2750,Ming Li,mingfli@fb.com,"""Fixing some exception messages and making copyright notices more consistent.

Summary: Adding ""manage"" to exception messages that include publish permissions, and making copyright notices more consistent.

Test Plan: builds.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D655007

Task ID: 1939738""",0.7,None,changed

2751,Michael Marucheck,mmarucheck@fb.com,"""Moved legacy support method

Summary:
The extendTokenCompleted method is intended to only be used internally.
To make Session as simple as possible, we are moving this method off
Session to a static helper in the same package.

Test Plan: - Build, unit tests

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D654934""",0.7,None,changed

2752,Ming Li,mingfli@fb.com,"""Switching over to use properly named app.

Summary: Switching to a new app so we can change the name from JustRequest to GraphApi

Test Plan: tested on emulator

Reviewers: clang, mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D654100

Task ID: 1947284""",0.7,None,added

2753,Ming Li,mingfli@fb.com,"""Fix issue with friends not showing up on restart.

Summary: The issue is that between starts on the emulator, the app itself might not have been destroyed, which causes the Active Session to stick around, which means that on next startup, it starts in the OPENED state, and there's no state change, which normally triggers the load. The fix is to check whether the Active Session is already opened, and to just load the data then and there.

Test Plan: tested on emulator

Reviewers: clang, mmarucheck

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D653861

Task ID: 1903570""",0.7,None,fixed

2754,Michael Marucheck,mmarucheck@fb.com,"""Doc AuthorizationRequest

Summary:
- Added doc for Session.AuthorizationRequest
- Fixed an eclipse-only warning

Test Plan: - Build/run

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D653731

Task ID: 1938802""",0.7,None,added

2755,Michael Marucheck,mmarucheck@fb.com,"""Add @devDocDeprecated tags to deprecated classes

Summary:
Deprecating some classes gives warnings when compiling other
deprecated classes, even with @SuppressWarnings(""deprecation"").
This adds a doc-tag that is used when generating online docs
to mark classes as deprecated even when they are still in use
by other deprecated classes.

Also moved Util.logd, which is still used in the SDK to
internal/Utility.logd.

Test Plan:
- Build all samples
- Unit tests

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D653482

Task ID: 1938802""",0.7,None,added

2756,Michael Marucheck,mmarucheck@fb.com,"""Use fb4a service to try getting token

Summary:
Fb4a exposes a service that verifies the signature of the app and
returns a token with whatever permissions the user has already
approved.  This uses that service to avoid login UI when permissions
match.

Test Plan:
- Manual testing in scrumptious

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D652514

Task ID: 1938021""",0.7,None,changed

2757,Chris Lang,clang@fb.com,"""[android-sdk] Some more naming cleanup, primarily LoginFragment -> UserSettingsFragment.

Summary:
For conceptual parity with the iOS SDK, LoginFragment has been renamed to UserSettingsFragment.

FacebookSdkVersion is now package local.

shouldAutoPublishInstall is now an SDK-wide property on Settings rather than Session-specific, again for
parity with iOS.

Test Plan:
- Ran unit tests
- Ran Scrumptious

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: jacl, ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D653411

Task ID: 1950186, 1950192, 1950442""",0.7,None,changed

2758,Chris Lang,clang@fb.com,"""[android-sdk] Request.newPlacesSearchRequest threw exception if no location was specified.

Summary:
newPlacesSearchRequest should support specifying either location or searchText (or both), but threw NullPointerException
if no location was provided. It should also ignore the radiusInMeters parameter if no location is provided.

Test Plan:
- Added unit test, ran all tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D651768

Task ID: 1944635""",0.7,None,added

2759,Chris Lang,clang@fb.com,"""[android-sdk] Remove some open* overloads from Session.

Summary:
Session had a number of instance and static methods related to opening sessions and active sessions, and it was not
always clear which one was the right one to use. Removed some of them and renamed others to be clearer about their
intention.

Test Plan:
- Ran unit tests
- Ran samples

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, ekoneil

Reviewed By: mingfli

CC: msdkexp@, caabernathy

Differential Revision: https://phabricator.fb.com/D652216""",0.7,None,removed

2760,Ming Li,mingfli@fb.com,"""Updating javadocs.

Summary: Updating javadocs for LoginActivity.

Test Plan: builds

Reviewers: mmarucheck, clang, jacl

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D652420

Task ID: 1946899""",0.7,None,changed

2761,Chris Lang,clang@fb.com,"""[android-sdk] Adds RequestBatch-level completion callback; fixes Session reauth behavior.

Summary:
Some scenarios involving batched Graph API calls are more cleanly implemented with a completion callback that applies
to the batch as a whole, rather than individual requests within the batch. This commit adds such a callback to
RequestBatch.

It also fixes a couple issues with Session and reauthorization. It adds a check to ensure that the access token resulting
from a reauthorization represents the same Facebook profile as the previous access token did (since users could authenticate
using different credentials than when the session was originally opened). It also fetches a current list of permissions
for the user following a reauthorization, to help ensure that the client copy of the permission list stays in sync with
the service.

Finally, it fixes LoginActivity to pass back the AccessTokenSource of the access token it provides, so we can set it properly.

Test Plan:
- Added unit tests
- Ran unit tests
- Ran Scrumptious, HelloFacebook, and BooleanOG samples

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D647716

Task ID: 1925038, 1925028""",0.7,None,security

2762,Ming Li,mingfli@fb.com,"""Fixing NPEs on LoginFragment

Summary: Reduce the chances of NPEs on LoginFragment (since some calls are just pass-throughs to LoginButton) by setting a properties object that can be created at construction time. Also adding null checks for sessionTracker in the parent fragment class.

Test Plan: Added a unit test to make sure we can call setters in onCreate, tested BooleanOG, and Scrumptious for normal features.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D650937

Task ID: 1937799""",0.7,None,added

2763,Ming Li,mingfli@fb.com,"""Fix dismiss() causing crash when dialog is detached.

Summary: If dismiss is called (especially on the spinner) after the dialog has been detached from the window, it could cause the whole app to crash. This alleviates that situation. App developers should still call dismiss() on the dialog during onPause() since this does not address the leaking window issue, but if they don't, this at least won't crash their app.

Test Plan: Tested various situations where rotation happens (during a webview load, and after posting an update).

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D643794

Task ID: 1878623""",0.7,None,fixed

2764,Ming Li,mingfli@fb.com,"""Removing FacebookActivity and adding UiLifecycleHelper

Summary: Removing FacebookActivity and adding a UiLifecycleHelper instead to keep track of the active Session.

Test Plan: Tested all sample apps and ran unit tests.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@, subodh

Differential Revision: https://phabricator.fb.com/D649877

Task ID: 1940439""",0.7,None,changed

2765,Michael Marucheck,mmarucheck@fb.com,"""Added note to Facebook.java discouraging its use

Summary:
Making the entire Facebook class deprecated causes compiler warnings
in other deprecated classes.  As an alternative, we have deprecated
all public members.

Based on feedback, this augments the docstring to make this more
obvious and adds an explanation of why the class is not deprecated.

Test Plan:
- build

Revert Plan:
-safe

Reviewers: ekoneil, mingfli, clang

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D648641

Task ID: 1938802""",0.7,None,added

2766,Michael Marucheck,mmarucheck@fb.com,"""Make FRIENDS default audience rather than ONLY_ME.

Summary: See title.

Test Plan:
- build

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D649252

Task ID: 1938915""",0.7,None,changed

2767,Chris Lang,clang@fb.com,"""[android-sdk] Makes AccessToken public, adds Session.open that takes an already-created AccessToken.

Summary:
Opening a Session using an access token provided by the Facebook application via a native-linking Intent is a common scenario, but was not straightforward to implement. This commit adds methods to AccessToken to simplify handling such Intents.

AccessToken is now a public class, and there is a Session.open overload that takes an AccessToken and opens a session using it.

Added sample code to BooleanOGSample to show a more sophisticated handling of native linking.

Added a NonCachingTokenCachingStrategy for use in scenarios where no tokens should be cached (for instance, temporarily opening a session to handle a deep-linking request).

Test Plan:
- Added unit tests, ran them
- Verified that deep linking works in BooleanOGSample

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, chrisp

Reviewed By: mmarucheck

CC: jacl

Differential Revision: https://phabricator.fb.com/D640046

Task ID: 1914904""",0.7,None,added

2768,Chris Lang,clang@fb.com,"""[android-sdk] Rename LoggingBehaviors to LoggingBehavior; add Javadoc warning that com.facebook.internal is not supported.

Summary:
Renamed LoggingBehaviors to LoggingBehavior for consistency with naming conventions.

Added Javadoc warning that use of com.facebook.internal classes is not supported and there is no guarantee that they will
not break or go away completely.

Test Plan:
- (rename) Ran unit tests
- (docs) Inspection

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, ekoneil

Reviewed By: mmarucheck

CC: caabernathy, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D649025

Task ID: 1938606, 1938594""",0.7,None,added

2769,Michael Marucheck,mmarucheck@fb.com,"""Fall back to ProxyAuth on SERVICE_DISABLED error

Summary:
If NativeGDP returns SERVICE_DISABLED error type, the SDK should
consider the NativeGDP to be disabled and should fall back to use
legacy login mechanisms.

Test Plan:
- existing unit tests
- built a special build of fb4a that returns this code and verified
  that we bring up ProxyAuth.

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D648719

Task ID: 1938791""",0.7,None,changed

2770,Michael Marucheck,mmarucheck@fb.com,"""Add default audience setter/getter to Login{Button,Fragment}

Summary:
Enables audience setting when using LoginButton to openForWrite
with native login dialog.

Test Plan:
- unit tests
- added a unit test to verify the audience setting is passed to the
  Session.AuthorizationRequest

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D648736

Blame Revision:

Task ID: 1938928""",0.7,None,added

2771,Michael Marucheck,mmarucheck@fb.com,"""Fixed SessionDefaultAudience value names

Summary: Enum names should be SCREAMING_CAPS in Java.

Test Plan:
- Unit tests

Revert Plan:
- safe

Reviewers: ekoneil, mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D648618

Task ID: 1938618""",0.7,None,fixed

2772,Michael Marucheck,mmarucheck@fb.com,"""Native GDP

Summary: Added Native GDP support to SDK

Test Plan:
- Added AccessToken unit test
- Manual testing with Scrumptious

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D647281

Task ID: 1860553""",0.7,None,added

2773,Ming Li,mingfli@fb.com,"""Fix SSO issue with legacy apps.

Summary: This fixes an issue where SSO was broken from legacy apps with the last change to LoginActivity.

Test Plan: Tested Hackbook with SSO and ran unit tests.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D646810

Task ID: 1933501""",0.7,None,fixed

2774,Chris Lang,clang@fb.com,"""[android-sdk] Disable all logging behaviors except in DEBUG builds.

Summary: In non-DEBUG builds, Logger will now not log anything, regardless of the LoggingBehaviors that have been set.

Test Plan:
- Inspection (and confirming BuildConfig.DEBUG=false in signed builds)

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D643042

Task ID: 1768796""",0.7,None,changed

2775,Chris Lang,clang@fb.com,"""[android-sdk] Suppress unchecked warning in SharedPreferencesTokenCache.

Summary: Recent commit added unchecked casts, resulting in warnings. Added a SuppressWarnings directive.

Test Plan:
- Ran build

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D642257

Blame Revision: D641964""",0.7,None,added

2776,Ming Li,mingfli@fb.com,"""Adding categories to the errors as well as some possible messages to show the users. Also added more error handling to Scrumptious.

Summary: Adding categories to different types of server errors, and updating Scrumptious to handle these errors.

Test Plan: Added unit tests, and ran Scrumptious with as many error conditions as I could.

Reviewers: mmarucheck, clang, jacl, ekoneil

Reviewed By: jacl

CC: msdkexp@, subodh, chrisp

Differential Revision: https://phabricator.fb.com/D634980

Task ID: 1815910""",0.7,None,added

2777,Chris Lang,clang@fb.com,"""[android-sdk] SharedPreferencesTokenCache was not caching AccessTokenSource.

Summary:
SharedPreferencesTokenCache did not handle serialization of Enums, which means that cached tokens would be loaded
with their source set to AccessTokenSource.WEB_VIEW rather than the correct value. Added Enum support to this class,
and did some minor refactoring of test code.

Test Plan:
- Added unit tests to validate this scenario
- Ran all unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D641964

Task ID: 1919389""",0.7,None,added

2778,Ming Li,mingfli@fb.com,"""Allowing custom widgets to be viewable in graphical editors.

Summary: Some tweaks to get the custom widgets viewable in the graphical editors in both IntelliJ and Eclipse. Still not perfect, but looks much better than before.

Test Plan: Verified that I can view the widgets. Ran unit tests.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: karthiks

CC: gregschechte, msdkexp@

Differential Revision: https://phabricator.fb.com/D641900

Task ID: 1868214""",0.7,None,changed

2779,Karthik Subramanyam,karthiks@fb.com,"""Discard old bitmap in ProfilePictureView

Summary: If we ever set the image to a blank profile, we need to discard the old profile's bitmap so as to never mistakenly show it again

Test Plan: Tested ProfilePictureSample

Reviewers: mmarucheck, mingfli, clang

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D640516

Task ID: 1918627""",0.7,None,changed

2780,Chris Lang,clang@fb.com,"""[android-sdk] Add ability to serialize numeric/boolean/date parameters.

Summary:
We serialized numeric, boolean, and date properties of GraphObjects, but did not support serializing them when passed
as part of a parameters Bundle. We will now serialize them just as we do when they are part of a GraphObject.

Test Plan:
- Added unit test to check new error message
- Changed Request.newPlacesSearchRequest to use integers rather than strings for numeric parameters
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D640489

Task ID: 1918417""",0.7,None,added

2781,Ming Li,mingfli@fb.com,"""Update samples to leverage SDK components, and to be more consistent.

Test Plan: tested samples in question.

Reviewers: clang, mmarucheck

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D640152

Task ID: 1901984""",0.7,None,changed

2782,Ming Li,mingfli@fb.com,"""Using LoginActivity to proxy both SSO and webview login mechanisms.

Summary: This moves most of the logic of handling login behaviors to LoginActivity, and allows us to provide a better exception (in the app's process) to fail fast if the calling activity is singleInstance.

Test Plan: Ran unit tests, tested with Scrumptious and SessionLoginSample (on different login behaviors), as well as Hackbook for back compat.

Reviewers: mmarucheck, clang

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D638002

Task ID: 1901717""",0.7,None,changed

2783,Chris Lang,clang@fb.com,"""[android-sdk] Enhance SessionLoginSample to demonstrate using LoginFragment as well.

Summary:
SessionLoginSample demonstrated using a custom Activity and custom Fragment to handle logging in. Added a third example
that relies on LoginFragment to demonstrate its use as well.

Test Plan:
- Ran the sample, logged in using each method

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: subodh

Differential Revision: https://phabricator.fb.com/D636404

Task ID: 1892093""",0.7,None,added

2784,Chris Lang,clang@fb.com,"""[android-sdk] Fix handling of closed sessions in Request.

Summary:
If a Session that is in an unopened state is used in a Request, we were attempting to extract the (null) access token
from it and use it as a parameter. This is an error case, as unopened Sessions should not be used in a request. Moreover,
it was triggering an unclear error message that referenced photo uploads.

Throw a new exception if a Request is executed with a non-null but unopened Session.

Fixed the error message to be more appropriate to the error case.

When a Session is closed, reset the tokenInfo to the same empty token as a newly-created Session has, rather than null,
for consistency.

Test Plan:
- Added new unit test
- Ran all unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D636352

Task ID: 1901835, 1903573""",0.7,None,fixed

2785,Chris Lang,clang@fb.com,"""[android-sdk] Remove redundant activity definition from SessionLoginSample manifest

Summary:
.MainActivity was declared twice in AndroidManifest.xml. On some devices this caused an exception on startup.
Removed the redundant definition.

Test Plan:
- Ran SessionLoginSample

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D635289""",0.7,None,removed

2786,Chris Lang,clang@fb.com,"""[android-sdk] Auth/reuath with permissions was broken by WebDialog changes.

Summary: Previous change broke passing permissions parameters to auth dialog on auth/reauth requests.

Test Plan:
- Ran HelloFacebook without TOSed user, was able to log in and post status update successfully following permission
upgrade on reauth.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D634984

Blame Revision: 610413

Task ID: 1901243""",0.7,None,fixed

2787,Chris Lang,clang@fb.com,"""[android-sdk] When converting GraphObject property names to JSON keys, use US locale rather than device locale.

Summary:
We call String.toLower() as part of the conversion from camelCase property getter/setter names to lower_case JSON
keys, but were not specifying a locale. Certain device locales, e.g., Turkish, caused this to break the mapping
from property names to JSON keys. Specifying US locale for this call results in consistent mapping regardless of
device locale.

Test Plan:
- Ran unit tests on emulator with language set to Turkish (without this fix, most of them fail)

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: karthiks

CC: aliparr, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D634785

Task ID: 1898484""",0.7,None,fixed

2788,Michael Marucheck,mmarucheck@fb.com,"""Fixed null ref in FacebookActivity

Summary: See title

Test Plan:
- unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D633256

Task ID: 1863836""",0.7,None,fixed

2789,Chris Lang,clang@fb.com,"""[android-sdk] Fix warnings in Hackbook sample.

Summary: Suppressing warnings that Hackbook is using deprecated classes and methods (which is by design).

Test Plan:
- Built in Eclipse, no warnings

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D633184

Task ID: 1894609""",0.7,None,fixed

2790,Chris Lang,clang@fb.com,"""[android-sdk] Rename GraphObjectWrapperTests to GraphObjectFactoryTests.

Summary: GraphObjectWrapper was renamed (and moved) to GraphObject.Factory. Its unit tests should be in a similarly named class.

Test Plan:
- Ran tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D632738""",0.7,None,changed

2791,Chris Lang,clang@fb.com,"""[android-sdk] Moved GraphObjectWrapper to GraphObject.Factory.

Summary:
GraphObjectWrapper had a name that did not clearly indicate its purpose. It is really a factory for GraphObjects,
and as such it makes sense to nest it within GraphObject and call it Factory. This commit does that, and also shortens
some of its method names, since it is clear from context now what they are creating.

Fixed a warning in WebDialog.java.

Test Plan:
- Built all projects
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: ekoneil, caabernathy, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D632163""",0.7,None,fixed

2792,Chris Lang,clang@fb.com,"""[android-sdk] Fix build warnings.

Summary: Needed to suppress two unchecked cast warnings.

Test Plan:
- Built

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D632124""",0.7,None,fixed

2793,Chris Lang,clang@fb.com,"""[android-sdk] Move WebDialog construction to a Builder pattern.

Summary:
Helper methods to create WebDialogs were becoming unwieldy given the number of possible parameters dialogs
can take. Moved to a Builder pattern to allow for supporting larger numbers of parameters while simplifying
the API for constructing WebDialogs.

Test Plan:
- Verified auth dialog still works by logging in to HelloFacebook
- Modified HelloFacebook to try building Feed and Request dialogs with all supported parameters.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D632020""",0.7,None,changed

2794,Chris Lang,clang@fb.com,"""[android-sdk] Added session status callback to LoginButton and LoginFragment.

Summary:
Apps using LoginButton and LoginFragment could benefit from a simple way to add a callback to receive status changes
for the session associated with the button/fragment. Added a get/setSessionStatusCallback to each of them.

Modified BooleanOGSample to demonstrate this alternative approach for receiving session status changes for activities
that are not FacebookActivities.

Fixed LoginButtonTest.testLoginButton to perform necessary actions on the UI thread rather than the test thread.

Test Plan:
- Ran LoginButtonTest
- Ran modified BooleanOGSample to verify that LoginFragment callback also works

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D627997

Task ID: 1857226""",0.7,None,added

2795,Jesse Chen,jessechen@fb.com,"""Update Hackbook profile picture fetch

Summary: October's breaking changes involves the /picture connection, which now returns a dictionary rather than just the URL to the profile picture when the picture field is part of a larger JSON response.  This diff addresses that change so that profile pictures appear again on Hackbook.

Test Plan: Run Hackbook without this code, observe no profile picture is displayed.  Run Hackbook with this code, observe the profile picture.

Reviewers: mmarucheck, clang

Reviewed By: clang

Differential Revision: https://phabricator.fb.com/D629741""",0.7,None,changed

2796,Michael Marucheck,mmarucheck@fb.com,"""Merge branch 'release' into MergeRelease
@merge-commit: mmarucheck

Conflicts:
	facebook/src/com/facebook/FacebookSdkVersion.java""",0.2,None,changed

2797,Chris Lang,clang@fb.com,"""[android-sdk] Remove not-yet-implemented methods from FacebookRequestError.

Summary:
FacebookRequestError had a couple methods/fields relating to not-yet-implemented functionality. Removing that for now,
until the functionality is ready to go.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, karthiks, mingfli

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D628354""",0.7,None,changed

2798,Chris Lang,clang@fb.com,"""[android-sdk] Changes to Scrumptious to make it more testable.

Summary:
Writing acceptance tests for Scrumptious is easier if the default text for ""What are you eating?"" and ""Where are you?""
are not the same string. It is also a little more user-friendly. Changed from ""Select one"" in both cases to ""Select a meal""
and ""Select a place"".

Test Plan:
- Inspection

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D626711""",0.7,None,changed

2799,Chris Lang,clang@fb.com,"""[android-sdk] Added get/setLoginBehavior to LoginButton and LoginFragment.

Summary:
Users of these two classes may want to customize what types of authorization they will attempt in order to open
a Session. Added accessors to let that be specified.

Test Plan:
- LoginButton: modified Scrumptious to specify login behavior, verified it worked
- LoginFragment: inspection, as it passes through to loginButton

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D626346""",0.7,None,added

2800,Chris Lang,clang@fb.com,"""[android-sdk] Fix caching behavior broken in previous commit.

Summary:
Commit D622374 attempted a small code optimization that actually broke caching. Responses that skipped the cache
but were cacheable would not be written to the cache because cache and cacheKey were null.

Test Plan:
- Ran Scrumptious, observed that once a roundtrip was performed for nearby places, that query was correctly cached.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D626633

Blame Revision: D622374""",0.7,None,fixed

2801,John Ketchpaw,jketchpaw@fb.com,"""Update version string to 3.0.1.b

Summary: also adding the tag.

Test Plan: ran all unit tests.

Reviewers: clang, mmarucheck

Reviewed By: clang

CC: neko-dev@

Differential Revision: https://phabricator.fb.com/D625533""",0.7,None,changed

2802,John Ketchpaw,jketchpaw@fb.com,"""Change Settings.publishInstall() to be nonblocking (and safe to call in the UI thread), and add publishInstallAndWait() for the blocking case.

Summary: It's not clear from the existing function that it blocks on network requests (and therefore does not work on the UI thread).  This takes care of that.

Test Plan: trigger publishInstall from a UI thread, and verify that it works OK.  attempt to use publishInstallAndWait from the UI thread, and verify that it fails.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: neko-dev@, vijaye

Differential Revision: https://phabricator.fb.com/D622381""",0.7,None,changed

2803,John Ketchpaw,jketchpaw@fb.com,"""Change Settings.publishInstall() to be nonblocking (and safe to call in the UI thread), and add publishInstallAndWait() for the blocking case.

Summary: It's not clear from the existing function that it blocks on network requests (and therefore does not work on the UI thread).  This takes care of that.

Test Plan: trigger publishInstall from a UI thread, and verify that it works OK.  attempt to use publishInstallAndWait from the UI thread, and verify that it fails.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: neko-dev@, vijaye

Differential Revision: https://phabricator.fb.com/D622381""",0.7,None,changed

2804,John Ketchpaw,jketchpaw@fb.com,"""Merge commit 'ca708ce9ee2e73b986d67086c1c00c046bbb3d95'.  Brings history back into line with github.""",0.2,None,changed

2805,Chris Lang,clang@fb.com,"""[android-sdk] Refactor SDK classes into packages. Minor API changes to account for package visibility issues.

Summary:
As the SDK package became larger, it was also unwieldy. We decided to split some classes into separate packages.
Doing so required minor API changes as visibility between packages meant some formerly-package-internal code needed
to be made public (either really public or public within an unsupported 'internal' package).

Test Plan:
- Ran all unit tests
- Ran all sample apps

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte, ekoneil

Reviewed By: mmarucheck

CC: caabernathy, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D622374

Task ID: 1834292""",0.7,None,changed

2806,Chris Lang,clang@fb.com,"""[android-sdk] In PickerFragment, don't reload (unless forced) as long as data is loading, even if it has not loaded.

Summary:
PickerFragment.loadData allowed the caller to specify that a reload should not be forced if data was already present, but
this did not take into account the case where a request had been issued but no response received. In the case of longer
queries, this could result in, e.g., frequent device rotations, constantly restarting the query (and forgetting about the
old one) and never receiving results. Fixed to take into account pending-but-not-finished requests, and also remember
activity circle state between activity restarts, so the activity circle properly reflects the current state.

Test Plan:
- Introduced artificially long delay in async requests (e.g., 10 seconds), repeatedly rotated device
- Observed that activity circle was correct and request completed in the expected time; without change, request
was constantly restarted and did not finish until device rotation ceased.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D623982

Task ID: 1771196""",0.7,None,fixed

2807,Chris Lang,clang@fb.com,"""[android-sdk] Fix LoginButton to work when displayed in edit mode.

Summary:
LoginButton made certain calls in its constructor and elsewhere	that failed when the control was being
previewed in an	 editor such as Eclipse or IntelliJ. Fixed it to not make such calls in edit mode.

Test Plan:
- Opened layout containing a LoginButton in IntelliJ and Eclipse and did not see an error message.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D622467

Task ID: 1868214""",0.7,None,fixed

2808,John Ketchpaw,jketchpaw@fb.com,"""change publishInstall to run async

Summary: it is not clear from the function definition that it cannot be called on the UI thread.  We have renamed the API in the new SDK to publishInstall[Async|AndWait], but need to make this work until that releases.

Test Plan: Call publishInstall on a UI thread.  see that it works.

Reviewers: mmarucheck, clang

CC: neko-dev@

Differential Revision: https://phabricator.fb.com/D622746""",0.7,None,changed

2809,Chris Lang,clang@fb.com,"""[android-sdk] Add missing copyright/license notices.

Summary: Several files were missing the standard copyright/license notice. Added it.

Test Plan:
- Ran: grep -RIL ""Copyright 20"" --include=""*.java"" .
- Saw no files except gen/ and bin/ files without notices.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D623776

Task ID: 1870410""",0.7,None,added

2810,Chris Lang,clang@fb.com,"""[android-sdk] Removed unused AccessToken.isSSO method.

Summary:
This method became obsolete after previous changes to AccessToken, but was still referenced in a handful of unit tests.
Removed the method and updated the unit tests to use the new getSource method instead.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D622606""",0.7,None,removed

2811,Karthik Subramanyam,karthiks@fb.com,"""Improving ImageDownloader reliability

Summary:
Two changes were required:
1. The WorkQueue.WorkItem for each request had to be created only after the request was registered as pending
2. ImageResponseCache needed to return the original connection stream if caching failed

The other changes are there after some code inspection for more potential threading issues.

Test Plan: Ran some samples on a device and emulator

Reviewers: mmarucheck, clang

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D622270

Task ID: 1866294""",0.7,None,changed

2812,Chris Lang,clang@fb.com,"""[android-sdk] Fix error handling in WebDialog.

Summary:
Last-minute refactoring prior to commit reversed the case of an if clause, meaning we interpreted successful WebDialog
results as errors. Fixing that.

Test Plan:
- Ran FriendPickerSample, was able to log in when no access token was cached (failed previously)

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: karthiks

Differential Revision: https://phabricator.fb.com/D622520

Task ID: 1768823""",0.7,None,fixed

2813,Karthik Subramanyam,karthiks@fb.com,"""Adding is_cropped to ProfilePictureView, making it default and renaming userId

Summary: Fixing issues from a few different tasks

Test Plan: compile and ran ProfilePictureSample

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D620952

Task ID: 1860840, 1864966, 1860706""",0.7,None,changed

2814,Chris Lang,clang@fb.com,"""[android-sdk] Add better error handling to WebDialog.

Summary:
WebDialog parsed out OAuth-related errors, but did not parse other types of errors that might be returned from a
dialog. Now we parse them and create a FacebookRequestError populated with as much information as we got from the
dialog.

Test Plan:
- Modified Hackbook to call dialogs with parameters that would cause errors, verified that error object was
populated with the information we got back.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D618163

Task ID: 1768823""",0.7,None,added

2815,Chris Lang,clang@fb.com,"""[android-sdk] Clean up picker samples to remove unused code.

Summary:
Previous bug fixes changed the two picker samples such that ""<No friends[/place] selected>"" was always displayed
when there was no selection, regardless of whether that was because the user clicked the back button or clicked ""Done""
with no selection. But there was unused code to handle the cancelled case. Removed that code, since the current
behavior is perfectly reasonable.

Test Plan:
- Ran picker samples, verified no change in behavior

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: caabernathy

Differential Revision: https://phabricator.fb.com/D618960

Task ID: 1853173""",0.7,None,removed

2816,Chris Lang,clang@fb.com,"""[android-sdk] Fix pickers to work when profile pictures not shown.

Summary:
A previous commit broke the pickers when profile pictures were not shown. We were attempting to request a field
named ""null"" because we added a null element to the fields array, rather than not adding it at all.

Test Plan:
- Modified picker samples to turn off profile pictures, ran them successfully

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: caabernathy

Differential Revision: https://phabricator.fb.com/D618931

Task ID: 1859280""",0.7,None,fixed

2817,Chris Lang,clang@fb.com,"""[android-sdk] Renamed GraphObjectListFragment to PickerFragment.

Summary:
As part of the refactoring of PickerFragment/GraphObjectListFragment, the old PickerFragment went away and GraphObjectListFragment
was made public. The second part of the refactoring is to rename GraphObjectListFragment to PickerFragment, which this
commit does.

Test Plan:
- Built project

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: caabernathy, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D618156""",0.7,None,changed

2818,Chris Lang,clang@fb.com,"""[android-sdk] Forcibly hide virtual keyboard when detaching PlacePickerFragment.

Summary:
At least on some API levels, simply detaching the PlacePickerFragment is not enough to cause the system to
dismiss the virtual keyboard if it was being displayed because the user had focus in the search box. Overriding
onAttach/onDetach to explicitly set the soft input mode for the search box.

Test Plan:
- Ran HelloFacebook on 2.3.3 emulator
- Brought up place picker
- Clicked in search box, waited for keyboard to appear
- Clicked Done, and keyboard disappeared, where previously it would remain on-screen after the picker disappeared

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D618141

Task ID: 1853703""",0.7,None,changed

2819,Chris Lang,clang@fb.com,"""[android-sdk] Don't add access_token parameters from a closed Session.

Summary:
Request would try to append an access_token if it could get one from a supplied Session, even if the Session
was closed. This is incorrect; it should act as if no Session was provided and let the server return an error if
appropriate.

Test Plan:
- Modified HelloFacebook to always enable the ""Pick Some Friends"" button
- Logged in
- Picked friends
- Logged out
- Picked friends, observed an error message indicating no access token was provided, as expected
- Added unit tests (and fixed one broken one), verified they ran

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D616959

Task ID: 1852996""",0.7,None,added

2820,Chris Lang,clang@fb.com,"""[android-sdk] Removes PickerFragment, makes GraphObjectListFragment public, rearchitect HelloFacebookSample

Summary:
The rationale for having a separate PickerFragment interface that GraphObjectListFragment extended is gone, so there is
no reason not to just make GraphObjectListFragment public, which is not only simpler, but allows use of the picker fragments
as-a Fragment in a polymorphic way, which may be useful for certain apps.

Modified fragment listeners to take the fragment as the first parameter, to simplify implementation of callbacks.

HelloFacebookSample now has a single Activity which swaps in and out the picker fragments, rather than wrapping them in
separate activities. Also cleaned up a couple other issues with HelloFacebookSample.

Test Plan:
- Ran unit tests
- Ran all samples that use pickers

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte

Reviewed By: mmarucheck

CC: ekoneil, caabernathy, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D616779

Task ID: 1852204, 1846439, 1846399""",0.7,None,changed

2821,Ming Li,mingfli@fb.com,"""Adding a class to encapsulate server side errors.

Summary: Adding a class to encapsulate server side errors and simplify error handling.

Test Plan: ran sample apps and unit tests.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@, joren, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D615365

Task ID: 1815810""",0.7,None,changed

2822,Chris Lang,clang@fb.com,"""[android-sdk] Added SessionLoginFragmentSample, renamed SessionLoginSample to SessionLoginActivitySample

Summary:
SessionLoginFragmentSample looks and acts identically to SessionLoginActivitySample (formerly just SessionLoginSample), but
is implemented in terms of a Fragment within a FragmentActivity rather than by a simple Activity. It demonstrates using
the overloaded methods in Session that take a Fragment rather than an Activity, and how to pass data from onActivityResult
to Session to handle authorization.

Test Plan:
- Ran both samples, verified behavior was the same in both of them

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: caabernathy, ekoneil, subodh

Differential Revision: https://phabricator.fb.com/D613975

Task ID: 1833667""",0.7,None,added

2823,Michael Marucheck,mmarucheck@fb.com,"""Renamed JustRequestSample -> GraphApiSample

Test Plan:
- Build all samples
- Ran GraphApiSample

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D615480

Task ID: 1822956""",0.7,None,changed

2824,John Ketchpaw,jketchpaw@fb.com,"""return true from publishInstall only when we have successfully done so

Summary: if the attribution id is null, we were returning true.  we need to only return true if lastPing != 0, which guarantees current or previous success.

Test Plan: run a sample with the fb app logged out or uninstalled.  see that the app now returns false.

Reviewers: mmarucheck, clang, mingfli

Reviewed By: clang

Differential Revision: https://phabricator.fb.com/D615008

Blame Revision: D590426""",0.7,None,changed

2825,Michael Marucheck,mmarucheck@fb.com,"""Fixed configure_unit_tests.sh script after removal of common.sh.

Summary: Removed the dependency on the missing common.sh.

Test Plan:
- Deleted config file, verified unit test failures
- Ran configure_unit_tests.sh, verified unit tests succeeded

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D615213

Task ID: 1848884""",0.2,None,fixed

2826,Chris Lang,clang@fb.com,"""[android-sdk] Add profile picture pre-fetching to GraphObjectAdapter for smoother scrolling.

Summary:
To provide a smoother scrolling experience, GraphObjectAdapter will now prefetch a few profile pictures on either
side of the visible items, in the hope that by the time those items scroll into view, the picture will be in memory and
can be immediately displayed rather than showing a default picture for a split second before the profile picture appears.
Image cache misses or large jumps in the position of the list view will still result in the default picture being
displayed.

Test Plan:
- Ran FriendPickerSample with a large number of friends, scrolled up and down and did not observe default picture
being displayed when in a section of friends with cached bitmaps.

Revert Plan:

Reviewers: mmarucheck, karthiks, mingfli

Reviewed By: karthiks

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D612678

Task ID: 1788580""",0.7,None,added

2827,Michael Marucheck,mmarucheck@fb.com,"""FileLruCache.trim() should not run multiple instances

Summary:
- Added a comment that explains the threading semantics of FileLruCache.
- Made trim() run async, and only one instance at a time.

Test Plan:
- unit tests
- verified that unit tests fail if we don't block waiting for trim().

Reviewers: clang, karthiks, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D614189

Task ID: 1830461""",0.7,None,added

2828,Chris Lang,clang@fb.com,"""[android-sdk] Make HelloFacebook more robust when handling pending actions.

Summary:
Previously, a race condition existed in HelloFacebook where handlePendingActions could be called before all conditions
necessary to successfully call the pending action were in place. In particular, a cancelled permissions upgrade would
cause us to attempt to post a photo or status update anyway. Added a handler so that cancelling the permissions upgrade
will display an informative message and abort the attempt to post. Improved the pending action handlers so they will not
attempt an action if all necessary conditions are not met, but will instead stay in the pending state until they are
called again. (For instance, we may be called because this.user was filled in, while we are still waiting for a pending
permissions upgrade -- now, we'll recognize that we aren't ready to execute the pending action and will wait for the
permissions upgrade to complete.)

Test Plan:
- Ran HelloFacebook on device with Facebook app installed and ""Don't keep activities"" developer option on
- Logged on as user who had not TOSed app
- Clicked ""Post Photo""
- Hit back button rather than agreeing to permissions upgrade
- Saw warning message
- Clicked ""Post Photo"" again
- Accepted permissions upgrade
- Saw that photo was posted upon returning to app

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks, gregschechte

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D614469

Task ID: 1846373""",0.7,None,changed

2829,Michael Marucheck,mmarucheck@fb.com,"""Updated to new version of IntelliJ

Summary: Checking in changes made by new version of IntelliJ

Test Plan: - build in IntelliJ

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D613919""",0.7,None,added

2830,Chris Lang,clang@fb.com,"""[android-sdk] Allow importing of access tokens to support app upgrade.

Summary:
Added helper methods to Session to allow opening of Sessions based on existing access tokens
that have been obtained through mechanisms other than the usual Session.open* methods. The primary scenario is to support apps that are upgrading from a previous version that did not use Session/TokenCache to manage sessions and tokens, but wish to import existing access tokens into the new infrastructure without requiring their users to go through an authorization process again.

Test Plan: - Ran new unit test which validated that imported access token was used to open a Session.

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D612381

Task ID: 1831285""",0.7,None,changed

2831,Michael Marucheck,mmarucheck@fb.com,"""Updated to new migration bundle and user-agent version

Summary: See title

Test Plan:
- Unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D613447

Task ID: 1805613""",0.7,None,added

2832,Karthik Subramanyam,karthiks@fb.com,"""Renaming the WorkQueue classes to be priority-less. Also clearing out some new warnings

Summary: Completing the image download code integration by renaming the WorkQueue class

Test Plan: Compiles fine

Reviewers: clang, mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D612877

Task ID: 1771141""",0.7,None,added

2833,Michael Marucheck,mmarucheck@fb.com,"""Fixed warnings.

Test Plan: - unit tests, build in IntelliJ and command-line

Reviewers: clang, jacl, mingfli

Reviewed By: jacl

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D613444""",0.7,None,fixed

2834,Karthik Subramanyam,karthiks@fb.com,"""Returning a confirmation of the cancel request.

Summary: If callers to ImageDownloader are doing any sort of bookkeeping of requests they issue, it would be helpful to know when calls to cancelRequest are successful and when not.

Test Plan: Ran ProfilePictureSample which is the only place that exercises cancel right now

Reviewers: clang, mmarucheck, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D612553

Task ID: 1771141""",0.7,None,changed

2835,Chris Lang,clang@fb.com,"""[android-sdk] Added WebDialog class, deprecated FbDialog, which now is a thin wrapper around WebDialog.

Summary:
As we are deprecating classes and methods in the com.facebook.android namespace, including FbDialog, we add a
new class, WebDialog, in the com.facebook namespace. It has functionality similar to FbDialog, but includes a number of
helper methods to construct specific types of Facebook Web dialogs and has a simpler listener interface.

FbDialog is now a thin wrapper around WebDialog that preserves existing callback semantics.

Test Plan:
- Ran Hackbook, verified that dialogs display successfully (using both FbDialog and WebDialog)
- Ran several other samples, verified that Web-based authentication continues to work

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D610413

Task ID: 1831402""",0.7,None,added

2836,Karthik Subramanyam,karthiks@fb.com,"""consolidation image download code

Summary:
This diff does a few different things
1. Consolidates all image downloading code into one place
2. Makes ImageDownloader use a throttled queue to issue requests
3. Separates cache-reads from network calls so one queue doesn't constrain the other.
4. Continues to support old functionality (cached redirects, cancel etc)
5. Simplified PrioritizedWorkQueue to be priority-less

** MISSING **
1. I realize that I've commented out some unit tests :). I will continue to work on those while you review the diff
2. I want to rename PrioritizedWorkQueue to WorkQueue. However, doing so causes Git to think its a totally different file (I'm guessing the contents changed too much, along with the name). So I'm separating the rename into its own change
3. Yes, the code is complicated :-/. Clearly, I need to add unit tests to ImageDownloader. That will also be handled separately

Test Plan: Unit tests, Scrumptions, ProfilePictureSample, SwitchUserSample

Reviewers: mmarucheck, clang, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D610659

Task ID: 1771141""",0.7,None,changed

2837,Michael Marucheck,mmarucheck@fb.com,"""Fixed Hackbook issues

Summary:
- Fixed Hackbook module in IntelliJ.
- Suppressed deprecation warnings, since Hackbook is supposed to
  demonstrate deprecated API.
- Close Cursor in Hackbook's Utility class.

Test Plan:
- Build/run Hackbook

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D610279

Task ID: 1830270""",0.7,None,fixed

2838,Chris Lang,clang@fb.com,"""[android-sdk] Moved TestSession from test project to main SDK.

Summary:
Because TestSession is potentially useful for third-party application developers to write Facebook-related unit
tests for their application, moving it into the SDK project and added documentation.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, caabernathy

Differential Revision: https://phabricator.fb.com/D609784

Task ID: 1406730""",0.7,None,added

2839,Chris Lang,clang@fb.com,"""[android-sdk] Added FbDialog constructor that takes a theme.

Summary: FbDialog has a new constructor that takes a theme to allow apps to override the default (Theme_Translucent_NoTitleBar).

Test Plan:
Inspection

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D609714

Task ID: 1768835""",0.7,None,added

2840,Chris Lang,clang@fb.com,"""[android-sdk] Fixed capitlization in Javadocs.

Summary: Cleaned up Javadocs to fix occurrences of ""facebook"" to ""Facebook"".

Test Plan:
- Inspection

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D608872

Task ID: 1782668""",0.7,None,fixed

2841,Chris Lang,clang@fb.com,"""[android-sdk] PlacePickerFragment should update search box when search text set programmatically.

Summary:
Scrumptious was reloading its places list each time the activity was re-created, e.g., during rotation. In
addition, the original query (""restaurant"") was being overwritten because the search box UI had a different
idea of what the query text was (empty). Changed PlacePickerFragment.setSearchText to keep the search box UI
up to date with what the actual query text is.

Test Plan:
- Ran Scrumptious, saw ""Restaurant"" displayed in search box; rotating resulted in list state being
preserved.

- Ran PlacePickerSample and HelloFacebook, saw their existing behavior unchanged (since they did not set
any search text programmatically).

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D608855

Task ID: 1793769""",0.7,None,changed

2842,Chris Lang,clang@fb.com,"""[android-sdk] Don't add access token in Facebook.dialog() when displaying auth dialog.

Summary:
When displaying the auth dialog, it is incorrect to specify an access token. Fixed Facebook.dialog() to not add the
access token in this case.

Test Plan:
- Modified Hackbook to display oauth dialog, verified that resulting URL did not contain the access token, even when
the current session was valid.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D608980

Task ID: 1768806""",0.7,None,added

2843,Chris Lang,clang@fb.com,"""[android-sdk] Fix authentication logic in JustRequestSample.

Summary:
JustRequestSample contained logic that assumed the same Activity was present after authentication as before. Since
it is possible for the Activity to be recycled, it needs to be resilient to this case. Changed auth logic to not
assume that same Activity and remember whether a request was pending following authentication.

Test Plan:
- Ran JustRequestSample without Facebook app installed, verified that after logging in and TOSing app, pending request
was executed and results displayed.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D608734

Task ID: 1816970""",0.7,None,fixed

2844,Michael Marucheck,mmarucheck@fb.com,"""Use executeOnExecutor when available                                                                           [0/44111] Summary: We want to allow Requests to run in parallel on multiple threads. However, this is a summary of behavior at different API-lev

Summary:
To enable this, we attempt to use executeOnExecutor if it is available,
and call it with AsyncTask.THREAD_POOL_EXECUTOR (or an Executor the app
specifies via Settings.setExecutor).

If that API is not available, we fall back to AsyncTask.execute.

Either way, for API-levels >=8 (which is what we support), we are
running Requests in parallel by default, and we provide a mechanism
for overriding this behavior whenever possible.

Test Plan:
- Unit tests
- Set a breakpoint for a test that exercises this and watch behavior
  for android-8 and android-16.

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D607955""",0.7,None,changed

2845,Michael Marucheck,mmarucheck@fb.com,"""Save friend activity list in Boolean OG Sample

Summary:
If you rotate the friends view, we lose the friend activity list.
This saves and restores it.

Test Plan:
- Rotate Boolean OG sample on friend activity view
- Unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D608389

Task ID: 1816803""",0.7,None,changed

2846,Michael Marucheck,mmarucheck@fb.com,"""FriendPickerFragment should show check marks in single-select mode

Summary: See title

Test Plan:
- Run BooleanOG and verify check mark is displayed and persists
  across rotation.
- Unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D608399

Task ID: 1816764""",0.7,None,changed

2847,Michael Marucheck,mmarucheck@fb.com,"""BoolOG error message if no logged in user

Summary:
If you navigate to the ""Rock with Friends"" tab in BooleanOG sample
but are not logged in, we want to show an error.

Test Plan:
- Tried scenario
- Unit tests

Revert Plan:
-safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D607980

Task ID: 1816641""",0.7,None,changed

2848,Chris Lang,clang@fb.com,"""[android-sdk] Added Request.newUploadVideoRequest helper to set up for video upload.

Summary:
newUploadVideoRequest returns a Request that has been initialized to upload a video; the video is
specified via a File object passed to the method. The name of the underlying file is used as the name
of the uploaded attachment, so its extension should be appropriate to the format of the video file.

Test Plan:
- Added new unit test to upload a short video of a mysterious window in Palo Alto, CA.
- Verified after running unit test that video was encoded and displayed in test user's activity log.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D607644

Task ID: 1441128""",0.7,None,added

2849,Chris Lang,clang@fb.com,"""[android-sdk] Fixes several issues with picker samples and authentication.

Summary:
Both FriendPickerSample and PlacePickerSample tried to open a new active session every time their activity was
created. In non-SSO cases, this caused the login and TOS pages to be displayed twice. With the new logic, we will
try to re-open the session only if it is closed, so un-TOSing the app and re-running it will display an error the first
time through saying that the app is not authorized, then try to re-authenticate the user when they return to the main
activity.

FriendPickerSample now re-draws the list of selected friends when the activity is re-created, e.g., after rotation.

Test Plan:
- Ran both samples (in non-SSO mode), tried un-TOSing and re-running app, rotating app, etc.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D607705

Task ID: 1816798, 1816774, 1817045""",0.7,None,security

2850,Chris Lang,clang@fb.com,"""[android-sdk] Display activity circle when starting to load results.

Summary:
When the picker fragments were changed to use the new LoadingStrategy-based implementation, the call to
display the activity circle was removed. Both strategies should show the activity circle when data is being
loaded. They will hide/dim the activity circle at different times once results start arriving.

Test Plan:
- Ran FriendPickerSample and PlacePickerSample, observed activity circle being displayed appropriately.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D607316

Blame Revision: D566767

Task ID: 1816835""",0.7,None,changed

2851,Karthik Subramanyam,karthiks@fb.com,"""Consolidating image download code between LoginFragment and ImageDownloader.

Summary: Updating LoginFragment to use ImageDownloader instead of its own AsyncTask to download images

Test Plan: Tested the fragment in BooleanOG and Scrumptious

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D606355

Task ID: 1771141""",0.7,None,changed

2852,Karthik Subramanyam,karthiks@fb.com,"""Updating projects to break on error when building with ant

Summary: This change will cause the build_and_test.sh script to break on warnings. However, it appears that the set of warnings doesn't fully match those in Eclipse or IntelliJ. So it's not a complete solution

Test Plan: Successful build

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D605234

Task ID: 1799185""",0.7,None,changed

2853,Michael Marucheck,mmarucheck@fb.com,"""Updated version string to 3.0.0.b

Test Plan:
- unit tests

Revert Plan:
- safe

Tags:

Reviewers: mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D605143""",0.7,None,changed

2854,Michael Marucheck,mmarucheck@fb.com,"""Moved Hackbook into samples

Summary:
Moved Hackbook into samples so it gets included in release.

It contains warnings, but a goal is that Hackbook continues working
with no code changes, so we are intentionally not fixing them.

Test Plan:
- Run a release and verify Hackbook is there.

Revert Plan:
- safe

Tags:

Reviewers: mingfli

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D604494""",0.7,None,changed

2855,Ming Li,mingfli@fb.com,"""Suppressing more warnings.

Summary: Suppressing more warnings that got turned on in the Juno build of Eclipse.

Test Plan: compiled

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, jpearce

Differential Revision: https://phabricator.fb.com/D604174

Task ID: 1744264""",0.7,None,changed

2856,Chris Lang,clang@fb.com,"""[android-sdk] Fix place picker so search box is created after title bar.

Summary:
Previous commit changed when we create the title bar in the pickers; place picker depends on knowing whether or
not there is a title bar to determine whether it needs to layout the search box below it or not. With the other
change, we were prematurely deciding there was no title bar, so the search box was at the top of the parent
view, overlapping with the title bar. Changed it to the be created at the same step of the lifecycle as the title bar.

Test Plan:
- Ran Scrumptious & PlacePickerSample, observed search box in the correct spot, including after rotations

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D603860

Blame Revision: D603502

Task ID: 1817510""",0.7,None,fixed

2857,Michael Marucheck,mmarucheck@fb.com,"""Close and clear Session on 190

Summary:
If a request failure indicates that the token was invalid, we close
and clear the corresponding Session object, since it is no longer
usable.

This prevents cached data from showing up in the pickers.

Test Plan:
- Verified scenario in Scrumptious and HelloFacebook
- Unit tests

Revert Plan:
-safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D603841

Task ID: 1816783""",0.7,None,changed

2858,Chris Lang,clang@fb.com,"""[android-sdk] Fix HelloFacebookSample to be more robust to ordering of callbacks

Summary:
HelloFacebookSample used the idea of a ""pending action"" to perform actions such as posting status updates or photos
after, e.g., a permissions upgrade. But posting the status update also relies on having a valid 'user' instance
variable set. Following a permissions upgrade, this value may be null because the query to retrieve 'me' has not
yet finished. Adding an additional check for this case, and checking for any pending action after we retrieve 'me'.

Test Plan:
- Ran HelloFacebook (without SSO), was able to upgrade permissions and status update was posted successfully
- Un-TOSed app and re-ran, app did not crash (this is still not completely desirable behavior, as we should check
for the un-TOS case and do something else, but it fixes the crash)

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D603781

Task ID: 1816893, 1816912""",0.7,None,fixed

2859,Chris Lang,clang@fb.com,"""[android-sdk] Fix pickers to not display title bar after re-creation.

Summary:
GraphObjectListFragment was inflating its title bar (if appropriate) in onCreateView. But if the fragment
is being re-created, we have not yet de-serialized our settings form the bundle yet, so the default (true) was being
used. Moved this to onActivityCreated, at which point we know whether or not to display it.

Test Plan:
- Ran BooleanOG (no title bar) and FriendPickerSample (title bar) on tablet, tried rotating tablet, observed
correct behavior in both.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D603502

Task ID: 1816646""",0.7,None,fixed

2860,Karthik Subramanyam,karthiks@fb.com,"""Fix SwitchUserSample

Summary: Updating SwitchUserSample to not depend on FacebookActivity for session management. This is necessary for proper save-restore behavior

Test Plan: Tested the app

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D603050

Task ID: 1814194""",0.7,None,fixed

2861,Karthik Subramanyam,karthiks@fb.com,"""Fixing some warnings with unused imports

Summary: After recent changes to the pickers, some imports are no longer needer

Test Plan: compiles fine

Reviewers: clang, mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D602296

Task ID: 1799185""",0.7,None,removed

2862,Karthik Subramanyam,karthiks@fb.com,"""Profile image caching

Summary: Adding the ability for ImageDownloader to cache images from both CDN and non-CDN urls.

Test Plan: Ran SwitchUser and ProfilePicture samples

Reviewers: mmarucheck, clang, mingfli

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D600462

Task ID: 1771153""",0.7,None,changed

2863,Ming Li,mingfli@fb.com,"""Exposing exceptions from LoginButton and LoginFragment.

Summary: Adding an error listener to Login{Button, Fragment}.

Test Plan: Added unit test and ran tests.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D601898

Task ID: 1785389""",0.7,None,added

2864,Ming Li,mingfli@fb.com,"""Quick clean up in Scrumptious.

Summary: Removing an extraneous variable.

Test Plan: ran app.

Reviewers: mmarucheck, clang, caabernathy

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D601972

Task ID: 1812896""",0.7,None,changed

2865,Chris Lang,clang@fb.com,"""[android-sdk] Fix PlacePickerSample to display selected place across activity restarts.

Summary:
The sample was displaying details about the selected place when one is selected, but not refreshing its
display if the activity is destroyed and re-created. Fixed to always display details if a place was selected.

Test Plan:
- Ran sample, selected a place, rotated device, saw details still being displayed

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D601354

Task ID: 1795561""",0.7,None,fixed

2866,Michael Marucheck,mmarucheck@fb.com,"""Add NOTICE.txt

Summary: Gives notice about images used from Android.

Test Plan:
- looked at file

Revert Plan:
- safe

Reviewers: ekoneil, clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D601915

Task ID: 1810199""",0.7,None,added

2867,Ming Li,mingfli@fb.com,"""Adding com_facebook namespace to resource ids.

Summary: Adding com_facebook namespace to the @+ids that we have. Also removing references to photos from Scrumptious.

Test Plan: ran all unit tests, tested all sample apps.

Reviewers: clang, mmarucheck, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D601586

Task ID: 1811511""",0.7,None,changed

2868,Michael Marucheck,mmarucheck@fb.com,"""Deprecate Facebook.java methods

Summary:
The main goal was to deprecate all Facebook functionality other than
dialog().  Cleaning up warnings came along for the ride, since this
introduces new warnings and I was going to clean them up.
- Deprecates Facebook functionality.
- Deprecates similar AsyncFacebookRunner functionality.
- Updates API docs to reflect these.
- Cleans up remaining warnings across all projects.

Test Plan:
- Build all samples, including Hackbook
- Run unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D601542

Task ID: 1804612""",0.7,None,added

2869,Chris Lang,clang@fb.com,"""[android-sdk] Added more localized Hebrew strings.

Summary: We were waiting on translations for a few strings; added them.

Test Plan:
- Inspection

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D601205

Task ID: 1753117""",0.7,None,added

2870,Chris Lang,clang@fb.com,"""[android-sdk] Added title bar and Done button to pickers, moved search box into PlacePickerFragment.

Summary:
To promote consistent UI, the picker fragments can now optionally provide a Facebook-like title bar and ""Done""
button. This behavior is configurable via attributes or creation-time arguments.

PlacePickerFragment now also optionally provides a search box, also configurable via attributes or creation-time
arguments.

Test Plan:
- Ran all affected samples

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mingfli

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D600929

Task ID: 1796219, 1798070""",0.7,None,added

2871,Ming Li,mingfli@fb.com,"""Fix exception when rotating device during Dialog auth.

Summary: Several scenarios can cause the dialog's containing Activity to be destroyed, causing a window leak. This fix starts another activity that handles the dismissal of dialogs if the activity is about to go away. Note that developers must add this Activity to their manifest, so this still falls back to the old behavior if they forget to add it.

Test Plan: tested on emulator with both SSO and dialog auth.

Reviewers: mmarucheck, karthiks, clang

Reviewed By: mmarucheck

CC: msdkexp@, caabernathy

Differential Revision: https://phabricator.fb.com/D598624

Task ID: 1768834""",0.7,None,fixed

2872,Michael Marucheck,mmarucheck@fb.com,"""Minor Request API changes

Summary:
- Added execute variants to Request static helpers
- Made callbacks strongly typed for Request statics
- Renamed execute -> executeAndWait
- Added instance executeAndWait/executeAsync to Request and RequestBatch

Test Plan:
- added unit tests

Revert Plan:
- ok

Tags:

Reviewers: mingfli, clang

Reviewed By: mingfli

Differential Revision: https://phabricator.fb.com/D600294

Task ID: 1801701""",0.7,None,added

2873,Michael Marucheck,mmarucheck@fb.com,"""Usability changes to GraphObject

Summary:
GraphObject no longer extends Map<String,Object>, but provides
a castToMap() method to treat it as one.  Also there are now
first class methods getProperty(), setProperty(), and
removeProperty().

Test Plan:
- Added unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D600339

Task ID: 1807349""",0.7,None,added

2874,Michael Marucheck,mmarucheck@fb.com,"""Make HttpMethod an enum

Summary: This gives better auto-complete support when using Request.

Test Plan:
- unit tests

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: clang

CC: msdkexp@, karthiks

Differential Revision: https://phabricator.fb.com/D598540

Task ID: 1801516""",0.7,None,changed

2875,Karthik Subramanyam,karthiks@fb.com,"""Adding an error listener to ProfilePictureView

Summary: The error listener gives app developers an opportunity to handle image download errors

Test Plan: Ran the sample.

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D598465

Task ID: 1785386""",0.7,None,changed

2876,Michael Marucheck,mmarucheck@fb.com,"""Fixed BooleanOG permission upgrade

Summary:
We were not requesting permissions correctly in BooleanOG Sample.
This adds support for reauthorizing, and persists the post state
across the transition in case the app gets swapped out.

Also propagated one punctuation change to README.mdown.

Test Plan:
- Verified task steps

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@, chrisp

Differential Revision: https://phabricator.fb.com/D598367

Task ID: 1799729""",0.7,None,fixed

2877,Ming Li,mingfli@fb.com,"""Adding a check in onSessionStateChanged to see if the activity is active.

Summary: We should only change the view if the activity is active, and since a session state change can occur at any time, we need to guard against that.

Test Plan: tested on emulator.

Reviewers: mmarucheck, karthiks, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D597615

Task ID: 1799730""",0.7,None,changed

2878,Ming Li,mingfli@fb.com,"""Adding strings.xml file.

Summary: Forgot to add it in the last commit.

Test Plan: ran unit tests.

Reviewers: karthiks, mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D597598

Task ID: 1796506""",0.7,None,added

2879,Ming Li,mingfli@fb.com,"""Fix Scrumptious crash during SSO reauthorize

Summary: Fixes 3 bugs - 1. Session doesn't serialize the pending request; 2. if reauthorize fails, we currently put the Session in CLOSED_LOGIN_FAILED state, which is inaccurate; 3. also in the onActivityResult in Scrumptious, we're only calling session.onActivityResult for the success case when we should be calling it in failures as well.

Test Plan: tested on emulator

Reviewers: karthiks, chrisp, mmarucheck

Reviewed By: karthiks

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D597497

Task ID: 1799613""",0.7,None,fixed

2880,Ming Li,mingfli@fb.com,"""Changing serialization to use Serialization Proxies.

Summary: Using Serialization Proxies solves the problem of public no-arg constructors and also makes the serialization more secure. See item 78 of Effective Java II.

Test Plan: modified and ran unit tests for serialization.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D597084

Task ID: 1796523""",0.7,None,changed

2881,Ming Li,mingfli@fb.com,"""Add a parameter to open active session conditionally.

Summary: Adding a allowLoginUI parameter to open the active session conditionally based on whether the tokens are loaded or not.

Test Plan: Added unit test for failure case, verified success case on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D596250

Task ID: 1796506""",0.7,None,added

2882,Karthik Subramanyam,karthiks@fb.com,"""fixing session to clear cookies on logon.

Summary: We need to clear cookies prior to invoking WebView auth. Also need to clear out https cookies which are handled separately in Android

Test Plan: Ran the app with multiple logins, clears, restarts etc

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D596212

Task ID: 1768861""",0.7,None,changed

2883,Tony deCatanzaro,tonydecat@fb.com,"""Fixed minor batch request bugs that were preventing setTimeout from working on BatchRequests made asynchronously

Summary:
- RequestBatch copy constructor now copies timeoutInMilliseconds property
- RequestAsyncBatch constructor no longer performs unnecessary copy of RequestBatch

Test Plan:
- Tested with and without timeout to make sure that behaviour is as expected
- Created new unit tests for batch requests with timeouts
- Ran old unit tests to make sure they pass

Reviewers: mmarucheck

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D596124""",0.7,None,fixed

2884,Ming Li,mingfli@fb.com,"""Put LoginFragment in a ScrollView.

Summary: Put LoginFragment and the splash page for Scrumptious inside a ScrollView so everything is visible in landscape mode.

Test Plan: tested on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595900

Task ID: 1795618""",0.7,None,changed

2885,Ming Li,mingfli@fb.com,"""Fixing Scrumptious display in landscape for small screens.

Summary: This will always display the selection list as a full list, and puts the whole thing inside a scrollView, allowing the whole screen to scroll. If I didn't use the FullListView class, the actual selection list would shrink inside a scrollView (since android has bad behavior when you add a scrollable view inside a scrollable view), which makes for a suboptimal experience.

Test Plan: tested on the emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595842

Task ID: 1796168""",0.7,None,added

2886,Ming Li,mingfli@fb.com,"""Updating project names.

Summary: Need to add a .classpath and .project file for the projects to build out of the box. Also removing the simple and stream samples.

Test Plan: Imported projects into Eclipse, and tried a couple of apps on the emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595512

Task ID: 1780240""",0.7,None,added

2887,Chris Lang,clang@fb.com,"""[android-sdk] Fix PlacePickerFragment search text timer to avoid null reference

Summary:
The timer handler assumed getActivity() would return non-null. Because the handler is running
on a background thread, it is possible for there to be no activity if, e.g., the device is being
rotated at the time. Fixed the handler to just do what Activity.runOnUiThread() does, removing the
reliance on getActivity() returning non-null.

Test Plan:
- Ran PlacePickerSample, did lots of edits in the search box while rotating the device

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D595143

Task ID: 1793786""",0.7,None,fixed

2888,Karthik Subramanyam,karthiks@fb.com,"""Adding the Random button to ProfilePictureSample

Summary: Bringing the Android ProfilePictureSample closer in parity to the iOS version, by adding in the Random user button.

Test Plan: Ran the app

Reviewers: mmarucheck, clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595130

Task ID: 1793718""",0.7,None,changed

2889,Michael Marucheck,mmarucheck@fb.com,"""Removed unused imports and one unused variable

Summary: See title

Test Plan:
build/unit tests

Revert Plan:safe

Tags:

Reviewers: gregschechte, clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595338

Task ID: 1793885""",0.7,None,removed

2890,Michael Marucheck,mmarucheck@fb.com,"""Minor API doc edit

Summary: FriendPickerFragment get vs. set issue in api docs

Test Plan:
build

Revert Plan:safe

Tags:

Reviewers: caabernathy, clang, mingfli

Reviewed By: caabernathy

Differential Revision: https://phabricator.fb.com/D595275

Task ID: 1794205""",0.7,None,changed

2891,Ming Li,mingfli@fb.com,"""Fix Friend Picker usage in Scrumptious

Summary: During rotation, a new activity is created, and the users/place is null. Always use the latest data directly from the fragment itself rather than using saved data.

Test Plan: tested on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595247

Task ID: 1793797""",0.7,None,fixed

2892,Michael Marucheck,mmarucheck@fb.com,"""Moved filter code for BoolOG for all fragments

Summary:
Previously we were setting the filter for new friend picker fragments.
However, this results in a rotated friend picker not filtering.  This
is expected, since you cannot save delegates--we always need to initialize
delegates in onCreate.

Test Plan:
- unit tests
- try BooleanOG with rotation

Revert Plan:
safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D595233

Task ID: 1793606""",0.7,None,added

2893,Michael Marucheck,mmarucheck@fb.com,"""BooleanOGSample should just show friends with app installed

Summary:
- Added filter for 'installed' property on friends
- Removed tabs in facebook source
- Made parens consistent in legal notice

Test Plan:
ran BoolOG as me and verified friend list

Revert Plan:safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D595095

Task ID: 1793606""",0.7,None,added

2894,Chris Lang,clang@fb.com,"""[android-sdk] Fix PlacePickerSample manifest to request GPS access.

Summary:
The ""GPS"" button requires the ACCESS_FINE_LOCATION permission in order to determine
the user's current location. It was missing from AndroidManifest.xml.

Test Plan:
- Ran PlacePickerSample on a tablet, was able to use GPS location to populate place picker.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D595023

Task ID: 1793707""",0.7,None,fixed

2895,Karthik Subramanyam,karthiks@fb.com,"""Fixing profile picture view for pending requests

Summary:
Profile picture view was not saving necessary state when there was a pending request. This resulted in the restore instance not refreshing the image. This fix addresses that issue.

Additionally, also making sure that response handlers are not executing for orphaned ProfilePictureViews

Also, updating the sample to have Chris' id.

Test Plan: Tested Sample

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D594872

Task ID: 1793014""",0.7,None,fixed

2896,Michael Marucheck,mmarucheck@fb.com,"""Fixing build files for release

Summary:
- Fixed README.mdown
- Fixed project names for some samples
- Added default ant.properties

Test Plan:
built distribution

Revert Plan:safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@, karthiks

Differential Revision: https://phabricator.fb.com/D594392

Task ID: 1790419""",0.7,None,fixed

2897,Ming Li,mingfli@fb.com,"""Adjusting images for Scrumptious.

Summary: Changing the size of the icon and the padding for Scrumptious. Also adjusting the padding for the login button to make it more centered.

Test Plan: tested on emulator and device.

Reviewers: clang, karthiks, mmarucheck

Reviewed By: mmarucheck

CC: gregschechte, msdkexp@

Differential Revision: https://phabricator.fb.com/D594803

Task ID: 1792982""",0.7,None,changed

2898,Ming Li,mingfli@fb.com,"""Update set*Permissions methods to throw exceptions at appropriate times.

Summary: Update the set*Permissions methods on LoginButton to throw if the session is currently open AND the permissions passed in are not a subset of the granted permissions.

Test Plan: Added unit tests.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D593629

Task ID: 1788351""",0.7,None,changed

2899,Chris Lang,clang@fb.com,"""[android-sdk] Fix null reference in pickers.

Summary:
If loadData was called on a picker in a detached state, we would attempt to dereference a null loadingStrategy.loader.
Fixed to not do that.

Also fixed a couple issues with Scrumptious sample where we called loadData unnecessarily and left LocationListeners
hanging around when they were no longer useful.

Test Plan:
- Ran Scrumptious

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D594417

Task ID: 1772164, 1792971, 1793005, 1793090""",0.7,None,fixed

2900,Karthik Subramanyam,karthiks@fb.com,"""handle cancelled logins

Summary: A cancelled login is handled by invalidating the current slot.

Test Plan: Tested the sample app manually

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D593673

Task ID: 1789149""",0.7,None,changed

2901,Karthik Subramanyam,karthiks@fb.com,"""Fix app id for SwitchUserSample

Summary: Updating SwitchUserSample to have the correct App Id

Test Plan: Verified SwitchUserSample works after a clean install

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D593604

Task ID: 1789019""",0.7,None,fixed

2902,Michael Marucheck,mmarucheck@fb.com,"""Add HttpURLConnection.disconnect() call

Test Plan:
- Unit Tests
- Run FriendPickerSample

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D593407

Task ID: 1769053""",0.7,None,added

2903,Ming Li,mingfli@fb.com,"""Fix open bug in Facebook

Summary: We need to call openForRead (instead of always defaulting to openForPublish) if no permissions are requested.

Test Plan: Tested with Christine's code on a sample app.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: caabernathy, msdkexp@

Differential Revision: https://phabricator.fb.com/D593362

Task ID: 1787895""",0.7,None,fixed

2904,Michael Marucheck,mmarucheck@fb.com,"""Added a note about upcoming Facebook.java deprecation

Summary: See title

Test Plan:
- compile, look at javadocs

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D592738

Task ID: 1785950""",0.7,None,added

2905,Vijaye Raji,vijaye@fb.com,"""rename SdkRuntime -> Settings.

Summary: Rename this so that it's consistent with the iOS SDK.

Test Plan: Everything should build and run as if nothing changed.

Reviewers: mmarucheck, vijaye, clang

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D593148""",0.7,None,changed

2906,Karthik Subramanyam,karthiks@fb.com,"""Doc audit and addition of FacebookException Javadoc

Summary: Adding @throws FacebookException to most of the public surface area if the method looks complicated enough. Also reviewed/updated Javadocs for the classes assigned to me

Test Plan: Only comment changes - so no test impact

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D590973

Task ID: 1780527""",0.2,None,changed

2907,Ming Li,mingfli@fb.com,"""Updating docs.

Summary: Updating docs, and also matching the APIs for LoginFragment/LoginButton around permissions, and allowing the LoginButton to take a fragment rather than an activity for startActivityForResult calls.

Test Plan: ran unit tests and samples on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D592527

Task ID: 1766318""",0.7,None,changed

2908,Karthik Subramanyam,karthiks@fb.com,"""Fixing PlacePickerFragment to catch exceptions in the asynchronous search text timer

Summary: When the user types in search queries quickly in PlacePicker, we kick off a timer to throttle the number of requests sent out. The timer's callstack (which runs asynchronously on the UI thread) can result in Exceptions which will cascade back out to main without the opportunity for the app to handle

Test Plan: Ran PlacePickerSample and typed both slowly and quickly

Reviewers: mmarucheck, clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D592869

Task ID: 1785637""",0.7,None,changed

2909,Karthik Subramanyam,karthiks@fb.com,"""Updating the width of the blue login button

Summary: When I updated the resources today, the change in width of the login button image was not transferred over to the styles.xml value. This has now been fixed.

Test Plan: tested Scrumptious to make sure the button was displaying properly

Reviewers: mmarucheck, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D592624

Task ID: 1387735""",0.7,None,changed

2910,Michael Marucheck,mmarucheck@fb.com,"""Fixed build.

Summary: Fixed build

Test Plan: Built, ran unit tests

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D593238""",0.7,None,fixed

2911,John Ketchpaw,jketchpaw@fb.com,"""move install publishing into the new Session object, and call it from the entrypoints in the old SDK.

Test Plan: same as before with the old sdk.

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: clang, jacl, neko-dev@

Differential Revision: https://phabricator.fb.com/D590426""",0.7,None,added

2912,Michael Marucheck,mmarucheck@fb.com,"""Fix FriendPicker caching

Summary:
Cache files are updated when the stream is closed.  We were not
closing the stream when loading pictures in the picker, so we never
found cached photos.

Also, we were not setting the cache key correctly for loading the
next link.

Test Plan:
- Unit tests
- Verified pictures load quickly on phone.

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: mingfli, karthiks, msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D592528

Task ID: 1785555""",0.7,None,fixed

2913,Karthik Subramanyam,karthiks@fb.com,"""Updated some of the drawables to match the provided assets

Summary: As above. Only the SDK assets were updated. mingfli updated the SDK sample app assets

Test Plan: Ran a handful of sample apps

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D591629

Task ID: 1387735""",0.7,None,changed

2914,Ming Li,mingfli@fb.com,"""Adding appropriate launcher icons to the samples.

Summary: Adding launcher icons for the sample apps.

Test Plan: ran all samples on the emulator and verified icons look correct.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D591578

Task ID: 1771173""",0.7,None,changed

2915,Ming Li,mingfli@fb.com,"""Save state for SelectionFragment.

Summary: Start saving state for the SelectionFragment so it remembers what the user chose between rotation events.

Test Plan: tested on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D590557

Task ID: 1771173""",0.7,None,changed

2916,Ming Li,mingfli@fb.com,"""Use LoginButton on the Scrumptious splash page.

Summary: Use the LoginButton rather than a generic button, also changed the background color so it doesn't clash.

Test Plan: tested on emulator and device.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D589840

Task ID: 1768466""",0.7,None,changed

2917,Ming Li,mingfli@fb.com,"""Separate read/write permission requests for Session.

Summary: Create separate read and publish APIs for open and reauthorize. This will fail (with an exception) if the user tries to use publish permissions on a read auth request, and warn if they try to use read permissions on a publish auth request. Also fixed a bug where Dialogs require an ActivityContext rather than the ApplicationContext.

Test Plan: Ran unit tests and some sample apps, also added some unit tests.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D589538

Task ID: 1775990""",0.7,None,fixed

2918,Chris Lang,clang@fb.com,"""[android-sdk] Export libraries from Scrumptious to enable acceptance testing.

Summary:
In order to allow Scrumptious to be driven from external testing projects, it needs to export the libraries
it uses. Exporting both the Facebook SDK and the Android Support library.

Test Plan:
- Built/ran an acceptance test project.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D590421

Task ID: 1771963""",0.7,None,changed

2919,Karthik Subramanyam,karthiks@fb.com,"""GraphObject getter/setter annotations

Summary: Adding an annotation that allows GraphObject interfaces to override the default camelcase-to-underscored naming convention.

Test Plan: Unit tests and some samples

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D590273

Task ID: 1406656""",0.7,None,changed

2920,Chris Lang,clang@fb.com,"""[android-sdk] Enable StrictMode in unit tests; do not try to hit network or disk from UI thread in SDK classes.

Summary:
Gingerbread introduced a new StrictMode which allows setting per-thread policies that can take various actions, up
to killing the process, if certain operations are performed on the thread. Honeycomb made the defaults stricter.
We should avoid performing any I/O operations on the UI thread, to ensure that apps using StrictMode do not encounter
any unexpected exceptions.

RequestAsyncTask will now perform request serialization on the background thread, rather than the calling thread. This
means any serialization errors will now have to be handled in the request callback rather than at the time the task
is created.

Friend/Place picker image downloading will now only hit the cache from a worker thread, not from the UI thread.

Unit tests will now turn StrictMode on for the UI thread, but leave it off for all other threads. A helper exists
to turn it on for any given thread if desired.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample
- Ran PlacePickerSample
- Ran Scrumptious
- Ran BooleanOG

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: ekoneil, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D589323

Task ID: 1776253""",0.7,None,added

2921,Michael Marucheck,mmarucheck@fb.com,"""AndroidManifest references android-8

Summary:
Previously, AndroidManifest.xml referenced android-7, which is
not compatible with building the sdk.  IntelliJ and ant builds
appear to have ignored this, but Eclipse fails.

This moves AndroidManifest.xml to reference android-8 instead.

Test Plan:
- build in Eclipse
- build all samples
- run unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, karthiks, mingfli

Reviewed By: clang

CC: msimpson

Differential Revision: https://phabricator.fb.com/D589371

Task ID: 1777642""",0.7,None,changed

2922,Chris Lang,clang@fb.com,"""[android-sdk] Configure all samples to resize activities when soft keyboard is displayed.

Summary:
When using WebView-based authentication, the soft keyboard could obscure portions of the login
dialog. Set the Activity attributes appropriately so the view is resized to just the
visible portion of the screen.

Test Plan:
- Ran samples

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D587636

Task ID: 1768865""",0.7,None,security

2923,Karthik Subramanyam,karthiks@fb.com,"""Fix warnings in build

Summary: Fixing a whole bunch of warnings in our code base

Test Plan: Clean build and ran some sample apps.

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D587686

Task ID: 1744264""",0.7,None,fixed

2924,Ming Li,mingfli@fb.com,"""Refactoring public Session constructor/open/reauthorize methods.

Summary: Refactoring the Session constructor/open/reauthorize methods to take advantage of Builders/Beans in the handling of optional parameters.

Test Plan: Ran all unit tests and a handful of apps.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D587866

Task ID: 1312508""",0.7,None,changed

2925,Tony deCatanzaro,tonydecat@fb.com,"""Added options for specifying explicit dependencies in batch requests

Summary: Added ability to include ""depends_on"" value in batch request. Also added ability to set ""omit_response_on_success"" for requests in a batch.

Test Plan: Included unit tests. Also tested batch query with a ""like"" request and ""likeStat"" request where the second explicitly depends on the first and made sure that the likeStat result included the new like.

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: clang

Differential Revision: https://phabricator.fb.com/D587709""",0.2,None,added

2926,Ming Li,mingfli@fb.com,"""Updating SessionLoginSample to not use FacebookActivity.

Summary: Updating SessionLoginSample to use the Active Session and a normal Activity. Also made the callback accessors public (I really think this will be very helpful, if not a necessity).

Test Plan: Tested on emulator and device.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586700

Task ID: 1765647""",0.7,None,changed

2927,Michael Marucheck,mmarucheck@fb.com,"""Cleanup minor TODOs

Summary:
This addresses some minor TODOs:
- Logging request ids
- Minor documentation issues
- Cleanup stale or irrelevant TODOs

Remaining real TODOs were entered as tasks

Test Plan:
- Unit tests

Revert Plan:
- ok

Tags:
Fix TODOs

Reviewers: clang, mingfli, karthiks

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D587714

Task ID: 1766051""",0.7,None,fixed

2928,Chris Lang,clang@fb.com,"""[android-sdk] Clear Facebook cookies when closing a session and clearing token information.

Summary:
We were not clearing Facebook cookies, so attempting to log in with a WebView would reuse the
existing cookies.

Test Plan:
- Ran HelloFacebook on Android 2.2 and 4.0.3, observed that cookies were cleared on logging out and
login dialog was presented as expected on next login.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D587483

Task ID: 1768776""",0.7,None,changed

2929,Chris Lang,clang@fb.com,"""[android-sdk] Added ability to upload photos contained in a file rather than in memory.

Summary:
For larger photos, it is desirable to upload them using a buffered stream rather than requiring
they be read entirely into memory. Added ability to pass a File rather than a Bitmap in order
to upload photos.

Test Plan:
- Ran new unit test

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586757

Task ID: 1768673""",0.7,None,added

2930,Chris Lang,clang@fb.com,"""[android-sdk] Adds a timeout property to RequestBatch to allow HTTP timeout to be specified by callers.

Summary:
Callers may want more control over HTTP timeouts on the connection underlying their requests. This property
gives them a mechanism to supply one.

Test Plan:
- Added two new unit tests, ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586641

Task ID: 1768847""",0.7,None,added

2931,Chris Lang,clang@fb.com,"""[android-sdk] Handle SSL errors in FbDialog.

Summary: FbDialog was not overriding onReceivedSslError. Handling this by notifying the listener and cancelling the attempt.

Test Plan:
- Ran Hackbook against m.clang.dev4344.facebook.com, got SSL handshake error, verified listener was called.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586808

Task ID: 1768887""",0.7,None,changed

2932,Chris Lang,clang@fb.com,"""[android-sdk] Merge changes from github into master.

Summary:
Several changes were pushed to github but not reflected in master. Merging them in.

@merge-commit:clang

Test Plan:
- Ran unit tests
- Ran Hackbook, ensured attribution call was launched""",0.2,None,changed

2933,Ming Li,mingfli@fb.com,"""Changing permissions for Scrumptious.

Summary: Moving permissions from a resource file to the MainActivity, and also reducing the amount of permissions needed.

Test Plan: tested app on device.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586179

Task ID: 1765088""",0.7,None,changed

2934,Karthik Subramanyam,karthiks@fb.com,"""Persisting the profile UI on rotation in SwitchUserProfile

Summary: Updating the code to keep track of the currently selected slot in its saved state. This can be used to decide whether a slot change actually happened, before firing the related callbacks

Test Plan: Tested the sample app on a device manually

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D586090

Task ID: 1768058""",0.7,None,changed

2935,Ming Li,mingfli@fb.com,"""Refactoring getIsOpened/getIsClosed to be isOpened/isClosed

Summary: refactoring to remove ""get"" prefix.

Test Plan: ran unit tests and spot tested apps.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D586105

Task ID: 1441763""",0.7,None,changed

2936,Chris Lang,clang@fb.com,"""[android-sdk] Added HelloFacebookSample.

Summary:
Added HelloFacebookSample with equivalent functionality to the iOS version.

Added a callback to LoginButton to notify when it fetches new user info.

Added a wrapper to Request to create a status update request, for parity with iOS.

Test Plan:
- Ran unit tests
- Ran HelloFacebookSample
- Ran PlacePickerSample (minor change)

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, msimpson

Differential Revision: https://phabricator.fb.com/D585246

Task ID: 1752480""",0.7,None,added

2937,Chris Lang,clang@fb.com,"""[android-sdk] Added some missing documentation.

Summary: Added javadocs to a number of public classes.

Test Plan:
- Built Javadoc, verified that public classes and non-overridden public methods had docs.

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D585674

Task ID: 1766128""",0.7,None,added

2938,Michael Marucheck,mmarucheck@fb.com,"""Fix CDN check

Summary:
Not all akamai urls are cacheable.

Cachable FB Akamai urls are of the form fbcdn*.akamaihd.net.

Test Plan:
- Unit tests

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli, jketchpaw, jacl

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D585972

Task ID: 1148684""",0.7,None,fixed

2939,Michael Marucheck,mmarucheck@fb.com,"""Deprecate overloading request code and login behavior

Summary:
The Facebook class's most full authorize() method takes a single
parameter that encodes both the request code to use for SSO and
login behavior.  There are two problems with this:
1) There is no way to specify SSO_ONLY
2) The semantics of the parameter is mixed

While it may not be possible to use -1 as a valid request code, (is
it?) it is better to have an API that does not convolute these two
concerns.

Although Facebook will be deprecated and we do not intend to add
features going forward, creating the Session via Facebook is the
mechanism by which apps can take a dependency on new functionality
incrementally.  To support this, we are adding an authorize()
overload here.

Test Plan:
- run Hackbook

Revert Plan:
- safe

Tags:

Reviewers: francip, clang, mingfli

Reviewed By: francip

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D585977

Task ID: 1430683""",0.2,None,added

2940,Ming Li,mingfli@fb.com,"""Fix GraphObjectWrapper so that Iterables can be serialized to a request.

Summary: GraphObjectWrapper wasn't properly setting Iterable/Collection/List types, and as a result they weren't being serialized in the outgoing requests. This fixes the issue. Also changed the behavior of the ""Log out"" button in LoginFragment so that it shows a confirmation dialog.

Test Plan: Added a unit test, ran Scrumptious on emulator and verified with test users that they're tagged in newsfeed.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D585535

Task ID: 1765303""",0.7,None,fixed

2941,Michael Marucheck,mmarucheck@fb.com,"""Partial doc audit pass on public API

Summary:
This does a few things:
- Adds docs to a few classes/methods where they were missing
- Removes unnecessary ""public"" qualifiers
- Merges logging settings from Settings into SdkRuntime

Test Plan:
Unit tests

Revert Plan:safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D585588

Task ID: 1766232""",0.2,None,changed

2942,Karthik Subramanyam,karthiks@fb.com,"""Fixing rotation for ProfilePictureSample

Summary: ProfilePictureView and ProfilePictureSample both need to store instance state so they can be restored on things like orientation changes

Test Plan: Ran ProfilePictureSample on an emulator while changing state (userId, isCropped, size) AND orientation, in various permutations.

Reviewers: mingfli, mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D584470

Task ID: 1762079""",0.7,None,changed

2943,Chris Lang,clang@fb.com,"""[android-sdk] Pickers should request profile pictures of the appropriate size.

Summary:
Pickers were retrieving pictures using the default size, which on higher-density displays may be too
low-resolution. Use the actual size of the ImageView we will be displaying the pictures in to determine
the height/width to request from Graph API.

Test Plan:
- Ran FriendPickerSample and PlacePickerSample on both emulator and device, verified that on device with density
of, e.g., 1.5 pixels/dip, we request larger photos (75 pixels) than on device with 1.0 density (50 pixels).

Revert Plan:

Reviewers: mmarucheck, mingfli, gregschechte, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D585531

Task ID: 1734394""",0.7,None,changed

2944,Chris Lang,clang@fb.com,"""[android-sdk] Added basic localization support for SDK.

Summary:
Added Spanish and Hebrew strings.xml files with some translated strings. Not all strings have been translated,
but enough are to serve as proof of concept and foundation for further future translations.

Test Plan:
- Ran Scrumptious in emulator in Spanish locale
- Ran Scrumptious on device in Hebrew locale

Revert Plan:

Reviewers: mmarucheck, mingfli, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D584134

Task ID: 1753117""",0.7,None,added

2945,Ming Li,mingfli@fb.com,"""Remove photo feature from Scrumptious.

Summary: Remove photo feature from Scrumptious.

Test Plan: verified on app.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D584366

Task ID: 1761748""",0.7,None,added

2946,Michael Marucheck,mmarucheck@fb.com,"""Added UserAgent, Migration Bundle

Summary: Adding version string in UserAgent and current sdk Migration Bundle.

Test Plan:
- Unit tests

Revert Plan:
- ok

Tags:

Reviewers: mingfli, clang, jacl

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D583727

Task ID: 994912""",0.7,None,added

2947,Karthik Subramanyam,karthiks@fb.com,"""Fix landscape mode UI for ProfilePictureSample

Summary: Adding a parent ScrollView to handle the overflowing UI. Also moving the picture sizing UI to the top to prevent large images from moving the controls while the user is interacting with them

Test Plan: Ran ProfilePictureSample in portrait and landscape modes on a device

Reviewers: mmarucheck, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D583743

Task ID: 1761385""",0.7,None,fixed

2948,Ming Li,mingfli@fb.com,"""Allowing users to change location on the emulator.

Summary: Adding a LocationListener so we can change location if the user moves, and also allows developers to set the location via DDMS (or other similar means).

Test Plan: Tested on emulator with DDMS.

Reviewers: mmarucheck, karthiks, caabernathy

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D583236

Task ID: 1742898""",0.7,None,changed

2949,Karthik Subramanyam,karthiks@fb.com,"""SwitchUserSample app code

Summary: Adding the SwitchUserSample app to the SDK and also fixing a minor ProfilePictureView bug along the way

Test Plan: Manual testing with the sample on a device and an emulator

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, msimpson

Differential Revision: https://phabricator.fb.com/D580568

Task ID: 1406922""",0.7,None,fixed

2950,Michael Marucheck,mmarucheck@fb.com,"""Renamed R. resources to avoid conflict and use lower_case

Summary:
R. resources from a library can conflict with those in an app or
other libraries.  In general we do not want conflicts, so this
change adds the prefix ""com_facebook_"" to all resource ids.

In addition, it changes resources that were using camelCase to
use lower_case_with_underscores instead.  View names are treated
as a single word here.

Finally, I fixed some word order consistency.

Test Plan:
- Unit tests
- Build all samples

Revert Plan:
- ok

Tags:

Reviewers: mingfli, karthiks

Reviewed By: mingfli

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D582774

Task ID: 1753124""",0.7,None,changed

2951,Ming Li,mingfli@fb.com,"""FbDialog should guarantee only a single callback method is invoked.

Summary: Wrap the listener passed to FbDialog so that only one method is invoked. Also found one other case where onCancel should be called when back is pressed (otherwise you'd have to hit back twice in order to get the onCancel call).

Test Plan: Added unit test and tested that normal operations still worked as expected.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D582827

Task ID: 1753110""",0.7,None,added

2952,Michael Marucheck,mmarucheck@fb.com,"""Misc cleanups getting ready to ship beta

Summary:
- Added text files LICENSE.txt, CONTRIBUTING.mdown
- Renamed README.md -> README.mdown
- Removed unused skeleton code from widget directory
- Added build.xml files so all samples can be built from ant
- Added build_and_test.sh that builds all samples and runs unit tests
- Removed unused scripts/common.sh

Test Plan:
- Unit tests

Revert Plan:
- safe

Tags:

Reviewers: mingfli, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D581886

Task ID: 1753663""",0.7,None,added

2953,Ming Li,mingfli@fb.com,"""Call onCancel when the user presses the back button.

Summary: the onCancel was not being called if the user hits the back button to leave the dialog, this fixes that behavior. Also fixeded a small bug in BooleanOGSample due to friend picker changes.

Test Plan: tested on simulator with Hackbook.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D581213

Task ID: 1305243""",0.7,None,fixed

2954,Ming Li,mingfli@fb.com,"""Allow Sessions to be saved between Activity destroy/create calls.

Summary: Made Session Externalizable, with a custom serialization, and created static helper methods in Session to help save to/restore from a Bundle. Also removed the ReauthorizeCallback in favor of just normal StatusCallbacks listening to the OPENED_TOKEN_UPDATED state change as discussed with mmarucheck.

Test Plan: Tested on emulator with Scrumptious, and also ran unit tests.

Reviewers: mmarucheck, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D580633

Task ID: 1743441""",0.7,None,removed

2955,Michael Marucheck,mmarucheck@fb.com,"""Fixed spurious ClassCastException in AccessToken

Summary:
SSO can deliver dates either as a String or Long.  However, using
Bundle.getLong(String key, long defaultValue) throws if the value
is not a long.  This Exception is caught and harmless, but shows up
in logcat.

This change just calls Bundle.get and uses instanceof to probe
what the actual type is before casts are attempted.

Test Plan:
- unit test, verify no logcat entries

Revert Plan:
ok

Tags:

Reviewers: mingfli, karthiks, clang

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D580425

Task ID: 1749161""",0.7,None,fixed

2956,Michael Marucheck,mmarucheck@fb.com,"""Update LoginView to automatically sign in active session

Summary:
If there is no ActiveSession and we can get the application id
from metadata, LoginView should automatically log in without the
app having to do something explicitly.

IntelliJ wants to alphabetize one of the .iml files too.

Test Plan:
- Unit tests
- Stepped through https://our.intern.facebook.com/intern/tasks/?t=1417139

Revert Plan:
safe

Tags:

Reviewers: mingfli, clang, karthiks

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D580315

Task ID: 1749285""",0.7,None,changed

2957,Ming Li,mingfli@fb.com,"""Fix Picker Search to only include restaurants.

Summary: Changing args passed to the picker fragment to match what's on iOS.

Test Plan: Tested on emulator.

Reviewers: mmarucheck, clang, caabernathy

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D578711

Task ID: 1742915""",0.7,None,fixed

2958,Chris Lang,clang@fb.com,"""[android-sdk] Added Javadoc for friend and place pickers.

Summary:
Added Javadoc for PlacePickerFragment, FriendPickerFragment, and the PickerFragment base class.

Made one method default visibility that had been mistakenly protected.

Test Plan:
- Built Javadoc, confirmed docs were present

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D578152""",0.7,None,added

2959,Ming Li,mingfli@fb.com,"""Part 3 of Scrumptious app, adding photo features.

Summary: Adding photo feature (camera and gallery selection).

Test Plan: tested on emulator and verified photos were uploaded.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D574863

Task ID: 1459325""",0.7,None,added

2960,Chris Lang,clang@fb.com,"""[android-sdk] Add caching support to the picker fragments.

Summary:
Friend and place picker will now use the cache to retrieve results, if possible. If cached results are used, a ""refresh""
query is executing after a short timeout (currently 2 seconds) to ensure that changes on the service are reflected locally.

Fixed Response to not reference HttpURLConnection methods for cached results, as these would end up blocking until the
request finished anyway.

Added a workaround for an Android framework bug relating to AsyncTask in FacebookActivityTestCase.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample
- Ran PlacePickerSample

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D566767""",0.7,None,added

2961,Michael Marucheck,mmarucheck@fb.com,"""Updated Boolean OG sample to support rotation

Summary:
- We now save state across configuration changes.
- Also fixed some warnings.

Test Plan:
- manual testing

Revert Plan:
ok

Tags:

Reviewers: mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D576943

Task ID: 1740706""",0.7,None,fixed

2962,John Ketchpaw,jketchpaw@fb.com,"""Check shouldAutoPublishInstall on auto publish.

Summary: We're not.  This was dropped during the port of the iOS implementation.  Thanks to Karsten Sperling (https://github.com/ksperling) for reporting.

Test Plan: modify a sample to change the value to false, and see publish not occur.  revert + delete the app & re-test.  see the publish occur.

Reviewers: mmarucheck

CC: msdkexp@, neko-dev@

Differential Revision: https://phabricator.fb.com/D574705

Blame Revision: D559309""",0.7,None,changed

2963,Ming Li,mingfli@fb.com,"""Clear token info upon logout.

Summary: Bug fix for loginView, calling closeAndClearTokenInformation instead of just close when logging out.

Test Plan: tested on emulator.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D575528

Task ID: 1406845""",0.7,None,fixed

2964,Ming Li,mingfli@fb.com,"""Commit #2 for Scrumptious - adding pickers.

Summary: 3 out of 4 functionalities now work. Still need to work on the photo upload and the profile picture display.

Test Plan: tested by running app.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D573211

Task ID: 1459325""",0.7,None,changed

2965,Karthik Subramanyam,karthiks@fb.com,"""Implementing ImageRequest.cancel()

Summary: Without ImageRequest.cancel(), it is very easy to end up with badly ordered ImageResponses in network-chatty scenarios. This can result in the incorrect images being chosen.

Test Plan: Ran ProfilePictureViewSample

Reviewers: mingfli, mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D571674

Task ID: 1394804""",0.7,None,changed

2966,Michael Marucheck,mmarucheck@fb.com,"""Add deep-linking to Boolean OG

Summary:
For task #959082, I need an app that does deep linking to test, so I am
adding deep linking to the Boolean OG sample.

Also, during testing I noticed that we did not convert Boolean graph
object properties during POST, so I fixed that.

Finally, my build was failing for SessionLoginSample in IntelliJ, so
that ended up here as well.

Test Plan:
- Manual testing of Boolean OG

Revert Plan:
- safe to revert

Tags:

Reviewers: clang, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D571845

Task ID: 1463402""",0.7,None,added

2967,Karthik Subramanyam,karthiks@fb.com,"""ProfilePictureView and ProfilePictureViewSample

Summary: Adding the ProfilePictureView control and a sample that exercises it

Test Plan: Ad-hoc testing with the sample on an emulator

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mingfli

CC: msdkexp@, msimpson

Differential Revision: https://phabricator.fb.com/D570317

Task ID: 1394804""",0.7,None,changed

2968,Ming Li,mingfli@fb.com,"""Initial commit for Scrumptious app (skeleton for the app).

Summary: This includes some resource files and the initial three screens (splash screen, activity screen, settings screen) implemented as Fragments and the interactions between them.

Test Plan: Ran on emulator and device.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: clang

CC: msimpson

Differential Revision: https://phabricator.fb.com/D570265

Task ID: 1459325""",0.7,None,changed

2969,Karthik Subramanyam,karthiks@fb.com,"""SharedPreferencesTokenCache application context null check

Summary: Making sure we check the Context that is passed to SharedPreferencesTokenCache for the presence of its ApplicationContext, before attempting use the latter.

Test Plan: Unit tests

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D570473

Task ID: 1441782""",0.7,None,changed

2970,Michael Marucheck,mmarucheck@fb.com,"""Added Boolean OG sample (2 of 3)

Summary:
This adds the ability to view friends' logic rocking to the Boolean OG
sample.

Adding unit tests will come in a third checkin.

This also includes minor bug-fixes in PickFriendsActivity and Session.

Test Plan:
- Manual testing

Revert Plan:
- Safe to revert

Tags:

Reviewers: clang, mingfli, karthiks

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D570024

Task ID: 1442693""",0.7,None,added

2971,Franci Penov,francip@fb.com,"""Fixing crash when user cancels the SSO signin activity

Summary:
The SSO authorization was validating that the result bundle from the
SSO activity is not null in all cases. However, when the user presses back
and cancels the signin, the bundle is null.

Test Plan:
Tested with a simple app that pressing the back button on the signin activity
returns the app back to the state befor the SSO was started

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: peterb, seansible-diffs@

Differential Revision: https://phabricator.fb.com/D569512

Blame Revision: D536878

Task ID: 1451653""",0.7,None,changed

2972,Arnold Noronha,arnold@fb.com,"""Preliminary work towards making Session serializable.

Summary:
We need to have Session serializable in order to support a
more androidey api, since in Android the application might be killed
while waiting for the login activity result.

There's probably a lot more work toward getting that final goal, but
this is a reasonable first step.

(I chose Serializable over Parcelable, because it's far more easier to
implement and it's not performacne critical for now.)

I also removed the final fields from the Session object because it's hard
to work with them in the context of objects being serializable. Also, it's
hard to test in the long run.

Test Plan:
Wrote a basic unit test to make sure that no crashes happen
during the serialization and unserialization processes.

Revert Plan: OK to revert.

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: jakubv, msimpson

Differential Revision: https://phabricator.fb.com/D567475

Task ID: 1387452""",0.7,None,removed

2973,Michael Marucheck,mmarucheck@fb.com,"""Added Boolean OG sample (1 of 3)

Summary:
This is the initial check-in of the Android Boolean OG sample.  It supports
logic operations, logging into facebook, and posting open graph actions.

Adding support for viewing friends' posts will come in a separate checkin.
Adding unit tests will come in a third checkin.

This also includes minor bug-fixes in PickFriendsActivity and Session.

Test Plan:
- Manual testing

Revert Plan:
- Safe to revert

Tags:

Reviewers: clang, mingfli, karthiks

Reviewed By: mingfli

CC: msdkexp@, msimpson

Differential Revision: https://phabricator.fb.com/D566147

Task ID: 1442693""",0.7,None,added

2974,Chris Lang,clang@fb.com,"""[android-sdk] Allow caller to specify additional fields to retrieve in friend and place picker.

Summary:
For parity with iOS, allow callers to specify additional fields they would like to retrieve on the graph objects
returned by the place and friend pickers. These fields can be specified (as a collection) programmatically or (as a
comma-separated string) via layout attributes or bundle parameters.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample
- Ran PlacePickerSample

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D566879""",0.7,None,changed

2975,Michael Marucheck,mmarucheck@fb.com,"""Fixed crash in Hackbook

Summary:
Facebook keeps a set of properties used to set up a new Session, but
was missing some checks for null and some code to keep the values
mutually consistent.

Also, I found some other paths through code inspection that could hit
NullPointerException and fixed them.  Part of this involved making
Session more tolerant of null in some cases.

Test Plan:
- Run Hackbook

Revert Plan:
- safe

Tags:

Reviewers: clang, mingfli

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D567018

Task ID: 1440271""",0.7,None,fixed

2976,Chris Lang,clang@fb.com,"""[android-sdk] Misc. cleanup of TODOs

Summary:
A quick cleanup of some low-hanging fruit, mostly TODOs that were no longer relevant plus one minor refactoring cleanup
of RequestAsyncTask.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D566932""",0.7,None,changed

2977,Chris Lang,clang@fb.com,"""[android-sdk] Removed ability to have Session issue callbacks on non-UI thread.

Summary:
TestSession exposed the ability to pass in a Handler that would let SessionCallbacks happen on arbitrary threads.
Recent changes mean that, by default, Session would send callbacks on the UI thread, rather than the caller's thread.
Newer components (e.g., picker fragments) resly on this behavior. Allowing unit tests to receive callbacks on arbitrary
thread breaks the promise Session makes and these components rely on, so this functionality has been removed. All SessionCallbacks
will now be received on the UI thread, just as in production code.

Added a check for null 'wrapped' member in SessionTracker.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D565527""",0.7,None,removed

2978,Ming Li,mingfli@fb.com,"""Bug fix for Login Fragment

Summary: Login Fragment and the LoginView button it contains needs to share the same SessionTracker instance (otherwise the Sessions that they track can get out of sync). Also adding a SessionChangedListener for the SessionTracker so the view components know when to update their view.

Test Plan: ran unit tests and modified sample.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D564174

Task ID: 1406845""",0.7,None,fixed

2979,Chris Lang,clang@fb.com,"""[android-sdk] Adds paging to place picker, filtering.

Summary:
Added a setFilter and associated methods to GraphObjectListFragment to allow consumers to specify filters that will be
applied to objects prior to their being displayed.

Implemented as-needed paging in place picker, so results are loaded only when needed (i.e., when scrolled to the bottom of
the list).

Fixed a bug in TestSession that was deleting test accounts when it shouldn't have.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample
- Ran PlacePickerSample

Revert Plan:

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, zizhuang

Differential Revision: https://phabricator.fb.com/D564065""",0.7,None,added

2980,Ming Li,mingfli@fb.com,"""Queue all callbacks for Session in the UI thread.

Summary: Moving the BroadcastReceivers to use the LocalBroadcastManager, and queuing all other callbacks in the UI thread as well.

Test Plan: Ran unit tests and did ad hoc testing with samples.

Reviewers: mmarucheck, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D563142

Task ID: 1410532""",0.7,None,changed

2981,Ming Li,mingfli@fb.com,"""Fix Hackbook crashing.

Summary: Adding tokens to the TokenCache causes NPEs when the tokens are null. Check against that before adding the tokens.

Test Plan: ran Hackbook test app, verified that the app works now.

Reviewers: mmarucheck, francip, clang, karthiks

Reviewed By: francip

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D563332

Task ID: 1408738""",0.7,None,fixed

2982,Michael Marucheck,mmarucheck@fb.com,"""Fixed android-sdk command-line build

Summary:
ant appears to expect that included jar files will always live in {root}/libs.
There was a stackoverflow answer that suggested you could add a new location
in ant.properties, but that does not appear to work with our toolset.

So I am moving lib->libs in the project root, and adding a symbolic link in
facebook.

Test Plan: - build, unit tests

Reviewers: clang, mingfli, karthiks

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D563040

Blame Revision: D557204

Task ID: 1432543""",0.7,None,fixed

2983,Chris Lang,clang@fb.com,"""[android-sdk] Added PlacePickerFragment, more unit tests, sample

Summary:
Added PlacePickerFragment and associated sample and unit tests, as well as more unit test for FriendPickerFragment. Both
samples now display pickers as a secondary Activity, the results of which are displayed in the main Activity when they are
dismissed.

Place and friend pickers can now have parameters passed to them both via XML layout and programmatically.

Did some refactoring of GraphObjectListFragment to prevent parts of it from poking out into the public API.

Minor bug fix to GraphObjectWrapper that would prevent, e.g., Double from being cast to double.

Further work remains on PlacePicker: need to implement AS_NEEDED paging mode to retrieve more results when the user scrolls down.
Both pickers need support for user-specified fields to be returned.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample
- Ran PlacePickerSample

Revert Plan:

Reviewers: mmarucheck, gregschechte, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, msimpson

Differential Revision: https://phabricator.fb.com/D560847""",0.7,None,added

2984,Ming Li,mingfli@fb.com,"""Adding a Login Fragment.

Summary: Changing the LoginView to use styles, and adding an Android Fragment with a login/logout button as well as a profile picture/user name.

Test Plan: Ran unit tests, and tested with modified sample app.

Reviewers: mmarucheck, clang, karthiks

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D561241

Task ID: 1406845""",0.7,None,changed

2985,Michael Marucheck,mmarucheck@fb.com,"""Added PictureDownloader

Summary:
This adds support for an internal DownloadManager class that allows
throttling and dynamically prioritizing Runnables.

GraphObjectAdapter and GraphObjectListFragment are modified to use
DownloadManager to throttle requests and to prioritize requests that
are relevant to items currently shown on the screen when scrolling
stops.

Test Plan:
- unit tests

Revert Plan:
- safe to revert

Reviewers: clang, karthiks, mingfli

Reviewed By: clang

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D559726

Task ID: 1424276""",0.7,None,added

2986,Karthik Subramanyam,karthiks@fb.com,"""Adding support for ArrayList<String> in SharedPreferencesTokenCache

Summary: Permissions as specified by the access token are passed around as List<String> and not String[]. This diff moves support from String[] to List<String>

Test Plan: Unit tests

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D560821

Blame Revision: D555091

Task ID: 1394747""",0.7,None,changed

2987,John Ketchpaw,jketchpaw@fb.com,"""updated url to developer page since <app_id> was getting stripped by github.

Summary:
persumably the XSS code that github runs caused this part of the url to be dropped.  we'd rather have the url be clickable with screaming caps so that
it's obvious what we're trying to express.

Test Plan: none.

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D560306

Blame Revision: 559309""",0.7,None,changed

2988,John Ketchpaw,jketchpaw@fb.com,"""Install attribution tracking

Summary:
On authorize, automatically publish an install attribution if it can be acquired from the installed Facebook application, and the application allows it.
If the app does not use Facebook login, they may call publishInstall() directly.
In both cases, this code handles tracking success so that reporting should only occur once.

Call early, call often for best results.

Test Plan:
- ant build Hackbook
- Ran Hackbook, verified that the publish occurs.
- Ran again, verified that the publish did not reoccur.
- Modify hackbook to explicitly publish.  Saw it work.

Revert Plan:
safe to revert

Reviewers: clang, mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D559309

Task ID: 1404123""",0.7,None,changed

2989,Karthik Subramanyam,karthiks@fb.com,"""Fleshing out SharedPreferencesTokenCache and also fixing some versioning issues

Summary: Adding in the plumbing to take token information and move it into and out of an application's SharedPreferences

Test Plan: Ran the JustRequestSample. Need to add unit tests

Reviewers: mmarucheck, mingfli

Reviewed By: mmarucheck

CC: msdkexp@, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D555091

Task ID: 1394747""",0.7,None,added

2990,Karthik Subramanyam,karthiks@fb.com,"""Updating FriendPickerSample to target API Level 8

Summary: Updating FriendPickerSample to target API Level 8. Fixes build breaks for folks who don't have Android 2.1

Test Plan: Successful build

Reviewers: clang

Reviewed By: clang

Differential Revision: https://phabricator.fb.com/D559238

Task ID: 1408637""",0.7,None,changed

2991,Chris Lang,clang@fb.com,"""[android-sdk] Adds basic Activity/Fragment testing to SdkTests.

Summary:
This commit adds basic functionality around testing some of the new UI components (specifically, GraphObjectPagingLoader and
FriendPickerFragment). Testing is light at the moment, this serves mostly to get the infrastructure in place for further tests.

FacebookTestCase is split into a base class, FacebookActivityTestCase, which can be used on arbitrary Activity classes;
FacebookTestCase itself continues to use a trivial Activity that does nothing, and is appropriate for non-UI-centric tests.

FriendPickerFragmentTests shows how to use the new base class to test an activity containing a fragment. Future commits will
likely refactor this into a base class that can be used on arbitrary fragments, as we add more fragments.

Moved the support library out from individaul projects and added it as a project-level lib, to reflect the fact that it will be
used in multiple libs and samples.

Test Plan:
- Ran the unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D557204""",0.7,None,added

2992,Chris Lang,clang@fb.com,"""[android-sdk] Added FriendPickerFragment, associated infrastructure

Summary:
This commit provides basic friend-picker functionality aimed at functional parity with iOS and visual parity with the
Facebook Android app. It is exposed as a Fragment (v4 support flavor). Added infrastructure classes GraphObjectPagingLoader,
GraphObjectListFragment, and GraphObjectAdapter that actually do most of the heavy lifting. Added a rudimentary FriendPickerSample.

Made a couple optimizations to GraphObjectWrapper.

Response now provides a reference to its original Request rather than requiring the caller to remember the connection.

Test Plan:
- Ran unit tests
- Ran FriendPickerSample

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, msimpson

Differential Revision: https://phabricator.fb.com/D554879""",0.7,None,added

2993,Ming Li,mingfli@fb.com,"""Create Login Button and SessionTracker

Summary: Creating a Login Button view and a SessionTracker to track either the active Session or a client-specified Session.

Test Plan: Tested with a modified version of the SessionLoginSample to make sure both the active session and client-specified sessions can be used. Also added unit tests for SessionTracker.

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: jacl

Differential Revision: https://phabricator.fb.com/D555686

Task ID: 1392265""",0.7,None,added

2994,Karthik Subramanyam,karthiks@fb.com,"""Updating the version to API level 8

Summary: Making all the projects in the Android SDK consistent in targeting API level 8

Test Plan: Make sure builds are going through

Reviewers: mmarucheck, mingfli, clang

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D555304

Task ID: 1408637""",0.7,None,changed

2995,Liangxiao Zhu,liangz@fb.com,"""Add new FBResponseCache that will cache images

Summary:
1. Create a new FBResponseCache class that can be set on URLConnection,
   this cache will cache the response body and header if the URL is CDN url
   and the request method is GET.
2. Create a new FBCacheResponse class.  This class wraps cached body stream
   and response header.
3. Create a new FBCacheRequest class.  This class provides OutputStream to
   write response content and close out internal cached stream.
4. Modifed FileLruCache to support write header inforamtion for cached stream,
   also reads out header info from cached stream.
5. Add a new FBResponseCache unit test class to test caching.

Test Plan:
1. Create new unit tests
2. Run existing unit tests
3. Debug through the code, make sure correct behavior happens

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: jwilson, msdkexp@, ios-diffs@lists, rogerc, ldbrandy, chenzhimin, astewart, akushner

Differential Revision: https://phabricator.fb.com/D549621

Task ID: 1325141""",0.7,None,added

2996,Michael Marucheck,mmarucheck@fb.com,"""Add support for request caching

Summary:
We now support caching the results from a batch of requests.

This adds a public RequestBatch class that implements List<Request>,
but also provides a scope for adding more metadata about the request.
This includes the Handler previously passed as a separate parameter,
as well as the new caching parameters.

RequestBatch.cacheKey controls the key used to load from and to save
to for cache results of a request.

RequestBatch.forceRoundTrip controls whether we do a roundtrip without
attempting to load from cache.  If cacheKey is set and forceRoundTrip
is true, we will fetch new results and update the cache.

A future change will reduce the number of overloads by requiring
RequestBatch for scenarios that involve batching or parameters related
to RequestBatch.

Test Plan:
Unit tests

Revert Plan:
ok to revert

Tags:

Reviewers: clang, mingfli, karthiks

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D554389

Task ID: 1406500""",0.7,None,added

2997,Michael Marucheck,mmarucheck@fb.com,"""Enable caching last-token-updated timestamp

Summary:
There was only a single method for setting the access token on the
Facebook class (setAccessToken()).  This did not distinguish between
setting a token loaded from cache vs.  setting a new token resulting
from authorization.

Since setAccessToken() updates the last-token-updated timestamp, and
since this timestamp is used to determine when to refresh the token,
it always looked like the token had just been updated when the app's
Activity started.  This meant the Facebook class would never try to
refresh the token.

To fix this, the Facebook class now supports getting the value of the
last-token-updated timestamp, and also supports restoring this along
with the token value and expiration timestamp in a single operation.

This also updates Hackbook to demonstrate caching.

Test Plan:
- ant build Hackbook
- Ran Hackbook, verified that we could get and restore the timestamp.

Revert Plan:
safe to revert

Tags:

Reviewers: clang, vijaye, caabernathy

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D552473

Task ID: 1363221""",0.7,None,added

2998,Chris Lang,clang@fb.com,"""[android-sdk] Improve performance of GraphObjectWrapper

Summary:
GraphObjectWrapper was using Method.equals to determine whether the invoked method was one it could handle. This
suffers from poor performance, and for our purposes it suffices to test whether the method names are equal (none of
the methods we implement are overloaded). This change improves performance of the FriendPickerView (in progress) by
approximately 300% when sorting 750 friends.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D550038""",0.7,None,fixed

2999,heranyang,heranyang@fb.com,"""Attribution Id provider name changed

Summary: Change Attribution ID provider name from wakizashi (for development) to katana (for production)

Test Plan: Follow Test Plan in D528070

Reviewers: mmarucheck, jacl, clang, vijaye

Reviewed By: vijaye

CC: teck, vijaye

Differential Revision: https://phabricator.fb.com/D549246""",0.7,None,changed

3000,Michael Marucheck,mmarucheck@fb.com,"""Adding javadoc comments for Session and associated types

Summary:
Adds javadoc comments for Session, SessionState, SessionLoginBehavior,
TokenCache, and FacebookAuthorizationException.

In addition, there were a couple changes that do not affect functionality:
- Moved callback interfaces related to Session to be nested types.
- Moved public methods in Session to be together.

Test Plan:
- unit tests
- inspected docs in Eclipse

Revert Plan: ok

Tags:

Reviewers: clang, jacl, karthiks, mingfli

Reviewed By: mingfli

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D547616

Task ID: 1374244""",0.7,None,changed

3001,Chris Lang,clang@fb.com,"""[android-sdk] Add support for IntelliJ project

Summary:
Adds support files necessary to build the project under IntelliJ. Most of these changes are additive, with the exception that
in order to get unit tests running under IntelliJ it was necessary to put the test app and the tests themselves in separate
package namespaces.

It is NOT recommended to switch back and forth between IntelliJ and Eclipse during general development. If you are making
project-level changes that you want to ensure work in both environments, however, you should be sure to rm -rf the IntelliJ
output directory ('out') _before_ running Eclipse. If you forget, you will likely see Eclipse errors and need to restart
Eclipse after deleting the directory.

Test Plan:
- Ran unit tests
- Ran samples

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, mingfli

Differential Revision: https://phabricator.fb.com/D547228""",0.7,None,added

3002,Chris Lang,clang@fb.com,"""[android-sdk] Fixes token extension

Summary:
There were a couple issues with token extension in a previous commit. A hard-coded 'true' should have been put back to
'false' before committing. The token refresh service name got messed up before committing. And Session should check to make
sure that it is not already attempting a token refresh (since it happens asynchronously) before starting another attempt.
Fixed the test infrastructure around this to be a little less hacky and provide a better test of the actual Session behavior.

Made a minor fix to Request to ensure that a request can't have both a REST method and a graph path.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D545627""",0.7,None,fixed

3003,Ming Li,mingfli@fb.com,"""Renaming JustLoginSample to SessionLoginSample.

Summary: Renaming the JustLoginSample to SessionLoginSample to match iOS counterpart.

Test Plan: Tested with Android emulator.

Reviewers: mmarucheck

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D540884

Task ID: 1324189""",0.7,None,changed

3004,Chris Lang,clang@fb.com,"""[android-sdk] Add javadoc for many classes.

Summary:
This adds docs for Request, Response, GraphObject and associated classes. A few methods were moved to keep public methods
grouped together. Small name changes in GraphObjectWrapper and associated tests. No actual functionality is modified in this
commit.

Test Plan:
- Ran unit tests
- Generated javadocs

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D545718""",0.7,None,added

3005,Chris Lang,clang@fb.com,"""[android-sdk] Add date/time serialization/deserialization support

Summary:
After the ""Events Timezone"" migration, Facebook now accepts/returns ISO-8601-formatted dates
rather than Unix timestamps or timezone-less dates. We serialize Date properties as ISO dates, and we
deserialize the three formats Facebook will return if a GraphObject has a Date-typed property.

Fixed an issue in TestSession where certain permission hashes resulted in a test user name that is
rejected by Facebook because it contains too many repeated characters.

Added a missing URLEncode when encoding batch parameters, test case to catch it.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D543729""",0.7,None,added

3006,Michael Marucheck,mmarucheck@fb.com,"""Add support for Session.reauthorize()

Summary:
This adds reauthorize support to Session to enable changing the set
of permissions dynamically.

This also adds several unit tests for Session.  These tests caught
an issue in the SdkRuntime test that was leaving a modified static
that escaped the scope of the test, so that is fixed too.

Also, an unrelated cleanup to configure_unit_tests.sh to change
iOS->Android and fix indentation.

Test Plan:
- Unit tests

Revert Plan:

Tags:

Reviewers: clang, jacl

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D542934

Task ID: 1168401""",0.7,None,added

3007,Chris Lang,clang@fb.com,"""[android-sdk] Adds JustRequestSample, fixes some error handling

Summary:
Added an Android version of the JustRequestSample project.

Fixed some error handling code that was wrongly conflating two different error cases that
actually need to be handled differently.

Test Plan:
- Ran unit tests
- Ran JustRequest

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D539163""",0.7,None,added

3008,Ming Li,mingfli@fb.com,"""Implement a FacebookActivity base class.

Summary: Implement a FacebookActivity base class using sessions and modify the JustLoginSampleActivity to use it.

Test Plan: Tested with the JustLogin sample on Android emulator, made sure that login/logout worked with no errors. Tested both methods of providing application ID.

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: dye

Differential Revision: https://phabricator.fb.com/D537222

Task ID: 1168387""",0.7,None,changed

3009,Michael Marucheck,mmarucheck@fb.com,"""Support active session

Summary:
This adds a static Session.getActiveSession(),
Session.setActiveSession(), and Session.sessionOpen() that manage
a static active session.

This static session is used by the static Request constructors.

This also adds a notification mechanism for listening for changes to
the active session.

Test Plan:
- Unit test to validate notification mechanism.
- Change static Request constructor unit tests to use active session.

Revert Plan:OK

Tags:

Reviewers: clang, jacl

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D536878

Task ID: 1256549""",0.7,None,changed

3010,Chris Lang,clang@fb.com,"""[android-sdk] Implement async request behavior.

Summary:
One of the remaining TODOs was asynchronous request behavior. Fleshed out RequestAsyncTask and added some unit tests as
well as wrappers to Request to simplify 99% use cases.

Added infrastructure to FacebookTestCase to allow for testing of asynchronous requests. Cleaned up usage of TestBlocker to
remove confusing thread-local storage, now we just create a new TestBlocker for each instance of a FacebookTestCase (no observable
impact on unit test run time).

Miscellaneous cleanup of TODOs and classes that ended up not being used.

Test Plan:
- Ran all unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D533272""",0.7,None,added

3011,heranyang,heranyang@fb.com,"""Add Attribution Id Query

Summary: Added api support for quering FB4A's Attribution Id content provider. By calling getAttributionId(), 3rd party app will be able to get a fresh attribution Id from FB4A's content provider.

Test Plan: Test with a 3rd party app that does not have the same signature as FB4A.

Reviewers: mmarucheck, jacl, clang

Reviewed By: mmarucheck

CC: teck, vijaye

Differential Revision: https://phabricator.fb.com/D528070

Task ID: 1142563""",0.7,None,added

3012,Michael Marucheck,mmarucheck@fb.com,"""Integrate Session with the Facebook class

Summary:
This changes the Facebook class to use the new Session.  The result
is that Hackbook works correctly with SSO or non-SSO using the
Session object to log in.

Test Plan:
- Run unit tests.
- Run Hackbook with/without Facebook native app installed

Revert Plan:safe

Tags:

Reviewers: clang, jacl

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D531794

Task ID: 1168392""",0.7,None,added

3013,Chris Lang,clang@fb.com,"""[android-sdk] Added support for REST requests and multiple results in Response.

Summary:
REST API support was another TODO for iOS parity. Added it.

Since REST APIs can return multiple results as a JSON array, rather than a JSON object with an
array-valued property, we need to support that. Added a getGraphObjectList accessor to Response.
A response can have either a GraphObject or a GraphObjectList, but not both.

Test Plan:
- Ran the tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D531849""",0.7,None,added

3014,Chris Lang,clang@fb.com,"""[android-sdk] Added more batch request tests, fixed some errors.

Summary:
Added more batch request unit tests, to bring us to parity with iOS.

Fixed an error in TestSession related to signed int handling.

Fixed an error in Response in dealing with results that are JSONObject.NULL.

Fixed an error in Request where we were serializing access_token parameters twice. Reordered serialization
of common parameters to be the same as in iOS (to simplify comparing URLs generated by the two different SDKs).

Added some helpers to FacebookTestCase and refactored some of the unit test code to increase sharing.

Test Plan:
- Ran all the tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D531647""",0.7,None,added

3015,Chris Lang,clang@fb.com,"""[android-sdk] Serialize graph objects in requests.

Summary:
Implements another TODO, serializing graph objects in the correct format for POST requests. Both
single and batch representations are implemented.

Test Plan:
- Ran new unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D529770""",0.7,None,added

3016,Chris Lang,clang@fb.com,"""[android-sdk] When putting wrapped GraphObjects, store their underlying JSON representation.

Summary:
To improve serialization support, when a GraphObject or GraphObjectList is being stored in another
GraphObject or GraphObjectList, we really want to store the underlying JSONObject or JSONArray.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D528051""",0.7,None,fixed

3017,Chris Lang,clang@fb.com,"""[ios-sdk] Added Logger class, fixed bugs in Request, unit test cleanup

Summary:
Added a Logger class, analogous to FBLogger in the iOS SDK. The logger uses the underlying Log infrastructure
for logging, but checks the logging behavior flags in Settings to determine what to log. It also supports
replacement of access tokens in generated logs.

Added request/response logging.

Request was not setting access tokens correctly for non-batched requests.

Annotated all unit tests with @Small/Medium/LargeTest to help developers create debug configurations for different
purposes (e.g., run Small/Medium as part of a TDD flow and Large only as integration/checkin tests).

Refined TestBlocker to remove the need to call reset() between uses.

Added machineUniqueUserTag to TestSession for parity with iOS SDK.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: jacl, mmarucheck, gregschechte, ayden

Reviewed By: jacl

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D518850""",0.7,None,added

3018,Chris Lang,clang@fb.com,"""[android-sdk] Added TestSession, FacebookTestCase, TestBlocker.

Summary:
This commit adds a TestSession class, which serves much the same purpose as the FBTestSession class in
the iOS SDK. It allows test accounts to be created in either a shared or private mode. In shared mode,
the permissions of the test account are encoded as part of its name, so future test cases can re-use
the same test account rather than create a new one. In private mode, a test account is created with the
necessary permissions and then deleted at the end of the session, to avoid proliferation of test accounts.
(The encoding of permissions is done using the String.hash method, which will be different than the encoding
used on iOS, so test accounts will not be shared between the two platforms at the moment, and there is a very
small possibility of hash code collisions that could result in permissions-related errors. The possibility is
pretty remote.)

Added a FacebookTestCase that simplifies use of TestSession by reading in applicationId and applicationSecret
from a config.json file that is created by the new configure_unit_tests.sh script, similar to what we did
for iOS.

TestBlocker provides message-pumping-and-waiting functionality similar to FBTestBlocker. Given the synchronous
nature of calls on Android, TestBlocker will not be needed as frequently as on iOS, but it is needed to test
session authorization, which happens asynchronously, as well as obviously any asynchronous-specific test cases.

Made necessary changes to some classes (AccessToken, Session) to make certain members have default visibility
rather than private, in order to let TestSession override functionality it needed to. Session can now take a
handler passed in from outside rather than using its own, which is necessary to correctly pump messages through
the TestBlocker's handler in test cases.

Fixed up some code in Response that was incorrectly handling Facebook returning naked 'true' or 'false' responses.

Test Plan:
- Ran all unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, ayden, gregschechte

Reviewed By: mmarucheck

CC: msdkexp@, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D514919""",0.7,None,added

3019,Michael Marucheck,mmarucheck@fb.com,"""Implemented file-based cache for Android SDK

Summary:
This implements a thread-safe cache for the Android SDK.  It
supports the following features:
- Read/write/clear
- Writes are supported both directly (create an OutputStream
  and write to it) and indirectly (clone an InputStream from
  some other source).
- Quotas based on file count and total byte count.
- Quota enforced in LRU order where both reads and writes
  update the timestamp.
- Multiple instances with separate quotas.
- The implementation is thread-safe--all public methods can be
  safely called from multiple threads without synchronization.
- Only File-based operations are needed--there is no sqlite
  dependency.

Test Plan:
new unit tests

Revert Plan: OK

Reviewers: clang, jacl

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D512569

Task ID: 1168131""",0.2,None,changed

3020,Chris Lang,clang@fb.com,"""[android-sdk] Added support for collections in GraphObject wrapper.

Summary:
Added basic support for properties that get/set collections on a GraphObject.
Collections of primitive types and GraphObjects are supported. A GraphObjectCollection
class provides additional functionality beyond a Collection, including casting the
entire collection to a GraphObjectCollection of another GraphObject type. (Casting
collections of non-GraphObjects is not supported, as we don't proxy non-GraphObjects.)

TODOs remain around fully supporting putting collections, as we need to ensure that
we are storing the underlying JSONArray, if applicable.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: jacl, mmarucheck, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D510578""",0.7,None,added

3021,Chris Lang,clang@fb.com,"""[android-sdk] Add batch support to Request/Response classes, and GraphObjectWrapper.

Summary:
Two pieces of functionality in this commit:

- Request/Response now have support for batched queries. Many TODOs still remain in order to provide parity
with iOS.

- GraphObjectWrapper is implemented, which uses Java dynamic proxies to provide implementations for
getters/setters on GraphObject-derived classes. Responses will now deserialize JSON into GraphObjects. No
serialization is done yet for posting GraphObjects.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: jacl, mmarucheck, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@, platform-diffs@lists, security-diffs@lists

Differential Revision: https://phabricator.fb.com/D507975

Task ID: 1137468""",0.7,None,added

3022,Michael Marucheck,mmarucheck@fb.com,"""Implement Session

Summary:
Initial implementation of Session in Facebook SDK for Android.
This includes:
- SSO login
- Dialog login
- JustLoginSample
- Unit tests for AccessToken

Test Plan:
- Run unit tests
- Run JustLoginSample without FB4A
- Run JustLoginSample with FB4A

Revert Plan:
OK

Reviewers: clang, jacl

Reviewed By: clang

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D501918

Task ID: 1138263""",0.7,None,changed

3023,Chris Lang,clang@fb.com,"""[android-sdk] Adds basic single-request logic to Request/Response classes.

Summary:
This commit changes our HTTP stack from the Apache HttpClient stack to the HttpURLConnection stack, which
the Android development team has suggested is the stack to use going forward. Basic functionality for single (i.e.,
non-batched) requests is functional, with many caveats. There is no (de-)serialization of GraphObjects as of yet, so most
requests to Graph API will not result in a Response that is useful for anything (though the debugger can be used to
verify that JSONObjects in the right shape are being created). There is no support for requests that return JSONArrays
rather than JSONObjects. There are a million ""TODO port:"" comments indicating where functional parity with iOS is still
lacking.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D501547""",0.7,None,changed

3024,Chris Lang,clang@fb.com,"""[android-sdk] Fix up test app package name in order to add INTERNET permission to tests.

Summary:
We need to add the INTERNET permission so unit tests can access the Internet. The package name for the test app
needs to match what the unit tests are configured to look for.

Test Plan:
- Can run unit tests that hit the Internet

Revert Plan:

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: msdkexp@

Differential Revision: https://phabricator.fb.com/D501302""",0.7,None,fixed

3025,Chris Lang,clang@fb.com,"""[android-sdk] Rudimentary functionality on Request.

Summary:
This commit adds some functionality around creating Requests, setting properties, and beginning to handle
serialization of requests (or batches of requests) into HTTP requests. It stops short of creating actual HTTP stack
objects, as mmarucheck and I uncovered information that may lead us to change our choice of HTTP stack.
Want to get this committed, even though it is still very rudimentary, in order to isolate it from changes
that are likely coming next related to the HTTP stack change.

Test Plan:
- Ran unit tests

Revert Plan:

Reviewers: mmarucheck, jacl, gregschechte, ayden

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D500176""",0.7,None,changed

3026,Chris Lang,clang@fb.com,"""[android-sdk] Fix directory structure so JUnit tests run in Eclipse IDE.

Summary:
Running the unit tests in Eclipse IDE works if you add the facebook/tests project as a separate Android project in your
workspace. However, it requires that the directory structure the unit tests live in matches their Java namespace
of com.facebook.sdk.tests.

Test Plan:
- Ran unit tests via Ant
- Ran unit tests in IDE

Revert Plan:

Reviewers: mmarucheck, jacl

Reviewed By: mmarucheck

Differential Revision: https://phabricator.fb.com/D499107""",0.7,None,fixed

3027,Michael Marucheck,mmarucheck@fb.com,"""Disable password saving in FbDialog

Summary:
By default, Android WebViews store passwords in a per-application
sqlite database.  This changes the default for the Facebook SDK.

Test Plan:
- Build from command-line.
- Uninstall Facebook app, run Hackbook, log in, adb shell, inspect
  webview database to verify no password was saved.

Revert Plan: OK

Reviewers: clang, jacl, vijaye

Reviewed By: vijaye

Differential Revision: https://phabricator.fb.com/D497389

Task ID: 1108189""",0.7,None,security

3028,Michael Marucheck,mmarucheck@fb.com,"""Adds a trivial unit test to Android SDK

Summary:
Initial step to get unit tests going before we implement
stuff so we can verify as we go.

Test Plan:
- cd facebook/tests
- ant all clean debug install run-tests

Revert Plan:
safe to revert

Reviewers: clang, jacl, joeb

Reviewed By: jacl

Differential Revision: https://phabricator.fb.com/D495804""",0.7,None,changed

3029,Steven Kim,stevenkim@skim-mbp15.local,"""adding an empty string to bundle if no parameter value is given

Summary:
query strings like this ""a=b&c"" did not get parsed correctly.  the c would get dropped as
a parameter.  we will now add it to the bundle with an empty string as it's value

Test Plan:
build
Upload an image in hackbook?

any pointers?

Reviewers: mmarucheck

Reviewed By: mmarucheck

CC: zli

Differential Revision: https://phabricator.fb.com/D488937

Task ID: 686555""",0.7,None,added

3030,Michael Marucheck,mmarucheck@fb.com,"""Initial Android SDK API skeleton

Summary:
This proposes an API skeleton for the Android SDK with similar capabilities
to the iOS SDK.

Caveats:
- This does not include test session support.
- The controls do not expose sub-controls yet.
- ISSUE markers scattered throughout.

Test Plan: Build at command-line and in Eclipse.

Reviewers: clang, jacl, joeb

CC: gregschechte, platform-diffs@lists

Differential Revision: https://phabricator.fb.com/D480561

Revert Plan: Safe to revert.

Task ID: 1073053""",0.7,None,changed

3031,Michael Marucheck,mmarucheck@fb.com,"""Merge small pull requests

Summary:
To give credit for changes, I am listing author/pull request here
for changes incorporated in this checkin.

I am submitting these changes directly to master to preserve a
linear history, to allow for minor edits, and to credit multiple
people when more than one change was merged to fix a single issue.

=== Summary by submitter of pull requests in this commit ===
andypalmer:
- 160: ClassCastExceptions in Util.java
grant land:
- 216: Fix ArrayOutOfBoundsException when clicking ""Don't Allow"" in FbDialog one
iamnoah:
- 117: Fixed a NPE
lvillani:
- 261: Add support for Android build system.
nikreiman:
- 218: Fix exception when trying to decode invalid string
plowman:
- 246: Fix for Issue #160: ClassCastExceptions filling up the logs.

To investigate pull request 260, I enabled orientation changes in Hackbook.
This did not demonstrate the issue, but doesn't hurt anything and makes it
easier to test on the x86 emulator.

I also fixed some build issues in Hackbook around SDK version required and
the path to the SDK.

Test Plan:
Full clean builds of facebook and Hackbook.
Verify creating Eclipse project per public docs still works.
Upload photo in Android Hackbook.

Reviewers: caabernathy, jacl, vijaye, yariv

Reviewed By: jacl

CC: ekoneil, gregschechte

Differential Revision: https://phabricator.fb.com/D451434

Revert Plan: Safe to revert

Task ID: 1028564""",0.2,None,changed

3032,Michael Marucheck,mmarucheck@fb.com,"""Fixed null pointer issue.

Summary:
We need to call unbindService on a Context.  In some cases, mAuthActivity
is null.  Since applicationsContext is passed in to the constructor
and never modified, it should not be null.  So we call unbindService
on applicationsContext instead.

Test Plan: Try SSO with pre-1.8 FB app.

Reviewers: vijaye, jacl, caabernathy

Reviewed By: vijaye

CC: selekman, constantin, lshepard

Differential Revision: https://phabricator.fb.com/D432892

Revert Plan: Safe to revert

Task ID: 982981""",0.7,None,fixed

3033,Vijaye Raji,vijaye@fb.com,"""Disable logging by default

Summary:
Logging was turned on unconditionally before, which led to apps leaking
sensitive data.  This change puts the logging api behind an explicit gate that
developers have to turn on.

It's unfortunate that this isn't automatic - ideally this would automatically
turn on for non-release signed bits.  I couldn't find such a check in Android
framework.  If android experts have better ways of tackling this, i'm all ears.
But bear in mind this is a security fix and needs to go out asap.

Test Plan: Launched in default mode and verified no logging in emulator.
Turned on log gate and verified logging.

Reviewers: mmarucheck, lshepard, yariv, raghuc1

Reviewed By: mmarucheck

CC: gregschechte, jacl

Differential Revision: https://phabricator.fb.com/D411377

Task ID: 933141""",0.7,None,changed

3034,Vijaye Raji,vijaye@fb.com,"""Fixing Token refresh issue in SDK

Summary:
The TokenRefresh intent is exposed as a service, but we were validating it as
an activity.  Fixign that and refactoring code. This code should have never
worked.

Note that without the FB app the refresh token feature will not work.  If that
is necessary, it's not part of this diff.

Test Plan: Verify that hackbook can login & refresh token on the emulator.

Reviewers: mmarucheck, yariv, ttung, raghuc1, trvish, pfung

Reviewed By: mmarucheck

CC: gregschechte, jacl, lshepard

Differential Revision: https://phabricator.fb.com/D410960

Task ID: 926377""",0.7,None,added

3035,Yariv Sadan,yariv@fb.com,"""Merge remote-tracking branch 'origin/expiringAccessTokens'""",0.7,None,changed

3036,Kamil Kraszewski,kamil@mutalisk-3.local,"""Added the refresh token method.

Summary: This allows developers to silently refresh their access token by
calling Facebook.refreshToken method. This SDK will try to call our Facebook
Android App which will handle the API call.

Test Plan:
This requires adding a refresh token service to our sdk. See D364973.
After that try using the new Hackbook example.

Reviewers: jimbru, raghuc1, brent, dalves, ttung, yariv

Reviewed By: jimbru

CC: dalves, jimbru

Differential Revision: https://phabricator.fb.com/D366540

Task ID: 799996""",0.7,None,added

3037,dpurdy,douglasp@douglasp.com,"""Update README.md""",1,None,changed

3038,dpurdy,douglasp@douglasp.com,"""Update README.md""",1,None,changed

3039,Kamil Kraszewski,kamil@mutalisk-3.local,"""Fixed setAccessExpiresIn method.

Summary:
There are two types of access tokens:
 - ones that doesn't expire (expiresIn == 0)
 - ones that have some expiration period( (expiresIn > 0)
When we receive a new token from FB server for both them we call the
setAccessExpiresIn method.
Because of that:
1. We shouldn't ignore the ""0"" value
2. We should also expect tokens that have long expiration period.
For example 60 days is 2592000000000 miliseconds which is too much for an
integer variable to handle :)

Test Plan: Tried Login In / Logout for both types of tokens.

Reviewers: jimbru, yariv

Reviewed By: jimbru

CC: kamil, jimbru

Differential Revision: 370353""",0.7,None,fixed

3040,Kamil Kraszewski,kamil@mutalisk-3.local,"""Refactoring of Android's Hackbook example

Summary:
Cleaning of the Hackbook code. Main reason of this commit is mixing tabs and
white spaces inside the code, which makes the code ugly (for example browsing
the code inside github).

In addition I also refactored few other things:
 - I tried to wrap the lines to 100 characters per line (80 per comments) - at
least in those places where it made sense
 - Remove trailing whitespaces and unnecessary blank lines
 - Add missing @Override adnnotations
 - Fixed syntax in some places (like ""for(i=0;..."" -> ""for (i = 0;..."")
 - Added missing 'static' keywords

Test Plan:
Run the app and see if everything works :-)

Reviewers: jimbru, raghuc1, vksgupta, dalves

Reviewed By: dalves

CC: platform-diffs@lists, nbushak, dalves

Differential Revision: 370079""",0.7,None,added

3041,Ray He,rhe@fb.com,"""[android][oauth2] add more descriptive description to invalid_key errors

Summary:
This is the android sdk side of D340841.

The hope is that developers will be able to take the key they passed
in and past it into their application, thus skipping the necessity of
having keytool and openssl. It also reduces frustration.

Test Plan:
This requires a change to our sdk :-/, which currently dosn't show error
descriptions. Anyone
know how I can push a change to the git repo?

We start with non-useful error message. After applying this and the sdk change,
we get the
message
https://our.intern.facebook.com/intern/pixelcloud/image.php?id=31789

after pasting in our key from the message, sso succeeds
https://our.intern.facebook.com/intern/pixelcloud/image.php?id=31787

Reviewers: yariv, jimbru, ahimel, brent, lshepard

Reviewed By: jimbru

CC: platform-diffs@lists, ptarjan, naitik, rhe, jimbru, yariv, lshepard

Differential Revision: 341355

Revert Plan: ok

Platform Impact (PUBLIC):
Android SSO invalid_key failures will now contain the key that
developers attempted to use.  If this key were to be copied directly
into the application settings, SSO will work properly for this
application. This makes it so that developers never have to mess
around with keytool/openssl. They can just attempt a request with a
dummy string, then use the error string returned by our endpoint.""",0.7,None,added

3042,Vikas Gupta,vg@fb.com,"""Merge branch 'master' of github.com:facebook/facebook-android-sdk""",0.2,None,changed

3043,Vikas Gupta,vg@fb.com,"""Hackbook for Android Sample app.

Summary: The sample app includes SSO, feed and apprequests dialogs, get friends
via graph or fql, post on friend's wall, get nearby places and check-in to a
place, upload photo from local media gallery or remote server and Graph API
Explorer

Test Plan: The sample app can be downloaded from:
https://developers.facebook.com/attachment/Hackbook.zip. Try it out and lmk if
code can be optimized or other changes.

Reviewers: lshepard, mattwkelly, dkim, dlim, caabernathy, omids

Reviewed By: dkim

CC: platform-diffs@lists, nbushak, vksgupta, ccwu, erling, dlim, dkim

Differential Revision: 325685""",0.7,None,changed

3044,Vikas Gupta,vg@fb.com,"""Remove the title for dialogs and add the 'x' on the top left corner

Summary: For the oauth, feed, request dialogs, removed the title bar and added
the 'x' button on the top left corner which when pressed dismisses the dialog.

Test Plan: Launched Hackbook and click on Login or requests, feed dialogs and
confirm that there is no title bar and the cross button is rightly displayed and
dismisses the dialog.

Reviewers: lshepard, yariv, jimbru, dkim, ttung, omids, raghuc1

Reviewed By: ttung

CC: caabernathy, brent, vksgupta, mattwkelly, lshepard, ttung

Differential Revision: 333017

Task ID: 700698""",0.7,None,added

3045,Jim Brusstar,jimbru@fb.com,"""Fix dialog sizing on devices with small (QVGA) screens.

This fixes dialog sizing on devices with small screens. In particular,
the bottom buttons will now be visible and no longer hang off the screen.""",0.7,None,fixed

3046,dpurdy,douglasp@douglasp.com,"""Updating to point to the developers.facebook.com and bugzilla.""",0.7,None,changed

3047,Jim Brusstar,jimbru@facebook.com,"""Add support for a 'state' parameter on async requests.

This change allows developers to attach an arbitrary object to an asynchronous
Facebook request that will be returned in the request's callback, which
should make it easier to distinguish the returns from concurrent requests.""",0.7,None,added

3048,Jim Brusstar,jimbru@facebook.com,"""Updating Facebook for Android apk to v1.5.0.""",0.7,None,changed

3049,Jim Brusstar,jim.brusstar@gmail.com,"""Clarifying the ""invalid_key"" debugging info.""",0.7,None,changed

3050,Jim Brusstar,jimbru@facebook.com,"""Fixing errors in tests/""",0.7,None,changed

3051,Jim Brusstar,jimbru@facebook.com,"""Fixing whitespace/formatting issues in src/.""",0.7,None,changed

3052,Jim Brusstar,jimbru@facebook.com,"""Updates to README for platform dialogs.""",0.7,None,changed

3053,Jim Brusstar,jimbru@facebook.com,"""Add app_id to dialog requests.

Updated the dialog() method to always include app_id. This will prevent
an error if a dialog is requested and the application doesn't have an
access token.""",0.7,None,added

3054,Jim Brusstar,jimbru@facebook.com,"""Platform Dialogs Support (UIServer Pretty URLs)""",0.7,None,changed

3055,Brent Goldman,brent@facebook.com,"""adding an anchor for dialogs""",0.7,None,changed

3056,Alex Pretzlav,pretz@yelp.com,"""rename drawable-mdpi to drawable for Android 1.5 compatibility""",0.7,None,changed

3057,Luke Shepard,lshepard@facebook.com,"""Adding the apk for Facebook Android 1.4.0.

This is useful for testing single sign-on in the emulator. To install, run:

  adb install Facebook.apk""",0.7,None,changed

3058,Luke Shepard,lshepard@facebook.com,"""Add support for single sign-on to Android SDK

Summary: This change adds support for ""single sign-on"" to the Android SDK as announced here: http://developers.facebook.com/blog/post/423

This change is mostly transparent and should require only a few updates to your code. You'll need to modify your code as follows:

* Move your applicationId from the authorize method to the constructor for the Facebook class
* Insert a call to the authorizeCallback() method at the top of your Activity's onActivityResult() function.
* Register your Android key hash in the Facebook developer application.

Note that stream dialogs do not yet work with single sign on, but we will add support soon.

For more details, check the README file. If you have issues or bugs, please report them to: https://github.com/facebook/facebook-android-sdk/issues

[ Note: this is a squashed commit with contributions from Yariv Sadan, Jim Brusstar, Arun Vijayvergiya, Brent Goldman, and Luke Shepard]""",0.7,None,added

3059,Yujuan Bao,yujuan@facebook.com,"""Android SDK : Add sdk=android param to dialog and request call
test plan
Run Android SDK example, at the same time check the android log. make sure when calling authorize, UIServer stream publish dialog, api call, the log show the url and make sure it contain sdk=android parameter.""",1,None,added

3060,Yujuan Bao,yujuan@facebook.com,"""Add photo upload functionality to Android sdk""",1,None,added

3061,Steven Soneff,steven@soneff.com,"""Add functional test suite to SDK""",1,None,added

3062,Steven Soneff,steven@soneff.com,"""Fix touch redirect issue""",1,None,fixed

3063,Steven Soneff,steven@soneff.com,"""Revisions to support server-side changes""",1,None,changed

3064,Luke Shepard,lshepard@facebook.com,"""Removing the ""alpha"" label.""",0.7,None,changed

3065,Steven Soneff,steven@soneff.com,"""Update app configuration to support any screen pixel density.""",1,None,changed

3066,Steven Soneff,steven@soneff.com,"""Merge branch 'master' of git://github.com/Pretz/facebook-android-sdk""",0.2,None,changed

3067,Steven Soneff,steven@soneff.com,"""Fix null pointer exception for malformed feed comments""",1,None,fixed

3068,Steven Soneff,steven@soneff.com,"""Add icons for multiple screen resolutions, as per feedback from xav@google.com""",0.7,None,added

3069,Alex Pretzlav,pretz@yelp.com,"""Fix FbDialog to work resolution-independently for apps that explicitly support multiple screen sizes""",0.7,None,fixed

3070,Steven Soneff,steven@soneff.com,"""Generate error message if library caller does not have Internet permission""",1,None,changed

3071,Steven Soneff,steven@soneff.com,"""README clarifications""",1,None,changed

3072,Steven Soneff,steven@soneff.com,"""Ensure that cookies set by the login dialog are saved""",1,None,changed

3073,Steven Soneff,steven@soneff.com,"""Clarify git clone instructions in the README""",0.7,None,changed

3074,Steven Soneff,steven@soneff.com,"""Update known issues in the README""",0.7,None,changed

3075,Steven Soneff,steven@soneff.com,"""Update README with read-only git URL""",0.7,None,changed

3076,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""Update README with configuration changes and latest information""",1,None,changed

3077,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""Revamp Android SDK project configuration""",0.7,None,changed

3078,Steven Soneff,steven@soneff.com,"""Append FacebookAndroidSDK to request User-Agent string""",0.7,None,changed

3079,Steven Soneff,steven@soneff.com,"""Remove App ID from examples, add alert for developers, and tweak dialog title""",1,None,added

3080,Steven Soneff,steven@soneff.com,"""Update Button Images""",0.7,None,changed

3081,Steven Soneff,steven@soneff.com,"""Update known bugs in README""",1,None,changed

3082,Steven Soneff,steven@soneff.com,"""tweak to example, minor refactoring""",1,None,changed

3083,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Minor README update""",0.7,None,changed

3084,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Better Facebook Error Handling""",0.7,None,changed

3085,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update Sample App ID""",0.7,None,changed

3086,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update Utilities documentation""",0.7,None,changed

3087,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updates to README""",0.7,None,changed

3088,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Add fb icon to dialog title bar""",1,None,added

3089,Steven Soneff,ssoneff@ssoneff-MBP.local,"""update .gitignore""",0.7,None,changed

3090,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update known bugs in README""",1,None,changed

3091,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Fix URL loading for non-display=touch URLs""",1,None,fixed

3092,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Add title bar to dialogs, handle orientation change""",1,None,added

3093,Steven Soneff,ssoneff@ssoneff-MBP.local,"""tweaking the example app manifests""",1,None,changed

3094,Steven Soneff,ssoneff@ssoneff-MBP.local,"""use method override on http deletes, update example example app""",1,None,changed

3095,Steven Soneff,ssoneff@ssoneff-MBP.local,"""revamped error handling""",1,None,changed

3096,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update to authentication method cocumentation""",1,None,changed

3097,Steven Soneff,ssoneff@ssoneff-MBP.local,"""fix bug dismissing dialog under under condition, update a javadoc for logout with return value""",1,None,fixed

3098,Steven Soneff,ssoneff@ssoneff-MBP.local,"""minor tweaks: correct typo, remove progress bar title (looks nicer without)""",1,None,changed

3099,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Renamign AsynchFacebook to AsyncFacebookRunner as per Yariv, Brent, updated comments""",0.7,None,changed

3100,Steven Soneff,ssoneff@ssoneff-MBP.local,"""tweaked example from previous commit""",1,None,changed

3101,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Add check for method= when accessing old API""",1,None,added

3102,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updates to configuration, README, cancel handling""",0.7,None,changed

3103,Luke Shepard,lshepard@facebook.com,"""Remove feed publishing until server-side changes are pushed.""",1,None,changed

3104,Luke Shepard,lshepard@facebook.com,"""Known issues section.""",1,None,changed

3105,Yariv Sadan,yariv@yariv2.local,"""a couple of small tweaks to the stream example""",0.7,None,changed

3106,Yariv Sadan,yariv@yariv2.local,"""a few refactorings and example app fixes""",1,None,changed

3107,Yariv Sadan,yariv@yariv2.local,"""fix a couple of classpath issues""",1,None,fixed

3108,Luke Shepard,lshepard@facebook.com,"""Formatting tweak.""",0.7,None,changed

3109,Luke Shepard,lshepard@facebook.com,"""Language tweak.""",0.7,None,changed

3110,Luke Shepard,lshepard@facebook.com,"""Formatting tweaks.""",0.7,None,changed

3111,Luke Shepard,lshepard@facebook.com,"""Formatting tweaks.""",0.7,None,changed

3112,Luke Shepard,lshepard@facebook.com,"""First draft of README file.""",0.7,None,changed

3113,Steven Soneff,ssoneff@ssoneff-MBP.local,"""extracted async request behaviour from core facebook object and put it in extension""",1,None,changed

3114,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Renamed callback to OnComplete, fixed minor bug in example wall post""",1,None,fixed

3115,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Renamed ExampleButton to LoginButton in simple example""",0.7,None,changed

3116,Steven Soneff,ssoneff@ssoneff-MBP.local,"""some refactoring based on Luke's feedback""",0.7,None,changed

3117,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Add file missing from last commit""",1,None,added

3118,Yariv Sadan,yariv@mobile-166-187-107-245.mycingular.net,"""code review fixes""",1,None,changed

3119,Steven Soneff,ssoneff@ssoneff-MBP.local,"""refactoring example""",1,None,changed

3120,Yariv Sadan,yariv@yariv2.local,"""a few fixes for the example code""",0.7,None,changed

3121,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updates to file names""",1,None,changed

3122,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Rename Example files""",0.7,None,changed

3123,Steven Soneff,ssoneff@ssoneff-MBP.local,"""minor edits based on Yariv and Brent's feedback""",0.7,None,changed

3124,Yariv Sadan,yariv@yariv2.local,"""fix profile urls""",1,None,fixed

3125,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""New Callback interfaces, threading""",0.7,None,added

3126,Yariv Sadan,yariv@yariv2.local,"""fix profile urls (sort of)""",0.7,None,fixed

3127,Yariv Sadan,yariv@yariv2.local,"""more inline docs""",1,None,changed

3128,Yariv Sadan,yariv@yariv2.local,"""a bunch of cleanups, renamings, and comments""",0.7,None,changed

3129,Yariv Sadan,yariv@mobile-166-129-085-120.mycingular.net,"""created the classpath variable ANDROID_LIB to avoid hardcoding local paths""",1,None,changed

3130,Steven Soneff,ssoneff@ssoneff-MBP.local,"""add comment explaining CookieSyncManager""",1,None,added

3131,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Got UI Server working, added to example app""",0.7,None,added

3132,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update Listener and Session Interfaces""",0.7,None,changed

3133,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Removing stream/bin files""",1,None,changed

3134,Yariv Sadan,yariv@yariv2.local,"""got status updating to work, plus a bunch of refactorings and cleanups""",0.7,None,changed

3135,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updating .gitignore""",0.7,None,changed

3136,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""adding Javadocs to the main Facebook object""",0.7,None,changed

3137,Yariv Sadan,yariv@yariv2.local,"""add copyright notices""",1,None,added

3138,Yariv Sadan,yariv@yariv2.local,"""facedroid name cleanups""",1,None,changed

3139,Yariv Sadan,yariv@yariv2.local,"""moved the examples to examples/ and renamed facedroid to stream""",0.7,None,changed

3140,Yariv Sadan,yariv@yariv2.local,"""got commenting working""",0.7,None,changed

3141,Yariv Sadan,yariv@yariv2.local,"""fix liking""",1,None,fixed

3142,Yariv Sadan,yariv@yariv2.local,"""better support for liking/unliking and preliminary logic for commenting""",1,None,changed

3143,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""Adding Apache License header to files""",0.7,None,changed

3144,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Tidying out Eclipse config in repo""",0.7,None,changed

3145,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Update logout logic""",1,None,changed

3146,Steven Soneff,ssoneff@ssoneff-MBP.local,"""merge""",0.2,None,changed

3147,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Example Login / Logout App""",0.7,None,changed

3148,Yariv Sadan,yariv@yariv2.local,"""attachment rendering fix""",1,None,fixed

3149,Yariv Sadan,yariv@yariv2.local,"""small bug fix""",1,None,fixed

3150,Yariv Sadan,yariv@yariv2.local,"""adding missing files""",1,None,changed

3151,Yariv Sadan,yariv@yariv2.local,"""add support for liking/unliking""",1,None,added

3152,Yariv Sadan,yariv@yariv2.local,"""added the ability to log out and refactored much of the internal controller dispatching logic""",1,None,added

3153,Yariv Sadan,yariv@yariv2.local,"""render attachments""",1,None,changed

3154,Yariv Sadan,yariv@yariv2.local,"""refactoring of the stream caching and rendering code""",1,None,changed

3155,Yariv Sadan,yariv@yariv2.local,"""adding the like icon image""",1,None,changed

3156,Yariv Sadan,yariv@mobile-166-187-101-054.mycingular.net,"""many improvements to the stream rendering logic""",1,None,changed

3157,Yariv Sadan,yariv@yariv2.local,"""first commit of the FaceDroid prototype""",0.7,None,changed

3158,Steven Soneff,ssoneff@ssoneff-MBP.local,"""store session utilities""",1,None,changed

3159,Steven Soneff,ssoneff@ssoneff-MBP.local,"""keep it simple -- pare down SDK, remove feature creep and complicatedness""",1,None,added

3160,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updates with Brent's feedback on last change""",0.7,None,changed

3161,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Caching of requested permission""",1,None,changed

3162,Steven Soneff,ssoneff@ssoneff-MBP.local,"""minor revisions based on Yariv's latest feedback""",1,None,changed

3163,Steven Soneff,ssoneff@ssoneff-MBP.local,"""removing logout listeners""",1,None,changed

3164,Steven Soneff,ssoneff@ssoneff-MBP.local,"""removing logout listeners""",1,None,changed

3165,Steven Soneff,ssoneff@devrs103.snc1.facebook.com,"""Updates to session variables""",1,None,changed

3166,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Updates per Yariv and Naitik's feeback""",0.7,None,changed

3167,Steven Soneff,ssoneff@ssoneff-MBP.local,"""Basic sample SDK app""",1,None,changed

3168,Steven Soneff,ssoneff@ssoneff-MBP.local,"""message""",0.7,None,changed

3169,Steven Soneff,ssoneff@ssoneff-MBP.local,"""First Draft - no tabs""",0.7,None,changed

3170,Steven Soneff,ssoneff@ssoneff-MBP.local,"""First Draft""",1,None,changed

3171,Luke Shepard,lshepard@lshepard-mbp.local,"""first commit""",1,None,changed
